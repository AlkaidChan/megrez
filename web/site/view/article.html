<!DOCTYPE html>
<html>

<head>
    {% include "head.html" %}
    <meta name="keywords" content="阿里云,Alibaba Cloud" />
    <meta name="description" content="购买地址：腾讯云：https://cloud.tencent.com阿里云：https://www.aliyun.com简介云服务器(Elastic Compute Service, ECS)是..." />
    <title>{{ article.Title }} - {{ global.BlogTitle }}</title>
</head>
{% include "header.html" %}

<body class="" gtools_scp_screen_capture_injected="true">
    <div class="post-header-thumb  bg-yellow" style="background-image:url({{ article.Thumb }});">
        <div class="post-header-thumb-op" style="background-image:url({{ article.Thumb }});"></div>
        <div class="post-header-thumb-cover">
            <div class="post-header-thumb-container">
                <div class="post-header-thumb-title">
                    {{ article.Title }} </div>
                <div class="post-header-thumb-meta">
                    <time datetime="2020-11-22T23:00:00+08:00" itemprop="datePublished"><i class="fa fa-clock-o"
                            aria-hidden="true"> </i> 2020-11-22</time>&nbsp;&nbsp; <i class="fa fa-tags"
                        aria-hidden="true"></i> <a href="/category/{{ article.Category.Slug }}/">{{ article.Category.Name }}</a>&nbsp;&nbsp; <i class="fa fa-comments-o" aria-hidden="true"></i> <a
                        href="#comments"> {{ article.CommentsNum }} 评论</a>&nbsp;&nbsp; <i class="fa fa-eye"
                        aria-hidden="true"></i> {{ article.Visits }} 浏览
                </div>
                <div class="post-tags">
                    {% for tag in article.Tags %}
                    <a href="https://rawchen.com/tag/{{ tag.Slug }}/">{{ tag.Name }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <article class="main-content post-page" itemscope itemtype="http://schema.org/Article">
        <div class="post-header">
            <h1 class="post-title" itemprop="name headline">
                {{ article.Title }} </h1>
            <div class="post-data">
                <time datetime="2020-11-22T23:00:00+08:00" itemprop="datePublished"><i class="fa fa-clock-o"
                        aria-hidden="true"> </i> 2020-11-22</time>&nbsp;&nbsp; <i class="fa fa-tags"
                    aria-hidden="true"></i> <a href="https://rawchen.com/category/{{ article.Category.Slug }}/">{{ article.Category.Name }}</a>&nbsp;&nbsp; <i class="fa fa-comments-o" aria-hidden="true"></i> <a
                    href="#comments"> 6 评论</a>&nbsp;&nbsp; <i class="fa fa-eye" aria-hidden="true"></i> {{ article.Visits }} 浏览
            </div>
        </div>
        <div id="post-content" class="post-content" itemprop="articleBody">
            {% comment %} TODO: 这个 tag 和分割线应该分出来 {% endcomment %}
            <p class="post-tags">
                {% for tag in article.Tags %}
                <a href="https://rawchen.com/tag/{{ tag.Slug }}/">{{ tag.Name }}</a>
                {% endfor %}
            </p>
            {{ article.FormatContent|safe }}
        </div>
        <p class="post-info">
        <div style="text-align: center;">
            本文最后编辑时间为：2021-11-08 17:50<br>如果你觉得我的文章不错，不妨鼓励我继续写作。
        </div>
        <div id="rewardButton"
            style="padding: 10px 0; margin: 20px auto; width: 100%; font-size:16px; text-align: center;">
            <div id="reward-qr-code" style="padding: 50px;background-color: #393D49; color: #fff;display: none;"><img
                    style="width: 100%;" src="https://rawchen.com/qrcode.jpg"></img></div>
            <button type="button"
                onclick="layer.open({type: 1,title: false,closeBtn: false,area: '300px;',shade: 0.3,id: 'LAY_layuipro',btnAlign: 'c',shadeClose: true,moveType: 0,content: $('#reward-qr-code'),end:function(){$('#reward-qr-code').css('display','none')}});">支持
            </button>
        </div>
        </p>


        <div class="post-next-prev">
            <div class="padd">
                <!-- 上一篇 -->
                {% if article.Pre %}
                <div class="next-prev">
                    <a href="/article/{{ article.Pre.ID }}" title="{{ article.Pre.Title }}">
                        <div class="card">
                            <div class="card-img">
                                <img src="{{ article.Pre.Thumb }}" alt="{{ article.Pre.Title }}">
                                <div class="overlay"></div>
                            </div>
                            <div class="card-body">
                                <h2 class="card-title">{{ article.Pre.Title }}</h2>
                                <div class="card-footer">

                                    <i class="fa fa-angle-left"></i><span>上一篇</span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                {% endif %}
                <!-- 下一篇 -->
                {% if article.Next %}
                <div class="next-prev">
                    <a href="/article/{{ article.Next.ID }}" title="{{ article.Next.Title }}">
                        <div class="card">
                            <div class="card-img">
                                <img src="{{ article.Next.Thumb }}" alt="{{ article.Next.Title }}">
                                <div class="overlay"></div>
                            </div>
                            <div class="card-body">
                                <h2 class="card-title">{{ article.Next.Title }}</h2>
                                <div class="card-footer">
                                    <span>下一篇</span>
                                    <i class="fa fa-angle-right"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </article>

    <div class="comment-container">
        <div id="comments" class="clearfix">
            <div id="respond-post-{{ article.ID }}" class="zdypl"><span class="response" data-no-instant>发表评论 <a
                        id="cancel-comment-reply-link" href="/article/{{ article.ID }}#respond-post-{{ article.ID }}"
                        rel="nofollow" style="display:none" onclick="return TypechoComment.cancelReply();">
                        取消评论</a></span>
                <form method="post" action="/article/{{ article.ID }}/comment" id="comment-form" class="comment-form"
                    role="form" onsubmit="getElementById('misubmit').disabled=true;return true;">
                    <div> <input type="text" name="author" maxlength="12" id="author"
                            class="form-control input-control clearfix" placeholder="昵称 (必填哦)" value="" required>
                        <input type="email" name="mail" id="mail" class="form-control input-control clearfix"
                            placeholder="邮箱 (必填哦)" value="" required>
                        <input type="url" name="url" id="url" class="form-control input-control clearfix"
                            placeholder="博客地址 (https://)" value="">
                    </div>

                    <textarea name="text" id="textarea" class="form-control" placeholder="来都来了，看都看了，想说点什么吗 0_o"
                        required></textarea>
                    <button type="submit" class="submit" id="misubmit">提交</button>
                </form>
            </div>

            {% include "comment.html" with comments=article.Comments %}

            <div class="lists-navigator clearfix">
                <ol class="page-navigator">
                    {% if article.Page.Pre != 0 %}
                    <li class="prev"><a href="/article/{{ article.ID }}/comment-page/{{ article.Page.Pre }}#comments"><</a></li>
                    {% endif %}
                    {% if article.Page.First != 0 %}
                    <li><a href="/article/{{ article.ID }}/comment-page/{{ article.Page.First }}#comments">{{ article.Page.First }}</a></li>
                    <li><span>-</span></li>
                    {% endif %}
                    {% for i in article.Page.Range %}
                    {% if i == article.Page.Current %}
                    <li class="current"><a href="/article/{{ article.ID }}/comment-page/{{ i }}#comments">{{ i }}</a>
                    </li>
                    {% else %}
                    <li><a href="/article/{{ article.ID }}/comment-page/{{ i }}#comments">{{ i }}</a></li>
                    {% endif %}
                    {% endfor %}
                    {% if article.Page.Last != 0 %}
                    <li><span>-</span></li>
                    <li><a href="/article/{{ article.ID }}/comment-page/{{ article.Page.Last }}#comments">{{ article.Page.Last }}</a></li>
                    {% endif %}
                    {% if article.Page.Next != 0 %}
                    <li class="next"><a
                            href="/article/{{ article.ID }}/comment-page/{{ article.Page.Next }}#comments">></a></li>
                    {% endif %}
                </ol>
            </div>

        </div>
    </div>
    {% include "footer.html" %}

    <div id="directory-content" class="directory-content">
        <div id="directory"></div>
    </div>
    {% include "base.html" %}
    <script>
        var postDirectory = new Headroom(document.getElementById("directory-content"), {
            tolerance: 0,
            offset: 280, classes: {
                initial: "initial",
                pinned: "pinned",
                unpinned: "unpinned"
            }
        });
        postDirectory.init();
        var header = new Headroom(document.getElementById("header"), {
            tolerance: 0,
            offset: 70,
            classes: {
                initial: "animated",
                pinned: "slideDown",
                unpinned: "slideUp"
            }
        });
        header.init();

        //修正onclick
        var navbarSwith = document.getElementById("navbar-mobile-swith");
        navbarSwith.onclick = function () {
            navbarSwith.classList.toggle("navbar-mobile-menu-on");
        };

    </script>
    <script>
        var postDirectoryBuild = function () {
            var postChildren = function children(childNodes, reg) {
                var result = [],
                    isReg = typeof reg === 'object',
                    isStr = typeof reg === 'string',
                    node, i, len;
                for (i = 0, len = childNodes.length; i < len; i++) {
                    node = childNodes[i];
                    if ((node.nodeType === 1 || node.nodeType === 9) &&
                        (!reg ||
                            isReg && reg.test(node.tagName.toLowerCase()) ||
                            isStr && node.tagName.toLowerCase() === reg)) {
                        result.push(node);
                    }
                }
                return result;
            },
                createPostDirectory = function (article, directory, isDirNum) {
                    var contentArr = [],
                        titleId = [],
                        levelArr, root, level,
                        currentList, list, li, link, i, len;
                    levelArr = (function (article, contentArr, titleId) {
                        var titleElem = postChildren(article.childNodes, /^h\d$/),
                            levelArr = [],
                            lastNum = 1,
                            lastRevNum = 1,
                            count = 0,
                            guid = 1,
                            id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                            lastRevNum, num, elem;
                        while (titleElem.length) {
                            elem = titleElem.shift();
                            contentArr.push(elem.innerHTML);
                            num = +elem.tagName.match(/\d/)[0];
                            if (num > lastNum) {
                                levelArr.push(1);
                                lastRevNum += 1;
                            } else if (num === lastRevNum ||
                                num > lastRevNum && num <= lastNum) {
                                levelArr.push(0);
                                lastRevNum = lastRevNum;
                            } else if (num < lastRevNum) {
                                levelArr.push(num - lastRevNum);
                                lastRevNum = num;
                            }
                            count += levelArr[levelArr.length - 1];
                            lastNum = num;
                            elem.id = elem.id || (id + guid++);
                            titleId.push(elem.id);
                        }
                        if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;

                        return levelArr;
                    })(article, contentArr, titleId);
                    currentList = root = document.createElement('ul');
                    dirNum = [0];
                    for (i = 0, len = levelArr.length; i < len; i++) {
                        level = levelArr[i];
                        if (level === 1) {
                            list = document.createElement('ul');
                            if (!currentList.lastElementChild) {
                                currentList.appendChild(document.createElement('li'));
                            }
                            currentList.lastElementChild.appendChild(list);
                            currentList = list;
                            dirNum.push(0);
                        } else if (level < 0) {
                            level *= 2;
                            while (level++) {
                                if (level % 2) dirNum.pop();
                                currentList = currentList.parentNode;
                            }
                        }
                        dirNum[dirNum.length - 1]++;
                        li = document.createElement('li');
                        link = document.createElement('a');
                        link.href = '#' + titleId[i];
                        link.innerHTML = !isDirNum ? contentArr[i] :
                            dirNum.join('.') + ' ' + contentArr[i];
                        li.appendChild(link);
                        currentList.appendChild(li);
                    }
                    directory.appendChild(root);
                };
            createPostDirectory(document.getElementById('post-content'), document.getElementById('directory'), true);
        };
        postDirectoryBuild();
    </script>
    <script>
        (function () {
            window.TypechoComment = {
                dom: function (id) {
                    return document.getElementById(id);
                },
                create: function (tag, attr) {
                    var el = document.createElement(tag);
                    for (var key in attr) {
                        el.setAttribute(key, attr[key]);
                    }
                    return el;
                },
                reply: function (cid, coid, rid) {
                    var comment = this.dom(cid), parent = comment.parentNode,
                        response = this.dom('respond-post-{{ article.ID }}'),
                        parent = this.dom('comment-parent'),
                        root = this.dom('comment-root'),
                        form = 'form' == response.tagName ? response : response.getElementsByTagName('form')[0],
                        textarea = response.getElementsByTagName('textarea')[0];
                    if (null == parent) {
                        parent = this.create('input', {
                            'type': 'hidden',
                            'name': 'parent',
                            'id': 'comment-parent'
                        });

                        form.appendChild(parent);
                    }
                    parent.setAttribute('value', coid);
                    if (null == root) {
                        root = this.create('input', {
                            'type': 'hidden',
                            'name': 'root',
                            'id': 'comment-root'
                        });
                        form.appendChild(root);
                    }
                    root.setAttribute('value', rid);
                    if (null == this.dom('comment-form-place-holder')) {
                        var holder = this.create('div', {
                            'id': 'comment-form-place-holder'
                        });

                        response.parentNode.insertBefore(holder, response);
                    }
                    comment.appendChild(response);
                    this.dom('cancel-comment-reply-link').style.display = '';
                    if (null != textarea && 'text' == textarea.name) {
                        textarea.focus();
                    }
                    return false;
                },
                cancelReply: function () {
                    var response = this.dom('respond-post-{{ article.ID }}'),
                        holder = this.dom('comment-form-place-holder'),
                        input = this.dom('comment-parent');
                    if (null != input) {
                        input.parentNode.removeChild(input);
                    }
                    if (null == holder) {
                        return true;
                    }
                    this.dom('cancel-comment-reply-link').style.display = 'none';
                    holder.parentNode.insertBefore(response, holder);
                    return false;
                }
            };
        })();
    </script>
</body>

</html>