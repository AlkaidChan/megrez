{"version":3,"sources":["webpack:///./src/components/attachment/AttachUploadDialog.vue?88dc","webpack:///./src/components/attachment/AttachDetailDrawer.vue?a382","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/components/attachment/AttachSelectDrawer.vue?469d","webpack:///./src/components/attachment/AttachUploadDialog.vue?fe45","webpack:///src/components/attachment/AttachUploadDialog.vue","webpack:///./src/components/attachment/AttachUploadDialog.vue?f138","webpack:///./src/components/attachment/AttachUploadDialog.vue","webpack:///./src/components/attachment/AttachDetailDrawer.vue?d4ff","webpack:///src/components/attachment/AttachDetailDrawer.vue","webpack:///./src/components/attachment/AttachDetailDrawer.vue?83be","webpack:///./src/components/attachment/AttachDetailDrawer.vue","webpack:///./node_modules/tdesign-icons-vue/esm/components/info-circle.js","webpack:///src/components/attachment/AttachSelectDrawer.vue","webpack:///./src/components/attachment/AttachSelectDrawer.vue?c249","webpack:///./src/components/attachment/AttachSelectDrawer.vue","webpack:///./src/components/attachment/AttachSelectDrawer.vue?609d"],"names":["$","global","toAbsoluteIndex","toIntegerOrInfinity","lengthOfArrayLike","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","TypeError","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","this","len","actualStart","argumentsLength","arguments","length","_vm","_h","$createElement","_c","_self","attrs","visible","close","scopedSlots","_u","key","fn","on","onClickUpload","slot","_v","mode","staticClass","selectedAttaches","onClickComplete","_e","proxy","_l","attach","index","id","style","selectedIndex","border","$event","handleSelect","mouseEnter","mouseLeave","url","directives","name","rawName","value","maskVisible","expression","stopPropagation","handlePreview","staticStyle","handleDetail","ref","syncData","staticRenderFns","handleUploadSuccess","handleUploadFail","uploadMethod","model","callback","$$v","files","data","computed","methods","open","$message","error","success","$emit","Promise","file","percent","append","raw","component","deleteAttach","_s","attachment","fileName","attachmentStorageType","size","height","width","uploadTime","copyURL","copyMarkdown","type","info","$copyText","components","_excluded","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","i","source","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","InfoCircle","extend","functional","props","String","onClick","Function","render","createElement","context","otherProps","_useSizeProps","className","fullProps","icon","num","attachments","required","default","map","$refs","attachUploadDialog","$request","$set","attachDetailDrawer","$viewerApi","images","warning","indexOf","mounted","AttachUploadDialog","AttachDetailDrawer","InfoCircleIcon","BrowseIcon","UploadIcon"],"mappings":"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","file":"js/chunk-363cc552.896dbb9a.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachUploadDialog.vue?vue&type=style&index=0&id=65d582b0&lang=less&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachDetailDrawer.vue?vue&type=style&index=0&id=6fcb340a&lang=less&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('t-drawer',{attrs:{\"header\":\"附件列表\",\"visible\":_vm.visible,\"onClose\":_vm.close,\"closeBtn\":true,\"size\":\"400px\",\"zIndex\":2600,\"onOverlayClick\":_vm.close,\"placement\":\"right\"},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('t-button',{on:{\"click\":_vm.onClickUpload}},[_c('UploadIcon',{attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_vm._v(\" 上传附件 \")],1),(_vm.mode === 'multiple')?_c('span',{staticClass:\"complete-button\"},[(_vm.selectedAttaches.length > 0)?_c('t-button',{attrs:{\"theme\":\"danger\"},on:{\"click\":_vm.onClickComplete}},[_vm._v(\" 完成 \")]):_c('t-button',{attrs:{\"theme\":\"danger\",\"disabled\":\"\"}},[_vm._v(\"完成\")])],1):_vm._e()]},proxy:true}])},[_c('div',{staticClass:\"images-wrapper\"},_vm._l((_vm.attachments),function(attach,index){return _c('div',{key:attach.id,staticClass:\"image-item\",style:(_vm.selectedIndex[index] ? { border: '5px solid #1890ff' } : {}),on:{\"click\":function($event){return _vm.handleSelect(attach, index)},\"mouseenter\":function($event){return _vm.mouseEnter(index)},\"mouseleave\":function($event){return _vm.mouseLeave(index)}}},[_c('img',{attrs:{\"src\":attach.url}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.maskVisible[index]),expression:\"maskVisible[index]\"}],staticClass:\"image-item-mask\"},[_c('div',{on:{\"click\":function($event){$event.stopPropagation();return _vm.handlePreview(attach)}}},[_c('BrowseIcon',{staticStyle:{\"cursor\":\"pointer\"}})],1),_c('t-divider',{attrs:{\"layout\":\"vertical\"}}),_c('div',{on:{\"click\":function($event){$event.stopPropagation();return _vm.handleDetail(attach)}}},[_c('InfoCircleIcon',{staticStyle:{\"cursor\":\"pointer\"}})],1)],1)])}),0)]),_c('AttachDetailDrawer',{ref:\"attachDetailDrawer\"}),_c('AttachUploadDialog',{ref:\"attachUploadDialog\",on:{\"uploadSuccess\":_vm.syncData}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('t-dialog',{attrs:{\"visible\":_vm.visible,\"header\":null,\"confirmBtn\":null,\"cancelBtn\":null,\"onClose\":_vm.close,\"zIndex\":2601}},[_c('div',{staticClass:\"upload-container\"},[_c('t-upload',{attrs:{\"theme\":\"image\",\"onSuccess\":_vm.handleUploadSuccess,\"onFail\":_vm.handleUploadFail,\"requestMethod\":_vm.uploadMethod,\"draggable\":\"\",\"accept\":\"image/*\"},model:{value:(_vm.files),callback:function ($$v) {_vm.files=$$v},expression:\"files\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <t-dialog\r\n    :visible=\"visible\"\r\n    :header=\"null\"\r\n    :confirmBtn=\"null\"\r\n    :cancelBtn=\"null\"\r\n    :onClose=\"close\"\r\n    :zIndex=\"2601\"\r\n  >\r\n    <div class=\"upload-container\">\r\n      <t-upload\r\n        v-model=\"files\"\r\n        theme=\"image\"\r\n        :onSuccess=\"handleUploadSuccess\"\r\n        :onFail=\"handleUploadFail\"\r\n        :requestMethod=\"uploadMethod\"\r\n        draggable\r\n        accept=\"image/*\"\r\n      ></t-upload>\r\n    </div>\r\n  </t-dialog>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"AttachUploadDialog\",\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      files: [],\r\n    };\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    open() {\r\n      this.visible = true;\r\n    },\r\n    close() {\r\n      this.visible = false;\r\n    },\r\n    handleUploadFail() {\r\n      this.$message.error(\"上传失败\");\r\n    },\r\n    handleUploadSuccess() {\r\n      this.$message.success(\"上传成功\");\r\n      this.$emit(\"uploadSuccess\");\r\n      this.files = [];\r\n      this.close();\r\n    },\r\n    uploadMethod(file) {\r\n      return new Promise((resolve) => {\r\n        // file.percent 用于控制上传进度，如果不希望显示上传进度，则不对 file.percent 设置值即可。\r\n        // 如果代码规范不能设置 file.percent，也可以设置 this.files\r\n        file.percent = 0;\r\n        let data = new FormData();\r\n        data.append(\"file\", file.raw);\r\n        this.$request\r\n          .post(\"upload\", data, {\r\n            headers: { \"Content-Type\": \"multipart/form-data\" },\r\n          })\r\n          .then((res) => {\r\n            if (res.status === 0) {\r\n              resolve({\r\n                status: \"success\",\r\n                response: {\r\n                  url: res.data.url,\r\n                },\r\n              });\r\n            }\r\n          })\r\n          .catch(() => {\r\n            resolve({\r\n              status: \"fail\",\r\n              error: \"上传失败，请检查文件是否符合规范\",\r\n            });\r\n          });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.upload-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachUploadDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachUploadDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AttachUploadDialog.vue?vue&type=template&id=65d582b0&scoped=true&\"\nimport script from \"./AttachUploadDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./AttachUploadDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AttachUploadDialog.vue?vue&type=style&index=0&id=65d582b0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"65d582b0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('t-drawer',{attrs:{\"header\":\"附件详情\",\"visible\":_vm.visible,\"onClose\":_vm.close,\"closeBtn\":true,\"size\":\"480px\",\"zIndex\":2600,\"onOverlayClick\":_vm.close,\"placement\":\"right\"},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('t-button',{on:{\"click\":_vm.deleteAttach}},[_vm._v(\"删除\")])]},proxy:true}])},[(_vm.attachment)?_c('t-list',{attrs:{\"split\":true}},[_c('t-list-item',[_c('t-list-item-meta',{attrs:{\"title\":\"附件名\"}}),_vm._v(\" \"+_vm._s(_vm.attachment.fileName)+\" \")],1),_c('t-list-item',[_c('t-list-item-meta',{attrs:{\"title\":\"存储位置\"}}),_vm._v(\" \"+_vm._s(_vm.attachmentStorageType)+\" \")],1),_c('t-list-item',[_c('t-list-item-meta',{attrs:{\"title\":\"图片大小\"}}),_vm._v(\" \"+_vm._s(_vm.attachment.size)+\" \")],1),_c('t-list-item',[_c('t-list-item-meta',{attrs:{\"title\":\"图片尺寸\"}}),_vm._v(\" \"+_vm._s(_vm.attachment.height)+\" x \"+_vm._s(_vm.attachment.width)+\" \")],1),_c('t-list-item',[_c('t-list-item-meta',{attrs:{\"title\":\"上传日期\"}}),_vm._v(\" \"+_vm._s(_vm.attachment.uploadTime)+\" \")],1),_c('t-list-item',{scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('t-button',{attrs:{\"variant\":\"text\",\"shape\":\"square\"},on:{\"click\":_vm.copyURL}},[_c('file-copy-icon')],1)]},proxy:true}],null,false,320530126)},[_c('t-list-item-meta',{attrs:{\"title\":\"图片链接\"}}),_vm._v(\" \"+_vm._s(_vm.attachment.url)+\" \")],1),_c('t-list-item',{scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('t-button',{attrs:{\"variant\":\"text\",\"shape\":\"square\"},on:{\"click\":_vm.copyMarkdown}},[_c('file-copy-icon')],1)]},proxy:true}],null,false,765174242)},[_c('t-list-item-meta',{attrs:{\"title\":\"Markdown 链接\"}}),_vm._v(\" ![\"+_vm._s(_vm.attachment.fileName)+\"](\"+_vm._s(_vm.attachment.url)+\") \")],1)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <t-drawer\r\n      header=\"附件详情\"\r\n      :visible=\"visible\"\r\n      :onClose=\"close\"\r\n      :closeBtn=\"true\"\r\n      size=\"480px\"\r\n      :zIndex=\"2600\"\r\n      :onOverlayClick=\"close\"\r\n      placement=\"right\"\r\n    >\r\n      <t-list :split=\"true\" v-if=\"attachment\">\r\n        <t-list-item>\r\n          <t-list-item-meta title=\"附件名\"></t-list-item-meta>\r\n          {{ attachment.fileName }}\r\n        </t-list-item>\r\n        <t-list-item>\r\n          <t-list-item-meta title=\"存储位置\"></t-list-item-meta>\r\n          {{ attachmentStorageType }}\r\n        </t-list-item>\r\n        <t-list-item>\r\n          <t-list-item-meta title=\"图片大小\"></t-list-item-meta>\r\n          {{ attachment.size }}\r\n        </t-list-item>\r\n        <t-list-item>\r\n          <t-list-item-meta title=\"图片尺寸\"></t-list-item-meta>\r\n          {{ attachment.height }} x {{ attachment.width }}\r\n        </t-list-item>\r\n        <t-list-item>\r\n          <t-list-item-meta title=\"上传日期\"></t-list-item-meta>\r\n          {{ attachment.uploadTime }}\r\n        </t-list-item>\r\n        <t-list-item>\r\n          <t-list-item-meta title=\"图片链接\"></t-list-item-meta>\r\n          {{ attachment.url }}\r\n          <template #action>\r\n            <t-button variant=\"text\" shape=\"square\" @click=\"copyURL\"\r\n              ><file-copy-icon\r\n            /></t-button>\r\n          </template>\r\n        </t-list-item>\r\n        <t-list-item>\r\n          <t-list-item-meta title=\"Markdown 链接\"></t-list-item-meta>\r\n          ![{{ attachment.fileName }}]({{ attachment.url }})\r\n          <template #action>\r\n            <t-button variant=\"text\" shape=\"square\" @click=\"copyMarkdown\"\r\n              ><file-copy-icon\r\n            /></t-button>\r\n          </template>\r\n        </t-list-item>\r\n      </t-list>\r\n      <template #footer>\r\n        <t-button @click=\"deleteAttach\">删除</t-button>\r\n      </template>\r\n    </t-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { FileCopyIcon } from \"tdesign-icons-vue\";\r\nexport default {\r\n  name: \"AttachDetailDrawer\",\r\n  data() {\r\n    return {\r\n      attachment: {},\r\n      visible: false,\r\n    };\r\n  },\r\n  computed: {\r\n    attachmentStorageType() {\r\n      switch (this.attachment.type) {\r\n        case 0:\r\n          return \"本地\";\r\n        default:\r\n          return \"未知\";\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    open(attachment) {\r\n      this.visible = true;\r\n      this.attachment = attachment;\r\n    },\r\n    close() {\r\n      this.visible = false;\r\n    },\r\n    deleteAttach() {\r\n      this.$message.info(\"未实现\");\r\n    },\r\n    copyURL() {\r\n      this.$copyText(this.attachment.url);\r\n      this.$message.success(\"已复制\");\r\n    },\r\n    copyMarkdown() {\r\n      this.$copyText(`![${this.attachment.fileName}](${this.attachment.url})`);\r\n      this.$message.success(\"已复制\");\r\n    },\r\n  },\r\n  components: { FileCopyIcon },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.image-wrapper {\r\n  margin: 0 auto;\r\n  justify-content: center;\r\n  img {\r\n    height: 175px;\r\n    align-items: center;\r\n    margin: 0 auto;\r\n    border-radius: 2px;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachDetailDrawer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachDetailDrawer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AttachDetailDrawer.vue?vue&type=template&id=6fcb340a&scoped=true&\"\nimport script from \"./AttachDetailDrawer.vue?vue&type=script&lang=js&\"\nexport * from \"./AttachDetailDrawer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AttachDetailDrawer.vue?vue&type=style&index=0&id=6fcb340a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6fcb340a\",\n  null\n  \n)\n\nexport default component.exports","import { _ as _defineProperty } from '../_chunks/dep-f1f55b48.js';\nimport { _ as _objectWithoutProperties } from '../_chunks/dep-8baf22ba.js';\nimport Vue from 'vue';\nimport IconBase from '../icon.js';\nimport useSizeProps from '../utils/use-size-props.js';\nimport 'classnames';\nimport '../style/css.js';\nimport '../utils/use-common-classname.js';\nimport '../utils/config-context.js';\n\nvar _excluded = [\"size\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar element = {\n  \"tag\": \"svg\",\n  \"attrs\": {\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"1em\",\n    \"height\": \"1em\"\n  },\n  \"children\": [{\n    \"tag\": \"path\",\n    \"attrs\": {\n      \"fill\": \"currentColor\",\n      \"d\": \"M7.5 12V6.5h1V12h-1zM8.6 4H7.4v1.2h1.2V4z\",\n      \"fillOpacity\": 0.9\n    }\n  }, {\n    \"tag\": \"path\",\n    \"attrs\": {\n      \"fill\": \"currentColor\",\n      \"d\": \"M1 8a7 7 0 1014 0A7 7 0 001 8zm1 0a6 6 0 1112 0A6 6 0 012 8z\",\n      \"fillOpacity\": 0.9\n    }\n  }]\n};\nvar InfoCircle = Vue.extend({\n  name: \"InfoCircleIcon\",\n  functional: true,\n  props: {\n    size: {\n      type: String\n    },\n    onClick: {\n      type: Function\n    }\n  },\n  render: function render(createElement, context) {\n    var props = context.props,\n        data = context.data;\n\n    var size = props.size,\n        otherProps = _objectWithoutProperties(props, _excluded);\n\n    var _useSizeProps = useSizeProps(size),\n        className = _useSizeProps.className,\n        style = _useSizeProps.style;\n\n    var fullProps = _objectSpread(_objectSpread({}, otherProps || {}), {}, {\n      id: \"info-circle\",\n      icon: element,\n      staticClass: className,\n      style: style\n    });\n\n    data.props = fullProps;\n    return createElement(IconBase, data);\n  }\n});\n\nexport { InfoCircle as default };\n//# sourceMappingURL=info-circle.js.map\n","<template>\r\n  <div>\r\n    <t-drawer\r\n      header=\"附件列表\"\r\n      :visible=\"visible\"\r\n      :onClose=\"close\"\r\n      :closeBtn=\"true\"\r\n      size=\"400px\"\r\n      :zIndex=\"2600\"\r\n      :onOverlayClick=\"close\"\r\n      placement=\"right\"\r\n    >\r\n      <div class=\"images-wrapper\">\r\n        <div\r\n          class=\"image-item\"\r\n          :style=\"selectedIndex[index] ? { border: '5px solid #1890ff' } : {}\"\r\n          v-for=\"(attach, index) in attachments\"\r\n          :key=\"attach.id\"\r\n          @click=\"handleSelect(attach, index)\"\r\n          @mouseenter=\"mouseEnter(index)\"\r\n          @mouseleave=\"mouseLeave(index)\"\r\n        >\r\n          <img :src=\"attach.url\" />\r\n          <div class=\"image-item-mask\" v-show=\"maskVisible[index]\">\r\n            <div @click.stop=\"handlePreview(attach)\">\r\n              <BrowseIcon style=\"cursor: pointer\" />\r\n            </div>\r\n            <t-divider layout=\"vertical\" />\r\n            <div @click.stop=\"handleDetail(attach)\">\r\n              <InfoCircleIcon style=\"cursor: pointer\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <template #footer>\r\n        <t-button @click=\"onClickUpload\">\r\n          <UploadIcon slot=\"icon\" />\r\n          上传附件\r\n        </t-button>\r\n        <span class=\"complete-button\" v-if=\"mode === 'multiple'\">\r\n          <t-button\r\n            theme=\"danger\"\r\n            @click=\"onClickComplete\"\r\n            v-if=\"selectedAttaches.length > 0\"\r\n          >\r\n            完成\r\n          </t-button>\r\n          <t-button theme=\"danger\" v-else disabled>完成</t-button>\r\n        </span>\r\n      </template>\r\n    </t-drawer>\r\n    <AttachDetailDrawer ref=\"attachDetailDrawer\"></AttachDetailDrawer>\r\n    <AttachUploadDialog\r\n      ref=\"attachUploadDialog\"\r\n      @uploadSuccess=\"syncData\"\r\n    ></AttachUploadDialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AttachUploadDialog from \"@/components/attachment/AttachUploadDialog.vue\";\r\nimport AttachDetailDrawer from \"@/components/attachment/AttachDetailDrawer.vue\";\r\nimport { InfoCircleIcon, BrowseIcon, UploadIcon } from \"tdesign-icons-vue\";\r\nexport default {\r\n  name: \"AttachSelectDrawer\",\r\n  data() {\r\n    return {\r\n      num: 0,\r\n      visible: false,\r\n      attachments: [],\r\n      maskVisible: [],\r\n      selectedIndex: [],\r\n      selectedAttaches: [],\r\n    };\r\n  },\r\n  props: {\r\n    mode: {\r\n      type: String,\r\n      required: false,\r\n      default: \"single\",\r\n    },\r\n  },\r\n  methods: {\r\n    open(num = 0) {\r\n      this.num = num;\r\n      this.visible = true;\r\n    },\r\n    close() {\r\n      this.visible = false;\r\n      this.selectedIndex = this.selectedIndex.map(() => false);\r\n      this.selectedAttaches = [];\r\n    },\r\n    onClickUpload() {\r\n      this.$refs.attachUploadDialog.open();\r\n    },\r\n    syncData() {\r\n      this.$request\r\n        .get(\"attachments\")\r\n        .then((res) => {\r\n          if (res.status === 0) {\r\n            this.attachments = res.data.list ? res.data.list : [];\r\n          }\r\n          this.maskVisible = this.attachments.map(() => false);\r\n          this.selectedIndex = this.attachments.map(() => false);\r\n        })\r\n        .catch(() => {\r\n          this.$message.error(\"获取附件列表失败\");\r\n        });\r\n    },\r\n    mouseEnter(index) {\r\n      this.$set(this.maskVisible, index, true);\r\n    },\r\n    mouseLeave(index) {\r\n      this.$set(this.maskVisible, index, false);\r\n    },\r\n    handleDetail(attach) {\r\n      this.$refs.attachDetailDrawer.open(attach);\r\n    },\r\n    handlePreview(attach) {\r\n      this.$viewerApi({\r\n        images: [attach.url],\r\n      });\r\n    },\r\n    handleSelect(attach, index) {\r\n      if (this.mode === \"single\") {\r\n        this.$emit(\"select\", attach);\r\n        this.close();\r\n      }\r\n      if (this.num != 0 && this.num <= this.selectedAttaches.length) {\r\n        this.$message.warning(\"最多只能选择\" + this.num + \"个附件\");\r\n        return;\r\n      }\r\n      this.$set(this.selectedIndex, index, !this.selectedIndex[index]);\r\n      if (this.selectedIndex[index]) {\r\n        this.selectedAttaches.push(attach);\r\n      } else {\r\n        this.selectedAttaches.splice(this.selectedAttaches.indexOf(attach), 1);\r\n      }\r\n    },\r\n    onClickComplete() {\r\n      this.$emit(\"select\", this.selectedAttaches);\r\n      this.close();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.syncData();\r\n  },\r\n  components: {\r\n    AttachUploadDialog,\r\n    AttachDetailDrawer,\r\n    InfoCircleIcon,\r\n    BrowseIcon,\r\n    UploadIcon,\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.images-wrapper {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  .image-item {\r\n    background-color: @bg-color-secondarycontainer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    position: relative;\r\n    width: 160px;\r\n    height: 160px;\r\n    margin: 0 10px 20px 10px;\r\n    border: 1px solid @border-level-2-color;\r\n    img {\r\n      max-width: 100%;\r\n      max-height: 100%;\r\n      margin: auto;\r\n    }\r\n    .image-item-mask {\r\n      background-color: @text-color-secondary;\r\n      color: @bg-color-container;\r\n      transition: all 0.2s linear;\r\n      will-change: transform;\r\n      opacity: 0;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      position: absolute;\r\n      left: 0;\r\n      right: 0;\r\n      top: 0;\r\n      bottom: 0;\r\n      &:hover {\r\n        opacity: 1;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.complete-button {\r\n  float: right;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachSelectDrawer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachSelectDrawer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AttachSelectDrawer.vue?vue&type=template&id=4ab3db0b&scoped=true&\"\nimport script from \"./AttachSelectDrawer.vue?vue&type=script&lang=js&\"\nexport * from \"./AttachSelectDrawer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AttachSelectDrawer.vue?vue&type=style&index=0&id=4ab3db0b&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ab3db0b\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachSelectDrawer.vue?vue&type=style&index=0&id=4ab3db0b&lang=less&scoped=true&\""],"sourceRoot":""}