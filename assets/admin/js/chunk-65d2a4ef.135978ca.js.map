{"version":3,"sources":["webpack:///./node_modules/core-js/internals/get-substitution.js","webpack:///./node_modules/core-js/internals/regexp-exec-abstract.js","webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./src/views/article/ArticleEdit.vue?81e5","webpack:///./node_modules/core-js/modules/es.string.replace.js","webpack:///./node_modules/core-js/internals/advance-string-index.js","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./src/views/article/ArticleEdit.vue?df57","webpack:///./src/components/vditor/Vditor.vue?55ed","webpack:///src/components/vditor/Vditor.vue","webpack:///./src/components/vditor/Vditor.vue?4da1","webpack:///./src/components/vditor/Vditor.vue","webpack:///src/views/article/ArticleEdit.vue","webpack:///./src/views/article/ArticleEdit.vue?caa8","webpack:///./src/views/article/ArticleEdit.vue","webpack:///./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js","webpack:///./node_modules/vditor/dist/index.min.js"],"names":["uncurryThis","toObject","floor","Math","charAt","replace","stringSlice","slice","SUBSTITUTION_SYMBOLS","SUBSTITUTION_SYMBOLS_NO_NAMED","module","exports","matched","str","position","captures","namedCaptures","replacement","tailPos","length","m","symbols","undefined","match","ch","capture","n","f","global","call","anObject","isCallable","classof","regexpExec","TypeError","R","S","exec","result","DOMIterables","DOMTokenListPrototype","forEach","createNonEnumerableProperty","handlePrototype","CollectionPrototype","error","COLLECTION_NAME","prototype","$forEach","arrayMethodIsStrict","STRICT_METHOD","callbackfn","this","arguments","apply","fixRegExpWellKnownSymbolLogic","fails","toIntegerOrInfinity","toLength","toString","requireObjectCoercible","advanceStringIndex","getMethod","getSubstitution","regExpExec","wellKnownSymbol","REPLACE","max","min","concat","push","stringIndexOf","indexOf","maybeToString","it","String","REPLACE_KEEPS_$0","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","REPLACE_SUPPORTS_NAMED_GROUPS","re","groups","a","_","nativeReplace","maybeCallNative","UNSAFE_SUBSTITUTE","searchValue","replaceValue","O","replacer","string","rx","res","done","value","functionalReplace","fullUnicode","unicode","lastIndex","results","matchStr","accumulatedResult","nextSourcePosition","i","index","j","replacerArgs","$","toAbsoluteIndex","lengthOfArrayLike","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","len","actualStart","argumentsLength","METHOD_NAME","argument","method","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","article","title","attrs","on","openDrawer","saveDraft","preview","handlePublish","model","callback","$$v","$set","expression","originalContent","onContentChange","countWord","scopedSlots","_u","key","fn","staticStyle","proxy","ref","slug","categoryOptions","directives","name","rawName","showAddCategoryForm","$event","slot","newCategory","handleCreateCategory","cancelCreateCategory","tagOptions","handleCreateTag","minRows","cover","seoKeywordOptions","createSEOKeyword","attachDrawerVisible","staticRenderFns","data","contentEditor","props","origionContent","type","required","default","methods","contentChange","$emit","mounted","height","icon","input","counter","enable","after","delay","outline","cache","watch","deep","handler","newValue","setTheme","component","formatContent","allowedComment","isTop","categories","tags","summary","password","wordCount","seoKeywords","seoDescription","status","console","log","$request","$message","warning","newTag","label","components","get","then","category","id","tag","redefine","SPECIES","RegExpPrototype","RegExp","KEY","FORCED","SHAM","SYMBOL","DELEGATES_TO_SYMBOL","DELEGATES_TO_EXEC","execCalled","constructor","flags","uncurriedNativeRegExpMethod","nativeMethod","regexp","arg2","forceStringMethod","uncurriedNativeMethod","$exec","root","factory","__webpack_modules__","694","diff_match_patch","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","Diff","op","text","diff_main","text1","text2","opt_checklines","opt_deadline","Number","MAX_VALUE","Date","getTime","deadline","Error","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","diff_compute_","unshift","diff_cleanupMerge","longtext","shorttext","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","diff_lineMode_","diff_bisect_","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","pointer","count_delete","count_insert","text_delete","text_insert","subDiff","pop","text1_length","text2_length","max_d","ceil","v_offset","v_length","v1","Array","v2","x","delta","front","k1start","k1end","k2start","k2end","d","k1","k1_offset","x1","y1","k2_offset","x2","diff_bisectSplit_","k2","y2","y","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","chars","lineStart","lineEnd","lineArrayLength","line","hasOwnProperty","fromCharCode","maxLines","charCodeAt","join","pointermin","pointermax","pointermid","pointerstart","pointerend","diff_commonOverlap_","text_length","best","pattern","found","dmp","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","best_common","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastEquality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","tokens","split","param","decodeURI","ex","parseInt","isNaN","match_main","match_bitap_","s","match_alphabet_","match_bitapScore_","e","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","bin_min","bin_mid","matchmask","last_rd","bin_max","finish","rd","charMatch","patch_addContext_","patch","start2","length1","padding","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","start_loc","expected_loc","end_loc","index2","index1","mod","paddingLength","extraLength","patch_size","bigpatch","precontext","empty","shift","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","sign","coords1","coords2","157","857","__unused_webpack_module","__webpack_exports__","__webpack_require__","abcRender","adapterRender","chartRender","codeRender","flowchartRender","graphvizRender","highlightRender","lazyLoadImageRender","element","document","loadImg","testImage","createElement","src","getAttribute","addEventListener","naturalHeight","naturalWidth","querySelector","clientWidth","window","innerHeight","style","removeAttribute","querySelectorAll","imgElement","vditorImageIntersectionObserver","disconnect","observe","IntersectionObserver","entries","entrie","isIntersecting","intersectionRatio","mathRender","mediaRender","mermaidRender","mindmapRender","outlineRender","plantumlRender","constants","setContentTheme","addScript","hasClosest","merge","anchorRender","anchor","classList","add","onclick","substr","top","getElementById","offsetTop","scrollTop","onhashchange","decodeURIComponent","location","hash","setLute","selection","speechRender","lang","speechSynthesis","SpeechSynthesisUtterance","playSVG","pauseSVG","speechDom","className","body","insertAdjacentElement","getVoice","currentVoice","defaultVoice","voices","getVoices","item","onvoiceschanged","voice_1","utterThis","voice","onend","cancel","innerHTML","speak","speaking","paused","resume","pause","Hc","vditorSpeechRange","getSelection","trim","display","event","getRangeAt","cloneRange","rect","getBoundingClientRect","left","screenX","setAttribute","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","rejected","__generator","t","g","sent","trys","ops","verb","Symbol","iterator","v","mergeOptions","options","defaultOption","cdn","CDN","customEmoji","emojiPath","hljs","HLJS_OPTIONS","markdown","MARKDOWN_OPTIONS","math","MATH_OPTIONS","mode","speech","theme","THEME_OPTIONS","T","md2html","mdText","mergedOptions","G","lute","X","autoSpace","codeBlockPreview","emojiSite","emojis","fixTermTypo","footnotes","headingAnchor","inlineMathDigit","inlineDigit","lazyLoadImage","linkBase","linkPrefix","listStyle","mark","mathBlockPreview","paragraphBeginningSpace","sanitize","toc","renderers","SetJSRenderers","Md2HTML","SetHeadingID","previewRender","previewElement","i18nScriptPrefix","i18nScriptID_1","_a","transform","i18n","includes","el","head","removeChild","VditorI18n","Z","current","path","H","p","B","Q","Y","spanElement","lG","fb","headingElement","scrollTo","scrollX","preview_image","setCodeTheme","Vditor","previewImage","E","260","_VDITOR_VERSION","Constants","ZWSP","DROP_EDITOR","MOBILE_WIDTH","CLASS_MENU_DISABLED","EDIT_TOOLBARS","CODE_THEME","CODE_LANGUAGES","lineNumber","engine","macros","list","369","_constants__WEBPACK_IMPORTED_MODULE_0__","_util_addScript__WEBPACK_IMPORTED_MODULE_2__","_adapterRender__WEBPACK_IMPORTED_MODULE_1__","abcElements","abcRenderAdapter","getElements","parentElement","contains","ABCJS","renderAbc","getCode","overflowX","46","r","mathRenderAdapter","mathElement","textContent","mermaidRenderAdapter","mindmapRenderAdapter","chartRenderAdapter","innerText","graphvizRenderAdapter","flowchartRenderAdapter","plantumlRenderAdapter","726","echartsElements","option","JSON","parse","echarts","init","setOption","23","_util_code160to32__WEBPACK_IMPORTED_MODULE_0__","_b","maxHeight","codeText","codeElement","remove","iconHTML","divElement","copy","textarea","before","outerHeight","383","flowchartElements","flowchartObj","flowchart","drawSVG","890","graphvizElements","code","blob","Blob","url","URL","webkitURL","blobUrl","createObjectURL","worker","Worker","Viz","renderSVGElement","outerHTML","catch","93","_util_addStyle__WEBPACK_IMPORTED_MODULE_1__","hljsOption","vditorHljsStyle","href","c","codes","block","highlightElement","linenNumberTemp","whiteSpace","getComputedStyle","isSoftWrap","lineNumberHTML","lineList","map","lineHeight","insertAdjacentHTML","323","_util_addScript__WEBPACK_IMPORTED_MODULE_3__","_util_addStyle__WEBPACK_IMPORTED_MODULE_2__","_util_code160to32__WEBPACK_IMPORTED_MODULE_4__","mathElements","defaultOptions","Object","assign","katex","renderToString","displayMode","tagName","output","message","stopPropagation","preventDefault","vditorMathElement","currentTarget","closest","clipboardData","setData","chainAsync_1","fns","curr","last","MathJax","loader","paths","mathjax","startup","typeset","tex","J","renderMath_1","mathOptions","getMetricsFor","tex2svgPromise","node","append","clear","updateDocument","errorTextElement","promise","chains","_loop_1","207","videoRender","audioRender","iframeRender","youtubeMatch","youkuMatch","qqMatch","coubMatch","facebookMatch","dailymotionMatch","bilibiliMatch","tedMatch","encodeURIComponent","aElement","765","mermaidElements","config","altFontFamily","htmlLabels","useMaxWidth","fontFamily","gantt","leftPadding","rightPadding","securityLevel","sequence","boxMargin","diagramMarginX","diagramMarginY","startOnLoad","themeVariables","activationBkgColor","activationBorderColor","activeTaskBkgColor","activeTaskBorderColor","actorBkg","actorBorder","actorLineColor","actorTextColor","altBackground","altSectionBkgColor","arrowheadColor","background","border1","border2","classText","clusterBkg","clusterBorder","critBkgColor","critBorderColor","darkTextColor","defaultLinkColor","doneTaskBkgColor","doneTaskBorderColor","edgeLabelBackground","errorBkgColor","errorTextColor","fillType0","fillType1","fillType2","fillType3","fillType4","fillType5","fillType6","fillType7","fontSize","gridColor","labelBackground","labelBoxBkgColor","labelBoxBorderColor","labelColor","labelTextColor","lineColor","loopTextColor","mainBkg","mainContrastColor","nodeBkg","nodeBorder","noteBkgColor","noteBorderColor","noteTextColor","primaryBorderColor","primaryColor","primaryTextColor","secondBkg","secondaryBorderColor","secondaryColor","secondaryTextColor","sectionBkgColor","sectionBkgColor2","sequenceNumberColor","signalColor","signalTextColor","taskBkgColor","taskBorderColor","taskTextClickableColor","taskTextColor","taskTextDarkColor","taskTextLightColor","taskTextOutsideColor","tertiaryBorderColor","tertiaryColor","tertiaryTextColor","textColor","titleColor","todayLineColor","mermaid","initialize","894","mindmapElements","series","initialTreeDepth","itemStyle","borderWidth","color","backgroundColor","borderColor","borderRadius","offset","lineStyle","width","roam","symbol","params","children","tooltip","trigger","triggerOn","198","_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__","_mathRender__WEBPACK_IMPORTED_MODULE_0__","contentElement","targetElement","vditor","tocHTML","ids","W","tempElement","SetToC","currentMode","HTML2VditorDOM","SpinVditorIRDOM","SpinVditorDOM","Lute","New","headingsElement","firstElementChild","nextElementSibling","isEqualNode","idElement","windowScrollY","toolbarConfig","pin","toolbar","offsetHeight","scrollY","583","plantumlElements","plantumlEncoder","encode","792","PutEmojis","SetEmojiSite","SetHeadingAnchor","SetInlineMathAllowDigitAfterOpenMarker","SetAutoSpace","SetFootnotes","SetFixTermTypo","SetVditorCodeBlockPreview","SetVditorMathBlockPreview","SetSanitize","SetChineseParagraphBeginningSpace","SetRenderListStyle","SetLinkBase","SetLinkPrefix","SetMark","SetImageLazyLoading","264","oldImgElement","oldImgRect","spin","close","overflow","translate3d","innerWidth","setTimeout","scrollWidth","scrollHeight","clientHeight","btnElement","deg","968","codeTheme","958","_util_addStyle__WEBPACK_IMPORTED_MODULE_0__","contentTheme","vditorContentTheme","cssPath","228","addScriptSync","xhrObj","XMLHttpRequest","open","setRequestHeader","send","scriptElement","responseText","appendChild","async","onload","946","addStyle","styleElement","rel","getElementsByTagName","769","code160to32","931","isSafari","navigator","userAgent","isFirefox","toLowerCase","accessLocalStorage","localStorage","getEventName","isCtrl","platform","toUpperCase","metaKey","ctrlKey","updateHotkeyTip","hotkey","test","startsWith","isChrome","vendor","713","_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__","hasTopClosestByClassName","hasClosestByClassName","parentClosest","findTop","hasTopClosestByTag","nodeName","getTopList","topUlElement","topOlElement","topListElement","hasClosestByAttribute","attr","nodeType","isClosest","hasClosestBlock","blockElement","hasClosestByMatchTag","getLastNode","lastChild","615","hasClosestByTag","hasClosestByHeadings","224","_i","merger","obj","prop","187","_compatibility__WEBPACK_IMPORTED_MODULE_2__","_hasClosest__WEBPACK_IMPORTED_MODULE_1__","getEditorRange","range","rangeCount","startContainer","focus","ownerDocument","createRange","setStart","collapse","getCursorPosition","editor","cursorRect","parentRect","getClientRects","parent_1","startOffset","childNodes","selectNode","setEnd","endContainer","endOffset","selectIsEditor","container","commonAncestorContainer","setSelectionFocus","removeAllRanges","addRange","getSelectPosition","selectElement","editorElement","end","preSelectionRange","selectNodeContents","setSelectionByPosition","charIndex","pNode","foundStart","stop","nextCharIndex","nextSibling","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setRangeByWbr","wbrElement","previousElementSibling","isSameNode","previousSibling","i7","insertNode","createTextNode","insertHTML","tempBlockElement","pasteElement","preventInput","execCommand","lastElementChild","F9","pasteTemplate","content","cloneNode","__webpack_module_cache__","moduleId","cachedModule","definition","o","defineProperty","enumerable","toStringTag","resizeCb","getMarkdown","sv","VditorDOM2Md","wysiwyg","VditorIRDOM2Md","ir","DevTools","renderEchart","_this","devtools","ASTChart","RenderEChartsJSON","align","verticalAlign","orient","toolbox","bottom","emphasis","iconStyle","feature","restore","show","saveAsImage","right","resize","compatibility","removeCurrentToolbar","names","itemElement","setCurrentToolbar","enableToolbar","disableToolbar","hideToolbar","showToolbar","hidePanel","panels","exceptElement","elements","emoji","hint","popover","toggleSubMenu","panelElement","actionBtn","level","Le","print","processPasteCode","isCode","childElementCount","pres","processCodeRender","previewPanel","language","renderToc","clickToc","keydownToc","im","execAfterRender","insertBeforeBlock","trimRight","insertAfterBlock","tocElement","ignoreSpace","isHrMD","isHeadingMD","startSpace","endSpace","markerElement","previousNode","previewRenderElement","firstLinkRefDefElement","isIRElement","footnoteElement","a1","blockquoteElement","O9","listPrevElement","listNextElement","inputType","debugger","footnoteItemElement","footnoteItemText","marker","footnoteRefElement","firstFootnoteElement","allLinkRefDefsElement","allFootnoteElement","ib","process_processAfterRender","enableAddUndoStack","enableHint","enableInput","matchHotKey","hotKey","yl","altKey","shiftKey","hotKeys","keyCode","hasShift","vU","nextIsNode","nodeValue","nextNode","parentNextNode","previousIsNode","expandMarker","nodeElement","JQ","nodeElementEnd","collapsed","processKeydown","composingLock","isComposing","undo","recordFirstPosition","zh","fixGSKeyBackspace","fixCJKPosition","fixHR","newlineElement","beforeMarkerElement","afterMarkerElement","pElement","fixMarkdown","fixList","fixBlockquote","preRenderElement","codeRenderElement","firstChild","fixCodeBlock","preBeforeElement","recentLanguage","cellElement","tableElement","isFirstCell","table2Element","isLastCell","fixTable","fixTask","fixTab","headingMarkerElement","process_processHeading","fixDelete","rangeStart","headingLength","fixFirefoxArrowUpTable","fixCursorDownInlineMath","inputEvent","processAfterRender","codeBlockMarkerElement","openMarkerElement","getSideByType","mathBlockMarkerElement","mathBlockCloseElement","Caret","isSVElement","processSpinVditorSVDOM","scrollCenter","processKeydown_processKeydown","_d","_e","textElement","blockquoteMarkerElement","listMarkerElement","taskMarkerElement","listLastMarkerElement","startIndex","isTask","listFirstMarkerElement","isFirst","newLineMatch","newLineText","processPreviousMarkers","extractContents","previousLastElement","initUI","minHeight","upload","tip","export","setEditMode","afterRender","visualViewport","pendingUpdate_1","viewportHandler","requestAnimationFrame","layoutViewport","setPadding","minPadding","maxWidth","paddingLeft","offsetWidth","setTypewriterPosition","typewriterMode","setProperty","UIUnbindListener","removeEventListener","templateObject_1","initValue","pK","getItem","originalInnerHTML","HTML2Md","highlightToolbarIR","clearTimeout","hlToolbarTimeoutId","Gb","typeElement","quoteElement","strongElement","emElement","sElement","liElement","codeBlockElement","afterRenderEvent","afterRenderTimeoutId","setItem","addToUndoStack","undoDelay","previoueIsEmptyA","nextIsCode","getNextHTML","getPreviousHTML","getRenderElementNextNode","blockCodeElement","splitElement","previousHTML","nextHTML","beforeHTML","afterHTML","modifyPre","find","cloneRangeOffset","parentNode","insertBefore","setHeading","removeHeading","showCode","first","previousElement","wysiwyg_processKeydown_processKeydown","blur","inputElemment","select","topBQElement","E2","pTempElement","linRefElement","inputElement","removeBlockElement","click","rangeStartOffset","nextElement","highlightToolbarWYSIWYG","footnotesElement","genClose","setPopoverPosition","commentElement","ids_1","nextIds_1","genUp","genDown","updateTable_1","oldRow","rows","oldColumn","cells","row","input_1","column","input2_1","columnDiff","rowDiff","rowHTML","l","setAlign_1","setTableAlign","left_1","center_1","right_1","td","th","alignType","alignLeft","ns","alignCenter","alignRight","insertRowElement","insertRowBelow","insertRow","insertRowBElement","insertRowAbove","insertColumnElement","insertColumnRight","insertColumn","insertColumnBElement","insertColumnLeft","deleteRowElement","deleteRow","deleteColumnElement","deleteColumn","inputWrap","textAlign","oninput","onkeydown","input2Wrap","linkRefElement","genLinkRefPopover","footnotesRefElement","footnoteRef","input_2","blockRenderElement","languageWrap","language_1","codeElement_1","detail","onkeyup","matchLangData","selectionStart","keyName","genHTML","input_3","genAPopover","backslashElement","offsetLeft","updateLinkRef","input1","textIsNotEmpty","linkHotkey","input1Wrap","linkRef","upElement","up","downElement","down","nextInputElement","updateA","input2","link","tooltipText","genImagePopover","updateImg","alt","imageURL","elementEvent","altWrap","alternateText","titleWrap","highlightToolbar","renderDomByMd","md","Md2VditorDOM","cancelBES","commandName","jump","lastTagName","lastEndTagName","splitHTML","lastBeforeHTML","lastAfterHTML","toolbarEvent","CustomEvent","useHighlight","useRender","inlineCodeElement","listToggle","surroundContents","deleteContents","textInputElement","textInputElements","tableHTML_1","tableText","delimiter_1","header","subIndex","cell","hrHTML","MenuItem","menuItem","iconElement","tipPosition","process_processToolbar","processToolbar","__extends","extendStatics","b","setPrototypeOf","__proto__","__","create","markdownText","SetVditorIR","SetVditorWYSIWYG","SetVditorSV","Md2VditorIRDOM","svHTML","resetIcon","toggle","EditMode","_super","instantRendering","splitView","_bindEvent","getSelectText","focusEvent","dblclickEvent","blurEvent","expandElement","selectPopover","relatedTarget","hideComment","dropEvent","dataTransfer","getData","types","paste","pasteCode","copyEvent","cutEvent","comment","getComments","adjustTop","cursorTop","Ny","hotkeyEvent","extend","ctrlEnter","redo","esc","processHeading","repeat","sub","subMenuItem","dispatchEvent","selectEvent","onmouseup","selectText","showComment","processPaste","Md2VditorSVDOM","spanNode","isPrevious","sideElement","SpinVditorSVDOM","spanType","markerText","hasNL","previousType","previousText","openMarker","processTimeoutId","newLine","insertAdjacentText","getElement","setHeaders","xhr","headers","keys","Upload","isUploading","validateFile","files","hide","uploadFileList","errorTip","uploadingStr","iMax","file","validate","nameEmpty","size","over","fileExt","filename","accept","isAccept","some","fileTypeError","uploading","genUploadedLabel","response","msg","errFiles","uploadError","succFileText","succMap","uploadFiles","fileList","filesMax","fileItem","isValidate","validateResult","formData","extraData","multiple","DataTransferItem","getAsFile","FormData","fieldName","token","withCredentials","onreadystatechange","readyState","DONE","success","format","onprogress","lengthComputable","progress","loaded","total","progressBar","input_input","previousAEmptyElement","wbr","html_1","firstLinkRefDefElement_1","isWYSIWYGElement","firstFootnoteElement_1","triggerRemoveComment","__makeTemplateObject","cooked","raw","fixBrowserBehavior_awaiter","fixBrowserBehavior_generator","pLiElement","zwspNode","inlineElement","insertEmptyBlock","goPreviousCell","isSelected","pHTML","trimLeft","replaceChild","listIndent","liElements_1","cloneContents","liParentElement","liHTML_1","tempTopListElement","listOutdent","liParentLiElement","liParentAfterElement","liElements_2","isMatch_1","afterHTML_1","reverse","columnCnt","rowCnt","currentColumn","textArray","endsWith","tab","pText","pTextList","tableHeaderMD","pInnerHTML","innerHTMLList","lastElement","DX","theadHTML","tbodyElement","brElement","trElement","previousCellElement","codePosition","isEmpty","taskItemElement","checked","lastNode","afterHTML_2","beforeHTML_1","isAfter_1","taskItem","parentTagName","dataMarker","startAttribute","rangeElement","lastCellElement","textHTML","textPlain","renderLinkDest","doc","items","entering","WalkContinue","TokensStr","__internal_object__","Parent","Type","linkToImgUrl","xhr_1","linkToImgFormat","responseJSON_1","original_1","originalURL","linkToImgCallback","stringify","DOMParser","parseFromString","Sanitize","$j","HTML2VditorIRDOM","oC","processHint","matchLangData_1","key_1","removeInline","aTextElement","hint_awaiter","hint_generator","Hint","hintExtends","splitChar","fillEmoji","preElement","timeId","focusNode","currentLineValue","getKey","emojiHint_1","GetEmojis","matchEmojiData_1","textareaPosition","hintsHTML","hintData","replaceHtml","replaceIndex","defaultView","getPropertyValue","currentHintElement","length_1","currentLastIndex","lastItem","maxLength","preChar","IR","placeholder","bindEvent","linkElement","lastRect","getHTML","VditorDOM2HTML","VditorIRDOM2HTML","Outline","outlineLabel","Preview","classes","copyToX","actions","actionElement","actionHtml","action","btn","actionCustom","w","mdTimeoutId","renderStartTime","responseJSON","startTime","time","performanceTip","cmtFocusElement","copyElement","backgroundImage","Resize","documentSelf","clientY","ondragstart","captureEvents","onmousemove","moveEvent","paddingBottom","onselectstart","onselect","Editor","textScrollTop","textHeight","textScrollHeight","parseFloat","Tip","setPreviewMode","Both_extends","Both","Br","CodeTheme_extends","CodeTheme","ContentTheme_extends","ContentTheme","Counter","Custom_extends","Custom","Devtools_extends","Devtools","Divider","Emoji_extends","Emoji","commonEmojiHTML","emojiValue","tailHTML","emojiTail","download","downloadTip","exportMarkdown","exportPDF","generate","iframe","contentDocument","write","contentWindow","postMessage","exportHTML","Export_extends","Export","Fullscreen_extends","Fullscreen","zIndex","svgElement","fullscreen","Headings_extends","Headings","heading1","heading2","heading3","heading4","heading5","heading6","Help_extends","Help","Indent_extends","Indent","Info_extends","Info","Version","InsertAfter_extends","InsertAfter","InsertBefore_extends","InsertBefore","Outdent_extends","Outdent","Outline_extends","Outline_Outline","Preview_extends","Preview_Preview","toolbars","RecordMedia","context","SAMPLE_RATE","isRecording","readyFlag","leftChannel","rightChannel","recordingLength","AudioContext","webkitAudioContext","DEFAULT_SAMPLE_RATE","sampleRate","volume","createGain","audioInput","createMediaStreamSource","connect","recorder","createScriptProcessor","onaudioprocess","destination","cloneChannelData","leftChannelData","rightChannelData","Float32Array","startRecordingNewWavFile","stopRecording","buildWavFileBlob","leftBuffer","mergeBuffers","rightBuffer","interleaved","downSampleBuffer","totalByteCount","buffer","ArrayBuffer","view","DataView","writeUTFBytes","setUint32","setUint16","subChunk2ByteCount","lng","setInt16","rate","sampleRateRatio","newLength","round","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","desiredChannelBuffer","set","setUint8","Record_extends","Record","mediaRecorder","File","recording","mediaDevices","getUserMedia","audio","mediaStream","inputBuffer","getChannelData","Redo_extends","Redo","Undo_extends","Undo","Upload_extends","Upload_Upload","inputHTML","Toolbar","genItem","panelElement_1","subI","menuItemObj","undo_Undo","stackSize","resetStack","clearStack","undoStack","redoStack","state","renderDiff","hasUndo","G6","addCaret","lastText","diff","patchList","isRedo","redoPatchList","setFocus","cloneElement","Options","mergeToolbar","toolbarItem","toolbarResult","currentMenuItem","defaultMenuItem","WYSIWYG","commentIds","blockStartElement","blockEndElement","NewNodeID","rangeClone","contents","removeStart","removeEnd","wrap","startElement","endElement","Set","comments_1","difference","filter","has","oldIds","removedIds","unbindListener","scrollListener","codeEndElement","aEndElement","aTitle","popoverTop1","popoverTop","scroll","topPx","checkElement","nextRenderElement","src_extends","version","getOptions","contentThemePath","getValue","getCurrentMode","disabled","renderPreview","clearCache","removeItem","disabledCache","enableCache","html2md","exportJSON","RenderJSON","deleteValue","isCollapsed","updateValue","insertValue","tmpElement","setValue","destroy","getCommentIds","hlCommentIds","hlItem","unHlCommentIds","unHlItem","removeCommentIds","removeIds","removeId","_lutePath"],"mappings":"qGAAA,IAAIA,EAAc,EAAQ,QACtBC,EAAW,EAAQ,QAEnBC,EAAQC,KAAKD,MACbE,EAASJ,EAAY,GAAGI,QACxBC,EAAUL,EAAY,GAAGK,SACzBC,EAAcN,EAAY,GAAGO,OAC7BC,EAAuB,8BACvBC,EAAgC,sBAIpCC,EAAOC,QAAU,SAAUC,EAASC,EAAKC,EAAUC,EAAUC,EAAeC,GAC1E,IAAIC,EAAUJ,EAAWF,EAAQO,OAC7BC,EAAIL,EAASI,OACbE,EAAUZ,EAKd,YAJsBa,IAAlBN,IACFA,EAAgBf,EAASe,GACzBK,EAAUb,GAELH,EAAQY,EAAaI,GAAS,SAAUE,EAAOC,GACpD,IAAIC,EACJ,OAAQrB,EAAOoB,EAAI,IACjB,IAAK,IAAK,MAAO,IACjB,IAAK,IAAK,OAAOZ,EACjB,IAAK,IAAK,OAAON,EAAYO,EAAK,EAAGC,GACrC,IAAK,IAAK,OAAOR,EAAYO,EAAKK,GAClC,IAAK,IACHO,EAAUT,EAAcV,EAAYkB,EAAI,GAAI,IAC5C,MACF,QACE,IAAIE,GAAKF,EACT,GAAU,IAANE,EAAS,OAAOH,EACpB,GAAIG,EAAIN,EAAG,CACT,IAAIO,EAAIzB,EAAMwB,EAAI,IAClB,OAAU,IAANC,EAAgBJ,EAChBI,GAAKP,OAA8BE,IAApBP,EAASY,EAAI,GAAmBvB,EAAOoB,EAAI,GAAKT,EAASY,EAAI,GAAKvB,EAAOoB,EAAI,GACzFD,EAETE,EAAUV,EAASW,EAAI,GAE3B,YAAmBJ,IAAZG,EAAwB,GAAKA,O,uBCzCxC,IAAIG,EAAS,EAAQ,QACjBC,EAAO,EAAQ,QACfC,EAAW,EAAQ,QACnBC,EAAa,EAAQ,QACrBC,EAAU,EAAQ,QAClBC,EAAa,EAAQ,QAErBC,EAAYN,EAAOM,UAIvBxB,EAAOC,QAAU,SAAUwB,EAAGC,GAC5B,IAAIC,EAAOF,EAAEE,KACb,GAAIN,EAAWM,GAAO,CACpB,IAAIC,EAAST,EAAKQ,EAAMF,EAAGC,GAE3B,OADe,OAAXE,GAAiBR,EAASQ,GACvBA,EAET,GAAmB,WAAfN,EAAQG,GAAiB,OAAON,EAAKI,EAAYE,EAAGC,GACxD,MAAMF,EAAU,iD,uBCnBlB,IAAIN,EAAS,EAAQ,QACjBW,EAAe,EAAQ,QACvBC,EAAwB,EAAQ,QAChCC,EAAU,EAAQ,QAClBC,EAA8B,EAAQ,QAEtCC,EAAkB,SAAUC,GAE9B,GAAIA,GAAuBA,EAAoBH,UAAYA,EAAS,IAClEC,EAA4BE,EAAqB,UAAWH,GAC5D,MAAOI,GACPD,EAAoBH,QAAUA,IAIlC,IAAK,IAAIK,KAAmBP,EACtBA,EAAaO,IACfH,EAAgBf,EAAOkB,IAAoBlB,EAAOkB,GAAiBC,WAIvEJ,EAAgBH,I,oCCpBhB,IAAIQ,EAAW,EAAQ,QAAgCP,QACnDQ,EAAsB,EAAQ,QAE9BC,EAAgBD,EAAoB,WAIxCvC,EAAOC,QAAWuC,EAGd,GAAGT,QAH2B,SAAiBU,GACjD,OAAOH,EAASI,KAAMD,EAAYE,UAAUlC,OAAS,EAAIkC,UAAU,QAAK/B,K,oFCT1E,W,kCCCA,IAAIgC,EAAQ,EAAQ,QAChBzB,EAAO,EAAQ,QACf7B,EAAc,EAAQ,QACtBuD,EAAgC,EAAQ,QACxCC,EAAQ,EAAQ,QAChB1B,EAAW,EAAQ,QACnBC,EAAa,EAAQ,QACrB0B,EAAsB,EAAQ,QAC9BC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAyB,EAAQ,QACjCC,EAAqB,EAAQ,QAC7BC,EAAY,EAAQ,QACpBC,EAAkB,EAAQ,QAC1BC,EAAa,EAAQ,QACrBC,EAAkB,EAAQ,QAE1BC,EAAUD,EAAgB,WAC1BE,EAAMhE,KAAKgE,IACXC,EAAMjE,KAAKiE,IACXC,EAASrE,EAAY,GAAGqE,QACxBC,EAAOtE,EAAY,GAAGsE,MACtBC,EAAgBvE,EAAY,GAAGwE,SAC/BlE,EAAcN,EAAY,GAAGO,OAE7BkE,EAAgB,SAAUC,GAC5B,YAAcpD,IAAPoD,EAAmBA,EAAKC,OAAOD,IAKpCE,EAAmB,WAErB,MAAkC,OAA3B,IAAIvE,QAAQ,IAAK,MAFH,GAMnBwE,EAA+C,WACjD,QAAI,IAAIX,IAC6B,KAA5B,IAAIA,GAAS,IAAK,MAFsB,GAO/CY,GAAiCtB,GAAM,WACzC,IAAIuB,EAAK,IAOT,OANAA,EAAG1C,KAAO,WACR,IAAIC,EAAS,GAEb,OADAA,EAAO0C,OAAS,CAAEC,EAAG,KACd3C,GAGyB,MAA3B,GAAGjC,QAAQ0E,EAAI,WAIxBxB,EAA8B,WAAW,SAAU2B,EAAGC,EAAeC,GACnE,IAAIC,EAAoBR,EAA+C,IAAM,KAE7E,MAAO,CAGL,SAAiBS,EAAaC,GAC5B,IAAIC,EAAI5B,EAAuBR,MAC3BqC,OAA0BnE,GAAfgE,OAA2BhE,EAAYwC,EAAUwB,EAAapB,GAC7E,OAAOuB,EACH5D,EAAK4D,EAAUH,EAAaE,EAAGD,GAC/B1D,EAAKsD,EAAexB,EAAS6B,GAAIF,EAAaC,IAIpD,SAAUG,EAAQH,GAChB,IAAII,EAAK7D,EAASsB,MACdhB,EAAIuB,EAAS+B,GAEjB,GACyB,iBAAhBH,IAC6C,IAApDhB,EAAcgB,EAAcF,KACW,IAAvCd,EAAcgB,EAAc,MAC5B,CACA,IAAIK,EAAMR,EAAgBD,EAAeQ,EAAIvD,EAAGmD,GAChD,GAAIK,EAAIC,KAAM,OAAOD,EAAIE,MAG3B,IAAIC,EAAoBhE,EAAWwD,GAC9BQ,IAAmBR,EAAe5B,EAAS4B,IAEhD,IAAI3D,EAAS+D,EAAG/D,OAChB,GAAIA,EAAQ,CACV,IAAIoE,EAAcL,EAAGM,QACrBN,EAAGO,UAAY,EAEjB,IAAIC,EAAU,GACd,MAAO,EAAM,CACX,IAAI7D,EAAS0B,EAAW2B,EAAIvD,GAC5B,GAAe,OAAXE,EAAiB,MAGrB,GADAgC,EAAK6B,EAAS7D,IACTV,EAAQ,MAEb,IAAIwE,EAAWzC,EAASrB,EAAO,IACd,KAAb8D,IAAiBT,EAAGO,UAAYrC,EAAmBzB,EAAGsB,EAASiC,EAAGO,WAAYF,IAKpF,IAFA,IAAIK,EAAoB,GACpBC,EAAqB,EAChBC,EAAI,EAAGA,EAAIJ,EAAQhF,OAAQoF,IAAK,CACvCjE,EAAS6D,EAAQI,GAUjB,IARA,IAAI3F,EAAU+C,EAASrB,EAAO,IAC1BxB,EAAWqD,EAAIC,EAAIX,EAAoBnB,EAAOkE,OAAQpE,EAAEjB,QAAS,GACjEJ,EAAW,GAMN0F,EAAI,EAAGA,EAAInE,EAAOnB,OAAQsF,IAAKnC,EAAKvD,EAAU0D,EAAcnC,EAAOmE,KAC5E,IAAIzF,EAAgBsB,EAAO0C,OAC3B,GAAIe,EAAmB,CACrB,IAAIW,EAAerC,EAAO,CAACzD,GAAUG,EAAUD,EAAUsB,QACnCd,IAAlBN,GAA6BsD,EAAKoC,EAAc1F,GACpD,IAAIC,EAAc0C,EAASL,EAAMiC,OAAcjE,EAAWoF,SAE1DzF,EAAc8C,EAAgBnD,EAASwB,EAAGtB,EAAUC,EAAUC,EAAeuE,GAE3EzE,GAAYwF,IACdD,GAAqB/F,EAAY8B,EAAGkE,EAAoBxF,GAAYG,EACpEqF,EAAqBxF,EAAWF,EAAQO,QAG5C,OAAOkF,EAAoB/F,EAAY8B,EAAGkE,QAG5CxB,IAAkCF,GAAoBC,I,oCCtI1D,IAAIzE,EAAS,EAAQ,QAAiCA,OAItDM,EAAOC,QAAU,SAAUyB,EAAGoE,EAAOP,GACnC,OAAOO,GAASP,EAAU7F,EAAOgC,EAAGoE,GAAOrF,OAAS,K,kCCLtD,IAAIwF,EAAI,EAAQ,QACZ/E,EAAS,EAAQ,QACjBgF,EAAkB,EAAQ,QAC1BnD,EAAsB,EAAQ,QAC9BoD,EAAoB,EAAQ,QAC5B5G,EAAW,EAAQ,QACnB6G,EAAqB,EAAQ,QAC7BC,EAAiB,EAAQ,QACzBC,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,UAEnD9E,EAAYN,EAAOM,UACnBiC,EAAMhE,KAAKgE,IACXC,EAAMjE,KAAKiE,IACX8C,EAAmB,iBACnBC,EAAkC,kCAKtCR,EAAE,CAAES,OAAQ,QAASC,OAAO,EAAMC,QAASL,GAAuB,CAChEM,OAAQ,SAAgBC,EAAOC,GAC7B,IAIIC,EAAaC,EAAmBC,EAAGC,EAAGC,EAAMC,EAJ5CvC,EAAIvF,EAASmD,MACb4E,EAAMnB,EAAkBrB,GACxByC,EAAcrB,EAAgBY,EAAOQ,GACrCE,EAAkB7E,UAAUlC,OAWhC,GATwB,IAApB+G,EACFR,EAAcC,EAAoB,EACL,IAApBO,GACTR,EAAc,EACdC,EAAoBK,EAAMC,IAE1BP,EAAcQ,EAAkB,EAChCP,EAAoBvD,EAAID,EAAIV,EAAoBgE,GAAc,GAAIO,EAAMC,IAEtED,EAAMN,EAAcC,EAAoBT,EAC1C,MAAMhF,EAAUiF,GAGlB,IADAS,EAAId,EAAmBtB,EAAGmC,GACrBE,EAAI,EAAGA,EAAIF,EAAmBE,IACjCC,EAAOG,EAAcJ,EACjBC,KAAQtC,GAAGuB,EAAea,EAAGC,EAAGrC,EAAEsC,IAGxC,GADAF,EAAEzG,OAASwG,EACPD,EAAcC,EAAmB,CACnC,IAAKE,EAAII,EAAaJ,EAAIG,EAAML,EAAmBE,IACjDC,EAAOD,EAAIF,EACXI,EAAKF,EAAIH,EACLI,KAAQtC,EAAGA,EAAEuC,GAAMvC,EAAEsC,UACbtC,EAAEuC,GAEhB,IAAKF,EAAIG,EAAKH,EAAIG,EAAML,EAAoBD,EAAaG,WAAYrC,EAAEqC,EAAI,QACtE,GAAIH,EAAcC,EACvB,IAAKE,EAAIG,EAAML,EAAmBE,EAAII,EAAaJ,IACjDC,EAAOD,EAAIF,EAAoB,EAC/BI,EAAKF,EAAIH,EAAc,EACnBI,KAAQtC,EAAGA,EAAEuC,GAAMvC,EAAEsC,UACbtC,EAAEuC,GAGlB,IAAKF,EAAI,EAAGA,EAAIH,EAAaG,IAC3BrC,EAAEqC,EAAII,GAAe5E,UAAUwE,EAAI,GAGrC,OADArC,EAAErE,OAAS6G,EAAML,EAAoBD,EAC9BE,M,kCClEX,IAAIpE,EAAQ,EAAQ,QAEpB9C,EAAOC,QAAU,SAAUwH,EAAaC,GACtC,IAAIC,EAAS,GAAGF,GAChB,QAASE,GAAU7E,GAAM,WAEvB6E,EAAOxG,KAAK,KAAMuG,GAAY,WAAc,MAAM,GAAM,Q,yCCP5D,IAAIE,EAAS,WAAa,IAAIC,EAAInF,KAASoF,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,OAAO,CAACE,YAAY,0BAA0B,CAACL,EAAIM,GAAGN,EAAIO,GAAyB,KAAtBP,EAAIQ,QAAQC,MAAe,MAAQT,EAAIQ,QAAQC,UAAUN,EAAG,OAAO,CAACE,YAAY,6BAA6B,CAACF,EAAG,OAAO,CAACE,YAAY,kCAAkC,CAACF,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,UAAU,QAAU,UAAUC,GAAG,CAAC,MAAQX,EAAIY,aAAa,CAACZ,EAAIM,GAAG,SAAS,GAAGH,EAAG,OAAO,CAACE,YAAY,kCAAkC,CAACF,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,SAAS,QAAU,QAAQC,GAAG,CAAC,MAAQX,EAAIa,YAAY,CAACb,EAAIM,GAAG,WAAW,GAAGH,EAAG,OAAO,CAACE,YAAY,kCAAkC,CAACF,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,UAAU,QAAU,QAAQC,GAAG,CAAC,MAAQX,EAAIc,UAAU,CAACd,EAAIM,GAAG,SAAS,GAAGH,EAAG,OAAO,CAACE,YAAY,kCAAkC,CAACF,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,UAAU,QAAU,QAAQC,GAAG,CAAC,MAAQX,EAAIe,gBAAgB,CAACf,EAAIM,GAAG,SAAS,OAAOH,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,UAAU,CAACO,MAAM,CAAC,KAAO,QAAQ,YAAc,SAASM,MAAM,CAACzD,MAAOyC,EAAIQ,QAAa,MAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,QAASU,IAAME,WAAW,oBAAoB,GAAGjB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,SAAS,CAACO,MAAM,CAAC,gBAAkBV,EAAIQ,QAAQa,iBAAiBV,GAAG,CAAC,cAAgBX,EAAIsB,gBAAgB,UAAYtB,EAAIuB,cAAc,GAAGpB,EAAG,SAAS,CAACO,MAAM,CAAC,aAAe,UAAU,CAACP,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,SAASc,YAAYxB,EAAIyB,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACxB,EAAG,OAAO,CAACyB,YAAY,CAAC,eAAe,OAAOlB,MAAM,CAAC,KAAO,aAAaV,EAAIM,GAAG,YAAYuB,OAAM,MAAS,CAAC1B,EAAG,MAAM,CAACE,YAAY,gCAAgC,CAACF,EAAG,SAAS,CAAC2B,IAAI,OAAOpB,MAAM,CAAC,WAAa,MAAM,OAAQ,IAAO,CAACP,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,OAAO,KAAO,OAAO,KAAO,kCACjzD,KAArBV,EAAIQ,QAAQuB,KAAc,SAAW/B,EAAIQ,QAAQuB,QAAQ,CAAC5B,EAAG,UAAU,CAACO,MAAM,CAAC,YAAc,sBAAsBM,MAAM,CAACzD,MAAOyC,EAAIQ,QAAY,KAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,OAAQU,IAAME,WAAW,mBAAmB,GAAGjB,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,OAAO,KAAO,mBAAmB,CAACP,EAAG,WAAW,CAACa,MAAM,CAACzD,MAAOyC,EAAIQ,QAAsB,eAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,iBAAkBU,IAAME,WAAW,6BAA6B,GAAGjB,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,OAAO,KAAO,UAAU,CAACP,EAAG,WAAW,CAACa,MAAM,CAACzD,MAAOyC,EAAIQ,QAAa,MAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,QAASU,IAAME,WAAW,oBAAoB,GAAGjB,EAAG,aAAaA,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,KAAK,KAAO,aAAa,CAACP,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,mBAAmB,CAACO,MAAM,CAAC,QAAUV,EAAIgC,iBAAiBhB,MAAM,CAACzD,MAAOyC,EAAIQ,QAAkB,WAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,aAAcU,IAAME,WAAW,wBAAwBjB,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACF,EAAG,MAAM,CAACE,YAAY,oCAAoC,CAACF,EAAG,WAAW,CAAC8B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAS5E,OAAQyC,EAAIoC,oBAAqBhB,WAAW,yBAAyBV,MAAM,CAAC,MAAQ,WAAWC,GAAG,CAAC,MAAQ,SAAS0B,GAAQrC,EAAIoC,qBAAsB,KAAQ,CAACjC,EAAG,WAAW,CAACO,MAAM,CAAC,KAAO,OAAO,KAAO,SAAS4B,KAAK,SAAStC,EAAIM,GAAG,SAAS,IAAI,GAAGH,EAAG,MAAM,CAACE,YAAY,kCAAkC,CAACF,EAAG,SAAS,CAAC8B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAS5E,MAAOyC,EAAuB,oBAAEoB,WAAW,wBAAwBU,IAAI,OAAOpB,MAAM,CAAC,KAAOV,EAAIuC,YAAY,mBAAqB,SAAS,WAAa,MAAM,CAACpC,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACF,EAAG,cAAc,CAACO,MAAM,CAAC,KAAO,SAAS,CAACP,EAAG,UAAU,CAACO,MAAM,CAAC,YAAc,QAAQM,MAAM,CAACzD,MAAOyC,EAAIuC,YAAgB,KAAEtB,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIuC,YAAa,OAAQrB,IAAME,WAAW,uBAAuB,IAAI,GAAGjB,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACF,EAAG,cAAc,CAACO,MAAM,CAAC,KAAO,OAAO,KAAO,mCAC5+D,KAAzBV,EAAIuC,YAAYR,KACb,SACA/B,EAAIuC,YAAYR,QAAQ,CAAC5B,EAAG,UAAU,CAACO,MAAM,CAAC,YAAc,QAAQM,MAAM,CAACzD,MAAOyC,EAAIuC,YAAgB,KAAEtB,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIuC,YAAa,OAAQrB,IAAME,WAAW,uBAAuB,IAAI,GAAGjB,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACF,EAAG,cAAc,CAACA,EAAG,WAAW,CAACyB,YAAY,CAAC,eAAe,QAAQlB,MAAM,CAAC,MAAQ,WAAWC,GAAG,CAAC,MAAQX,EAAIwC,uBAAuB,CAACxC,EAAIM,GAAG,QAAQH,EAAG,WAAW,CAACyB,YAAY,CAAC,eAAe,QAAQlB,MAAM,CAAC,MAAQ,UAAU,QAAU,QAAQC,GAAG,CAAC,MAAQX,EAAIyC,uBAAuB,CAACzC,EAAIM,GAAG,SAAS,IAAI,MAAM,MAAM,KAAKH,EAAG,aAAaA,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,KAAK,KAAO,SAAS,CAACP,EAAG,WAAW,CAACO,MAAM,CAAC,UAAY,GAAG,WAAa,GAAG,SAAW,GAAG,gBAAkB,EAAE,QAAUV,EAAI0C,YAAY/B,GAAG,CAAC,OAASX,EAAI2C,iBAAiB3B,MAAM,CAACzD,MAAOyC,EAAIQ,QAAY,KAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,OAAQU,IAAME,WAAW,mBAAmB,GAAGjB,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,KAAK,KAAO,YAAY,CAACP,EAAG,aAAa,CAACO,MAAM,CAAC,YAAc,kBAAkB,KAAO,UAAU,SAAW,CAAEkC,QAAS,IAAK5B,MAAM,CAACzD,MAAOyC,EAAIQ,QAAe,QAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,UAAWU,IAAME,WAAW,sBAAsB,GAAGjB,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,MAAM,KAAO,UAAU,CAACP,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,MAAM,CAACO,MAAM,CAAC,IAA4B,KAAtBV,EAAIQ,QAAQqC,MACt4C,mDACA7C,EAAIQ,QAAQqC,WAAW1C,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,UAAU,CAACO,MAAM,CAAC,UAAY,GAAG,YAAc,qBAAqBM,MAAM,CAACzD,MAAOyC,EAAIQ,QAAa,MAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,QAASU,IAAME,WAAW,oBAAoB,QAAQ,IAAI,KAAKjB,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,YAAYc,YAAYxB,EAAIyB,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACxB,EAAG,OAAO,CAACyB,YAAY,CAAC,eAAe,OAAOlB,MAAM,CAAC,KAAO,cAAcV,EAAIM,GAAG,YAAYuB,OAAM,MAAS,CAAC1B,EAAG,MAAM,CAACE,YAAY,mCAAmC,CAACF,EAAG,SAAS,CAAC2B,IAAI,OAAOpB,MAAM,CAAC,WAAa,MAAM,OAAQ,IAAO,CAACP,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,OAAO,KAAO,aAAa,CAACP,EAAG,UAAU,CAACO,MAAM,CAAC,KAAO,WAAW,YAAc,IAAIM,MAAM,CAACzD,MAAOyC,EAAIQ,QAAgB,SAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,WAAYU,IAAME,WAAW,uBAAuB,GAAGjB,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,UAAU,KAAO,aAAa,CAACP,EAAG,WAAW,CAACO,MAAM,CAAC,UAAY,GAAG,WAAa,GAAG,SAAW,GAAG,YAAc,kBAAkB,QAAUV,EAAI8C,kBAAkB,gBAAkB,GAAGnC,GAAG,CAAC,OAASX,EAAI+C,kBAAkB/B,MAAM,CAACzD,MAAOyC,EAAIQ,QAAmB,YAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,cAAeU,IAAME,WAAW,0BAA0B,GAAGjB,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,SAAS,KAAO,gBAAgB,CAACP,EAAG,aAAa,CAACO,MAAM,CAAC,YAAc,iBAAiB,KAAO,iBAAiB,SAAW,CAAEkC,QAAS,IAAK5B,MAAM,CAACzD,MAAOyC,EAAIQ,QAAsB,eAAES,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIQ,QAAS,iBAAkBU,IAAME,WAAW,6BAA6B,IAAI,IAAI,MAAM,GAAGjB,EAAG,WAAW,CAACO,MAAM,CAAC,OAAS,OAAO,QAAUV,EAAIgD,oBAAoB,KAAO,QAAQ,eAAiB,WAAc,OAAQhD,EAAIgD,qBAAsB,GAAU,UAAY,WAAc,OAAQhD,EAAIgD,qBAAsB,GAAU,UAAY,SAASrC,GAAG,CAAC,OAAS,SAAS0B,GAAQrC,EAAIgD,qBAAsB,KAAS,CAAC7C,EAAG,IAAI,CAACH,EAAIM,GAAG,cAAc,IAC57D2C,EAAkB,GCPlB,G,4DAAS,WAAa,IAAIjD,EAAInF,KAASoF,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACO,MAAM,CAAC,GAAK,cAClH,EAAkB,G,qBCOtB,G,UAAA,CACEwC,KADF,WAEI,MAAO,CACLC,cAAe,OAGnBC,MAAO,CACLC,eAAgB,CACdC,KAAMlH,OACNmH,UAAU,EACVC,QAAS,KAGbC,QAAS,CACPC,cADJ,WAEM7I,KAAK8I,MACX,gBACA,8BACA,+BAGIpC,UARJ,SAQA,GACM1G,KAAK8I,MACX,YACA,KAIEC,QA5BF,WA4BA,WACI/I,KAAKsI,cAAgB,IAAI,EAA7B,YACMU,OAAQ,IACRC,KAAM,WACNC,MAAOlJ,KAAK6I,cACZM,QAAS,CACPC,QAAQ,EACRX,KAAM,OACNY,MAAO,SAAf,GACU,EAAV,eAGMpD,QAAS,CACPqD,MAAO,IAETC,QAAS,CACPH,QAAQ,GAEVI,MAAO,CACLJ,QAAQ,GAEVC,MAAO,WACD,EAAZ,wBACU,EAAV,sCAEU,EAAV,0CAEQ,EAAR,gDAIEI,MAAO,CAEL,0BAA2B,CACzBC,MAAM,EACNC,QAAS,SAAf,GAEYC,EACF5J,KAAKsI,cAAcuB,SAAS,OAAQ,QAEpC7J,KAAKsI,cAAcuB,SAAS,UAAW,cC5E8S,I,YCO3VC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,gCC0Nf,GACEzC,KAAM,cACNgB,KAFF,WAGI,MAAO,CACLF,qBAAqB,EACrBxC,QAAS,CACPC,MAAO,GACPY,gBAAiB,GACjBuD,cAAe,GACf7C,KAAM,GACN8C,gBAAgB,EAChBC,OAAO,EACPC,WAAY,GACZC,KAAM,GACNC,QAAS,GACTpC,MAAO,GACPqC,SAAU,GACVC,UAAW,EACXC,YAAa,GACbC,eAAgB,GAChBC,OAAQ,GAEVtD,gBAAiB,GACjBU,WAAY,GACZI,kBAAmB,GACnBV,qBAAqB,EACrBG,YAAa,CACXL,KAAM,GACNH,KAAM,MAIZ0B,QAAS,CAEPnC,gBAFJ,SAEA,KACMzG,KAAK2F,QAAQa,gBAAkBA,EAC/BxG,KAAK2F,QAAQoE,cAAgBA,GAG/BrD,UAPJ,SAOA,GACM1G,KAAK2F,QAAQ2E,UAAYvM,GAE3BiI,UAVJ,WAWM0E,QAAQC,IAAI,SAEd1E,QAbJ,WAcMyE,QAAQC,IAAI,OAEd5E,WAhBJ,WAiBM/F,KAAKmI,qBAAsB,GAE7BjC,cAnBJ,WAmBA,WAEiC,KAAvBlG,KAAK2F,QAAQC,MAIjB5F,KAAK4K,SACX,6BACA,kBACA,eACU,EAAV,yBACU,EAAV,cAAY,KAAZ,oBAGA,kBACQ,EAAR,4BAZQ5K,KAAK6K,SAASC,QAAQ,aAgB1BnD,qBAtCJ,WAsCA,WAEM3H,KAAK0H,YAAYL,KAAOrH,KAAK0H,YAAYL,KAAKpK,QAAQ,OAAQ,IAC9D+C,KAAK0H,YAAYR,KAAOlH,KAAK0H,YAAYR,KAAKjK,QAAQ,OAAQ,IAChC,KAA1B+C,KAAK0H,YAAYL,KAIS,KAA1BrH,KAAK0H,YAAYR,KAIrBlH,KAAK4K,SACX,kCACA,kBACA,eACU,EAAV,2BACU,EAAV,sBACY,MAAZ,UACY,MAAZ,cAEU,EAAV,2BAGA,kBACQ,EAAR,8BAhBQ5K,KAAK6K,SAASC,QAAQ,YAJtB9K,KAAK6K,SAASC,QAAQ,aAwB1BlD,qBAnEJ,WAoEM5H,KAAK0H,YAAYL,KAAO,GACxBrH,KAAK0H,YAAYR,KAAO,GACxBlH,KAAKuH,qBAAsB,GAE7BO,gBAxEJ,SAwEA,cAEM,GADApF,EAAQA,EAAMzF,QAAQ,OAAQ,IAChB,KAAVyF,EAAJ,CAIA,IAAIqI,EAAS,CACX1D,KAAM3E,EACNwE,KAAMxE,GAER1C,KAAK4K,SACX,cACA,kBACQ,EAAR,2BACQ,EAAR,iBACU,MAAV,UACU,MAAV,cAEQ,EAAR,iDACQ,EAAR,gCAEA,kBACQ,EAAR,iDACQ,EAAR,iCApBQ5K,KAAK6K,SAASC,QAAQ,WAwB1B5C,iBAnGJ,SAmGA,GACMlI,KAAKiI,kBAAkB/G,KAAK,CAC1BwB,MAAR,EACQsI,MAAOtI,MAIbuI,WAAY,CAAd,qCACElC,QA3IF,WA2IA,WAEI/I,KAAK4K,SAASM,IAAI,cAAcC,MAAK,SAAzC,GACM3I,EAAI6F,KAAKhJ,SAAQ,SAAvB,GACQ,EAAR,sBACUqD,MAAO0I,EAASC,GAChBL,MAAOI,EAAS/D,aAMtBrH,KAAK4K,SAASM,IAAI,QAAQC,MAAK,SAAnC,GACM3I,EAAI6F,KAAKhJ,SAAQ,SAAvB,GACQ,EAAR,iBACUqD,MAAO4I,EAAID,GACXL,MAAOM,EAAIjE,eCvY+U,ICQhW,G,UAAY,eACd,EACAnC,EACAkD,GACA,EACA,KACA,WACA,OAIa,e,2CCjBf,EAAQ,QACR,IAAIxL,EAAc,EAAQ,QACtB2O,EAAW,EAAQ,QACnB1M,EAAa,EAAQ,QACrBuB,EAAQ,EAAQ,QAChBS,EAAkB,EAAQ,QAC1BvB,EAA8B,EAAQ,QAEtCkM,EAAU3K,EAAgB,WAC1B4K,EAAkBC,OAAO/L,UAE7BrC,EAAOC,QAAU,SAAUoO,EAAK1M,EAAM2M,EAAQC,GAC5C,IAAIC,EAASjL,EAAgB8K,GAEzBI,GAAuB3L,GAAM,WAE/B,IAAIgC,EAAI,GAER,OADAA,EAAE0J,GAAU,WAAc,OAAO,GACZ,GAAd,GAAGH,GAAKvJ,MAGb4J,EAAoBD,IAAwB3L,GAAM,WAEpD,IAAI6L,GAAa,EACbtK,EAAK,IAkBT,MAhBY,UAARgK,IAIFhK,EAAK,GAGLA,EAAGuK,YAAc,GACjBvK,EAAGuK,YAAYV,GAAW,WAAc,OAAO7J,GAC/CA,EAAGwK,MAAQ,GACXxK,EAAGmK,GAAU,IAAIA,IAGnBnK,EAAG1C,KAAO,WAAiC,OAAnBgN,GAAa,EAAa,MAElDtK,EAAGmK,GAAQ,KACHG,KAGV,IACGF,IACAC,GACDJ,EACA,CACA,IAAIQ,EAA8BxP,EAAY,IAAIkP,IAC9ClD,EAAU3J,EAAK6M,EAAQ,GAAGH,IAAM,SAAUU,EAAcC,EAAQ7O,EAAK8O,EAAMC,GAC7E,IAAIC,EAAwB7P,EAAYyP,GACpCK,EAAQJ,EAAOrN,KACnB,OAAIyN,IAAU7N,GAAc6N,IAAUjB,EAAgBxM,KAChD8M,IAAwBS,EAInB,CAAE/J,MAAM,EAAMC,MAAO0J,EAA4BE,EAAQ7O,EAAK8O,IAEhE,CAAE9J,MAAM,EAAMC,MAAO+J,EAAsBhP,EAAK6O,EAAQC,IAE1D,CAAE9J,MAAM,MAGjB8I,EAAShK,OAAO5B,UAAWgM,EAAK/C,EAAQ,IACxC2C,EAASE,EAAiBK,EAAQlD,EAAQ,IAGxCiD,GAAMvM,EAA4BmM,EAAgBK,GAAS,QAAQ,K;;;;;;;;;;;;;;;;;;;;;;;;;;;CC9CzE,SAA2Ca,EAAMC,GAE/CtP,EAAOC,QAAUqP,KAFnB,CASG5M,GAAM,WACT,MAAgB,MACN,IAAI6M,EAAsB,CAE9BC,IACExP,IA8BR,IAAIyP,EAAmB,WAIrB/M,KAAKgN,aAAe,EAEpBhN,KAAKiN,cAAgB,EAErBjN,KAAKkN,gBAAkB,GAIvBlN,KAAKmN,eAAiB,IAKtBnN,KAAKoN,sBAAwB,GAE7BpN,KAAKqN,aAAe,EAEpBrN,KAAKsN,cAAgB,IAUnBC,GAAe,EACfC,EAAc,EACdC,EAAa,EAWjBV,EAAiBW,KAAO,SAAUC,EAAIC,GACpC,MAAO,CAACD,EAAIC,IAiBdb,EAAiBpN,UAAUkO,UAAY,SAAUC,EAAOC,EAAOC,EAAgBC,GAElD,oBAAhBA,IAEPA,EADEjO,KAAKgN,cAAgB,EACRkB,OAAOC,WAEP,IAAIC,MAAOC,UAAgC,IAApBrO,KAAKgN,cAI/C,IAAIsB,EAAWL,EAEf,GAAa,MAATH,GAA0B,MAATC,EACnB,MAAM,IAAIQ,MAAM,2BAIlB,GAAIT,GAASC,EACX,OAAID,EACK,CAAC,IAAIf,EAAiBW,KAAKD,EAAYK,IAGzC,GAGoB,oBAAlBE,IACTA,GAAiB,GAGnB,IAAIQ,EAAaR,EAEbS,EAAezO,KAAK0O,kBAAkBZ,EAAOC,GAC7CY,EAAeb,EAAMc,UAAU,EAAGH,GACtCX,EAAQA,EAAMc,UAAUH,GACxBV,EAAQA,EAAMa,UAAUH,GAExBA,EAAezO,KAAK6O,kBAAkBf,EAAOC,GAC7C,IAAIe,EAAehB,EAAMc,UAAUd,EAAM/P,OAAS0Q,GAClDX,EAAQA,EAAMc,UAAU,EAAGd,EAAM/P,OAAS0Q,GAC1CV,EAAQA,EAAMa,UAAU,EAAGb,EAAMhQ,OAAS0Q,GAE1C,IAAIM,EAAQ/O,KAAKgP,cAAclB,EAAOC,EAAOS,EAAYF,GAWzD,OATIK,GACFI,EAAME,QAAQ,IAAIlC,EAAiBW,KAAKD,EAAYkB,IAGlDG,GACFC,EAAM7N,KAAK,IAAI6L,EAAiBW,KAAKD,EAAYqB,IAGnD9O,KAAKkP,kBAAkBH,GAChBA,GAgBThC,EAAiBpN,UAAUqP,cAAgB,SAAUlB,EAAOC,EAAOS,EAAYF,GAC7E,IAAIS,EAEJ,IAAKjB,EAEH,MAAO,CAAC,IAAIf,EAAiBW,KAAKF,EAAaO,IAGjD,IAAKA,EAEH,MAAO,CAAC,IAAIhB,EAAiBW,KAAKH,EAAaO,IAGjD,IAAIqB,EAAWrB,EAAM/P,OAASgQ,EAAMhQ,OAAS+P,EAAQC,EACjDqB,EAAYtB,EAAM/P,OAASgQ,EAAMhQ,OAASgQ,EAAQD,EAClD3K,EAAIgM,EAAS/N,QAAQgO,GAEzB,IAAU,GAANjM,EAQF,OANA4L,EAAQ,CAAC,IAAIhC,EAAiBW,KAAKF,EAAa2B,EAASP,UAAU,EAAGzL,IAAK,IAAI4J,EAAiBW,KAAKD,EAAY2B,GAAY,IAAIrC,EAAiBW,KAAKF,EAAa2B,EAASP,UAAUzL,EAAIiM,EAAUrR,UAEjM+P,EAAM/P,OAASgQ,EAAMhQ,SACvBgR,EAAM,GAAG,GAAKA,EAAM,GAAG,GAAKxB,GAGvBwB,EAGT,GAAwB,GAApBK,EAAUrR,OAGZ,MAAO,CAAC,IAAIgP,EAAiBW,KAAKH,EAAaO,GAAQ,IAAIf,EAAiBW,KAAKF,EAAaO,IAIhG,IAAIsB,EAAKrP,KAAKsP,gBAAgBxB,EAAOC,GAErC,GAAIsB,EAAI,CAEN,IAAIE,EAAUF,EAAG,GACbG,EAAUH,EAAG,GACbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,GACbM,EAAaN,EAAG,GAEhBO,EAAU5P,KAAK6N,UAAU0B,EAASE,EAASjB,EAAYF,GACvDuB,EAAU7P,KAAK6N,UAAU2B,EAASE,EAASlB,EAAYF,GAE3D,OAAOsB,EAAQ3O,OAAO,CAAC,IAAI8L,EAAiBW,KAAKD,EAAYkC,IAAcE,GAG7E,OAAIrB,GAAcV,EAAM/P,OAAS,KAAOgQ,EAAMhQ,OAAS,IAC9CiC,KAAK8P,eAAehC,EAAOC,EAAOO,GAGpCtO,KAAK+P,aAAajC,EAAOC,EAAOO,IAczCvB,EAAiBpN,UAAUmQ,eAAiB,SAAUhC,EAAOC,EAAOO,GAElE,IAAIzM,EAAI7B,KAAKgQ,mBAAmBlC,EAAOC,GACvCD,EAAQjM,EAAEoO,OACVlC,EAAQlM,EAAEqO,OACV,IAAIC,EAAYtO,EAAEuO,UACdrB,EAAQ/O,KAAK6N,UAAUC,EAAOC,GAAO,EAAOO,GAEhDtO,KAAKqQ,mBAAmBtB,EAAOoB,GAE/BnQ,KAAKsQ,qBAAqBvB,GAG1BA,EAAM7N,KAAK,IAAI6L,EAAiBW,KAAKD,EAAY,KACjD,IAAI8C,EAAU,EACVC,EAAe,EACfC,EAAe,EACfC,EAAc,GACdC,EAAc,GAElB,MAAOJ,EAAUxB,EAAMhR,OAAQ,CAC7B,OAAQgR,EAAMwB,GAAS,IACrB,KAAK/C,EACHiD,IACAE,GAAe5B,EAAMwB,GAAS,GAC9B,MAEF,KAAKhD,EACHiD,IACAE,GAAe3B,EAAMwB,GAAS,GAC9B,MAEF,KAAK9C,EAEH,GAAI+C,GAAgB,GAAKC,GAAgB,EAAG,CAE1C1B,EAAM5K,OAAOoM,EAAUC,EAAeC,EAAcD,EAAeC,GACnEF,EAAUA,EAAUC,EAAeC,EAGnC,IAFA,IAAIG,EAAU5Q,KAAK6N,UAAU6C,EAAaC,GAAa,EAAOrC,GAErDjL,EAAIuN,EAAQ7S,OAAS,EAAGsF,GAAK,EAAGA,IACvC0L,EAAM5K,OAAOoM,EAAS,EAAGK,EAAQvN,IAGnCkN,GAAoBK,EAAQ7S,OAG9B0S,EAAe,EACfD,EAAe,EACfE,EAAc,GACdC,EAAc,GACd,MAGJJ,IAKF,OAFAxB,EAAM8B,MAEC9B,GAcThC,EAAiBpN,UAAUoQ,aAAe,SAAUjC,EAAOC,EAAOO,GAWhE,IATA,IAAIwC,EAAehD,EAAM/P,OACrBgT,EAAehD,EAAMhQ,OACrBiT,EAAQjU,KAAKkU,MAAMH,EAAeC,GAAgB,GAClDG,EAAWF,EACXG,EAAW,EAAIH,EACfI,EAAK,IAAIC,MAAMF,GACfG,EAAK,IAAID,MAAMF,GAGVI,EAAI,EAAGA,EAAIJ,EAAUI,IAC5BH,EAAGG,IAAM,EACTD,EAAGC,IAAM,EAGXH,EAAGF,EAAW,GAAK,EACnBI,EAAGJ,EAAW,GAAK,EAYnB,IAXA,IAAIM,EAAQV,EAAeC,EAGvBU,EAAQD,EAAQ,GAAK,EAGrBE,EAAU,EACVC,EAAQ,EACRC,EAAU,EACVC,EAAQ,EAEHC,EAAI,EAAGA,EAAId,EAAOc,IAAK,CAE9B,IAAI,IAAI1D,MAAOC,UAAYC,EACzB,MAIF,IAAK,IAAIyD,GAAMD,EAAIJ,EAASK,GAAMD,EAAIH,EAAOI,GAAM,EAAG,CACpD,IAAIC,EAAYd,EAAWa,EAIzBE,EADEF,IAAOD,GAAKC,GAAMD,GAAKV,EAAGY,EAAY,GAAKZ,EAAGY,EAAY,GACvDZ,EAAGY,EAAY,GAEfZ,EAAGY,EAAY,GAAK,EAG3B,IAAIE,EAAKD,EAAKF,EAEd,MAAOE,EAAKnB,GAAgBoB,EAAKnB,GAAgBjD,EAAM9Q,OAAOiV,IAAOlE,EAAM/Q,OAAOkV,GAChFD,IACAC,IAKF,GAFAd,EAAGY,GAAaC,EAEZA,EAAKnB,EAEPa,GAAS,OACJ,GAAIO,EAAKnB,EAEdW,GAAW,OACN,GAAID,EAAO,CAChB,IAAIU,EAAYjB,EAAWM,EAAQO,EAEnC,GAAII,GAAa,GAAKA,EAAYhB,IAA8B,GAAlBG,EAAGa,GAAkB,CAEjE,IAAIC,EAAKtB,EAAeQ,EAAGa,GAE3B,GAAIF,GAAMG,EAER,OAAOpS,KAAKqS,kBAAkBvE,EAAOC,EAAOkE,EAAIC,EAAI5D,KAO5D,IAAK,IAAIgE,GAAMR,EAAIF,EAASU,GAAMR,EAAID,EAAOS,GAAM,EAAG,CAChDH,EAAYjB,EAAWoB,EAIzBF,EADEE,IAAOR,GAAKQ,GAAMR,GAAKR,EAAGa,EAAY,GAAKb,EAAGa,EAAY,GACvDb,EAAGa,EAAY,GAEfb,EAAGa,EAAY,GAAK,EAG3B,IAAII,EAAKH,EAAKE,EAEd,MAAOF,EAAKtB,GAAgByB,EAAKxB,GAAgBjD,EAAM9Q,OAAO8T,EAAesB,EAAK,IAAMrE,EAAM/Q,OAAO+T,EAAewB,EAAK,GACvHH,IACAG,IAKF,GAFAjB,EAAGa,GAAaC,EAEZA,EAAKtB,EAEPe,GAAS,OACJ,GAAIU,EAAKxB,EAEda,GAAW,OACN,IAAKH,EAAO,CACbO,EAAYd,EAAWM,EAAQc,EAEnC,GAAIN,GAAa,GAAKA,EAAYb,IAA8B,GAAlBC,EAAGY,GAAkB,CACjE,IAAIC,EAAKb,EAAGY,GACRE,EAAKhB,EAAWe,EAAKD,EAIzB,GAFAI,EAAKtB,EAAesB,EAEhBH,GAAMG,EAER,OAAOpS,KAAKqS,kBAAkBvE,EAAOC,EAAOkE,EAAIC,EAAI5D,MAS9D,MAAO,CAAC,IAAIvB,EAAiBW,KAAKH,EAAaO,GAAQ,IAAIf,EAAiBW,KAAKF,EAAaO,KAehGhB,EAAiBpN,UAAU0S,kBAAoB,SAAUvE,EAAOC,EAAOwD,EAAGiB,EAAGlE,GAC3E,IAAImE,EAAS3E,EAAMc,UAAU,EAAG2C,GAC5BmB,EAAS3E,EAAMa,UAAU,EAAG4D,GAC5BG,EAAS7E,EAAMc,UAAU2C,GACzBqB,EAAS7E,EAAMa,UAAU4D,GAEzBzD,EAAQ/O,KAAK6N,UAAU4E,EAAQC,GAAQ,EAAOpE,GAC9CuE,EAAS7S,KAAK6N,UAAU8E,EAAQC,GAAQ,EAAOtE,GACnD,OAAOS,EAAM9N,OAAO4R,IAetB9F,EAAiBpN,UAAUqQ,mBAAqB,SAAUlC,EAAOC,GAC/D,IAAIqC,EAAY,GAEZ0C,EAAW,GAcf,SAASC,EAAwBnF,GAC/B,IAAIoF,EAAQ,GAIRC,EAAY,EACZC,GAAW,EAEXC,EAAkB/C,EAAUrS,OAEhC,MAAOmV,EAAUtF,EAAK7P,OAAS,EAAG,CAChCmV,EAAUtF,EAAKxM,QAAQ,KAAM6R,IAEb,GAAZC,IACFA,EAAUtF,EAAK7P,OAAS,GAG1B,IAAIqV,EAAOxF,EAAKgB,UAAUqE,EAAWC,EAAU,IAE3CJ,EAASO,eAAiBP,EAASO,eAAeD,QAA2BlV,IAAnB4U,EAASM,IACrEJ,GAASzR,OAAO+R,aAAaR,EAASM,KAElCD,GAAmBI,IAGrBH,EAAOxF,EAAKgB,UAAUqE,GACtBC,EAAUtF,EAAK7P,QAGjBiV,GAASzR,OAAO+R,aAAaH,GAC7BL,EAASM,GAAQD,EACjB/C,EAAU+C,KAAqBC,GAGjCH,EAAYC,EAAU,EAGxB,OAAOF,EA/CT5C,EAAU,GAAK,GAmDf,IAAImD,EAAW,IACXtD,EAAS8C,EAAwBjF,GACrCyF,EAAW,MACX,IAAIrD,EAAS6C,EAAwBhF,GACrC,MAAO,CACLkC,OAAQA,EACRC,OAAQA,EACRE,UAAWA,IAYfrD,EAAiBpN,UAAU0Q,mBAAqB,SAAUtB,EAAOqB,GAC/D,IAAK,IAAIjN,EAAI,EAAGA,EAAI4L,EAAMhR,OAAQoF,IAAK,CAIrC,IAHA,IAAI6P,EAAQjE,EAAM5L,GAAG,GACjByK,EAAO,GAEFvK,EAAI,EAAGA,EAAI2P,EAAMjV,OAAQsF,IAChCuK,EAAKvK,GAAK+M,EAAU4C,EAAMQ,WAAWnQ,IAGvC0L,EAAM5L,GAAG,GAAKyK,EAAK6F,KAAK,MAY5B1G,EAAiBpN,UAAU+O,kBAAoB,SAAUZ,EAAOC,GAE9D,IAAKD,IAAUC,GAASD,EAAM9Q,OAAO,IAAM+Q,EAAM/Q,OAAO,GACtD,OAAO,EAKT,IAAI0W,EAAa,EACbC,EAAa5W,KAAKiE,IAAI8M,EAAM/P,OAAQgQ,EAAMhQ,QAC1C6V,EAAaD,EACbE,EAAe,EAEnB,MAAOH,EAAaE,EACd9F,EAAMc,UAAUiF,EAAcD,IAAe7F,EAAMa,UAAUiF,EAAcD,IAC7EF,EAAaE,EACbC,EAAeH,GAEfC,EAAaC,EAGfA,EAAa7W,KAAKD,OAAO6W,EAAaD,GAAc,EAAIA,GAG1D,OAAOE,GAUT7G,EAAiBpN,UAAUkP,kBAAoB,SAAUf,EAAOC,GAE9D,IAAKD,IAAUC,GAASD,EAAM9Q,OAAO8Q,EAAM/P,OAAS,IAAMgQ,EAAM/Q,OAAO+Q,EAAMhQ,OAAS,GACpF,OAAO,EAKT,IAAI2V,EAAa,EACbC,EAAa5W,KAAKiE,IAAI8M,EAAM/P,OAAQgQ,EAAMhQ,QAC1C6V,EAAaD,EACbG,EAAa,EAEjB,MAAOJ,EAAaE,EACd9F,EAAMc,UAAUd,EAAM/P,OAAS6V,EAAY9F,EAAM/P,OAAS+V,IAAe/F,EAAMa,UAAUb,EAAMhQ,OAAS6V,EAAY7F,EAAMhQ,OAAS+V,IACrIJ,EAAaE,EACbE,EAAaJ,GAEbC,EAAaC,EAGfA,EAAa7W,KAAKD,OAAO6W,EAAaD,GAAc,EAAIA,GAG1D,OAAOE,GAYT7G,EAAiBpN,UAAUoU,oBAAsB,SAAUjG,EAAOC,GAEhE,IAAI+C,EAAehD,EAAM/P,OACrBgT,EAAehD,EAAMhQ,OAEzB,GAAoB,GAAhB+S,GAAqC,GAAhBC,EACvB,OAAO,EAILD,EAAeC,EACjBjD,EAAQA,EAAMc,UAAUkC,EAAeC,GAC9BD,EAAeC,IACxBhD,EAAQA,EAAMa,UAAU,EAAGkC,IAG7B,IAAIkD,EAAcjX,KAAKiE,IAAI8P,EAAcC,GAEzC,GAAIjD,GAASC,EACX,OAAOiG,EAMT,IAAIC,EAAO,EACPlW,EAAS,EAEb,MAAO,EAAM,CACX,IAAImW,EAAUpG,EAAMc,UAAUoF,EAAcjW,GACxCoW,EAAQpG,EAAM3M,QAAQ8S,GAE1B,IAAc,GAAVC,EACF,OAAOF,EAGTlW,GAAUoW,EAEG,GAATA,GAAcrG,EAAMc,UAAUoF,EAAcjW,IAAWgQ,EAAMa,UAAU,EAAG7Q,KAC5EkW,EAAOlW,EACPA,OAiBNgP,EAAiBpN,UAAU2P,gBAAkB,SAAUxB,EAAOC,GAC5D,GAAI/N,KAAKgN,cAAgB,EAEvB,OAAO,KAGT,IAAImC,EAAWrB,EAAM/P,OAASgQ,EAAMhQ,OAAS+P,EAAQC,EACjDqB,EAAYtB,EAAM/P,OAASgQ,EAAMhQ,OAASgQ,EAAQD,EAEtD,GAAIqB,EAASpR,OAAS,GAAwB,EAAnBqR,EAAUrR,OAAaoR,EAASpR,OACzD,OAAO,KAGT,IAAIqW,EAAMpU,KAeV,SAASqU,EAAiBlF,EAAUC,EAAWjM,GAE7C,IAGImR,EAAiBC,EAAiBC,EAAkBC,EAHpDC,EAAOvF,EAASP,UAAUzL,EAAGA,EAAIpG,KAAKD,MAAMqS,EAASpR,OAAS,IAC9DsF,GAAK,EACLsR,EAAc,GAGlB,OAAgD,IAAxCtR,EAAI+L,EAAUhO,QAAQsT,EAAMrR,EAAI,IAAW,CACjD,IAAIuR,EAAeR,EAAI1F,kBAAkBS,EAASP,UAAUzL,GAAIiM,EAAUR,UAAUvL,IAChFwR,EAAeT,EAAIvF,kBAAkBM,EAASP,UAAU,EAAGzL,GAAIiM,EAAUR,UAAU,EAAGvL,IAEtFsR,EAAY5W,OAAS8W,EAAeD,IACtCD,EAAcvF,EAAUR,UAAUvL,EAAIwR,EAAcxR,GAAK+L,EAAUR,UAAUvL,EAAGA,EAAIuR,GACpFN,EAAkBnF,EAASP,UAAU,EAAGzL,EAAI0R,GAC5CN,EAAkBpF,EAASP,UAAUzL,EAAIyR,GACzCJ,EAAmBpF,EAAUR,UAAU,EAAGvL,EAAIwR,GAC9CJ,EAAmBrF,EAAUR,UAAUvL,EAAIuR,IAI/C,OAAyB,EAArBD,EAAY5W,QAAcoR,EAASpR,OAC9B,CAACuW,EAAiBC,EAAiBC,EAAkBC,EAAkBE,GAEvE,KAKX,IAGItF,EAcAE,EAASC,EAASC,EAASC,EAjB3BoF,EAAMT,EAAiBlF,EAAUC,EAAWrS,KAAKkU,KAAK9B,EAASpR,OAAS,IAExEgX,EAAMV,EAAiBlF,EAAUC,EAAWrS,KAAKkU,KAAK9B,EAASpR,OAAS,IAG5E,IAAK+W,IAAQC,EACX,OAAO,KAOP1F,EANU0F,EAEAD,GAILA,EAAI,GAAG/W,OAASgX,EAAI,GAAGhX,OAAS+W,EAHhCC,EAFAD,EAWHhH,EAAM/P,OAASgQ,EAAMhQ,QACvBwR,EAAUF,EAAG,GACbG,EAAUH,EAAG,GACbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,KAEbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,GACbE,EAAUF,EAAG,GACbG,EAAUH,EAAG,IAGf,IAAIM,EAAaN,EAAG,GACpB,MAAO,CAACE,EAASC,EAASC,EAASC,EAASC,IAQ9C5C,EAAiBpN,UAAU2Q,qBAAuB,SAAUvB,GAC1D,IAAIiG,GAAU,EACVC,EAAa,GAEbC,EAAmB,EAInBC,EAAe,KAEf5E,EAAU,EAGV6E,EAAqB,EACrBC,EAAoB,EAEpBC,EAAqB,EACrBC,EAAoB,EAExB,MAAOhF,EAAUxB,EAAMhR,OACjBgR,EAAMwB,GAAS,IAAM9C,GAEvBwH,EAAWC,KAAsB3E,EACjC6E,EAAqBE,EACrBD,EAAoBE,EACpBD,EAAqB,EACrBC,EAAoB,EACpBJ,EAAepG,EAAMwB,GAAS,KAG1BxB,EAAMwB,GAAS,IAAM/C,EACvB8H,GAAsBvG,EAAMwB,GAAS,GAAGxS,OAExCwX,GAAqBxG,EAAMwB,GAAS,GAAGxS,OAKrCoX,GAAgBA,EAAapX,QAAUhB,KAAKgE,IAAIqU,EAAoBC,IAAsBF,EAAapX,QAAUhB,KAAKgE,IAAIuU,EAAoBC,KAEhJxG,EAAM5K,OAAO8Q,EAAWC,EAAmB,GAAI,EAAG,IAAInI,EAAiBW,KAAKH,EAAa4H,IAEzFpG,EAAMkG,EAAWC,EAAmB,GAAK,GAAG,GAAK1H,EAEjD0H,IAEAA,IACA3E,EAAU2E,EAAmB,EAAID,EAAWC,EAAmB,IAAM,EACrEE,EAAqB,EAErBC,EAAoB,EACpBC,EAAqB,EACrBC,EAAoB,EACpBJ,EAAe,KACfH,GAAU,IAIdzE,IAIEyE,GACFhV,KAAKkP,kBAAkBH,GAGzB/O,KAAKwV,6BAA6BzG,GAOlCwB,EAAU,EAEV,MAAOA,EAAUxB,EAAMhR,OAAQ,CAC7B,GAAIgR,EAAMwB,EAAU,GAAG,IAAMhD,GAAewB,EAAMwB,GAAS,IAAM/C,EAAa,CAC5E,IAAIiI,EAAW1G,EAAMwB,EAAU,GAAG,GAC9BmF,EAAY3G,EAAMwB,GAAS,GAC3BoF,EAAkB3V,KAAK+T,oBAAoB0B,EAAUC,GACrDE,EAAkB5V,KAAK+T,oBAAoB2B,EAAWD,GAEtDE,GAAmBC,GACjBD,GAAmBF,EAAS1X,OAAS,GAAK4X,GAAmBD,EAAU3X,OAAS,KAElFgR,EAAM5K,OAAOoM,EAAS,EAAG,IAAIxD,EAAiBW,KAAKD,EAAYiI,EAAU9G,UAAU,EAAG+G,KACtF5G,EAAMwB,EAAU,GAAG,GAAKkF,EAAS7G,UAAU,EAAG6G,EAAS1X,OAAS4X,GAChE5G,EAAMwB,EAAU,GAAG,GAAKmF,EAAU9G,UAAU+G,GAC5CpF,MAGEqF,GAAmBH,EAAS1X,OAAS,GAAK6X,GAAmBF,EAAU3X,OAAS,KAGlFgR,EAAM5K,OAAOoM,EAAS,EAAG,IAAIxD,EAAiBW,KAAKD,EAAYgI,EAAS7G,UAAU,EAAGgH,KACrF7G,EAAMwB,EAAU,GAAG,GAAK/C,EACxBuB,EAAMwB,EAAU,GAAG,GAAKmF,EAAU9G,UAAU,EAAG8G,EAAU3X,OAAS6X,GAClE7G,EAAMwB,EAAU,GAAG,GAAKhD,EACxBwB,EAAMwB,EAAU,GAAG,GAAKkF,EAAS7G,UAAUgH,GAC3CrF,KAIJA,IAGFA,MAWJxD,EAAiBpN,UAAU6V,6BAA+B,SAAUzG,GAWlE,SAAS8G,EAA2BC,EAAKC,GACvC,IAAKD,IAAQC,EAEX,OAAO,EAQT,IAAIC,EAAQF,EAAI9Y,OAAO8Y,EAAI/X,OAAS,GAChCkY,EAAQF,EAAI/Y,OAAO,GACnBkZ,EAAmBF,EAAM7X,MAAM4O,EAAiBoJ,uBAChDC,EAAmBH,EAAM9X,MAAM4O,EAAiBoJ,uBAChDE,EAAcH,GAAoBF,EAAM7X,MAAM4O,EAAiBuJ,kBAC/DC,EAAcH,GAAoBH,EAAM9X,MAAM4O,EAAiBuJ,kBAC/DE,EAAaH,GAAeL,EAAM7X,MAAM4O,EAAiB0J,iBACzDC,EAAaH,GAAeN,EAAM9X,MAAM4O,EAAiB0J,iBACzDE,EAAaH,GAAcV,EAAI3X,MAAM4O,EAAiB6J,oBACtDC,EAAaH,GAAcX,EAAI5X,MAAM4O,EAAiB+J,sBAE1D,OAAIH,GAAcE,EAET,EACEL,GAAcE,EAEhB,EACER,IAAqBG,GAAeE,EAEtC,EACEF,GAAeE,EAEjB,EACEL,GAAoBE,EAEtB,EAGF,EAGT,IAAI7F,EAAU,EAEd,MAAOA,EAAUxB,EAAMhR,OAAS,EAAG,CACjC,GAAIgR,EAAMwB,EAAU,GAAG,IAAM9C,GAAcsB,EAAMwB,EAAU,GAAG,IAAM9C,EAAY,CAE9E,IAAIsJ,EAAYhI,EAAMwB,EAAU,GAAG,GAC/ByG,EAAOjI,EAAMwB,GAAS,GACtB0G,EAAYlI,EAAMwB,EAAU,GAAG,GAE/B2G,EAAelX,KAAK6O,kBAAkBkI,EAAWC,GAErD,GAAIE,EAAc,CAChB,IAAIC,EAAeH,EAAKpI,UAAUoI,EAAKjZ,OAASmZ,GAChDH,EAAYA,EAAUnI,UAAU,EAAGmI,EAAUhZ,OAASmZ,GACtDF,EAAOG,EAAeH,EAAKpI,UAAU,EAAGoI,EAAKjZ,OAASmZ,GACtDD,EAAYE,EAAeF,EAI7B,IAAIG,EAAgBL,EAChBM,EAAWL,EACXM,EAAgBL,EAChBM,EAAY1B,EAA2BkB,EAAWC,GAAQnB,EAA2BmB,EAAMC,GAE/F,MAAOD,EAAKha,OAAO,KAAOia,EAAUja,OAAO,GAAI,CAC7C+Z,GAAaC,EAAKha,OAAO,GACzBga,EAAOA,EAAKpI,UAAU,GAAKqI,EAAUja,OAAO,GAC5Cia,EAAYA,EAAUrI,UAAU,GAChC,IAAI4I,EAAQ3B,EAA2BkB,EAAWC,GAAQnB,EAA2BmB,EAAMC,GAEvFO,GAASD,IACXA,EAAYC,EACZJ,EAAgBL,EAChBM,EAAWL,EACXM,EAAgBL,GAIhBlI,EAAMwB,EAAU,GAAG,IAAM6G,IAEvBA,EACFrI,EAAMwB,EAAU,GAAG,GAAK6G,GAExBrI,EAAM5K,OAAOoM,EAAU,EAAG,GAC1BA,KAGFxB,EAAMwB,GAAS,GAAK8G,EAEhBC,EACFvI,EAAMwB,EAAU,GAAG,GAAK+G,GAExBvI,EAAM5K,OAAOoM,EAAU,EAAG,GAC1BA,MAKNA,MAKJxD,EAAiBoJ,sBAAwB,eACzCpJ,EAAiBuJ,iBAAmB,KACpCvJ,EAAiB0J,gBAAkB,SACnC1J,EAAiB6J,mBAAqB,WACtC7J,EAAiB+J,qBAAuB,cAMxC/J,EAAiBpN,UAAU8X,uBAAyB,SAAU1I,GAC5D,IAAIiG,GAAU,EACVC,EAAa,GAEbC,EAAmB,EAInBC,EAAe,KAEf5E,EAAU,EAGVmH,GAAU,EAEVC,GAAU,EAEVC,GAAW,EAEXC,GAAW,EAEf,MAAOtH,EAAUxB,EAAMhR,OACjBgR,EAAMwB,GAAS,IAAM9C,GAEnBsB,EAAMwB,GAAS,GAAGxS,OAASiC,KAAKiN,gBAAkB2K,GAAYC,IAEhE5C,EAAWC,KAAsB3E,EACjCmH,EAAUE,EACVD,EAAUE,EACV1C,EAAepG,EAAMwB,GAAS,KAG9B2E,EAAmB,EACnBC,EAAe,MAGjByC,EAAWC,GAAW,IAGlB9I,EAAMwB,GAAS,IAAMhD,EACvBsK,GAAW,EAEXD,GAAW,EAYTzC,IAAiBuC,GAAWC,GAAWC,GAAYC,GAAY1C,EAAapX,OAASiC,KAAKiN,cAAgB,GAAKyK,EAAUC,EAAUC,EAAWC,GAAY,KAE5J9I,EAAM5K,OAAO8Q,EAAWC,EAAmB,GAAI,EAAG,IAAInI,EAAiBW,KAAKH,EAAa4H,IAEzFpG,EAAMkG,EAAWC,EAAmB,GAAK,GAAG,GAAK1H,EACjD0H,IAEAC,EAAe,KAEXuC,GAAWC,GAEbC,EAAWC,GAAW,EACtB3C,EAAmB,IAEnBA,IAEA3E,EAAU2E,EAAmB,EAAID,EAAWC,EAAmB,IAAM,EACrE0C,EAAWC,GAAW,GAGxB7C,GAAU,IAIdzE,IAGEyE,GACFhV,KAAKkP,kBAAkBH,IAU3BhC,EAAiBpN,UAAUuP,kBAAoB,SAAUH,GAEvDA,EAAM7N,KAAK,IAAI6L,EAAiBW,KAAKD,EAAY,KACjD,IAKIgB,EALA8B,EAAU,EACVC,EAAe,EACfC,EAAe,EACfC,EAAc,GACdC,EAAc,GAGlB,MAAOJ,EAAUxB,EAAMhR,OACrB,OAAQgR,EAAMwB,GAAS,IACrB,KAAK/C,EACHiD,IACAE,GAAe5B,EAAMwB,GAAS,GAC9BA,IACA,MAEF,KAAKhD,EACHiD,IACAE,GAAe3B,EAAMwB,GAAS,GAC9BA,IACA,MAEF,KAAK9C,EAEC+C,EAAeC,EAAe,GACX,IAAjBD,GAAuC,IAAjBC,IAExBhC,EAAezO,KAAK0O,kBAAkBiC,EAAaD,GAE9B,IAAjBjC,IACE8B,EAAUC,EAAeC,EAAe,GAAK1B,EAAMwB,EAAUC,EAAeC,EAAe,GAAG,IAAMhD,EACtGsB,EAAMwB,EAAUC,EAAeC,EAAe,GAAG,IAAME,EAAY/B,UAAU,EAAGH,IAEhFM,EAAM5K,OAAO,EAAG,EAAG,IAAI4I,EAAiBW,KAAKD,EAAYkD,EAAY/B,UAAU,EAAGH,KAClF8B,KAGFI,EAAcA,EAAY/B,UAAUH,GACpCiC,EAAcA,EAAY9B,UAAUH,IAItCA,EAAezO,KAAK6O,kBAAkB8B,EAAaD,GAE9B,IAAjBjC,IACFM,EAAMwB,GAAS,GAAKI,EAAY/B,UAAU+B,EAAY5S,OAAS0Q,GAAgBM,EAAMwB,GAAS,GAC9FI,EAAcA,EAAY/B,UAAU,EAAG+B,EAAY5S,OAAS0Q,GAC5DiC,EAAcA,EAAY9B,UAAU,EAAG8B,EAAY3S,OAAS0Q,KAKhE8B,GAAWC,EAAeC,EAC1B1B,EAAM5K,OAAOoM,EAASC,EAAeC,GAEjCC,EAAY3S,SACdgR,EAAM5K,OAAOoM,EAAS,EAAG,IAAIxD,EAAiBW,KAAKH,EAAamD,IAChEH,KAGEI,EAAY5S,SACdgR,EAAM5K,OAAOoM,EAAS,EAAG,IAAIxD,EAAiBW,KAAKF,EAAamD,IAChEJ,KAGFA,KACqB,IAAZA,GAAiBxB,EAAMwB,EAAU,GAAG,IAAM9C,GAEnDsB,EAAMwB,EAAU,GAAG,IAAMxB,EAAMwB,GAAS,GACxCxB,EAAM5K,OAAOoM,EAAS,IAEtBA,IAGFE,EAAe,EACfD,EAAe,EACfE,EAAc,GACdC,EAAc,GACd,MAI6B,KAA/B5B,EAAMA,EAAMhR,OAAS,GAAG,IAC1BgR,EAAM8B,MAMR,IAAImE,GAAU,EACdzE,EAAU,EAEV,MAAOA,EAAUxB,EAAMhR,OAAS,EAC1BgR,EAAMwB,EAAU,GAAG,IAAM9C,GAAcsB,EAAMwB,EAAU,GAAG,IAAM9C,IAE9DsB,EAAMwB,GAAS,GAAG3B,UAAUG,EAAMwB,GAAS,GAAGxS,OAASgR,EAAMwB,EAAU,GAAG,GAAGxS,SAAWgR,EAAMwB,EAAU,GAAG,IAE7GxB,EAAMwB,GAAS,GAAKxB,EAAMwB,EAAU,GAAG,GAAKxB,EAAMwB,GAAS,GAAG3B,UAAU,EAAGG,EAAMwB,GAAS,GAAGxS,OAASgR,EAAMwB,EAAU,GAAG,GAAGxS,QAC5HgR,EAAMwB,EAAU,GAAG,GAAKxB,EAAMwB,EAAU,GAAG,GAAKxB,EAAMwB,EAAU,GAAG,GACnExB,EAAM5K,OAAOoM,EAAU,EAAG,GAC1ByE,GAAU,GACDjG,EAAMwB,GAAS,GAAG3B,UAAU,EAAGG,EAAMwB,EAAU,GAAG,GAAGxS,SAAWgR,EAAMwB,EAAU,GAAG,KAE5FxB,EAAMwB,EAAU,GAAG,IAAMxB,EAAMwB,EAAU,GAAG,GAC5CxB,EAAMwB,GAAS,GAAKxB,EAAMwB,GAAS,GAAG3B,UAAUG,EAAMwB,EAAU,GAAG,GAAGxS,QAAUgR,EAAMwB,EAAU,GAAG,GACnGxB,EAAM5K,OAAOoM,EAAU,EAAG,GAC1ByE,GAAU,IAIdzE,IAIEyE,GACFhV,KAAKkP,kBAAkBH,IAa3BhC,EAAiBpN,UAAUmY,YAAc,SAAU/I,EAAOgJ,GACxD,IAIIxG,EAJAtB,EAAS,EACTC,EAAS,EACT8H,EAAc,EACdC,EAAc,EAGlB,IAAK1G,EAAI,EAAGA,EAAIxC,EAAMhR,OAAQwT,IAAK,CAWjC,GAVIxC,EAAMwC,GAAG,KAAO/D,IAElByC,GAAUlB,EAAMwC,GAAG,GAAGxT,QAGpBgR,EAAMwC,GAAG,KAAOhE,IAElB2C,GAAUnB,EAAMwC,GAAG,GAAGxT,QAGpBkS,EAAS8H,EAEX,MAGFC,EAAc/H,EACdgI,EAAc/H,EAIhB,OAAInB,EAAMhR,QAAUwT,GAAKxC,EAAMwC,GAAG,KAAOhE,EAChC0K,EAIFA,GAAeF,EAAMC,IAS9BjL,EAAiBpN,UAAUuY,gBAAkB,SAAUnJ,GAOrD,IANA,IAAIoJ,EAAO,GACPC,EAAc,KACdC,EAAa,KACbC,EAAa,KACbC,EAAe,MAEVhH,EAAI,EAAGA,EAAIxC,EAAMhR,OAAQwT,IAAK,CACrC,IAAI5D,EAAKoB,EAAMwC,GAAG,GAEdlJ,EAAO0G,EAAMwC,GAAG,GAEhB3D,EAAOvF,EAAKpL,QAAQmb,EAAa,SAASnb,QAAQob,EAAY,QAAQpb,QAAQqb,EAAY,QAAQrb,QAAQsb,EAAc,cAE5H,OAAQ5K,GACN,KAAKH,EACH2K,EAAK5G,GAAK,oCAAsC3D,EAAO,SACvD,MAEF,KAAKL,EACH4K,EAAK5G,GAAK,oCAAsC3D,EAAO,SACvD,MAEF,KAAKH,EACH0K,EAAK5G,GAAK,SAAW3D,EAAO,UAC5B,OAIN,OAAOuK,EAAK1E,KAAK,KASnB1G,EAAiBpN,UAAU6Y,WAAa,SAAUzJ,GAGhD,IAFA,IAAInB,EAAO,GAEF2D,EAAI,EAAGA,EAAIxC,EAAMhR,OAAQwT,IAC5BxC,EAAMwC,GAAG,KAAO/D,IAClBI,EAAK2D,GAAKxC,EAAMwC,GAAG,IAIvB,OAAO3D,EAAK6F,KAAK,KASnB1G,EAAiBpN,UAAU8Y,WAAa,SAAU1J,GAGhD,IAFA,IAAInB,EAAO,GAEF2D,EAAI,EAAGA,EAAIxC,EAAMhR,OAAQwT,IAC5BxC,EAAMwC,GAAG,KAAOhE,IAClBK,EAAK2D,GAAKxC,EAAMwC,GAAG,IAIvB,OAAO3D,EAAK6F,KAAK,KAUnB1G,EAAiBpN,UAAU+Y,iBAAmB,SAAU3J,GAKtD,IAJA,IAAI4J,EAAc,EACdC,EAAa,EACbC,EAAY,EAEPtH,EAAI,EAAGA,EAAIxC,EAAMhR,OAAQwT,IAAK,CACrC,IAAI5D,EAAKoB,EAAMwC,GAAG,GACdlJ,EAAO0G,EAAMwC,GAAG,GAEpB,OAAQ5D,GACN,KAAKH,EACHoL,GAAcvQ,EAAKtK,OACnB,MAEF,KAAKwP,EACHsL,GAAaxQ,EAAKtK,OAClB,MAEF,KAAK0P,EAEHkL,GAAe5b,KAAKgE,IAAI6X,EAAYC,GACpCD,EAAa,EACbC,EAAY,EACZ,OAKN,OADAF,GAAe5b,KAAKgE,IAAI6X,EAAYC,GAC7BF,GAYT5L,EAAiBpN,UAAUmZ,aAAe,SAAU/J,GAGlD,IAFA,IAAInB,EAAO,GAEF2D,EAAI,EAAGA,EAAIxC,EAAMhR,OAAQwT,IAChC,OAAQxC,EAAMwC,GAAG,IACf,KAAK/D,EACHI,EAAK2D,GAAK,IAAMwH,UAAUhK,EAAMwC,GAAG,IACnC,MAEF,KAAKhE,EACHK,EAAK2D,GAAK,IAAMxC,EAAMwC,GAAG,GAAGxT,OAC5B,MAEF,KAAK0P,EACHG,EAAK2D,GAAK,IAAMxC,EAAMwC,GAAG,GAAGxT,OAC5B,MAIN,OAAO6P,EAAK6F,KAAK,MAAMxW,QAAQ,OAAQ,MAYzC8P,EAAiBpN,UAAUqZ,eAAiB,SAAUlL,EAAO0D,GAQ3D,IAPA,IAAIzC,EAAQ,GACRkK,EAAc,EAEd1I,EAAU,EAEV2I,EAAS1H,EAAM2H,MAAM,OAEhB5H,EAAI,EAAGA,EAAI2H,EAAOnb,OAAQwT,IAAK,CAGtC,IAAI6H,EAAQF,EAAO3H,GAAG3C,UAAU,GAEhC,OAAQsK,EAAO3H,GAAGvU,OAAO,IACvB,IAAK,IACH,IACE+R,EAAMkK,KAAiB,IAAIlM,EAAiBW,KAAKF,EAAa6L,UAAUD,IACxE,MAAOE,GAEP,MAAM,IAAI/K,MAAM,qCAAuC6K,GAGzD,MAEF,IAAK,IAEL,IAAK,IACH,IAAI9a,EAAIib,SAASH,EAAO,IAExB,GAAII,MAAMlb,IAAMA,EAAI,EAClB,MAAM,IAAIiQ,MAAM,qCAAuC6K,GAGzD,IAAIxL,EAAOE,EAAMc,UAAU2B,EAASA,GAAWjS,GAEpB,KAAvB4a,EAAO3H,GAAGvU,OAAO,GACnB+R,EAAMkK,KAAiB,IAAIlM,EAAiBW,KAAKD,EAAYG,GAE7DmB,EAAMkK,KAAiB,IAAIlM,EAAiBW,KAAKH,EAAaK,GAGhE,MAEF,QAGE,GAAIsL,EAAO3H,GACT,MAAM,IAAIhD,MAAM,6CAA+C2K,EAAO3H,KAM9E,GAAIhB,GAAWzC,EAAM/P,OACnB,MAAM,IAAIwQ,MAAM,iBAAmBgC,EAAU,wCAA0CzC,EAAM/P,OAAS,MAGxG,OAAOgR,GAYThC,EAAiBpN,UAAU8Z,WAAa,SAAU7L,EAAMsG,EAAS6D,GAE/D,GAAY,MAARnK,GAA2B,MAAXsG,GAA0B,MAAP6D,EACrC,MAAM,IAAIxJ,MAAM,4BAKlB,OAFAwJ,EAAMhb,KAAKgE,IAAI,EAAGhE,KAAKiE,IAAI+W,EAAKnK,EAAK7P,SAEjC6P,GAAQsG,EAEH,EACGtG,EAAK7P,OAGN6P,EAAKgB,UAAUmJ,EAAKA,EAAM7D,EAAQnW,SAAWmW,EAE/C6D,EAGA/X,KAAK0Z,aAAa9L,EAAMsG,EAAS6D,IANhC,GAoBZhL,EAAiBpN,UAAU+Z,aAAe,SAAU9L,EAAMsG,EAAS6D,GACjE,GAAI7D,EAAQnW,OAASiC,KAAKsN,cACxB,MAAM,IAAIiB,MAAM,sCAIlB,IAAIoL,EAAI3Z,KAAK4Z,gBAAgB1F,GACzBE,EAAMpU,KAWV,SAAS6Z,EAAkBC,EAAGvI,GAC5B,IAAIwI,EAAWD,EAAI5F,EAAQnW,OACvBic,EAAYjd,KAAKkd,IAAIlC,EAAMxG,GAE/B,OAAK6C,EAAIjH,eAKF4M,EAAWC,EAAY5F,EAAIjH,eAHzB6M,EAAY,EAAMD,EAO7B,IAAIG,EAAkBla,KAAKkN,gBAEvBiN,EAAWvM,EAAKxM,QAAQ8S,EAAS6D,IAEpB,GAAboC,IACFD,EAAkBnd,KAAKiE,IAAI6Y,EAAkB,EAAGM,GAAWD,GAE3DC,EAAWvM,EAAKwM,YAAYlG,EAAS6D,EAAM7D,EAAQnW,SAElC,GAAboc,IACFD,EAAkBnd,KAAKiE,IAAI6Y,EAAkB,EAAGM,GAAWD,KAK/D,IAEIG,EAASC,EAFTC,EAAY,GAAKrG,EAAQnW,OAAS,EACtCoc,GAAY,EAKZ,IAHA,IACIK,EADAC,EAAUvG,EAAQnW,OAAS6P,EAAK7P,OAG3B+T,EAAI,EAAGA,EAAIoC,EAAQnW,OAAQ+T,IAAK,CAIvCuI,EAAU,EACVC,EAAUG,EAEV,MAAOJ,EAAUC,EACXT,EAAkB/H,EAAGiG,EAAMuC,IAAYJ,EACzCG,EAAUC,EAEVG,EAAUH,EAGZA,EAAUvd,KAAKD,OAAO2d,EAAUJ,GAAW,EAAIA,GAIjDI,EAAUH,EACV,IAAIlW,EAAQrH,KAAKgE,IAAI,EAAGgX,EAAMuC,EAAU,GACpCI,EAAS3d,KAAKiE,IAAI+W,EAAMuC,EAAS1M,EAAK7P,QAAUmW,EAAQnW,OACxD4c,EAAKtJ,MAAMqJ,EAAS,GACxBC,EAAGD,EAAS,IAAM,GAAK5I,GAAK,EAE5B,IAAK,IAAIzO,EAAIqX,EAAQrX,GAAKe,EAAOf,IAAK,CAGpC,IAAIuX,EAAYjB,EAAE/L,EAAK5Q,OAAOqG,EAAI,IAUlC,GANEsX,EAAGtX,GAFK,IAANyO,GAEO6I,EAAGtX,EAAI,IAAM,EAAI,GAAKuX,GAGtBD,EAAGtX,EAAI,IAAM,EAAI,GAAKuX,GAAcJ,EAAQnX,EAAI,GAAKmX,EAAQnX,KAAO,EAAI,EAAKmX,EAAQnX,EAAI,GAGhGsX,EAAGtX,GAAKkX,EAAW,CACrB,IAAI/C,EAAQqC,EAAkB/H,EAAGzO,EAAI,GAGrC,GAAImU,GAAS0C,EAAiB,CAK5B,GAHAA,EAAkB1C,EAClB2C,EAAW9W,EAAI,IAEX8W,EAAWpC,GAKb,MAHA3T,EAAQrH,KAAKgE,IAAI,EAAG,EAAIgX,EAAMoC,KAUtC,GAAIN,EAAkB/H,EAAI,EAAGiG,GAAOmC,EAClC,MAGFM,EAAUG,EAGZ,OAAOR,GAUTpN,EAAiBpN,UAAUia,gBAAkB,SAAU1F,GAGrD,IAFA,IAAIyF,EAAI,GAECxW,EAAI,EAAGA,EAAI+Q,EAAQnW,OAAQoF,IAClCwW,EAAEzF,EAAQlX,OAAOmG,IAAM,EAGzB,IAASA,EAAI,EAAGA,EAAI+Q,EAAQnW,OAAQoF,IAClCwW,EAAEzF,EAAQlX,OAAOmG,KAAO,GAAK+Q,EAAQnW,OAASoF,EAAI,EAGpD,OAAOwW,GAYT5M,EAAiBpN,UAAUkb,kBAAoB,SAAUC,EAAOlN,GAC9D,GAAmB,GAAfA,EAAK7P,OAAT,CAIA,GAAqB,OAAjB+c,EAAMC,OACR,MAAMxM,MAAM,yBAGd,IAAI2F,EAAUtG,EAAKgB,UAAUkM,EAAMC,OAAQD,EAAMC,OAASD,EAAME,SAC5DC,EAAU,EAGd,MAAOrN,EAAKxM,QAAQ8S,IAAYtG,EAAKwM,YAAYlG,IAAYA,EAAQnW,OAASiC,KAAKsN,cAAgBtN,KAAKqN,aAAerN,KAAKqN,aAC1H4N,GAAWjb,KAAKqN,aAChB6G,EAAUtG,EAAKgB,UAAUkM,EAAMC,OAASE,EAASH,EAAMC,OAASD,EAAME,QAAUC,GAIlFA,GAAWjb,KAAKqN,aAEhB,IAAI6N,EAAStN,EAAKgB,UAAUkM,EAAMC,OAASE,EAASH,EAAMC,QAEtDG,GACFJ,EAAM/L,MAAME,QAAQ,IAAIlC,EAAiBW,KAAKD,EAAYyN,IAI5D,IAAIC,EAASvN,EAAKgB,UAAUkM,EAAMC,OAASD,EAAME,QAASF,EAAMC,OAASD,EAAME,QAAUC,GAErFE,GACFL,EAAM/L,MAAM7N,KAAK,IAAI6L,EAAiBW,KAAKD,EAAY0N,IAIzDL,EAAMM,QAAUF,EAAOnd,OACvB+c,EAAMC,QAAUG,EAAOnd,OAEvB+c,EAAME,SAAWE,EAAOnd,OAASod,EAAOpd,OACxC+c,EAAMO,SAAWH,EAAOnd,OAASod,EAAOpd,SA0B1CgP,EAAiBpN,UAAU2b,WAAa,SAAUzZ,EAAG0Z,EAAOC,GAC1D,IAAI1N,EAAOiB,EAEX,GAAgB,iBAALlN,GAAiC,iBAAT0Z,GAAqC,oBAATC,EAG7D1N,EAAQjM,EACRkN,EAAQ/O,KAAK6N,UAAUC,EAAOyN,GAAO,GAEjCxM,EAAMhR,OAAS,IACjBiC,KAAKsQ,qBAAqBvB,GAC1B/O,KAAKyX,uBAAuB1I,SAEzB,GAAIlN,GAAiB,iBAALA,GAAiC,oBAAT0Z,GAAwC,oBAATC,EAG5EzM,EAAQlN,EACRiM,EAAQ9N,KAAKwY,WAAWzJ,QACnB,GAAgB,iBAALlN,GAAiB0Z,GAAyB,iBAATA,GAAqC,oBAATC,EAE7E1N,EAAQjM,EACRkN,EAAQwM,MACH,IAAgB,iBAAL1Z,GAAiC,iBAAT0Z,IAAqBC,GAAyB,iBAATA,EAM7E,MAAM,IAAIjN,MAAM,sCAHhBT,EAAQjM,EACRkN,EAAQyM,EAKV,GAAqB,IAAjBzM,EAAMhR,OACR,MAAO,GAiBT,IAdA,IAAI0d,EAAU,GACVX,EAAQ,IAAI/N,EAAiB2O,UAC7BC,EAAkB,EAElBC,EAAc,EAEdC,EAAc,EAKdC,EAAgBhO,EAChBiO,EAAiBjO,EAEZyD,EAAI,EAAGA,EAAIxC,EAAMhR,OAAQwT,IAAK,CACrC,IAAIyK,EAAYjN,EAAMwC,GAAG,GACrB0K,EAAYlN,EAAMwC,GAAG,GAQzB,OANKoK,GAAmBK,IAAcvO,IAEpCqN,EAAMM,OAASQ,EACfd,EAAMC,OAASc,GAGTG,GACN,KAAKxO,EACHsN,EAAM/L,MAAM4M,KAAqB5M,EAAMwC,GACvCuJ,EAAMO,SAAWY,EAAUle,OAC3Bge,EAAiBA,EAAenN,UAAU,EAAGiN,GAAeI,EAAYF,EAAenN,UAAUiN,GACjG,MAEF,KAAKtO,EACHuN,EAAME,SAAWiB,EAAUle,OAC3B+c,EAAM/L,MAAM4M,KAAqB5M,EAAMwC,GACvCwK,EAAiBA,EAAenN,UAAU,EAAGiN,GAAeE,EAAenN,UAAUiN,EAAcI,EAAUle,QAC7G,MAEF,KAAK0P,EACCwO,EAAUle,QAAU,EAAIiC,KAAKqN,cAAgBsO,GAAmB5M,EAAMhR,QAAUwT,EAAI,GAEtFuJ,EAAM/L,MAAM4M,KAAqB5M,EAAMwC,GACvCuJ,EAAME,SAAWiB,EAAUle,OAC3B+c,EAAMO,SAAWY,EAAUle,QAClBke,EAAUle,QAAU,EAAIiC,KAAKqN,cAElCsO,IACF3b,KAAK6a,kBAAkBC,EAAOgB,GAC9BL,EAAQva,KAAK4Z,GACbA,EAAQ,IAAI/N,EAAiB2O,UAC7BC,EAAkB,EAKlBG,EAAgBC,EAChBH,EAAcC,GAIlB,MAIAG,IAAcxO,IAChBoO,GAAeK,EAAUle,QAGvBie,IAAczO,IAChBsO,GAAeI,EAAUle,QAU7B,OALI4d,IACF3b,KAAK6a,kBAAkBC,EAAOgB,GAC9BL,EAAQva,KAAK4Z,IAGRW,GAST1O,EAAiBpN,UAAUuc,eAAiB,SAAUT,GAIpD,IAFA,IAAIU,EAAc,GAET5K,EAAI,EAAGA,EAAIkK,EAAQ1d,OAAQwT,IAAK,CACvC,IAAIuJ,EAAQW,EAAQlK,GAChB6K,EAAY,IAAIrP,EAAiB2O,UACrCU,EAAUrN,MAAQ,GAElB,IAAK,IAAIyD,EAAI,EAAGA,EAAIsI,EAAM/L,MAAMhR,OAAQyU,IACtC4J,EAAUrN,MAAMyD,GAAK,IAAIzF,EAAiBW,KAAKoN,EAAM/L,MAAMyD,GAAG,GAAIsI,EAAM/L,MAAMyD,GAAG,IAGnF4J,EAAUhB,OAASN,EAAMM,OACzBgB,EAAUrB,OAASD,EAAMC,OACzBqB,EAAUpB,QAAUF,EAAME,QAC1BoB,EAAUf,QAAUP,EAAMO,QAC1Bc,EAAY5K,GAAK6K,EAGnB,OAAOD,GAYTpP,EAAiBpN,UAAU0c,YAAc,SAAUZ,EAAS7N,GAC1D,GAAsB,GAAlB6N,EAAQ1d,OACV,MAAO,CAAC6P,EAAM,IAIhB6N,EAAUzb,KAAKkc,eAAeT,GAC9B,IAAIa,EAActc,KAAKuc,iBAAiBd,GACxC7N,EAAO0O,EAAc1O,EAAO0O,EAC5Btc,KAAKwc,eAAef,GAQpB,IAHA,IAAIjK,EAAQ,EACRzO,EAAU,GAELwO,EAAI,EAAGA,EAAIkK,EAAQ1d,OAAQwT,IAAK,CACvC,IAEIkL,EA6BE1O,EA/BF2O,EAAejB,EAAQlK,GAAGwJ,OAASvJ,EACnC1D,EAAQ9N,KAAKwY,WAAWiD,EAAQlK,GAAGxC,OAEnC4N,GAAW,EAmBf,GAjBI7O,EAAM/P,OAASiC,KAAKsN,eAGtBmP,EAAYzc,KAAKyZ,WAAW7L,EAAME,EAAMc,UAAU,EAAG5O,KAAKsN,eAAgBoP,IAExD,GAAdD,IACFE,EAAU3c,KAAKyZ,WAAW7L,EAAME,EAAMc,UAAUd,EAAM/P,OAASiC,KAAKsN,eAAgBoP,EAAe5O,EAAM/P,OAASiC,KAAKsN,iBAEvG,GAAZqP,GAAiBF,GAAaE,KAEhCF,GAAa,KAIjBA,EAAYzc,KAAKyZ,WAAW7L,EAAME,EAAO4O,IAGzB,GAAdD,EAEF1Z,EAAQwO,IAAK,EAEbC,GAASiK,EAAQlK,GAAG8J,QAAUI,EAAQlK,GAAGyJ,aAazC,GAVAjY,EAAQwO,IAAK,EACbC,EAAQiL,EAAYC,EAIlB3O,GADc,GAAZ4O,EACM/O,EAAKgB,UAAU6N,EAAWA,EAAY3O,EAAM/P,QAE5C6P,EAAKgB,UAAU6N,EAAWE,EAAU3c,KAAKsN,eAG/CQ,GAASC,EAEXH,EAAOA,EAAKgB,UAAU,EAAG6N,GAAazc,KAAKyY,WAAWgD,EAAQlK,GAAGxC,OAASnB,EAAKgB,UAAU6N,EAAY3O,EAAM/P,YACtG,CAGL,IAAIgR,EAAQ/O,KAAK6N,UAAUC,EAAOC,GAAO,GAEzC,GAAID,EAAM/P,OAASiC,KAAKsN,eAAiBtN,KAAK0Y,iBAAiB3J,GAASjB,EAAM/P,OAASiC,KAAKoN,sBAE1FrK,EAAQwO,IAAK,MACR,CACLvR,KAAKwV,6BAA6BzG,GAIlC,IAHA,IACI6N,EADAC,EAAS,EAGJrK,EAAI,EAAGA,EAAIiJ,EAAQlK,GAAGxC,MAAMhR,OAAQyU,IAAK,CAChD,IAAIsK,EAAMrB,EAAQlK,GAAGxC,MAAMyD,GAEvBsK,EAAI,KAAOrP,IACbmP,EAAS5c,KAAK8X,YAAY/I,EAAO8N,IAG/BC,EAAI,KAAOtP,EAEbI,EAAOA,EAAKgB,UAAU,EAAG6N,EAAYG,GAAUE,EAAI,GAAKlP,EAAKgB,UAAU6N,EAAYG,GAC1EE,EAAI,KAAOvP,IAEpBK,EAAOA,EAAKgB,UAAU,EAAG6N,EAAYG,GAAUhP,EAAKgB,UAAU6N,EAAYzc,KAAK8X,YAAY/I,EAAO8N,EAASC,EAAI,GAAG/e,UAGhH+e,EAAI,KAAOvP,IACbsP,GAAUC,EAAI,GAAG/e,WAU7B,OADA6P,EAAOA,EAAKgB,UAAU0N,EAAYve,OAAQ6P,EAAK7P,OAASue,EAAYve,QAC7D,CAAC6P,EAAM7K,IAUhBgK,EAAiBpN,UAAU4c,iBAAmB,SAAUd,GAItD,IAHA,IAAIsB,EAAgB/c,KAAKqN,aACrBiP,EAAc,GAET/K,EAAI,EAAGA,GAAKwL,EAAexL,IAClC+K,GAAe/a,OAAO+R,aAAa/B,GAIrC,IAASA,EAAI,EAAGA,EAAIkK,EAAQ1d,OAAQwT,IAClCkK,EAAQlK,GAAG6J,QAAU2B,EACrBtB,EAAQlK,GAAGwJ,QAAUgC,EAIvB,IAAIjC,EAAQW,EAAQ,GAChB1M,EAAQ+L,EAAM/L,MAElB,GAAoB,GAAhBA,EAAMhR,QAAegR,EAAM,GAAG,IAAMtB,EAEtCsB,EAAME,QAAQ,IAAIlC,EAAiBW,KAAKD,EAAY6O,IACpDxB,EAAMM,QAAU2B,EAEhBjC,EAAMC,QAAUgC,EAEhBjC,EAAME,SAAW+B,EACjBjC,EAAMO,SAAW0B,OACZ,GAAIA,EAAgBhO,EAAM,GAAG,GAAGhR,OAAQ,CAE7C,IAAIif,EAAcD,EAAgBhO,EAAM,GAAG,GAAGhR,OAC9CgR,EAAM,GAAG,GAAKuN,EAAY1N,UAAUG,EAAM,GAAG,GAAGhR,QAAUgR,EAAM,GAAG,GACnE+L,EAAMM,QAAU4B,EAChBlC,EAAMC,QAAUiC,EAChBlC,EAAME,SAAWgC,EACjBlC,EAAMO,SAAW2B,EAOnB,GAHAlC,EAAQW,EAAQA,EAAQ1d,OAAS,GACjCgR,EAAQ+L,EAAM/L,MAEM,GAAhBA,EAAMhR,QAAegR,EAAMA,EAAMhR,OAAS,GAAG,IAAM0P,EAErDsB,EAAM7N,KAAK,IAAI6L,EAAiBW,KAAKD,EAAY6O,IACjDxB,EAAME,SAAW+B,EACjBjC,EAAMO,SAAW0B,OACZ,GAAIA,EAAgBhO,EAAMA,EAAMhR,OAAS,GAAG,GAAGA,OAAQ,CAExDif,EAAcD,EAAgBhO,EAAMA,EAAMhR,OAAS,GAAG,GAAGA,OAC7DgR,EAAMA,EAAMhR,OAAS,GAAG,IAAMue,EAAY1N,UAAU,EAAGoO,GACvDlC,EAAME,SAAWgC,EACjBlC,EAAMO,SAAW2B,EAGnB,OAAOV,GAUTvP,EAAiBpN,UAAU6c,eAAiB,SAAUf,GAGpD,IAFA,IAAIwB,EAAajd,KAAKsN,cAEbiE,EAAI,EAAGA,EAAIkK,EAAQ1d,OAAQwT,IAClC,KAAIkK,EAAQlK,GAAGyJ,SAAWiC,GAA1B,CAIA,IAAIC,EAAWzB,EAAQlK,GAEvBkK,EAAQtX,OAAOoN,IAAK,GACpB,IAAI6J,EAAS8B,EAAS9B,OAClBL,EAASmC,EAASnC,OAClBoC,EAAa,GAEjB,MAAiC,IAA1BD,EAASnO,MAAMhR,OAAc,CAElC,IAAI+c,EAAQ,IAAI/N,EAAiB2O,UAC7B0B,GAAQ,EACZtC,EAAMM,OAASA,EAAS+B,EAAWpf,OACnC+c,EAAMC,OAASA,EAASoC,EAAWpf,OAEhB,KAAfof,IACFrC,EAAME,QAAUF,EAAMO,QAAU8B,EAAWpf,OAC3C+c,EAAM/L,MAAM7N,KAAK,IAAI6L,EAAiBW,KAAKD,EAAY0P,KAGzD,MAAiC,IAA1BD,EAASnO,MAAMhR,QAAgB+c,EAAME,QAAUiC,EAAajd,KAAKqN,aAAc,CACpF,IAAI2O,EAAYkB,EAASnO,MAAM,GAAG,GAC9BkN,EAAYiB,EAASnO,MAAM,GAAG,GAE9BiN,IAAcxO,GAEhBsN,EAAMO,SAAWY,EAAUle,OAC3Bgd,GAAUkB,EAAUle,OACpB+c,EAAM/L,MAAM7N,KAAKgc,EAASnO,MAAMsO,SAChCD,GAAQ,GACCpB,IAAczO,GAAqC,GAAtBuN,EAAM/L,MAAMhR,QAAe+c,EAAM/L,MAAM,GAAG,IAAMtB,GAAcwO,EAAUle,OAAS,EAAIkf,GAE3HnC,EAAME,SAAWiB,EAAUle,OAC3Bqd,GAAUa,EAAUle,OACpBqf,GAAQ,EACRtC,EAAM/L,MAAM7N,KAAK,IAAI6L,EAAiBW,KAAKsO,EAAWC,IACtDiB,EAASnO,MAAMsO,UAGfpB,EAAYA,EAAUrN,UAAU,EAAGqO,EAAanC,EAAME,QAAUhb,KAAKqN,cACrEyN,EAAME,SAAWiB,EAAUle,OAC3Bqd,GAAUa,EAAUle,OAEhBie,IAAcvO,GAChBqN,EAAMO,SAAWY,EAAUle,OAC3Bgd,GAAUkB,EAAUle,QAEpBqf,GAAQ,EAGVtC,EAAM/L,MAAM7N,KAAK,IAAI6L,EAAiBW,KAAKsO,EAAWC,IAElDA,GAAaiB,EAASnO,MAAM,GAAG,GACjCmO,EAASnO,MAAMsO,QAEfH,EAASnO,MAAM,GAAG,GAAKmO,EAASnO,MAAM,GAAG,GAAGH,UAAUqN,EAAUle,SAMtEof,EAAand,KAAKyY,WAAWqC,EAAM/L,OACnCoO,EAAaA,EAAWvO,UAAUuO,EAAWpf,OAASiC,KAAKqN,cAE3D,IAAIiQ,EAActd,KAAKwY,WAAW0E,EAASnO,OAAOH,UAAU,EAAG5O,KAAKqN,cAEhD,KAAhBiQ,IACFxC,EAAME,SAAWsC,EAAYvf,OAC7B+c,EAAMO,SAAWiC,EAAYvf,OAEF,IAAvB+c,EAAM/L,MAAMhR,QAAgB+c,EAAM/L,MAAM+L,EAAM/L,MAAMhR,OAAS,GAAG,KAAO0P,EACzEqN,EAAM/L,MAAM+L,EAAM/L,MAAMhR,OAAS,GAAG,IAAMuf,EAE1CxC,EAAM/L,MAAM7N,KAAK,IAAI6L,EAAiBW,KAAKD,EAAY6P,KAItDF,GACH3B,EAAQtX,SAASoN,EAAG,EAAGuJ,MAY/B/N,EAAiBpN,UAAU4d,aAAe,SAAU9B,GAGlD,IAFA,IAAI7N,EAAO,GAEF2D,EAAI,EAAGA,EAAIkK,EAAQ1d,OAAQwT,IAClC3D,EAAK2D,GAAKkK,EAAQlK,GAGpB,OAAO3D,EAAK6F,KAAK,KAUnB1G,EAAiBpN,UAAU6d,eAAiB,SAAUC,GACpD,IAAIhC,EAAU,GAEd,IAAKgC,EACH,OAAOhC,EAGT,IAAI7N,EAAO6P,EAAStE,MAAM,MACtBuE,EAAc,EACdC,EAAc,uCAElB,MAAOD,EAAc9P,EAAK7P,OAAQ,CAChC,IAAIC,EAAI4P,EAAK8P,GAAavf,MAAMwf,GAEhC,IAAK3f,EACH,MAAM,IAAIuQ,MAAM,yBAA2BX,EAAK8P,IAGlD,IAAI5C,EAAQ,IAAI/N,EAAiB2O,UACjCD,EAAQva,KAAK4Z,GACbA,EAAMM,OAAS7B,SAASvb,EAAE,GAAI,IAEjB,KAATA,EAAE,IACJ8c,EAAMM,SACNN,EAAME,QAAU,GACC,KAARhd,EAAE,GACX8c,EAAME,QAAU,GAEhBF,EAAMM,SACNN,EAAME,QAAUzB,SAASvb,EAAE,GAAI,KAGjC8c,EAAMC,OAASxB,SAASvb,EAAE,GAAI,IAEjB,KAATA,EAAE,IACJ8c,EAAMC,SACND,EAAMO,QAAU,GACC,KAARrd,EAAE,GACX8c,EAAMO,QAAU,GAEhBP,EAAMC,SACND,EAAMO,QAAU9B,SAASvb,EAAE,GAAI,KAGjC0f,IAEA,MAAOA,EAAc9P,EAAK7P,OAAQ,CAChC,IAAI6f,EAAOhQ,EAAK8P,GAAa1gB,OAAO,GAEpC,IACE,IAAIoW,EAAOiG,UAAUzL,EAAK8P,GAAa9O,UAAU,IACjD,MAAO0K,GAEP,MAAM,IAAI/K,MAAM,qCAAuC6E,GAGzD,GAAY,KAARwK,EAEF9C,EAAM/L,MAAM7N,KAAK,IAAI6L,EAAiBW,KAAKH,EAAa6F,SACnD,GAAY,KAARwK,EAET9C,EAAM/L,MAAM7N,KAAK,IAAI6L,EAAiBW,KAAKF,EAAa4F,SACnD,GAAY,KAARwK,EAET9C,EAAM/L,MAAM7N,KAAK,IAAI6L,EAAiBW,KAAKD,EAAY2F,QAClD,IAAY,KAARwK,EAET,MACK,GAAa,KAATA,EAGT,MAAM,IAAIrP,MAAM,uBAAyBqP,EAAO,SAAWxK,GAG7DsK,KAIJ,OAAOjC,GAQT1O,EAAiB2O,UAAY,WAE3B1b,KAAK+O,MAAQ,GAGb/O,KAAKob,OAAS,KAGdpb,KAAK+a,OAAS,KAGd/a,KAAKgb,QAAU,EAGfhb,KAAKqb,QAAU,GAUjBtO,EAAiB2O,UAAU/b,UAAUY,SAAW,WAC9C,IAAIsd,EAASC,EAGXD,EADmB,IAAjB7d,KAAKgb,QACGhb,KAAKob,OAAS,KACC,GAAhBpb,KAAKgb,QACJhb,KAAKob,OAAS,EAEdpb,KAAKob,OAAS,EAAI,IAAMpb,KAAKgb,QAIvC8C,EADmB,IAAjB9d,KAAKqb,QACGrb,KAAK+a,OAAS,KACC,GAAhB/a,KAAKqb,QACJrb,KAAK+a,OAAS,EAEd/a,KAAK+a,OAAS,EAAI,IAAM/a,KAAKqb,QAMzC,IAHA,IACI1N,EADAC,EAAO,CAAC,OAASiQ,EAAU,KAAOC,EAAU,SAGvCvM,EAAI,EAAGA,EAAIvR,KAAK+O,MAAMhR,OAAQwT,IAAK,CAC1C,OAAQvR,KAAK+O,MAAMwC,GAAG,IACpB,KAAK/D,EACHG,EAAK,IACL,MAEF,KAAKJ,EACHI,EAAK,IACL,MAEF,KAAKF,EACHE,EAAK,IACL,MAGJC,EAAK2D,EAAI,GAAK5D,EAAKoL,UAAU/Y,KAAK+O,MAAMwC,GAAG,IAAM,KAGnD,OAAO3D,EAAK6F,KAAK,IAAIxW,QAAQ,OAAQ,MAIvCK,EAAOC,QAAUwP,EACjBzP,EAAOC,QAAQwP,iBAAmBA,EAClCzP,EAAOC,QAAQgQ,YAAcA,EAC7BjQ,EAAOC,QAAQiQ,YAAcA,EAC7BlQ,EAAOC,QAAQkQ,WAAaA,GAItBsQ,IACA,OAMAC,IACA,CAAEC,EAAyBC,EAAqBC,KAEtD,aAGAA,EAAoBrM,EAAEoM,EAAqB,CACzC,QAAW,IAAM,IAInB,IAAIE,EAAYD,EAAoB,KAEhCE,EAAgBF,EAAoB,IAEpCG,EAAcH,EAAoB,KAElCI,EAAaJ,EAAoB,IAEjCK,EAAkBL,EAAoB,KAEtCM,EAAiBN,EAAoB,KAErCO,EAAkBP,EAAoB,IAEtCQ,EAAsB,SAAUC,QAChB,IAAZA,IAAsBA,EAAUC,UACpC,IAAIC,EAAU,SAAUxd,GACpB,IAAIyd,EAAYF,SAASG,cAAc,OACvCD,EAAUE,IAAM3d,EAAG4d,aAAa,YAChCH,EAAUI,iBAAiB,QAAQ,WAC1B7d,EAAG4d,aAAa,UAAa5d,EAAG4d,aAAa,UAC7C5d,EAAG4d,aAAa,UAAa5d,EAAG4d,aAAa,WAC1CH,EAAUK,cAAgBL,EAAUM,cACpCN,EAAUM,aAAeN,EAAUK,cAC/BP,SAASS,cAAc,iBAAiBC,aAAeC,OAAOC,YAAc,KAChFV,EAAUK,cAAiBI,OAAOC,YAAc,KAChDne,EAAGoe,MAAM1W,OAAUwW,OAAOC,YAAc,GAAM,MAGtDne,EAAG2d,IAAMF,EAAUE,OAEvB3d,EAAGqe,gBAAgB,aAEvB,KAAM,yBAA0BH,QAM5B,OALAZ,EAAQgB,iBAAiB,OAAOvgB,SAAQ,SAAUwgB,GAC1CA,EAAWX,aAAa,aACxBJ,EAAQe,OAGT,EAEPL,OAAOM,iCACPN,OAAOM,gCAAgCC,aACvCnB,EAAQgB,iBAAiB,OAAOvgB,SAAQ,SAAUwgB,GAC9CL,OAAOM,gCAAgCE,QAAQH,QAInDL,OAAOM,gCAAkC,IAAIG,sBAAqB,SAAUC,GACxEA,EAAQ7gB,SAAQ,SAAU8gB,IACgB,qBAA1BA,EAAOC,eACgB,IAA7BD,EAAOE,kBACPF,EAAOC,iBACND,EAAOnc,OAAOkb,aAAa,aAC9BJ,EAAQqB,EAAOnc,cAI3B4a,EAAQgB,iBAAiB,OAAOvgB,SAAQ,SAAUwgB,GAC9CL,OAAOM,gCAAgCE,QAAQH,QAMvDS,EAAanC,EAAoB,KAEjCoC,EAAcpC,EAAoB,KAElCqC,EAAgBrC,EAAoB,KAEpCsC,EAAgBtC,EAAoB,KAEpCuC,EAAgBvC,EAAoB,KAEpCwC,EAAiBxC,EAAoB,KAErCyC,EAAYzC,EAAoB,KAEhC0C,EAAkB1C,EAAoB,KAEtC2C,EAAY3C,EAAoB,KAEhC4C,EAAa5C,EAAoB,KAEjC6C,EAAQ7C,EAAoB,KAE5B8C,EAAe,SAAUxY,GACzBoW,SAASe,iBAAiB,kBAAkBvgB,SAAQ,SAAU6hB,GAC7C,IAATzY,GACAyY,EAAOC,UAAUC,IAAI,uBAEzBF,EAAOG,QAAU,WACb,IAAIhW,EAAK6V,EAAOhC,aAAa,QAAQoC,OAAO,GACxCC,EAAM1C,SAAS2C,eAAe,gBAAkBnW,GAAIoW,UACxD5C,SAASS,cAAc,QAAQoC,UAAYH,MAGnD/B,OAAOmC,aAAe,WAClB,IAAI/C,EAAUC,SAAS2C,eAAe,gBAAkBI,mBAAmBpC,OAAOqC,SAASC,KAAKR,OAAO,KACnG1C,IACAC,SAASS,cAAc,QAAQoC,UAAY9C,EAAQ6C,aAM3DM,EAAU5D,EAAoB,KAE9B6D,EAAY7D,EAAoB,KAGhC8D,EAAe,SAAUrD,EAASsD,GAElC,QADa,IAATA,IAAmBA,EAAO,SACC,qBAApBC,iBAAuE,qBAA7BC,yBAArD,CAGA,IAAIC,EAAU,wDACVC,EAAW,yDACVzD,SAAS2C,eAAe,sBACzBa,EAAU,qFACVC,EAAW,iHAEf,IAAIC,EAAY1D,SAASS,cAAc,kBACvC,IAAKiD,EAAW,CACZA,EAAY1D,SAASG,cAAc,OACnCuD,EAAUC,UAAY,gBACtB3D,SAAS4D,KAAKC,sBAAsB,YAAaH,GACjD,IAAII,EAAW,WACX,IACIC,EACAC,EAFAC,EAASX,gBAAgBY,YAc7B,OAXAD,EAAOzjB,SAAQ,SAAU2jB,GACjBA,EAAKd,OAASA,EAAKjlB,QAAQ,IAAK,OAChC2lB,EAAeI,GAEfA,EAAKra,UACLka,EAAeG,MAGlBJ,IACDA,EAAeC,GAEZD,QAE6B1kB,IAApCikB,gBAAgBc,kBAChBd,gBAAgBc,gBAAkBN,GAEtC,IAAIO,EAAUP,IACdJ,EAAUlB,QAAU,WAChB,GAA4B,kBAAxBkB,EAAUC,UAA+B,CACzC,IAAIW,EAAY,IAAIf,yBAAyBG,EAAUrD,aAAa,cACpEiE,EAAUC,MAAQF,EAClBC,EAAUE,MAAQ,WACdd,EAAUC,UAAY,gBACtBL,gBAAgBmB,SAChBf,EAAUgB,UAAYlB,GAE1BF,gBAAgBqB,MAAML,GACtBZ,EAAUC,UAAY,uCACtBD,EAAUgB,UAAYjB,OAGlBH,gBAAgBsB,WACZtB,gBAAgBuB,QAChBvB,gBAAgBwB,SAChBpB,EAAUgB,UAAYjB,IAGtBH,gBAAgByB,QAChBrB,EAAUgB,UAAYlB,KAIlC,EAAGL,EAAiC6B,IAAIrE,OAAOsE,oBAEnDjF,SAAS4D,KAAKtD,iBAAiB,SAAS,WACK,KAArC4E,eAAexjB,WAAWyjB,QAA6C,UAA5BzB,EAAU7C,MAAMuE,UAC3D1B,EAAUC,UAAY,gBACtBL,gBAAgBmB,SAChBf,EAAU7C,MAAMuE,QAAU,WAItCrF,EAAQO,iBAAiB,WAAW,SAAU+E,GAC1C,IAAItW,EAAOmW,eAAexjB,WAAWyjB,OAErC,GADA7B,gBAAgBmB,SACyB,KAArCS,eAAexjB,WAAWyjB,OAA9B,CAOAxE,OAAOsE,kBAAoBC,eAAeI,WAAW,GAAGC,aACxD,IAAIC,EAAON,eAAeI,WAAW,GAAGG,wBACxC/B,EAAUgB,UAAYlB,EACtBE,EAAU7C,MAAMuE,QAAU,QAC1B1B,EAAU7C,MAAM6B,IAAO8C,EAAK9C,IAAM8C,EAAKrb,OAAS6V,SAASS,cAAc,QAAQoC,UAAY,GAAM,KACjGa,EAAU7C,MAAM6E,KAAQL,EAAMM,QAAU,EAAK,KAC7CjC,EAAUkC,aAAa,YAAa7W,OAZA,UAA5B2U,EAAU7C,MAAMuE,UAChB1B,EAAUC,UAAY,gBACtBD,EAAU7C,MAAMuE,QAAU,aAetCS,EAAkD,SAAUC,EAASC,EAAYC,EAAGC,GACpF,SAASC,EAAMriB,GAAS,OAAOA,aAAiBmiB,EAAIniB,EAAQ,IAAImiB,GAAE,SAAUG,GAAWA,EAAQtiB,MAC/F,OAAO,IAAKmiB,IAAMA,EAAII,WAAU,SAAUD,EAASE,GAC/C,SAASC,EAAUziB,GAAS,IAAM0iB,EAAKN,EAAUO,KAAK3iB,IAAW,MAAOoX,GAAKoL,EAAOpL,IACpF,SAASwL,EAAS5iB,GAAS,IAAM0iB,EAAKN,EAAU,SAASpiB,IAAW,MAAOoX,GAAKoL,EAAOpL,IACvF,SAASsL,EAAKlmB,GAAUA,EAAOuD,KAAOuiB,EAAQ9lB,EAAOwD,OAASqiB,EAAM7lB,EAAOwD,OAAOyI,KAAKga,EAAWG,GAClGF,GAAMN,EAAYA,EAAU5kB,MAAMykB,EAASC,GAAc,KAAKS,YAGlEE,EAAsD,SAAUZ,EAASlC,GACzE,IAAsGlkB,EAAGiU,EAAGgT,EAAGC,EAA3G3jB,EAAI,CAAEkJ,MAAO,EAAG0a,KAAM,WAAa,GAAW,EAAPF,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOG,KAAM,GAAIC,IAAK,IAChG,OAAOH,EAAI,CAAEJ,KAAMQ,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BL,EAAEK,OAAOC,UAAY,WAAa,OAAO/lB,OAAUylB,EACvJ,SAASI,EAAKvnB,GAAK,OAAO,SAAU0nB,GAAK,OAAOZ,EAAK,CAAC9mB,EAAG0nB,KACzD,SAASZ,EAAKzX,GACV,GAAIpP,EAAG,MAAM,IAAIO,UAAU,mCAC3B,MAAOgD,EAAG,IACN,GAAIvD,EAAI,EAAGiU,IAAMgT,EAAY,EAAR7X,EAAG,GAAS6E,EAAE,UAAY7E,EAAG,GAAK6E,EAAE,YAAcgT,EAAIhT,EAAE,YAAcgT,EAAE/mB,KAAK+T,GAAI,GAAKA,EAAE6S,SAAWG,EAAIA,EAAE/mB,KAAK+T,EAAG7E,EAAG,KAAKlL,KAAM,OAAO+iB,EAE3J,OADIhT,EAAI,EAAGgT,IAAG7X,EAAK,CAAS,EAARA,EAAG,GAAQ6X,EAAE9iB,QACzBiL,EAAG,IACP,KAAK,EAAG,KAAK,EAAG6X,EAAI7X,EAAI,MACxB,KAAK,EAAc,OAAX7L,EAAEkJ,QAAgB,CAAEtI,MAAOiL,EAAG,GAAIlL,MAAM,GAChD,KAAK,EAAGX,EAAEkJ,QAASwH,EAAI7E,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAK7L,EAAE8jB,IAAI/U,MAAO/O,EAAE6jB,KAAK9U,MAAO,SACxC,QACI,GAAM2U,EAAI1jB,EAAE6jB,OAAMH,EAAIA,EAAEznB,OAAS,GAAKynB,EAAEA,EAAEznB,OAAS,MAAkB,IAAV4P,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE7L,EAAI,EAAG,SACjG,GAAc,IAAV6L,EAAG,MAAc6X,GAAM7X,EAAG,GAAK6X,EAAE,IAAM7X,EAAG,GAAK6X,EAAE,IAAM,CAAE1jB,EAAEkJ,MAAQ2C,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAY7L,EAAEkJ,MAAQwa,EAAE,GAAI,CAAE1jB,EAAEkJ,MAAQwa,EAAE,GAAIA,EAAI7X,EAAI,MAC7D,GAAI6X,GAAK1jB,EAAEkJ,MAAQwa,EAAE,GAAI,CAAE1jB,EAAEkJ,MAAQwa,EAAE,GAAI1jB,EAAE8jB,IAAI1kB,KAAKyM,GAAK,MACvD6X,EAAE,IAAI1jB,EAAE8jB,IAAI/U,MAChB/O,EAAE6jB,KAAK9U,MAAO,SAEtBlD,EAAK8U,EAAKhkB,KAAKkmB,EAAS7iB,GAC1B,MAAOgY,GAAKnM,EAAK,CAAC,EAAGmM,GAAItH,EAAI,EAAK,QAAUjU,EAAIinB,EAAI,EACtD,GAAY,EAAR7X,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEjL,MAAOiL,EAAG,GAAKA,EAAG,QAAK,EAAQlL,MAAM,KAuB9EwjB,EAAe,SAAUC,GACzB,IAAIC,EAAgB,CAChBjF,OAAQ,EACRkF,IAAKxF,EAA6B6E,EAAEY,IACpCC,YAAa,GACbC,WAAaL,GAAWA,EAAQK,WAAc3F,EAA6B6E,EAAEY,KAAO,qBACpFG,KAAM5F,EAAsC6E,EAAEgB,aAC9Cxd,KAAM,MACNiZ,KAAM,QACNwE,SAAU9F,EAA0C6E,EAAEkB,iBACtDC,KAAMhG,EAAsC6E,EAAEoB,aAC9CC,KAAM,QACNC,OAAQ,CACJ3d,QAAQ,GAEZ4d,MAAOpG,EAAuC6E,EAAEwB,eAEpD,OAAO,EAAGjG,EAAiBkG,GAAGf,EAAeD,IAE7CiB,EAAU,SAAUC,EAAQlB,GAC5B,IAAImB,EAAgBpB,EAAaC,GACjC,OAAO,EAAGpF,EAAyBwG,GAAGD,EAAcjB,IAAM,4BAA6B,oBAAoBjb,MAAK,WAC5G,IAAIoc,GAAO,EAAGxF,EAAqByF,GAAG,CAClCC,UAAWJ,EAAcX,SAASe,UAClCC,iBAAkBL,EAAcX,SAASgB,iBACzCC,UAAWN,EAAcd,UACzBqB,OAAQP,EAAcf,YACtBuB,YAAaR,EAAcX,SAASmB,YACpCC,UAAWT,EAAcX,SAASoB,UAClCC,cAAwC,IAAzBV,EAAcnG,OAC7B8G,gBAAiBX,EAAcT,KAAKqB,YACpCC,cAAeb,EAAca,cAC7BC,SAAUd,EAAcX,SAASyB,SACjCC,WAAYf,EAAcX,SAAS0B,WACnCC,UAAWhB,EAAcX,SAAS2B,UAClCC,KAAMjB,EAAcX,SAAS4B,KAC7BC,iBAAkBlB,EAAcX,SAAS6B,iBACzCC,wBAAyBnB,EAAcX,SAAS8B,wBAChDC,SAAUpB,EAAcX,SAAS+B,SACjCC,IAAKrB,EAAcX,SAASgC,MAUhC,OARgB,OAAZxC,QAAgC,IAAZA,OAAqB,EAASA,EAAQyC,YAC1DpB,EAAKqB,eAAe,CAChBD,UAAW,CACPE,QAAS3C,EAAQyC,aAI7BpB,EAAKuB,cAAa,GACXvB,EAAKsB,QAAQzB,OAGxB2B,EAAgB,SAAUC,EAAgBtC,EAAUR,GAAW,OAAOxB,OAAU,OAAQ,OAAQ,GAAQ,WACxG,IAAI2C,EAAelP,EAAM8Q,EAAkBC,EAC3C,OAAO3D,EAAYvlB,MAAM,SAAUmpB,GAC/B,OAAQA,EAAGne,OACP,KAAK,EAED,OADAqc,EAAgBpB,EAAaC,GACtB,CAAC,EAAaiB,EAAQT,EAAUW,IAC3C,KAAK,EAOD,GANAlP,EAAOgR,EAAGzD,OACN2B,EAAc+B,YACdjR,EAAOkP,EAAc+B,UAAUjR,IAEnC6Q,EAAezF,UAAYpL,EAC3B6Q,EAAe7H,UAAUC,IAAI,gBACvBiG,EAAcgC,KAAM,MAAO,CAAC,EAAa,GAC/C,GAAM,CAAC,QAAS,QAAS,QAAS,QAAS,QAAS,SAASC,SAASjC,EAAcnF,MAAO,MAAO,CAAC,EAAa,GAChH,MAAM,IAAI3T,MAAM,2EACpB,KAAK,EAQD,OAPA0a,EAAmB,mBACnBC,EAAiBD,EAAmB5B,EAAcnF,KAClDrD,SAASe,iBAAiB,oBAAuBqJ,EAAmB,MAAO5pB,SAAQ,SAAUkqB,GACrFA,EAAGle,KAAO6d,GACVrK,SAAS2K,KAAKC,YAAYF,MAG3B,CAAC,GAAa,EAAGzI,EAAyBwG,GAAGD,EAAcjB,IAAM,iBAAmBiB,EAAcnF,KAAO,MAAOgH,IAC3H,KAAK,EACDC,EAAGzD,OACHyD,EAAGne,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EACDwU,OAAOkK,WAAarC,EAAcgC,KAClCF,EAAGne,MAAQ,EACf,KAAK,EACD,OAAKqc,EAAcpe,KACZ,CAAC,GAAa,EAAG6X,EAAyBwG,GAAGD,EAAcjB,IAAM,kBAAoBiB,EAAcpe,KAAO,MAAO,qBADxF,CAAC,EAAa,GAElD,KAAK,EACDkgB,EAAGzD,OACHyD,EAAGne,MAAQ,EACf,KAAK,EAyCD,OAxCA,EAAG6V,EAAqC8I,GAAGtC,EAAcL,MAAM4C,QAASvC,EAAcL,MAAM6C,MAC/D,IAAzBxC,EAAcnG,QACd8H,EAAe7H,UAAUC,IAAI,yBAEjC,EAAG7C,EAA2Bnc,GAAG4mB,IACjC,EAAGtK,EAAqC/E,GAAG0N,EAAcb,KAAMwC,EAAgB3B,EAAcjB,MAC7F,EAAG9F,EAA2BwJ,GAAGd,EAAgB,CAC7C5C,IAAKiB,EAAcjB,IACnBQ,KAAMS,EAAcT,QAExB,EAAGpG,EAAiCrd,GAAG6lB,EAAgB3B,EAAcjB,IAAKiB,EAAcP,OACxF,EAAGtI,EAAqCqG,GAAGmE,EAAgB3B,EAAcjB,MACzE,EAAG3H,EAAmCuH,GAAGgD,EAAgB3B,EAAcjB,MACvE,EAAG9H,EAA6ByL,GAAGf,EAAgB3B,EAAcjB,IAAKiB,EAAcP,OACpF,EAAGrG,EAAiCoE,GAAGmE,EAAgB3B,EAAcjB,IAAKiB,EAAcP,OACxF,EAAGnG,EAAmCqJ,GAAGhB,EAAgB3B,EAAcjB,MACvE,EAAGhI,EAAyB6L,GAAGjB,EAAgB3B,EAAcjB,MAC7D,EAAG7F,EAA6B2J,GAAGlB,GAC/B3B,EAAcN,OAAO3d,QACrB6Y,EAAa+G,GAEY,IAAzB3B,EAAcnG,QACdD,EAAaoG,EAAcnG,QAE3BmG,EAAche,OACdge,EAAche,QAEdge,EAAca,eACdvJ,EAAoBqK,GAExBA,EAAe7J,iBAAiB,SAAS,SAAU+E,GAC/C,IAAIiG,GAAc,EAAGpJ,EAAqCqJ,IAAIlG,EAAMlgB,OAAQ,QAC5E,GAAImmB,IAAe,EAAGpJ,EAAsCsJ,IAAIF,EAAa,cAA7E,CACI,IAAIG,EAAiBtB,EAAe1J,cAAc,IAAM6K,EAAYjL,aAAa,mBAC7EoL,GACA9K,OAAO+K,SAAS/K,OAAOgL,QAASF,EAAe7I,oBAKpD,CAAC,WAMpBgJ,EAAgBtM,EAAoB,KAEpCuM,EAAevM,EAAoB,KAqBnCwM,EAAwB,WACxB,SAASA,KA0CT,OAvCAA,EAAOtM,cAAgBA,EAEvBsM,EAAOC,aAAeH,EAAgCI,EAEtDF,EAAOpM,WAAaA,EAA2Bnc,EAE/CuoB,EAAOlM,eAAiBA,EAAmCuH,EAE3D2E,EAAOjM,gBAAkBA,EAAqC/E,EAE9DgR,EAAOrK,WAAaA,EAA2BwJ,EAE/Ca,EAAOnK,cAAgBA,EAAiCrd,EAExDwnB,EAAOnM,gBAAkBA,EAAqCqG,EAE9D8F,EAAOrM,YAAcA,EAA6ByL,EAElDY,EAAOvM,UAAYA,EAAyB6L,EAE5CU,EAAOlK,cAAgBA,EAAiCoE,EAExD8F,EAAOhK,eAAiBA,EAAmCqJ,EAE3DW,EAAOjK,cAAgBA,EAAiCjc,EAExDkmB,EAAOpK,YAAcA,EAA6B2J,EAElDS,EAAO1I,aAAeA,EAEtB0I,EAAOhM,oBAAsBA,EAE7BgM,EAAOxD,QAAUA,EAEjBwD,EAAO1kB,QAAU8iB,EAEjB4B,EAAOD,aAAeA,EAA+BR,EAErDS,EAAO9J,gBAAkBA,EAAqC8I,EACvDgB,EA3CgB,GA6CE,MAAM1lB,EAAS,GAKtC6lB,IACA,CAAE7M,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,EACX,EAAK,IAAM,IAElC,IAAI6M,EAAkB,SAElBC,EAA2B,WAC3B,SAASA,KA0DT,OAxDAA,EAAUC,KAAO,IACjBD,EAAUE,YAAc,qBACxBF,EAAUG,aAAe,IACzBH,EAAUI,oBAAsB,wBAChCJ,EAAUK,cAAgB,CAAC,QAAS,WAAY,OAAQ,SAAU,SAAU,OAAQ,OAChF,eAAgB,UAAW,SAAU,QAAS,OAAQ,QAAS,OAAQ,cAAe,eACtF,gBAAiB,SAAU,SAAU,SACzCL,EAAUM,WAAa,CAAC,OAAQ,QAAS,WAAY,UAAW,SAAU,UAAW,KACjF,WAAY,UAAW,QAAS,WAAY,SAAU,SAAU,OAAQ,WAAY,QAAS,UAC7F,eAAgB,SAAU,SAAU,eAAgB,gBAAiB,SAAU,UAAW,WAC1F,eAAgB,MAAO,iBAAkB,oBAAqB,kBAAmB,UAAW,QAAS,OACrG,MAAO,KAAM,QAAS,cAC1BN,EAAUO,eAAiB,CAAC,UAAW,UAAW,UAAW,WAAY,MAAO,WAAY,YAAa,SACrG,KAAM,KAAM,OAEZ,aAAc,SAAU,OAAQ,IAAK,SAAU,MAAO,MAAO,eAAgB,OAAQ,KAAM,MAAO,OAClG,OAAQ,OAAQ,aAAc,SAAU,OAAQ,MAAO,WAAY,WAAY,QAAS,aAAc,MACtG,eAAgB,OAAQ,YAAa,SAAU,cAAe,IAAK,OAAQ,OAAQ,OAAQ,MAAO,QAClG,QAAS,MAAO,aAAc,QAAS,OACvC,MAAO,UAAW,OAAQ,MAAO,UAAW,SAAU,UAAW,QAAS,aAAc,OAAQ,SAChG,QAAS,aAAc,WAAY,QAAS,QAAS,eACzDP,EAAU3E,IAAM,6CAChB2E,EAAUrE,iBAAmB,CACzBc,WAAW,EACXC,kBAAkB,EAClBG,aAAa,EACbC,WAAW,EACXK,SAAU,GACVC,WAAY,GACZC,WAAW,EACXC,MAAM,EACNC,kBAAkB,EAClBC,yBAAyB,EACzBC,UAAU,EACVC,KAAK,GAETsC,EAAUvE,aAAe,CACrBrd,QAAQ,EACRoiB,YAAY,EACZ9L,MAAO,UAEXsL,EAAUnE,aAAe,CACrB4E,OAAQ,QACRxD,aAAa,EACbyD,OAAQ,IAEZV,EAAU/D,cAAgB,CACtB2C,QAAS,QACT+B,KAAM,CACF,aAAc,aACd,KAAQ,OACR,MAAS,QACT,OAAU,UAEd9B,KAAMmB,EAAU3E,IAAM,2BAEnB2E,EA3DmB,IAkExBY,IACA,CAAE3N,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI2N,EAA0C1N,EAAoB,KAC9D2N,EAA+C3N,EAAoB,KACnE4N,EAA8C5N,EAAoB,IAIvFC,EAAY,SAAUQ,EAASwH,QACf,IAAZxH,IAAsBA,EAAUC,eACxB,IAARuH,IAAkBA,EAAMyF,EAA6DpG,EAAEY,KAC3F,IAAI2F,EAAcD,EAA4CE,iBAAiBC,YAAYtN,GACvFoN,EAAYjuB,OAAS,IACrB,EAAG+tB,EAA8DxE,GAAGlB,EAAM,oCAAqC,qBAAqBjb,MAAK,WACrI6gB,EAAY3sB,SAAQ,SAAU2jB,GACtBA,EAAKmJ,cAAchL,UAAUiL,SAAS,wBACtCpJ,EAAKmJ,cAAchL,UAAUiL,SAAS,2BAGE,SAAxCpJ,EAAK9D,aAAa,oBAGtBmN,MAAMC,UAAUtJ,EAAM+I,EAA4CE,iBAAiBM,QAAQvJ,GAAMgB,QACjGhB,EAAKtD,MAAM8M,UAAY,OACvBxJ,EAAKyB,aAAa,iBAAkB,iBAS9CgI,GACA,CAAExO,EAAyBC,EAAqBC,KAEtD,aACAA,EAAoBuO,EAAExO,GACDC,EAAoBrM,EAAEoM,EAAqB,CACzC,kBAAqB,IAAM,EAC3B,qBAAwB,IAAM,EAC9B,qBAAwB,IAAM,EAC9B,mBAAsB,IAAM,EAC5B,iBAAoB,IAAM,EAC1B,sBAAyB,IAAM,EAC/B,uBAA0B,IAAM,EAChC,sBAAyB,IAAM,IAEtD,IAAIyO,EAAoB,CACpBJ,QAAS,SAAUK,GAAe,OAAOA,EAAYC,aACrDX,YAAa,SAAUtN,GAAW,OAAOA,EAAQgB,iBAAiB,oBAElEkN,EAAuB,CAEvBP,QAAS,SAAUhD,GAAM,OAAOA,EAAGsD,aACnCX,YAAa,SAAUtN,GAAW,OAAOA,EAAQgB,iBAAiB,uBAElEmN,EAAuB,CACvBR,QAAS,SAAUhD,GAAM,OAAOA,EAAGrK,aAAa,cAChDgN,YAAa,SAAU3C,GAAM,OAAOA,EAAG3J,iBAAiB,uBAExDoN,EAAqB,CACrBT,QAAS,SAAUhD,GAAM,OAAOA,EAAG0D,WACnCf,YAAa,SAAU3C,GAAM,OAAOA,EAAG3J,iBAAiB,uBAExDqM,EAAmB,CACnBM,QAAS,SAAUhD,GAAM,OAAOA,EAAGsD,aACnCX,YAAa,SAAU3C,GAAM,OAAOA,EAAG3J,iBAAiB,mBAExDsN,EAAwB,CACxBX,QAAS,SAAUhD,GAAM,OAAOA,EAAGsD,aACnCX,YAAa,SAAU3C,GAAM,OAAOA,EAAG3J,iBAAiB,wBAExDuN,EAAyB,CACzBZ,QAAS,SAAUhD,GAAM,OAAOA,EAAGsD,aACnCX,YAAa,SAAU3C,GAAM,OAAOA,EAAG3J,iBAAiB,yBAExDwN,EAAwB,CACxBb,QAAS,SAAUhD,GAAM,OAAOA,EAAGsD,aACnCX,YAAa,SAAU3C,GAAM,OAAOA,EAAG3J,iBAAiB,yBAMtDyN,IACA,CAAEpP,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI2N,EAA0C1N,EAAoB,KAC9D2N,EAA+C3N,EAAoB,KACnE4N,EAA8C5N,EAAoB,IAIvFG,EAAc,SAAUM,EAASwH,EAAKY,QACtB,IAAZpI,IAAsBA,EAAUC,eACxB,IAARuH,IAAkBA,EAAMyF,EAA6DpG,EAAEY,KAC3F,IAAIiH,EAAkBvB,EAA4CiB,mBAAmBd,YAAYtN,GAC7F0O,EAAgBvvB,OAAS,IACzB,EAAG+tB,EAA8DxE,GAAGlB,EAAM,kCAAmC,uBAAuBjb,MAAK,WACrImiB,EAAgBjuB,SAAQ,SAAUya,GAC9B,IAAIA,EAAEqS,cAAchL,UAAUiL,SAAS,yBACnCtS,EAAEqS,cAAchL,UAAUiL,SAAS,0BADvC,CAIA,IAAIxe,EAAOme,EAA4CiB,mBAAmBT,QAAQzS,GAAGkK,OACrF,GAAKpW,EAGL,IACI,GAAyC,SAArCkM,EAAEoF,aAAa,kBACf,OAEJ,IAAIqO,EAASC,KAAKC,MAAM7f,GACxB8f,QAAQC,KAAK7T,EAAa,SAAVkN,EAAmB,YAAS9oB,GAAW0vB,UAAUL,GACjEzT,EAAE2K,aAAa,iBAAkB,QAErC,MAAOhlB,GACHqa,EAAE0I,UAAY,sBACd1I,EAAEyJ,UAAY,6BAA+B9jB,YAU3DouB,GACA,CAAE5P,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI4P,EAAiD3P,EAAoB,KAE1FI,EAAa,SAAUK,GACvBA,EAAQgB,iBAAiB,cAAcvgB,SAAQ,SAAUya,EAAG1W,GACxD,IAAI+lB,EAAI4E,EAAIzoB,EACZ,IAAIwU,EAAEqS,cAAchL,UAAUiL,SAAS,yBACnCtS,EAAEqS,cAAchL,UAAUiL,SAAS,6BAGnCtS,EAAEqH,UAAUiL,SAAS,qBAAuBtS,EAAEqH,UAAUiL,SAAS,uBACjEtS,EAAEqH,UAAUiL,SAAS,qBAAuBtS,EAAEqH,UAAUiL,SAAS,qBACjEtS,EAAEqH,UAAUiL,SAAS,sBACrBtS,EAAEqH,UAAUiL,SAAS,iBAAmBtS,EAAEqH,UAAUiL,SAAS,sBAC7DtS,EAAEqH,UAAUiL,SAAS,qBAGrBtS,EAAE4F,MAAMsO,UAAU5sB,QAAQ,OAAS,MAInCwd,EAAQuC,UAAUiL,SAAS,mBAAqBhpB,EAAQ,GAA5D,CAGA,IAAI6qB,EAAWnU,EAAEmT,UACjB,GAAInT,EAAEqH,UAAUiL,SAAS,oBAAqB,CAC1C,IAAI8B,EAAcrP,SAASG,cAAc,QACzCkP,EAAY3K,UAAYzJ,EAAEyJ,UAC1B2K,EAAYtO,iBAAiB,iBAAiBvgB,SAAQ,SAAU2jB,GAC5DA,EAAKmL,YAETF,EAAWC,EAAYjB,UAE3B,IAAImB,EAAW,wDACVvP,SAAS2C,eAAe,sBACzB4M,EAAW,2UAEf,IAAIC,EAAaxP,SAASG,cAAc,OACxCqP,EAAW7L,UAAY,cACvB6L,EAAW9K,UAAY,uBAAuD,QAA5B4F,EAAK3J,OAAOkK,kBAA+B,IAAPP,OAAgB,EAASA,EAAGmF,OAAS,MAAQ,wDAAuF,QAA5BP,EAAKvO,OAAOkK,kBAA+B,IAAPqE,OAAgB,EAASA,EAAGO,OAAS,MAAQ,0KAAyM,QAA5BhpB,EAAKka,OAAOkK,kBAA+B,IAAPpkB,OAAgB,EAASA,EAAGgpB,OAAS,OAAS,QAAUF,EAAW,UACniB,IAAIG,EAAW1P,SAASG,cAAc,YACtCuP,EAAS7rB,OAAQ,EAAGorB,EAAkEtG,GAAGyG,GACzFI,EAAW3L,sBAAsB,aAAc6L,GAC/CzU,EAAE0U,OAAOH,GACTvU,EAAE4F,MAAMsO,UAAaxO,OAAOiP,YAAc,GAAM,WAOlDC,IACA,CAAEzQ,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI2N,EAA0C1N,EAAoB,KAC9D2N,EAA+C3N,EAAoB,KACnE4N,EAA8C5N,EAAoB,IAIvFK,EAAkB,SAAUI,EAASwH,QACzB,IAARA,IAAkBA,EAAMyF,EAA6DpG,EAAEY,KAC3F,IAAIsI,EAAoB5C,EAA4CoB,uBAAuBjB,YAAYtN,GACtE,IAA7B+P,EAAkB5wB,SAGtB,EAAG+tB,EAA8DxE,GAAGlB,EAAM,yCAA0C,yBAAyBjb,MAAK,WAC9IwjB,EAAkBtvB,SAAQ,SAAU2jB,GAChC,GAA4C,SAAxCA,EAAK9D,aAAa,kBAAtB,CAGA,IAAI0P,EAAeC,UAAUpB,MAAM1B,EAA4CoB,uBAAuBZ,QAAQvJ,IAC9GA,EAAKO,UAAY,GACjBqL,EAAaE,QAAQ9L,GACrBA,EAAKyB,aAAa,iBAAkB,iBAQ1CsK,IACA,CAAE9Q,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI2N,EAA0C1N,EAAoB,KAC9D2N,EAA+C3N,EAAoB,KACnE4N,EAA8C5N,EAAoB,IAIvFM,EAAiB,SAAUG,EAASwH,QACxB,IAARA,IAAkBA,EAAMyF,EAA6DpG,EAAEY,KAC3F,IAAI2I,EAAmBjD,EAA4CmB,sBAAsBhB,YAAYtN,GACrE,IAA5BoQ,EAAiBjxB,SAGrB,EAAG+tB,EAA8DxE,GAAGlB,EAAM,2BAA4B,wBAAwBjb,MAAK,WAC/H6jB,EAAiB3vB,SAAQ,SAAUya,GAC/B,IAAImV,EAAOlD,EAA4CmB,sBAAsBX,QAAQzS,GACrF,IAAIA,EAAEqS,cAAchL,UAAUiL,SAAS,yBACnCtS,EAAEqS,cAAchL,UAAUiL,SAAS,2BAGE,SAArCtS,EAAEoF,aAAa,mBAAgD,KAAhB+P,EAAKjL,OAAxD,CAGA,IACI,IAAIkL,EAAO,IAAIC,KAAK,CAAC,kBAAoBtQ,SAAS2C,eAAe,wBAAwBvC,IAAIhiB,QAAQ,SAAU,kBAAoB,OAAQ,CAAEwL,KAAM,2BAC/I2mB,EAAM5P,OAAO6P,KAAO7P,OAAO8P,UAC3BC,EAAUH,EAAII,gBAAgBN,GAC9BO,EAAS,IAAIC,OAAOH,GACxB,IAAII,IAAI,CAAEF,OAAQA,IACbG,iBAAiBX,GAAM9jB,MAAK,SAAUjM,GACvC4a,EAAEyJ,UAAYrkB,EAAO2wB,aACtBC,OAAM,SAAUrwB,GACfqa,EAAEyJ,UAAY,8BAAgC9jB,EAC9Cqa,EAAE0I,UAAY,yBAGtB,MAAO1I,GACHpP,QAAQjL,MAAM,iBAAkBqa,GAEpCA,EAAE2K,aAAa,iBAAkB,iBAQvCsL,GACA,CAAE9R,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI2N,EAA0C1N,EAAoB,KAC9D2N,EAA+C3N,EAAoB,KACnE6R,EAA8C7R,EAAoB,KAIvFO,EAAkB,SAAUuR,EAAYrR,EAASwH,QACjC,IAAZxH,IAAsBA,EAAUC,eACxB,IAARuH,IAAkBA,EAAMyF,EAA6DpG,EAAEY,KAC3F,IAAI3G,EAAQuQ,EAAWvQ,MAClBmM,EAA6EpG,EAAE6F,WAAWhC,SAAS5J,KACpGA,EAAQ,UAEZ,IAAIwQ,EAAkBrR,SAAS2C,eAAe,mBAC1C2O,EAAO/J,EAAM,gCAAkC1G,EAAQ,OAK3D,GAJIwQ,GAAmBA,EAAgBC,OAASA,GAC5CD,EAAgB/B,UAEpB,EAAG6B,EAA4DI,GAAGhK,EAAM,gCAAkC1G,EAAQ,OAAQ,oBAChG,IAAtBuQ,EAAW7mB,OAAf,CAGA,IAAIinB,EAAQzR,EAAQgB,iBAAiB,cAChB,IAAjByQ,EAAMtyB,SAGV,EAAG+tB,EAA8DxE,GAAGlB,EAAM,0CAA2C,oBAAoBjb,MAAK,WAC1IyT,EAAQgB,iBAAiB,cAAcvgB,SAAQ,SAAUixB,GAErD,IAAIA,EAAMnE,cAAchL,UAAUiL,SAAS,4BACvCkE,EAAMnE,cAAchL,UAAUiL,SAAS,0BAGvCkE,EAAMnP,UAAUiL,SAAS,qBAAuBkE,EAAMnP,UAAUiL,SAAS,uBACzEkE,EAAMnP,UAAUiL,SAAS,qBAAuBkE,EAAMnP,UAAUiL,SAAS,qBACzEkE,EAAMnP,UAAUiL,SAAS,sBACzBkE,EAAMnP,UAAUiL,SAAS,iBAAmBkE,EAAMnP,UAAUiL,SAAS,sBACrEkE,EAAMnP,UAAUiL,SAAS,oBAG7B5F,KAAK+J,iBAAiBD,GACjBL,EAAWzE,YAAhB,CAGA8E,EAAMnP,UAAUC,IAAI,qBACpB,IAAIoP,EAAkBF,EAAMhR,cAAc,4BACrCkR,IACDA,EAAkB3R,SAASG,cAAc,OACzCwR,EAAgBhO,UAAY,0BAC5B8N,EAAM5N,sBAAsB,YAAa8N,IAE7C,IAAIC,EAAaC,iBAAiBJ,GAAOG,WACrCE,GAAa,EACE,aAAfF,GAA4C,aAAfA,IAC7BE,GAAa,GAEjB,IAAIC,EAAiB,GACjBC,EAAWP,EAAMzD,YAAY1T,MAAM,eACvC0X,EAAShgB,MACTggB,EAASC,KAAI,SAAU1d,GACnB,IAAI2d,EAAa,GACbJ,IACAH,EAAgB3D,YAAczZ,GAAQ,KACtC2d,EAAa,kBAAqBP,EAAgBlM,wBAAwBtb,OAAS,OAEvF4nB,GAAkB,QAAUG,EAAa,cAE7CP,EAAgB9Q,MAAMuE,QAAU,OAChC2M,EAAiB,yCAA6CA,EAAiB,UAC/EN,EAAMU,mBAAmB,YAAaJ,aAQ5CK,IACA,CAAEhT,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI2N,EAA0C1N,EAAoB,KAC9D+S,EAA+C/S,EAAoB,KACnEgT,EAA8ChT,EAAoB,KAClEiT,EAAiDjT,EAAoB,KACrE4N,EAA8C5N,EAAoB,IAMvFmC,EAAa,SAAU1B,EAASsH,GAChC,IAAImL,EAAetF,EAA4CY,kBAAkBT,YAAYtN,GAC7F,GAA4B,IAAxByS,EAAatzB,OAAjB,CAGA,IAAIuzB,EAAiB,CACjBlL,IAAKyF,EAA6DpG,EAAEY,IACpEO,KAAM,CACF6E,OAAQ,QACRxD,aAAa,EACbyD,OAAQ,KAQhB,GALIxF,GAAWA,EAAQU,OACnBV,EAAQU,KACJ2K,OAAOC,OAAO,GAAIF,EAAe1K,KAAMV,EAAQU,OAEvDV,EAAUqL,OAAOC,OAAO,GAAIF,EAAgBpL,GAChB,UAAxBA,EAAQU,KAAK6E,QACb,EAAG0F,EAA4Df,GAAGlK,EAAQE,IAAM,+BAAgC,qBAChH,EAAG8K,EAA8D5J,GAAGpB,EAAQE,IAAM,8BAA+B,qBAAqBjb,MAAK,WACvIkmB,EAAahyB,SAAQ,SAAUutB,GAC3B,IAAIA,EAAYT,cAAchL,UAAUiL,SAAS,yBAC7CQ,EAAYT,cAAchL,UAAUiL,SAAS,4BAG7CQ,EAAY1N,aAAa,aAA7B,CAGA,IAAI0H,GAAO,EAAGwK,EAAkE5J,GAAGuE,EAA4CY,kBAAkBJ,QAAQK,IACzJA,EAAYnI,aAAa,YAAamC,GACtC,IACIgG,EAAYrJ,UAAYkO,MAAMC,eAAe9K,EAAM,CAC/C+K,YAAqC,QAAxB/E,EAAYgF,QACzBC,OAAQ,SAGhB,MAAO/X,GACH8S,EAAYrJ,UAAYzJ,EAAEgY,QAC1BlF,EAAYpK,UAAY,oCAE5BoK,EAAYzN,iBAAiB,QAAQ,SAAU+E,GAC3CA,EAAM6N,kBACN7N,EAAM8N,iBACN,IAAIC,EAAoB/N,EAAMgO,cAAcC,QAAQ,kBACpDjO,EAAMkO,cAAcC,QAAQ,YAAaJ,EAAkB1O,WAC3DW,EAAMkO,cAAcC,QAAQ,aAAcJ,EAAkB/S,aAAa,6BAKpF,GAA4B,YAAxBgH,EAAQU,KAAK6E,OAAsB,CACxC,IAAI6G,EAAe,SAAUC,GACzB,GAAmB,IAAfA,EAAIx0B,OAAR,CAGA,IAAIy0B,EAAO,EACPC,EAAOF,EAAIA,EAAIx0B,OAAS,GACxBsnB,EAAO,WACP,IAAIve,EAAKyrB,EAAIC,KACb1rB,IAAO2rB,EAAO3rB,IAAOA,EAAGue,IAE5BA,MAEC7F,OAAOkT,UACRlT,OAAOkT,QAAU,CACbC,OAAQ,CACJC,MAAO,CAAEC,QAAS3M,EAAQE,IAAM,qBAEpC0M,QAAS,CACLC,SAAS,GAEbC,IAAK,CACDtH,OAAQxF,EAAQU,KAAK8E,WAKjC,EAAGwF,EAAkE+B,GAAG/M,EAAQE,IAAM,mCAAoC,wBAC1H,IAAI8M,EAAe,SAAUtG,EAAavH,GACtC,IAAIuB,GAAO,EAAGwK,EAAkE5J,GAAGoF,EAAYC,aAAa7I,OACxGmP,EAAc3T,OAAOkT,QAAQU,cAAcxG,GAC/CuG,EAAYlP,QAAkC,QAAxB2I,EAAYgF,QAClCpS,OAAOkT,QAAQW,eAAezM,EAAMuM,GAAahoB,MAAK,SAAUmoB,GAC5D1G,EAAYrJ,UAAY,GACxBqJ,EAAYnI,aAAa,YAAamC,GACtCgG,EAAY2G,OAAOD,GACnB9T,OAAOkT,QAAQI,QAAQjU,SAAS2U,QAChChU,OAAOkT,QAAQI,QAAQjU,SAAS4U,iBAChC,IAAIC,EAAmBJ,EAAKhU,cAAc,4BACtCoU,GAA4D,KAAxCA,EAAiB7G,YAAY7I,SACjD4I,EAAYrJ,UAAYmQ,EAAiB7G,YAAY7I,OACrD4I,EAAYpK,UAAY,uBAExB6C,GACAA,QAIZ7F,OAAOkT,QAAQI,QAAQa,QAAQxoB,MAAK,WAiBhC,IAhBA,IAAIyoB,EAAS,GACTC,EAAU,SAAU1wB,GACpB,IAAIypB,EAAcyE,EAAaluB,GAC1BypB,EAAYT,cAAchL,UAAUiL,SAAS,wBAC7CQ,EAAYT,cAAchL,UAAUiL,SAAS,2BAC7CQ,EAAY1N,aAAa,gBAAgB,EAAGkS,EAAkE5J,GAAGoF,EAAYC,aAAa7I,QAC3I4P,EAAO1yB,MAAK,SAAUmkB,GACdliB,IAAMkuB,EAAatzB,OAAS,EAC5Bm1B,EAAatG,GAGbsG,EAAatG,EAAavH,OAKjCliB,EAAI,EAAGA,EAAIkuB,EAAatzB,OAAQoF,IACrC0wB,EAAQ1wB,GAEZmvB,EAAasB,UAQnBE,IACA,CAAE7V,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAI6V,EAAc,SAAUnV,EAASwQ,GACjCxQ,EAAQoS,mBAAmB,WAAY,mCAAwC5B,EAAM,cACrFxQ,EAAQuP,UAER6F,EAAc,SAAUpV,EAASwQ,GACjCxQ,EAAQoS,mBAAmB,WAAY,mCAAwC5B,EAAM,cACrFxQ,EAAQuP,UAER8F,EAAe,SAAUrV,EAASwQ,GAClC,IAAI8E,EAAe9E,EAAIjxB,MAAM,uHACzBg2B,EAAa/E,EAAIjxB,MAAM,+CACvBi2B,EAAUhF,EAAIjxB,MAAM,qDACpBk2B,EAAYjF,EAAIjxB,MAAM,wCACtBm2B,EAAgBlF,EAAIjxB,MAAM,2DAC1Bo2B,EAAmBnF,EAAIjxB,MAAM,2CAC7Bq2B,EAAgBpF,EAAIjxB,MAAM,6CAC1Bs2B,EAAWrF,EAAIjxB,MAAM,wCACrB+1B,GAA2C,KAA3BA,EAAa,GAAGn2B,QAChC6gB,EAAQoS,mBAAmB,WAAY,8DAAoEkD,EAAa,IACnHA,EAAa,GAAK,UAAYA,EAAa,GAAK,IAAO,eAC5DtV,EAAQuP,UAEHgG,GAAcA,EAAW,IAC9BvV,EAAQoS,mBAAmB,WAAY,+DAAoEmD,EAAW,GAAK,eAC3HvV,EAAQuP,UAEHiG,GAAWA,EAAQ,IACxBxV,EAAQoS,mBAAmB,WAAY,kFAAuFoD,EAAQ,GAAK,eAC3IxV,EAAQuP,UAEHkG,GAAaA,EAAU,IAC5BzV,EAAQoS,mBAAmB,WAAY,yDAA8DqD,EAAU,GAAK,8EACpHzV,EAAQuP,UAEHmG,GAAiBA,EAAc,IACpC1V,EAAQoS,mBAAmB,WAAY,wFAA6F0D,mBAAmBJ,EAAc,IAAM,eAC3K1V,EAAQuP,UAEHoG,GAAoBA,EAAiB,IAC1C3V,EAAQoS,mBAAmB,WAAY,gFAAqFuD,EAAiB,GAAK,eAClJ3V,EAAQuP,UAEHqG,GAAiBA,EAAc,IACpC5V,EAAQoS,mBAAmB,WAAY,+EAAoFwD,EAAc,GAAK,eAC9I5V,EAAQuP,UAEHsG,GAAYA,EAAS,KAC1B7V,EAAQoS,mBAAmB,WAAY,4DAAiEyD,EAAS,GAAK,eACtH7V,EAAQuP,WAGZ5N,EAAc,SAAU3B,GACnBA,GAGLA,EAAQgB,iBAAiB,KAAKvgB,SAAQ,SAAUs1B,GAC5C,IAAIvF,EAAMuF,EAASzV,aAAa,QAC3BkQ,IAGDA,EAAIjxB,MAAM,+BACV41B,EAAYY,EAAUvF,GAEjBA,EAAIjxB,MAAM,uBACf61B,EAAYW,EAAUvF,GAGtB6E,EAAaU,EAAUvF,SAQ7BwF,IACA,CAAE3W,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI2N,EAA0C1N,EAAoB,KAC9D2N,EAA+C3N,EAAoB,KACnE4N,EAA8C5N,EAAoB,IAIvFqC,EAAgB,SAAU5B,EAASwH,EAAKY,QAC5B,IAARZ,IAAkBA,EAAMyF,EAA6DpG,EAAEY,KAC3F,IAAIwO,EAAkB9I,EAA4Ce,qBAAqBZ,YAAYtN,GACpE,IAA3BiW,EAAgB92B,SAGpB,EAAG+tB,EAA8DxE,GAAGlB,EAAM,kCAAmC,uBAAuBjb,MAAK,WACrI,IAAI2pB,EAAS,CACTC,cAAe,aACflG,UAAW,CACPmG,YAAY,EACZC,aAAa,GAEjBC,WAAY,aACZC,MAAO,CACHC,YAAa,GACbC,aAAc,IAElBC,cAAe,QACfC,SAAU,CACNC,UAAW,EACXC,eAAgB,EAChBC,eAAgB,EAChBT,aAAa,GAEjBU,aAAa,GAEH,SAAV3O,IACA8N,EAAO9N,MAAQ,OACf8N,EAAOc,eAAiB,CACpBC,mBAAoB,0CACpBC,sBAAuB,UACvBC,mBAAoB,UACpBC,sBAAuB,UACvBC,SAAU,UACVC,YAAa,UACbC,eAAgB,YAChBC,eAAgB,YAChBC,cAAe,kBACfC,mBAAoB,OACpBC,eAAgB,YAChBC,WAAY,OACZC,QAAS,UACTC,QAAS,4BACTC,UAAW,UACXC,WAAY,0CACZC,cAAe,4BACfC,aAAc,UACdC,gBAAiB,UACjBC,cAAe,qDACfC,iBAAkB,YAClBC,iBAAkB,YAClBC,oBAAqB,OACrBC,oBAAqB,6BACrBC,cAAe,UACfC,eAAgB,OAChBC,UAAW,UACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACX5C,WAAY,iCACZ6C,SAAU,OACVC,UAAW,YACXC,gBAAiB,UACjBC,iBAAkB,UAClBC,oBAAqB,UACrBC,WAAY,OACZC,eAAgB,YAChBC,UAAW,YACXC,cAAe,YACfC,QAAS,UACTC,kBAAmB,YACnBC,QAAS,UACTC,WAAY,UACZC,aAAc,UACdC,gBAAiB,4BACjBC,cAAe,UACfC,mBAAoB,8BACpBC,aAAc,UACdC,iBAAkB,UAClBC,UAAW,0CACXC,qBAAsB,+BACtBC,eAAgB,0CAChBC,mBAAoB,sDACpBC,gBAAiB,mDACjBC,iBAAkB,UAClBC,oBAAqB,QACrBC,YAAa,YACbC,gBAAiB,YACjBC,aAAc,0CACdC,gBAAiB,UACjBC,uBAAwB,UACxBC,cAAe,qDACfC,kBAAmB,qDACnBC,mBAAoB,YACpBC,qBAAsB,YACtBC,oBAAqB,6BACrBC,cAAe,yCACfC,kBAAmB,sDACnBC,UAAW,OACXC,WAAY,UACZC,eAAgB,YAGxBC,QAAQC,WAAW3F,GACnBD,EAAgBx1B,SAAQ,SAAU2jB,GAC9B,IAAIiM,EAAOlD,EAA4Ce,qBAAqBP,QAAQvJ,GACxC,SAAxCA,EAAK9D,aAAa,mBAAgD,KAAhB+P,EAAKjL,SAG3DwW,QAAQ7M,UAAKzvB,EAAW8kB,GACxBA,EAAKyB,aAAa,iBAAkB,iBAQ1CiW,IACA,CAAEzc,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI2N,EAA0C1N,EAAoB,KAC9D2N,EAA+C3N,EAAoB,KACnE4N,EAA8C5N,EAAoB,IAIvFsC,EAAgB,SAAU7B,EAASwH,EAAKY,QACxB,IAAZpI,IAAsBA,EAAUC,eACxB,IAARuH,IAAkBA,EAAMyF,EAA6DpG,EAAEY,KAC3F,IAAIsU,EAAkB5O,EAA4CgB,qBAAqBb,YAAYtN,GAC/F+b,EAAgB58B,OAAS,IACzB,EAAG+tB,EAA8DxE,GAAGlB,EAAM,kCAAmC,uBAAuBjb,MAAK,WACrIwvB,EAAgBt7B,SAAQ,SAAUya,GAC9B,IAAIA,EAAEqS,cAAchL,UAAUiL,SAAS,yBACnCtS,EAAEqS,cAAchL,UAAUiL,SAAS,0BADvC,CAIA,IAAIxe,EAAOme,EAA4CgB,qBAAqBR,QAAQzS,GACpF,GAAKlM,EAGL,IACI,GAAyC,SAArCkM,EAAEoF,aAAa,kBACf,OAEJwO,QAAQC,KAAK7T,EAAa,SAAVkN,EAAmB,YAAS9oB,GAAW0vB,UAAU,CAC7DgN,OAAQ,CACJ,CACIvyB,KAAM,CAACmlB,KAAKC,MAAM7L,mBAAmBhU,KACrCitB,kBAAmB,EACnBC,UAAW,CACPC,YAAa,EACbC,MAAO,WAEXhwB,MAAO,CACHiwB,gBAAiB,UACjBC,YAAa,UACbC,aAAc,EACdJ,YAAa,GACbC,MAAO,UACPjK,WAAY,GACZqK,OAAQ,EAAE,EAAG,GACbngB,QAAS,CAAC,EAAG,GACbvd,SAAU,eAEd29B,UAAW,CACPL,MAAO,UACPM,MAAO,GAEXC,MAAM,EACNC,OAAQ,SAAU94B,EAAO+4B,GACrB,IAAItS,EACJ,OAA2E,QAAtEA,EAAgB,OAAXsS,QAA8B,IAAXA,OAAoB,EAASA,EAAOpzB,YAAyB,IAAP8gB,OAAgB,EAASA,EAAGuS,UACpG,SAGA,WAGfjzB,KAAM,SAGdkzB,QAAS,CACLC,QAAS,OACTC,UAAW,eAGnB/hB,EAAE2K,aAAa,iBAAkB,QAErC,MAAOhlB,GACHqa,EAAE0I,UAAY,sBACd1I,EAAEyJ,UAAY,6BAA+B9jB,YAU3Dq8B,IACA,CAAE7d,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI6d,EAA0D5d,EAAoB,KAC9E6d,EAA2C7d,EAAoB,KAGpFuC,EAAgB,SAAUub,EAAgBC,EAAeC,GACzD,IAAIC,EAAU,GACVC,EAAM,GAWV,GAVAhrB,MAAM3M,KAAKu3B,EAAeP,UAAUr8B,SAAQ,SAAU2jB,EAAM5f,GACxD,IAAI,EAAG24B,EAAoFO,GAAGtZ,GAAO,CACjG,GAAImZ,EAAQ,CACR,IAAIr5B,EAAYkgB,EAAK3X,GAAG+O,YAAY,KACpC4I,EAAK3X,GAAK2X,EAAK3X,GAAGuD,UAAU,GAAkB,IAAf9L,OAAmB5E,EAAY4E,GAAa,IAAMM,EAErFi5B,EAAIn7B,KAAK8hB,EAAK3X,IACd+wB,GAAWpZ,EAAK6M,UAAU5yB,QAAQ,QAAS,QAGnC,KAAZm/B,EAEA,OADAF,EAAc3Y,UAAY,GACnB,GAEX,IAAIgZ,EAAc1d,SAASG,cAAc,OACzC,GAAImd,EACAA,EAAO5U,KAAKiV,QAAO,GACQ,YAAvBL,EAAOM,aAA8BN,EAAOl2B,QAAQ2Y,QAAQwN,SAAS6P,GAGzC,OAAvBE,EAAOM,aAAyBN,EAAOl2B,QAAQ2Y,QAAQwN,SAAS6P,GAIrEM,EAAYhZ,UAAY4Y,EAAO5U,KAAKmV,eAAe,eAAiBN,GAHpEG,EAAYhZ,UAAY4Y,EAAO5U,KAAKoV,gBAAgB,eAAiBP,GAHrEG,EAAYhZ,UAAY4Y,EAAO5U,KAAKqV,cAAc,eAAiBR,GAQvED,EAAO5U,KAAKiV,OAAOL,EAAOjW,QAAQjgB,QAAQygB,SAASgC,SAElD,CACDwT,EAAc/a,UAAUC,IAAI,kBAC5B,IAAImG,EAAOsV,KAAKC,MAChBvV,EAAKiV,QAAO,GACZD,EAAYhZ,UAAYgE,EAAKmV,eAAe,eAAiBN,GAEjE,IAAIW,EAAkBR,EAAYS,kBAAkBpd,iBAAiB,6BAerE,OAdAmd,EAAgB19B,SAAQ,SAAU2jB,EAAM5f,GACpC,GAAI4f,EAAKia,oBAA0D,OAApCja,EAAKia,mBAAmBrL,QAAkB,CACrE,IAAIxD,EAAW,uFACVvP,SAAS2C,eAAe,sBACzB4M,EAAW,yJAEfpL,EAAKO,UAAY6K,EAAW,SAAWpL,EAAKO,UAAY,eAGxDP,EAAKO,UAAY,oBAAsBP,EAAKO,UAAY,UAE5DP,EAAKyB,aAAa,iBAAkB4X,EAAIj5B,OAE5Cg5B,EAAUG,EAAYS,kBAAkBzZ,UACT,IAA3BwZ,EAAgBh/B,QAChBm+B,EAAc3Y,UAAY,GACnB6Y,IAEXF,EAAc3Y,UAAY6Y,EACtBD,IACA,EAAGH,EAA2DlS,GAAGoS,EAAe,CAC5E9V,IAAK+V,EAAOjW,QAAQE,IACpBQ,KAAMuV,EAAOjW,QAAQjgB,QAAQ2gB,OAGrCsV,EAAcc,kBAAkB7d,iBAAiB,SAAS,SAAU+E,GAChE,IAAIlgB,EAASkgB,EAAMlgB,OACnB,MAAOA,IAAWA,EAAOk5B,YAAYhB,GAAgB,CACjD,GAAIl4B,EAAOmd,UAAUiL,SAAS,0BAA2B,CACjDpoB,EAAOmd,UAAUiL,SAAS,kCAC1BpoB,EAAOmd,UAAUgN,OAAO,iCACxBnqB,EAAOmoB,cAAc8Q,mBAAmBxY,aAAa,QAAS,mBAG9DzgB,EAAOmd,UAAUC,IAAI,iCACrBpd,EAAOmoB,cAAc8Q,mBAAmBxY,aAAa,QAAS,iBAElEP,EAAM8N,iBACN9N,EAAM6N,kBACN,MAEC,GAAI/tB,EAAOkb,aAAa,kBAAmB,CAC5CgF,EAAM8N,iBACN9N,EAAM6N,kBACN,IAAIoL,EAAYte,SAAS2C,eAAexd,EAAOkb,aAAa,mBAC5D,IAAKie,EACD,OAEJ,GAAIhB,EACA,GAA8B,SAA1BA,EAAOjW,QAAQld,OAAmB,CAClC,IAAIo0B,EAAgBD,EAAU1b,UAAY0a,EAAOvd,QAAQ6C,UACpD0a,EAAOjW,QAAQmX,cAAcC,MAC9BF,GAAiBjB,EAAOoB,QAAQ3e,QAAQ4e,cAE5Che,OAAO+K,SAAS/K,OAAOgL,QAAS4S,QAG5BjB,EAAOvd,QAAQ6C,UAAYjC,OAAOie,SAClCje,OAAO+K,SAAS/K,OAAOgL,QAAS2R,EAAOvd,QAAQ6C,WAE/C0a,EAAOl2B,QAAQ2Y,QAAQwN,SAAS6P,GAChCA,EAAe9P,cAAczK,UAAYyb,EAAU1b,UAGnDwa,EAAeva,UAAYyb,EAAU1b,eAK7CjC,OAAO+K,SAAS/K,OAAOgL,QAAS2S,EAAU1b,WAE9C,MAEJzd,EAASA,EAAOmoB,kBAGjBiQ,KAMLsB,IACA,CAAEzf,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI2N,EAA0C1N,EAAoB,KAC9D2N,EAA+C3N,EAAoB,KACnE4N,EAA8C5N,EAAoB,IAIvFwC,EAAiB,SAAU/B,EAASwH,QACpB,IAAZxH,IAAsBA,EAAUC,eACxB,IAARuH,IAAkBA,EAAMyF,EAA6DpG,EAAEY,KAC3F,IAAIsX,EAAmB5R,EAA4CqB,sBAAsBlB,YAAYtN,GACrE,IAA5B+e,EAAiB5/B,SAGrB,EAAG+tB,EAA8DxE,GAAGlB,EAAM,4CAA6C,wBAAwBjb,MAAK,WAChJwyB,EAAiBt+B,SAAQ,SAAUya,GAC/B,IAAIA,EAAEqS,cAAchL,UAAUiL,SAAS,yBACnCtS,EAAEqS,cAAchL,UAAUiL,SAAS,0BADvC,CAIA,IAAIxe,EAAOme,EAA4CqB,sBAAsBb,QAAQzS,GAAGkK,OACxF,GAAKpW,EAGL,IACIkM,EAAEyJ,UAAY,oDAAuDqa,gBAAgBC,OAAOjwB,GAAQ,KAExG,MAAOnO,GACHqa,EAAE0I,UAAY,sBACd1I,EAAEyJ,UAAY,8BAAgC9jB,YASxDq+B,IACA,CAAE7f,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAI6D,EAAU,SAAUmE,GACpB,IAAIqB,EAAOsV,KAAKC,MAoBhB,OAnBAvV,EAAKwW,UAAU7X,EAAQ0B,QACvBL,EAAKyW,aAAa9X,EAAQyB,WAC1BJ,EAAK0W,iBAAiB/X,EAAQ6B,eAC9BR,EAAK2W,uCAAuChY,EAAQ8B,iBACpDT,EAAK4W,aAAajY,EAAQuB,WAC1BF,EAAKiV,OAAOtW,EAAQwC,KACpBnB,EAAK6W,aAAalY,EAAQ4B,WAC1BP,EAAK8W,eAAenY,EAAQ2B,aAC5BN,EAAK+W,0BAA0BpY,EAAQwB,kBACvCH,EAAKgX,0BAA0BrY,EAAQqC,kBACvChB,EAAKiX,YAAYtY,EAAQuC,UACzBlB,EAAKkX,kCAAkCvY,EAAQsC,yBAC/CjB,EAAKmX,mBAAmBxY,EAAQmC,WAChCd,EAAKoX,YAAYzY,EAAQiC,UACzBZ,EAAKqX,cAAc1Y,EAAQkC,YAC3Bb,EAAKsX,QAAQ3Y,EAAQoC,MACjBpC,EAAQgC,eACRX,EAAKuX,oBAAoB5Y,EAAQgC,eAE9BX,IAMLwX,IACA,CAAE9gB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAI0M,EAAe,SAAUoU,EAAe9c,EAAM8E,QACjC,IAAT9E,IAAmBA,EAAO,cAChB,IAAV8E,IAAoBA,EAAQ,WAChC,IAAIiY,EAAaD,EAAc1a,wBAC3Btb,EAAS,GACb6V,SAAS4D,KAAKuO,mBAAmB,YAAa,iCAA8C,SAAVhK,EAAmB,gBAAkB,IAAM,oKAA+KxH,OAAOkK,WAAWwV,KAAO,2KAA6K1f,OAAOkK,WAAWyV,MAAQ,8KAAiLH,EAAc1D,MAAQ,aAAe0D,EAAch2B,OAAS,6BAA+Bi2B,EAAW1a,KAAO,QAAU0a,EAAW1d,IAAMvY,GAAU,gBAAoBg2B,EAAc9f,aAAa,OAAS,0BACv4BL,SAAS4D,KAAK/C,MAAM0f,SAAW,SAE/B,IAAIvf,EAAahB,SAASS,cAAc,mBACpC+f,EAAc,eAAiBtiC,KAAKgE,IAAI,EAAGye,OAAO8f,WAAaN,EAAc3f,cAAgB,EAAI,OAAStiB,KAAKgE,IAAI,EAAGye,OAAOC,YAAczW,EAASg2B,EAAc5f,eAAiB,EAAI,SAC3LmgB,YAAW,WACP1f,EAAW4E,aAAa,QAAS,oDAAsD4a,GACvFE,YAAW,WACP1f,EAAWsM,cAAc5B,UAAU1K,EAAWsM,cAAcqT,YAAc3f,EAAWsM,cAAc5M,aAAe,GAAIM,EAAWsM,cAAcsT,aAAe5f,EAAWsM,cAAcuT,cAAgB,KACxM,QAGP,IAAIC,EAAa9gB,SAASS,cAAc,oBACxCqgB,EAAWxgB,iBAAiB,SAAS,WACjC,IAAIygB,EAAMrmB,SAASomB,EAAWzgB,aAAa,YAAa,IAAM,GACzD0gB,EAAM,GAAM,IAAM,GAAKZ,EAAc3f,aAAeQ,EAAWsM,cAAcuT,aAC9E7f,EAAWH,MAAM0J,UAAY,eAAiBrsB,KAAKgE,IAAI,EAAGye,OAAO8f,WAAaN,EAAc3f,cAAgB,EAAI,QAAU2f,EAAc3f,aAAe,EAAI2f,EAAc5f,cAAgB,GAAK,kBAAoBwgB,EAAM,OAGxN/f,EAAWH,MAAM0J,UAAYiW,EAAc,YAAcO,EAAM,OAEnED,EAAWlb,aAAa,WAAYmb,EAAIr/B,YACxCg/B,YAAW,WACP1f,EAAWsM,cAAc5B,UAAU1K,EAAWsM,cAAcqT,YAAc3f,EAAWsM,cAAc5M,aAAe,GAAIM,EAAWsM,cAAcsT,aAAe5f,EAAWsM,cAAcuT,cAAgB,KACxM,UAOLG,IACA,CAAE5hB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI2N,EAA0C1N,EAAoB,KAC9D6R,EAA8C7R,EAAoB,KAGvFuM,EAAe,SAAUoV,EAAW1Z,QACxB,IAARA,IAAkBA,EAAMyF,EAA6DpG,EAAEY,KACtFwF,EAA6EpG,EAAE6F,WAAWhC,SAASwW,KACpGA,EAAY,UAEhB,IAAI5P,EAAkBrR,SAAS2C,eAAe,mBAC1C2O,EAAO/J,EAAM,gCAAkC0Z,EAAY,OAC1D5P,EAGIA,EAAgBC,OAASA,IAC9BD,EAAgB/B,UAChB,EAAG6B,EAA4DI,GAAGD,EAAM,qBAJxE,EAAGH,EAA4DI,GAAGD,EAAM,qBAW1E4P,IACA,CAAE9hB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAEb,IAAI8hB,EAA8C7hB,EAAoB,KAEvF0C,EAAkB,SAAUof,EAAcpW,GAC1C,GAAKoW,GAAiBpW,EAAtB,CAGA,IAAIqW,EAAqBrhB,SAAS2C,eAAe,sBAC7C2e,EAAUtW,EAAO,IAAMoW,EAAe,OACrCC,EAGIA,EAAmB/P,OAASgQ,IACjCD,EAAmB/R,UACnB,EAAG6R,EAA4D5P,GAAG+P,EAAS,wBAJ3E,EAAGH,EAA4D5P,GAAG+P,EAAS,yBAW7EC,IACA,CAAEniB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,EACX,EAAK,IAAM,IAElC,IAAImiB,EAAgB,SAAUxW,EAAMxe,GAChC,GAAIwT,SAAS2C,eAAenW,GACxB,OAAO,EAEX,IAAIi1B,EAAS,IAAIC,eACjBD,EAAOE,KAAK,MAAO3W,GAAM,GACzByW,EAAOG,iBAAiB,SAAU,0GAClCH,EAAOI,KAAK,IACZ,IAAIC,EAAgB9hB,SAASG,cAAc,UAC3C2hB,EAAcl4B,KAAO,kBACrBk4B,EAAc/yB,KAAO0yB,EAAOM,aAC5BD,EAAct1B,GAAKA,EACnBwT,SAAS2K,KAAKqX,YAAYF,IAE1B7f,EAAY,SAAU+I,EAAMxe,GAC5B,OAAO,IAAI4Z,SAAQ,SAAUD,EAASE,GAClC,GAAIrG,SAAS2C,eAAenW,GAGxB,OADA2Z,KACO,EAEX,IAAI2b,EAAgB9hB,SAASG,cAAc,UAC3C2hB,EAAc1hB,IAAM4K,EACpB8W,EAAcG,OAAQ,EAEtBjiB,SAAS2K,KAAKqX,YAAYF,GAC1BA,EAAcI,OAAS,WACnB,GAAIliB,SAAS2C,eAAenW,GAIxB,OAFAs1B,EAAcxS,SACdnJ,KACO,EAEX2b,EAAct1B,GAAKA,EACnB2Z,UAQNgc,IACA,CAAE/iB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAI+iB,EAAW,SAAU7R,EAAK/jB,GAC1B,IAAKwT,SAAS2C,eAAenW,GAAK,CAC9B,IAAI61B,EAAeriB,SAASG,cAAc,QAC1CkiB,EAAa71B,GAAKA,EAClB61B,EAAaC,IAAM,aACnBD,EAAaz4B,KAAO,WACpBy4B,EAAa/Q,KAAOf,EACpBvQ,SAASuiB,qBAAqB,QAAQ,GAAGP,YAAYK,MAOvDG,IACA,CAAEpjB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAIojB,EAAc,SAAU1zB,GAExB,OAAOA,EAAK3Q,QAAQ,UAAW,OAM7BskC,IACA,CAAEtjB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,IAEnC,IAAIsjB,EAAW,WACX,OAAOC,UAAUC,UAAUtgC,QAAQ,WAAa,IAAgD,IAA3CqgC,UAAUC,UAAUtgC,QAAQ,WAEjFugC,EAAY,WACZ,OAAOF,UAAUC,UAAUE,cAAcxgC,QAAQ,YAAc,GAE/DygC,EAAqB,WACrB,IACI,MAA+B,qBAAjBC,aAElB,MAAOhoB,GACH,OAAO,IAIXioB,EAAe,WACf,OAAIN,UAAUC,UAAUtgC,QAAQ,WAAa,EAClC,aAGA,SAIX4gC,EAAS,SAAU9d,GACnB,OAAIud,UAAUQ,SAASC,cAAc9gC,QAAQ,QAAU,KAE/C8iB,EAAMie,SAAYje,EAAMke,WAMvBle,EAAMie,UAAWje,EAAMke,UAOhCC,EAAkB,SAAUC,GAuB5B,MAtBI,MAAMC,KAAKd,UAAUQ,WAAoC,WAAvBR,UAAUQ,SACxCK,EAAOlhC,QAAQ,MAAQ,GAAKugC,MAE5BW,EAASA,EAAOrlC,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KAAKA,QAAQ,IAAK,OAKjEqlC,EADAA,EAAOE,WAAW,KACTF,EAAOrlC,QAAQ,IAAK,MAExBqlC,EAAOE,WAAW,MAAgC,MAAxBF,EAAOhhB,OAAO,EAAG,GACvCghB,EAAOrlC,QAAQ,IAAK,MAGpBqlC,EAAOrlC,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAExDqlC,EAASA,EAAOrlC,QAAQ,IAAK,QAAQA,QAAQ,IAAK,SAC7CA,QAAQ,IAAK,OACdqlC,EAAOlhC,QAAQ,UAAY,IAC3BkhC,EAASA,EAAOrlC,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KAAKA,QAAQ,IAAK,OAGlEqlC,GAEPG,EAAW,WACX,MAAO,SAASF,KAAKd,UAAUC,YAAc,aAAaa,KAAKd,UAAUiB,UAMvEC,IACA,CAAE1kB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,IAGd,IAAI0kB,EAAqDzkB,EAAoB,KAE9F0kB,EAA2B,SAAUjkB,EAAS4D,GAC9C,IAAI2P,EAAU2Q,EAAsBlkB,EAAS4D,GACzCugB,GAAgB,EAChBC,GAAU,EACd,MAAO7Q,IAAYA,EAAQhR,UAAUiL,SAAS,kBAAoB4W,EAC9DD,EAAgBD,EAAsB3Q,EAAQhG,cAAe3J,GACzDugB,EACA5Q,EAAU4Q,EAGVC,GAAU,EAGlB,OAAO7Q,IAAW,GAiBlB8Q,EAAqB,SAAUrkB,EAASskB,GACxC,IAAI/Q,GAAU,EAAGyQ,EAA0E5jC,GAAG4f,EAASskB,GACnGH,GAAgB,EAChBC,GAAU,EACd,MAAO7Q,IAAYA,EAAQhR,UAAUiL,SAAS,kBAAoB4W,EAC9DD,GAAgB,EAAGH,EAA0E5jC,GAAGmzB,EAAQhG,cAAe+W,GACnHH,EACA5Q,EAAU4Q,EAGVC,GAAU,EAGlB,OAAO7Q,IAAW,GAElBgR,EAAa,SAAUvkB,GACvB,IAAIwkB,EAAeH,EAAmBrkB,EAAS,MAC3CykB,EAAeJ,EAAmBrkB,EAAS,MAC3C0kB,EAAiBF,EAIrB,OAHIC,KAAkBD,GAAiBA,GAAgBC,EAAajX,SAASgX,MACzEE,EAAiBD,GAEdC,GAEPC,EAAwB,SAAU3kB,EAAS4kB,EAAM9gC,GACjD,IAAKkc,EACD,OAAO,EAEc,IAArBA,EAAQ6kB,WACR7kB,EAAUA,EAAQuN,eAEtB,IAAIrS,EAAI8E,EACJ8kB,GAAY,EAChB,MAAO5pB,IAAM4pB,IAAc5pB,EAAEqH,UAAUiL,SAAS,gBACxCtS,EAAEoF,aAAaskB,KAAU9gC,EACzBghC,GAAY,EAGZ5pB,EAAIA,EAAEqS,cAGd,OAAOuX,GAAa5pB,GAEpB6pB,EAAkB,SAAU/kB,GAC5B,IAAKA,EACD,OAAO,EAEc,IAArBA,EAAQ6kB,WACR7kB,EAAUA,EAAQuN,eAEtB,IAAIrS,EAAI8E,EACJ8kB,GAAY,EACZE,EAAeL,EAAsB3kB,EAAS,aAAc,KAChE,GAAIglB,EACA,OAAOA,EAEX,MAAO9pB,IAAM4pB,IAAc5pB,EAAEqH,UAAUiL,SAAS,gBAC1B,OAAdtS,EAAE8X,SACY,OAAd9X,EAAE8X,SACY,OAAd9X,EAAE8X,SACY,OAAd9X,EAAE8X,SACY,OAAd9X,EAAE8X,SACY,OAAd9X,EAAE8X,SACY,MAAd9X,EAAE8X,SACY,eAAd9X,EAAE8X,SACY,OAAd9X,EAAE8X,SACY,OAAd9X,EAAE8X,QACF8R,GAAY,EAGZ5pB,EAAIA,EAAEqS,cAGd,OAAOuX,GAAa5pB,GAEpB+pB,EAAuB,SAAUjlB,EAASskB,GAC1C,IAAKtkB,EACD,OAAO,EAEc,IAArBA,EAAQ6kB,WACR7kB,EAAUA,EAAQuN,eAEtB,IAAIrS,EAAI8E,EACJ8kB,GAAY,EAChB,MAAO5pB,IAAM4pB,IAAc5pB,EAAEqH,UAAUiL,SAAS,gBACxCtS,EAAEopB,WAAaA,EACfQ,GAAY,EAGZ5pB,EAAIA,EAAEqS,cAGd,OAAOuX,GAAa5pB,GAEpBgpB,EAAwB,SAAUlkB,EAAS4D,GAC3C,IAAK5D,EACD,OAAO,EAEc,IAArBA,EAAQ6kB,WACR7kB,EAAUA,EAAQuN,eAEtB,IAAIrS,EAAI8E,EACJ8kB,GAAY,EAChB,MAAO5pB,IAAM4pB,IAAc5pB,EAAEqH,UAAUiL,SAAS,gBACxCtS,EAAEqH,UAAUiL,SAAS5J,GACrBkhB,GAAY,EAGZ5pB,EAAIA,EAAEqS,cAGd,OAAOuX,GAAa5pB,GAEpBgqB,EAAc,SAAUxQ,GACxB,MAAOA,GAAQA,EAAKyQ,UAChBzQ,EAAOA,EAAKyQ,UAEhB,OAAOzQ,IAML0Q,IACA,CAAE/lB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,EACX,EAAK,IAAM,IAGlC,IAAI+lB,EAAkB,SAAUrlB,EAASskB,GACrC,IAAKtkB,EACD,OAAO,EAEc,IAArBA,EAAQ6kB,WACR7kB,EAAUA,EAAQuN,eAEtB,IAAIrS,EAAI8E,EACJ8kB,GAAY,EAChB,MAAO5pB,IAAM4pB,IAAc5pB,EAAEqH,UAAUiL,SAAS,gBACP,IAAjCtS,EAAEopB,SAAS9hC,QAAQ8hC,GACnBQ,GAAY,EAGZ5pB,EAAIA,EAAEqS,cAGd,OAAOuX,GAAa5pB,GAEpBoqB,EAAuB,SAAUtlB,GACjC,IAAI0L,EAAiB2Z,EAAgBrlB,EAAS,KAC9C,SAAI0L,GAAoD,IAAlCA,EAAesH,QAAQ7zB,QAA2C,OAA3BusB,EAAesH,UACjEtH,IAQT6Z,IACA,CAAElmB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,EAAK,IAAM,IAElC,IAAI8C,EAAQ,WAER,IADA,IAAIkF,EAAU,GACLke,EAAK,EAAGA,EAAKnkC,UAAUlC,OAAQqmC,IACpCle,EAAQke,GAAMnkC,UAAUmkC,GAe5B,IAbA,IAAIpgC,EAAS,GACTqgC,EAAS,SAAUC,GACnB,IAAK,IAAIC,KAAQD,EACTA,EAAIjxB,eAAekxB,KAC+B,oBAA9ChT,OAAO5xB,UAAUY,SAAS9B,KAAK6lC,EAAIC,IACnCvgC,EAAOugC,GAAQvjB,EAAMhd,EAAOugC,GAAOD,EAAIC,IAGvCvgC,EAAOugC,GAAQD,EAAIC,KAK1BphC,EAAI,EAAGA,EAAI+iB,EAAQnoB,OAAQoF,IAChCkhC,EAAOne,EAAQ/iB,IAEnB,OAAOa,IAMLwgC,IACA,CAAEvmB,EAAyBC,EAAqBC,KAEtD,aACqBA,EAAoBrM,EAAEoM,EAAqB,CACzC,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,EACZ,GAAM,IAAM,IAEd,IAAI2N,EAA0C1N,EAAoB,KAC9DsmB,EAA8CtmB,EAAoB,KAClEumB,EAA2CvmB,EAAoB,KAIpFwmB,EAAiB,SAAUxI,GAC3B,IAAIyI,EACAhmB,EAAUud,EAAOA,EAAOM,aAAa7d,QACzC,OAAImF,eAAe8gB,WAAa,IAC5BD,EAAQ7gB,eAAeI,WAAW,GAC9BvF,EAAQse,YAAY0H,EAAME,iBAAmBlmB,EAAQwN,SAASwY,EAAME,iBAC7DF,EAGXzI,EAAOA,EAAOM,aAAamI,MACpBzI,EAAOA,EAAOM,aAAamI,OAEtChmB,EAAQmmB,QACRH,EAAQhmB,EAAQomB,cAAcC,cAC9BL,EAAMM,SAAStmB,EAAS,GACxBgmB,EAAMO,UAAS,GACRP,IAEPQ,EAAoB,SAAUC,GAC9B,IAAIT,EAAQplB,OAAOuE,eAAeI,WAAW,GAC7C,IAAKkhB,EAAOjZ,SAASwY,EAAME,mBAAoB,EAAGJ,EAAsEra,IAAIua,EAAME,eAAgB,sBAC9I,MAAO,CACHvgB,KAAM,EACNhD,IAAK,GAGb,IACI+jB,EADAC,EAAaF,EAAOlZ,cAAc7H,wBAEtC,GAAsC,IAAlCsgB,EAAMY,iBAAiBznC,OACvB,GAAsC,IAAlC6mC,EAAME,eAAerB,SAAgB,CAErC,IAAIgC,EAAWb,EAAME,eAAe3Y,cACpC,KAAIsZ,GAAYA,EAASD,iBAAiBznC,OAAS,GAI/C,MAAO,CACHwmB,KAAM,EACNhD,IAAK,GALT+jB,EAAaG,EAASD,iBAAiB,OAS1C,CACD,IAAI9J,EAAWkJ,EAAME,eAAepJ,SACpC,GAAIA,EAASkJ,EAAMc,cACfhK,EAASkJ,EAAMc,aAAaF,iBAAiBznC,OAAS,EAEtDunC,EAAa5J,EAASkJ,EAAMc,aAAaF,iBAAiB,QAEzD,GAAIZ,EAAME,eAAea,WAAW5nC,OAAS,EAAG,CAEjD,IAAIqmB,EAAawgB,EAAMxgB,aACvBwgB,EAAMgB,WAAWhB,EAAME,eAAea,WAAW5oC,KAAKgE,IAAI,EAAG6jC,EAAMc,YAAc,KACjFJ,EAAaV,EAAMY,iBAAiB,GACpCZ,EAAMiB,OAAOzhB,EAAW0hB,aAAc1hB,EAAW2hB,WACjDnB,EAAMM,SAAS9gB,EAAW0gB,eAAgB1gB,EAAWshB,kBAGrDJ,EAAaV,EAAME,eAAeU,iBAAiB,GAEvD,IAAKF,EAAY,CACb,IAAInZ,EAAgByY,EAAME,eAAea,WAAWf,EAAMc,aAC1D,OAAQvZ,EAAcqZ,gBACjBrZ,EAAcqZ,gBAA4D,IAA1CrZ,EAAcqZ,iBAAiBznC,OAChEouB,EAAgBA,EAAcA,cAElCmZ,EAAanZ,EAAcqZ,iBAAiB,SAKpDF,EAAaV,EAAMY,iBAAiB,GAExC,MAAO,CACHjhB,KAAM+gB,EAAW/gB,KAAOghB,EAAWhhB,KACnChD,IAAK+jB,EAAW/jB,IAAMgkB,EAAWhkB,MAGrCykB,EAAiB,SAAUX,EAAQT,GACnC,IAAKA,EAAO,CACR,GAAkC,IAA9B7gB,eAAe8gB,WACf,OAAO,EAGPD,EAAQ7gB,eAAeI,WAAW,GAG1C,IAAI8hB,EAAYrB,EAAMsB,wBACtB,OAAOb,EAAOnI,YAAY+I,IAAcZ,EAAOjZ,SAAS6Z,IAExDE,EAAoB,SAAUvB,GAC9B,IAAI5iB,EAAYxC,OAAOuE,eACvB/B,EAAUokB,kBACVpkB,EAAUqkB,SAASzB,IAEnB0B,EAAoB,SAAUC,EAAeC,EAAe5B,GAC5D,IAAIlnC,EAAW,CACX+oC,IAAK,EACLriC,MAAO,GAEX,IAAKwgC,EAAO,CACR,GAAkC,IAA9B7gB,eAAe8gB,WACf,OAAOnnC,EAEXknC,EAAQplB,OAAOuE,eAAeI,WAAW,GAE7C,GAAI6hB,EAAeQ,EAAe5B,GAAQ,CACtC,IAAI8B,EAAoB9B,EAAMxgB,aAC1BmiB,EAAcZ,WAAW,IAAMY,EAAcZ,WAAW,GAAGA,WAAW,GACtEe,EAAkBxB,SAASqB,EAAcZ,WAAW,GAAGA,WAAW,GAAI,GAGtEe,EAAkBC,mBAAmBJ,GAEzCG,EAAkBb,OAAOjB,EAAME,eAAgBF,EAAMc,aACrDhoC,EAAS0G,MAAQsiC,EAAkBnmC,WAAWxC,OAC9CL,EAAS+oC,IAAM/oC,EAAS0G,MAAQwgC,EAAMrkC,WAAWxC,OAErD,OAAOL,GAEPkpC,EAAyB,SAAUxiC,EAAOqiC,EAAKpB,GAC/C,IAAIwB,EAAY,EACZzzB,EAAO,EACP0zB,EAAQzB,EAAOM,WAAWvyB,GAC1B2zB,GAAa,EACbC,GAAO,EACX5iC,EAAQrH,KAAKgE,IAAI,EAAGqD,GACpBqiC,EAAM1pC,KAAKgE,IAAI,EAAG0lC,GAClB,IAAI7B,EAAQS,EAAOL,cAAcC,cACjCL,EAAMM,SAAS4B,GAASzB,EAAQ,GAChCT,EAAMO,UAAS,GACf,OAAQ6B,GAAQF,EAAO,CACnB,IAAIG,EAAgBJ,EAAYC,EAAMja,YAAY9uB,OAClD,IAAKgpC,GAAc3iC,GAASyiC,GAAaziC,GAAS6iC,IAChC,IAAV7iC,EACAwgC,EAAMM,SAAS4B,EAAO,GAGe,IAAjCA,EAAMnB,WAAW,GAAGlC,SACpBmB,EAAMM,SAAS4B,EAAMnB,WAAW,GAAIvhC,EAAQyiC,GAEvCC,EAAMI,YACXtC,EAAMuC,eAAeL,EAAMI,aAG3BtC,EAAMwC,cAAcN,GAG5BC,GAAa,EACT3iC,IAAUqiC,GAAK,CACfO,GAAO,EACP,MAGJD,GAAcN,GAAOI,GAAaJ,GAAOQ,IAC7B,IAARR,EACA7B,EAAMiB,OAAOiB,EAAO,GAGiB,IAAjCA,EAAMnB,WAAW,GAAGlC,SACpBmB,EAAMiB,OAAOiB,EAAMnB,WAAW,GAAIc,EAAMI,GAEnCC,EAAMI,YACXtC,EAAMyC,aAAaP,EAAMI,aAGzBtC,EAAM0C,YAAYR,GAG1BE,GAAO,GAEXH,EAAYI,EACZH,EAAQzB,EAAOM,aAAavyB,GAMhC,OAJK4zB,GAAQ3B,EAAOM,WAAWvyB,EAAO,IAClCwxB,EAAMuC,eAAe9B,EAAOM,WAAWvyB,EAAO,IAElD+yB,EAAkBvB,GACXA,GAEP2C,EAAgB,SAAU3oB,EAASgmB,GACnC,IAAI4C,EAAa5oB,EAAQU,cAAc,OACvC,GAAKkoB,EAAL,CAGA,GAAKA,EAAWC,uBAqBZ,GAAID,EAAWC,uBAAuBC,WAAWF,EAAWG,iBAAkB,CAC1E,GAAIH,EAAWC,uBAAuB1D,UAalC,OAXAa,EAAMuC,eAAeK,GACrB5C,EAAMO,UAAS,GACfgB,EAAkBvB,KAEd,EAAGH,EAA4DmD,OAAwD,OAA9CJ,EAAWC,uBAAuB7V,SAC7D,WAA9C4V,EAAWC,uBAAuB7V,SACY,MAA9C4V,EAAWC,uBAAuB7V,UAClCgT,EAAMiD,WAAWhpB,SAASipB,eAAejc,EAA8DpG,EAAEwF,OACzG2Z,EAAMO,UAAS,SAEnBqC,EAAWrZ,SAKXyW,EAAMwC,cAAcI,EAAWC,6BAKnC7C,EAAMM,SAASsC,EAAWG,gBAAiBH,EAAWG,gBAAgB9a,YAAY9uB,aA3ClFypC,EAAWG,gBAEX/C,EAAMM,SAASsC,EAAWG,gBAAiBH,EAAWG,gBAAgB9a,YAAY9uB,QAE7EypC,EAAWN,YACwB,IAApCM,EAAWN,YAAYzD,SAEvBmB,EAAMM,SAASsC,EAAWN,YAAa,GAIvCtC,EAAMuC,eAAeK,EAAWN,aAKpCtC,EAAMM,SAASsC,EAAWrb,cAAe,GA8BjDyY,EAAMO,UAAS,GACfqC,EAAWrZ,SACXgY,EAAkBvB,KAElBmD,EAAa,SAAU5vB,EAAMgkB,GAE7B,IAAII,EAAc1d,SAASG,cAAc,OACzCud,EAAYhZ,UAAYpL,EACxB,IAAI6vB,EAAmBzL,EAAY3c,iBAAiB,KACpB,IAA5BooB,EAAiBjqC,SAAiBiqC,EAAiB,GAAGL,kBAAoBK,EAAiB,GAAGd,aAC9F/K,EAAOA,EAAOM,aAAa7d,QAAQ8c,SAAS39B,OAAS,GAA+C,MAA1Cw+B,EAAYS,kBAAkBpL,UACxFzZ,EAAO6vB,EAAiB,GAAGzkB,UAAUS,QAEzC,IAAIikB,EAAeppB,SAASG,cAAc,OAC1CipB,EAAa1kB,UAAYpL,EACzB,IAAIysB,EAAQD,EAAexI,GAK3B,GAJyB,KAArByI,EAAMrkC,aACN47B,EAAOA,EAAOM,aAAayL,cAAe,EAC1CrpB,SAASspB,YAAY,UAAU,EAAO,KAEtCF,EAAajL,mBACiD,MAA9DiL,EAAajL,kBAAkB9d,aAAa,cAAuB,CAEnE+oB,EAAaG,iBAAiBpX,mBAAmB,YAAa,SAC9D,IAAI4S,GAAe,EAAGc,EAAgE2D,IAAIzD,EAAME,gBAC3FlB,EAIDA,EAAa5S,mBAAmB,WAAYiX,EAAa1kB,WAHzD4Y,EAAOA,EAAOM,aAAa7d,QAAQoS,mBAAmB,YAAaiX,EAAa1kB,WAKpFgkB,EAAcpL,EAAOA,EAAOM,aAAa7d,QAASgmB,OAEjD,CACD,IAAI0D,EAAgBzpB,SAASG,cAAc,YAC3CspB,EAAc/kB,UAAYpL,EAC1BysB,EAAMiD,WAAWS,EAAcC,QAAQC,WAAU,IACjD5D,EAAMO,UAAS,GACfgB,EAAkBvB,OAUZ6D,EAA2B,GAG/B,SAAStqB,EAAoBuqB,GAE5B,IAAIC,EAAeF,EAAyBC,GAC5C,QAAqBxqC,IAAjByqC,EACH,OAAOA,EAAaprC,QAGrB,IAAID,EAASmrC,EAAyBC,GAAY,CAGjDnrC,QAAS,IAOV,OAHAsP,EAAoB67B,GAAUprC,EAAQA,EAAOC,QAAS4gB,GAG/C7gB,EAAOC,QAKf,MAEC4gB,EAAoBrM,EAAI,CAACvU,EAASqrC,KACjC,IAAI,IAAI/hC,KAAO+hC,EACXzqB,EAAoB0qB,EAAED,EAAY/hC,KAASsX,EAAoB0qB,EAAEtrC,EAASsJ,IAC5E0qB,OAAOuX,eAAevrC,EAASsJ,EAAK,CAAEkiC,YAAY,EAAM79B,IAAK09B,EAAW/hC,OAL5E,GAYA,MACCsX,EAAoB0qB,EAAI,CAACvE,EAAKC,IAAUhT,OAAO5xB,UAAU0T,eAAe5U,KAAK6lC,EAAKC,IADnF,GAKA,MAECpmB,EAAoBuO,EAAKnvB,IACH,qBAAXuoB,QAA0BA,OAAOkjB,aAC1CzX,OAAOuX,eAAevrC,EAASuoB,OAAOkjB,YAAa,CAAEtmC,MAAO,WAE7D6uB,OAAOuX,eAAevrC,EAAS,aAAc,CAAEmF,OAAO,MANxD,GAWV,IAAIwb,EAAsB,GAk3UhB,MAh3UV,MACA,aAGAC,EAAoBrM,EAAEoM,EAAqB,CACzC,QAAW,IAAM,KAIRC,EAAoB,KAA/B,IA49CI8qB,EA19CAhkC,EAASkZ,EAAoB,KAE7ByC,EAAYzC,EAAoB,KAEhCmjB,EAAcnjB,EAAoB,KAGlC+qB,EAAc,SAAU/M,GACxB,MAA2B,OAAvBA,EAAOM,aACA,EAAG6E,EAA6B9Z,IAAI2U,EAAOgN,GAAGvqB,QAAQiO,YAAc,MAAM5vB,QAAQ,QAAS,OAEtE,YAAvBk/B,EAAOM,YACLN,EAAO5U,KAAK6hB,aAAajN,EAAOkN,QAAQzqB,QAAQ2E,WAE3B,OAAvB4Y,EAAOM,YACLN,EAAO5U,KAAK+hB,eAAenN,EAAOoN,GAAG3qB,QAAQ2E,WAEjD,IAIPzC,EAAY3C,EAAoB,KAIhCqrB,EAA0B,WAC1B,SAASA,IACLxpC,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,kBACzBxiB,KAAK4e,QAAQ2E,UAAY,2EAoE7B,OAlEAimB,EAAS7pC,UAAU8pC,aAAe,SAAUtN,GACxC,IAAIuN,EAAQ1pC,KACkC,UAA1Cm8B,EAAOwN,SAAS/qB,QAAQc,MAAMuE,UAGlC,EAAGnD,EAAyBwG,GAAG6U,EAAOjW,QAAQE,IAAM,kCAAmC,uBAAuBjb,MAAK,WAC1Gu+B,EAAME,WACPF,EAAME,SAAWlc,QAAQC,KAAKwO,EAAOwN,SAAS/qB,QAAQwpB,mBAE1D,IACIsB,EAAM9qB,QAAQwpB,iBAAiB1oB,MAAMuE,QAAU,QAC/CylB,EAAM9qB,QAAQoe,kBAAkBzZ,UAAY,GAC5CmmB,EAAME,SAAShc,UAAU,CACrBgN,OAAQ,CACJ,CACIvyB,KAAMmlB,KAAKC,MAAM0O,EAAO5U,KAAKsiB,kBAAkBX,EAAY/M,KAC3DtB,kBAAmB,EACnB7vB,MAAO,CACH8+B,MAAO,OACP7O,gBAAiB,wBACjBE,aAAc,EACdH,MAAO,UACPjD,SAAU,GACVhH,WAAY,GACZqK,OAAQ,CAAC,EAAG,IACZngB,QAAS,CAAC,EAAG,EAAG,EAAG,GACnBvd,SAAU,MACVqsC,cAAe,UAEnB1O,UAAW,CACPL,MAAO,UACPvyB,KAAM,QACN6yB,MAAO,GAEX0O,OAAQ,WACRzO,MAAM,EACN9yB,KAAM,SAGdwhC,QAAS,CACLC,OAAQ,GACRC,SAAU,CACNC,UAAW,CACPpP,MAAO,YAGfqP,QAAS,CACLC,QAAS,CACLC,MAAM,GAEVC,YAAa,CACTD,MAAM,IAGdE,MAAO,GACPF,MAAM,KAGdb,EAAME,SAASc,SAEnB,MAAO5wB,GACH4vB,EAAM9qB,QAAQwpB,iBAAiB1oB,MAAMuE,QAAU,OAC/CylB,EAAM9qB,QAAQoe,kBAAkBzZ,UAAYzJ,OAIjD0vB,EAxEkB,GA6EzBmB,EAAgBxsB,EAAoB,KAIpCysB,EAAuB,SAAUrN,EAASsN,GAC1CA,EAAMxrC,SAAQ,SAAUgI,GACpB,GAAKk2B,EAAQl2B,GAAb,CAGA,IAAIyjC,EAAcvN,EAAQl2B,GAAMq0B,SAAS,GACrCoP,GAAeA,EAAY3pB,UAAUiL,SAAS,yBAC9C0e,EAAY3pB,UAAUgN,OAAO,6BAIrC4c,EAAoB,SAAUxN,EAASsN,GACvCA,EAAMxrC,SAAQ,SAAUgI,GACpB,GAAKk2B,EAAQl2B,GAAb,CAGA,IAAIyjC,EAAcvN,EAAQl2B,GAAMq0B,SAAS,GACrCoP,IAAgBA,EAAY3pB,UAAUiL,SAAS,yBAC/C0e,EAAY3pB,UAAUC,IAAI,6BAIlC4pB,EAAgB,SAAUzN,EAASsN,GACnCA,EAAMxrC,SAAQ,SAAUgI,GACpB,GAAKk2B,EAAQl2B,GAAb,CAGA,IAAIyjC,EAAcvN,EAAQl2B,GAAMq0B,SAAS,GACrCoP,GAAeA,EAAY3pB,UAAUiL,SAASxL,EAA6C6E,EAAE2F,sBAC7F0f,EAAY3pB,UAAUgN,OAAOvN,EAA6C6E,EAAE2F,0BAIpF6f,EAAiB,SAAU1N,EAASsN,GACpCA,EAAMxrC,SAAQ,SAAUgI,GACpB,GAAKk2B,EAAQl2B,GAAb,CAGA,IAAIyjC,EAAcvN,EAAQl2B,GAAMq0B,SAAS,GACrCoP,IAAgBA,EAAY3pB,UAAUiL,SAASxL,EAA6C6E,EAAE2F,sBAC9F0f,EAAY3pB,UAAUC,IAAIR,EAA6C6E,EAAE2F,0BAIjF8f,EAAc,SAAU3N,EAASsN,GACjCA,EAAMxrC,SAAQ,SAAUgI,GACfk2B,EAAQl2B,IAGTk2B,EAAQl2B,KACRk2B,EAAQl2B,GAAMqY,MAAMuE,QAAU,YAItCknB,EAAc,SAAU5N,EAASsN,GACjCA,EAAMxrC,SAAQ,SAAUgI,GACfk2B,EAAQl2B,IAGTk2B,EAAQl2B,KACRk2B,EAAQl2B,GAAMqY,MAAMuE,QAAU,aAKtCmnB,EAAY,SAAUjP,EAAQkP,EAAQC,GAClCD,EAAO/hB,SAAS,gBAChB6S,EAAOoB,QAAQ3e,QAAQgB,iBAAiB,gBAAgBvgB,SAAQ,SAAU2jB,GAClEsoB,GAAiBtoB,EAAKka,YAAYoO,KAGtCtoB,EAAKtD,MAAMuE,QAAU,WAErBkY,EAAOoB,QAAQgO,SAASC,QACxBrP,EAAOoB,QAAQgO,SAASC,MAAMpD,iBAAiB1oB,MAAMuE,QAAU,SAGnEonB,EAAO/hB,SAAS,UAChB6S,EAAOsP,KAAK7sB,QAAQc,MAAMuE,QAAU,QAEpCkY,EAAOkN,QAAQqC,SAAWL,EAAO/hB,SAAS,aAC1C6S,EAAOkN,QAAQqC,QAAQhsB,MAAMuE,QAAU,SAG3C0nB,EAAgB,SAAUxP,EAAQyP,EAAcC,EAAWC,GAC3DD,EAAU1sB,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3EA,EAAM8N,iBACN9N,EAAM6N,kBACF8Z,EAAU1qB,UAAUiL,SAASxL,EAA6C6E,EAAE2F,uBAGhF+Q,EAAOoB,QAAQ3e,QAAQgB,iBAAiB,yBAAyBvgB,SAAQ,SAAU2jB,GAC/EA,EAAK7B,UAAUgN,OAAO,2BAES,UAA/Byd,EAAalsB,MAAMuE,QACnB2nB,EAAalsB,MAAMuE,QAAU,QAG7BmnB,EAAUjP,EAAQ,CAAC,aAAc,OAAQ,WAAY0P,EAAU1f,cAAcA,eACxE0f,EAAU1qB,UAAUiL,SAAS,sBAC9Byf,EAAU1qB,UAAUC,IAAI,wBAE5BwqB,EAAalsB,MAAMuE,QAAU,QACzBkY,EAAOoB,QAAQ3e,QAAQ0F,wBAAwBmmB,MAAQoB,EAAUvnB,wBAAwBmmB,MAAQ,IACjGmB,EAAazqB,UAAUC,IAAI,sBAG3BwqB,EAAazqB,UAAUgN,OAAO,4BAO1CpN,EAAa5C,EAAoB,KAEjC+lB,EAAuB/lB,EAAoB,KAE3CxT,EAAM,SAAU1F,EAAQsjC,EAAS9/B,EAAMujC,GACnCA,GAEAthC,QAAQC,IAAI1F,EAAS,MAAQwD,EAAO,KAAO8/B,IAK/CnqB,EAAYD,EAAoB,KAEhCG,EAAcH,EAAoB,KAElCI,EAAaJ,EAAoB,IAEjCK,EAAkBL,EAAoB,KAEtCM,EAAiBN,EAAoB,KAErCO,EAAkBP,EAAoB,IAEtCmC,EAAanC,EAAoB,KAEjCqC,EAAgBrC,EAAoB,KAEpCsC,EAAgBtC,EAAoB,KAEpCwC,EAAiBxC,EAAoB,KAYrC8tB,EAAmB,SAAU9zB,EAAMvK,EAAMnF,QAC5B,IAATA,IAAmBA,EAAO,MAC9B,IAAI8zB,EAAc1d,SAASG,cAAc,OACzCud,EAAYhZ,UAAYpL,EACxB,IAAI+zB,GAAS,EACyB,IAAlC3P,EAAY4P,mBACZ5P,EAAY6L,iBAAiB1oB,MAAMwV,WAAW9zB,QAAQ,cAAgB,IAEtE8qC,GAAS,GAEb,IAAIE,EAAO7P,EAAY3c,iBAAiB,OAgBxC,GAfsC,IAAlC2c,EAAY4P,mBAA2C,IAAhBC,EAAKruC,QACnB,mBAAtBquC,EAAK,GAAG5pB,WACc,cAAtB4pB,EAAK,GAAG5pB,YAEX0pB,GAAS,GAE4B,IAArC/zB,EAAK/W,QAAQ,sBAEb8qC,GAAS,GAEyB,IAAlC3P,EAAY4P,mBAAqE,UAA1C5P,EAAYS,kBAAkBpL,SACrE2K,EAAYjd,cAAc,iBAAmBid,EAAYjd,cAAc,mBAEvE4sB,GAAS,GAETA,EAAQ,CACR,IAAIjd,EAAOrhB,GAAQuK,EACnB,MAAI,KAAKoqB,KAAKtT,IAAyB,IAAhBmd,EAAKruC,OACX,YAAT0K,EACO,uFAA+FwmB,EAAKhyB,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAU,2BAEvJ,UAAYgyB,EAAKhyB,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAU,QAG1D,YAATwL,EACO,SAAWwmB,EAAKhyB,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAU,eAEnE,IAAMgyB,EAAO,IAG5B,OAAO,GAEPod,EAAoB,SAAUC,EAAcnQ,GAC5C,GAAKmQ,EAGL,GAA6D,eAAzDA,EAAangB,cAAcjN,aAAa,aAA5C,CAIA,IAAIqtB,EAAWD,EAAatP,kBAAkBxa,UAAUvlB,QAAQ,YAAa,IACxEsvC,IAGY,QAAbA,GACA,EAAGnuB,EAAyB6L,GAAGqiB,EAAcnQ,EAAOjW,QAAQE,KAE1C,YAAbmmB,GACL,EAAG/rB,EAAiCrd,GAAGmpC,EAAcnQ,EAAOjW,QAAQE,IAAK+V,EAAOjW,QAAQc,OAEtE,cAAbulB,GACL,EAAG/tB,EAAqCqG,GAAGynB,EAAcnQ,EAAOjW,QAAQE,KAEtD,YAAbmmB,GACL,EAAGjuB,EAA6ByL,GAAGuiB,EAAcnQ,EAAOjW,QAAQE,IAAK+V,EAAOjW,QAAQc,OAElE,YAAbulB,GACL,EAAG9rB,EAAiCoE,GAAGynB,EAAcnQ,EAAOjW,QAAQE,IAAK+V,EAAOjW,QAAQc,OAEtE,aAAbulB,GACL,EAAG5rB,EAAmCqJ,GAAGsiB,EAAcnQ,EAAOjW,QAAQE,KAEpD,aAAbmmB,GACL,EAAG9tB,EAAmCuH,GAAGsmB,EAAcnQ,EAAOjW,QAAQE,KAEpD,SAAbmmB,GACL,EAAGjsB,EAA2BwJ,GAAGwiB,EAAc,CAAElmB,IAAK+V,EAAOjW,QAAQE,IAAKQ,KAAMuV,EAAOjW,QAAQjgB,QAAQ2gB,SAGvG,EAAGlI,EAAqC/E,GAAG4X,OAAOC,OAAO,GAAI2K,EAAOjW,QAAQjgB,QAAQugB,MAAO8lB,EAAcnQ,EAAOjW,QAAQE,MACxH,EAAG7H,EAA2Bnc,GAAGkqC,IAErCA,EAAa7nB,aAAa,cAAe,WAnCrC6nB,EAAa7nB,aAAa,cAAe,MAuC7CzC,EAAY7D,EAAoB,KAMhCquB,EAAY,SAAUrQ,GACtB,GAA2B,OAAvBA,EAAOM,YAAX,CAGA,IAAI+J,EAAgBrK,EAAOA,EAAOM,aAAa7d,QAC3Cwd,EAAUD,EAAO5yB,QAAQrE,OAAOi3B,GACpB,KAAZC,IACAA,EAAU,SAEdoK,EAAc5mB,iBAAiB,2BAA2BvgB,SAAQ,SAAU2jB,GACxEA,EAAKO,UAAY6Y,GACjB,EAAG9b,EAA2BwJ,GAAG9G,EAAM,CACnCoD,IAAK+V,EAAOjW,QAAQE,IACpBQ,KAAMuV,EAAOjW,QAAQjgB,QAAQ2gB,YAIrC6lB,EAAW,SAAUvoB,EAAOiY,GAC5B,IAAIhS,GAAc,EAAGpJ,EAAqCqJ,IAAIlG,EAAMlgB,OAAQ,QAC5E,GAAImmB,IAAe,EAAGpJ,EAAsCsJ,IAAIF,EAAa,cAA7E,CACI,IAAIG,EAAiB6R,EAAOA,EAAOM,aAAa7d,QAAQU,cAAc,IAAM6K,EAAYjL,aAAa,mBACrG,GAAIoL,EACA,GAA8B,SAA1B6R,EAAOjW,QAAQld,OAAmB,CAClC,IAAIo0B,EAAgB9S,EAAe7I,UAAY0a,EAAOvd,QAAQ6C,UACzD0a,EAAOjW,QAAQmX,cAAcC,MAC9BF,GAAiBjB,EAAOoB,QAAQ3e,QAAQ4e,cAE5Che,OAAO+K,SAAS/K,OAAOgL,QAAS4S,QAG5BjB,EAAOvd,QAAQ6C,UAAYjC,OAAOie,SAClCje,OAAO+K,SAAS/K,OAAOgL,QAAS2R,EAAOvd,QAAQ6C,WAEnD0a,EAAOA,EAAOM,aAAa7d,QAAQ8C,UAAY4I,EAAe7I,iBAM1EirB,EAAa,SAAU9I,EAAczH,EAAQjY,EAAO0gB,GAEpD,GAAIhB,EAAa6D,wBACb7D,EAAa6D,uBAAuBtmB,UAAUiL,SAAS,cAAe,CACtE,GAAkB,cAAdlI,EAAMrd,KACqG,KAA3G,EAAGmb,EAAiC2qB,IAAI/I,EAAczH,EAAOA,EAAOM,aAAa7d,QAASgmB,GAAOxgC,MAGjG,OAFAw/B,EAAa6D,uBAAuBtZ,SACpCye,GAAgBzQ,IACT,EAEX,GAAI0Q,GAAkB1Q,EAAQjY,EAAO0gB,EAAOhB,EAAcA,EAAa6D,wBACnE,OAAO,EAIf,GAAI7D,EAAa3G,oBACb2G,EAAa3G,mBAAmB9b,UAAUiL,SAAS,cAAe,CAClE,GAAkB,WAAdlI,EAAMrd,MACN,EAAGmb,EAAiC2qB,IAAI/I,EAAczH,EAAOA,EAAOM,aAAa7d,QAASgmB,GAAOxgC,OAC1Fw/B,EAAa/W,YAAYigB,YAAY/uC,OAG5C,OAFA6lC,EAAa3G,mBAAmB9O,SAChCye,GAAgBzQ,IACT,EAEX,GAAI4Q,GAAiB5Q,EAAQjY,EAAO0gB,EAAOhB,EAAcA,EAAa3G,oBAClE,OAAO,EAIf,GAAkB,cAAd/Y,EAAMrd,KAAqC,WAAdqd,EAAMrd,IAAkB,CACrD,IAAImmC,GAAa,EAAGjsB,EAAsCsJ,IAAIua,EAAME,eAAgB,cACpF,GAAIkI,EAGA,OAFAA,EAAW7e,SACXye,GAAgBzQ,IACT,IAefjzB,EAAQ,SAAUizB,EAAQyI,EAAOqI,EAAa/oB,QAC1B,IAAhB+oB,IAA0BA,GAAc,GAC5C,IAAIrJ,GAAe,EAAG7iB,EAAgCsnB,IAAIzD,EAAME,gBAEhE,GAAIlB,IAAiBqJ,GAA0D,eAA3CrJ,EAAa1kB,aAAa,aAA+B,CACzF,GAAKguB,GAAOtJ,EAAargB,YAAcqgB,EAAa6D,wBAChD0F,GAAYvJ,EAAargB,WACzB,OAMJ,IAHA,IAAImiB,GAAc,EAAG1jB,EAAiC2qB,IAAI/I,EAAczH,EAAOoN,GAAG3qB,QAASgmB,GAAOxgC,MAE9FgpC,GAAa,EACRjqC,EAAIuiC,EAAc,EAE3BviC,EAAIygC,EAAa/W,YAAYvL,OAAO,EAAGokB,GAAatrB,YAAY,MAAOjX,IACnE,GAA2C,MAAvCygC,EAAa/W,YAAY7vB,OAAOmG,IAEO,OAAvCygC,EAAa/W,YAAY7vB,OAAOmG,GAAa,CAC7CiqC,GAAa,EACb,MAGY,IAAhB1H,IACA0H,GAAa,GAGjB,IAAIC,GAAW,EACf,IAASlqC,EAAIuiC,EAAc,EAAGviC,EAAIygC,EAAa/W,YAAY9uB,OAAQoF,IAC/D,GAA2C,MAAvCygC,EAAa/W,YAAY7vB,OAAOmG,IAAqD,OAAvCygC,EAAa/W,YAAY7vB,OAAOmG,GAAa,CAC3FkqC,GAAW,EACX,MAGR,GAAID,EACA,OAEJ,GAAIC,EAAU,CACV,IAAIC,GAAgB,EAAGvsB,EAAsCsJ,IAAIua,EAAME,eAAgB,qBACvF,IAAIwI,EAGC,CACD,IAAIC,EAAe3I,EAAME,eAAe6C,gBAKxC,YAJI4F,GAA0C,IAA1BA,EAAa9J,UAAkB8J,EAAapsB,UAAUiL,SAAS,4BAE/EmhB,EAAapsB,UAAUgN,OAAO,8BAc9C,GARAgO,EAAOoN,GAAG3qB,QAAQgB,iBAAiB,4BAA4BvgB,SAAQ,SAAU2jB,GAC7EA,EAAK7B,UAAUgN,OAAO,8BAErByV,IAEDA,EAAezH,EAAOoN,GAAG3qB,UAGxBglB,EAAatkB,cAAc,OAAQ,CACpC,IAAIkuB,GAAuB,EAAGzsB,EAAsCsJ,IAAIua,EAAME,eAAgB,sBAC1F0I,EACAA,EAAqB/F,uBAAuBzW,mBAAmB,YAAa,SAG5E4T,EAAMiD,WAAWhpB,SAASG,cAAc,QAIhD4kB,EAAahkB,iBAAiB,WAAWvgB,SAAQ,SAAU2jB,GACvDA,EAAKrD,gBAAgB,YAEsB,wBAA3CikB,EAAa1kB,aAAa,eAE1B0kB,EAAezH,EAAOoN,GAAG3qB,SAE7B,IAiFI6uB,EAjFAC,EAAc9J,EAAa1G,YAAYf,EAAOoN,GAAG3qB,SACjD+uB,GAAkB,EAAG5sB,EAAsC6sB,IAAIhK,EAAc,YAAa,mBAC1FzrB,EAAO,GACX,GAAKu1B,EAsDDv1B,EAAOyrB,EAAargB,cAtDN,CACd,IAAIsqB,GAAoB,EAAG3J,EAA0CllC,GAAG4lC,EAAME,eAAgB,cAE1FxB,GAAiB,EAAGviB,EAA2B+sB,IAAIlJ,EAAME,gBAa7D,GAZIxB,IACAM,EAAeN,GAGfuK,KAAuBvK,GAAmBA,IAAmBuK,EAAkBzhB,SAASkX,MACxFM,EAAeiK,GAGfF,IACA/J,EAAe+J,GAEnBx1B,EAAOyrB,EAAa/T,UACS,OAAzB+T,EAAahS,SAA6C,OAAzBgS,EAAahS,QAAkB,CAEhE,IAAImc,EAAkBnK,EAAa6D,uBAC/BuG,EAAkBpK,EAAa3G,oBAC/B8Q,GAAgD,OAA5BA,EAAgBnc,SAAgD,OAA5Bmc,EAAgBnc,UACxEzZ,EAAO41B,EAAgBle,UAAY1X,EACnC41B,EAAgB5f,WAEhB6f,GAAgD,OAA5BA,EAAgBpc,SAAgD,OAA5Boc,EAAgBpc,UACxEzZ,GAAc61B,EAAgBne,UAC9Bme,EAAgB7f,UAGpBhW,EAAOA,EAAKlb,QAAQ,uBAAwB,kCAEvC2mC,EAAa6D,wBACoF,KAAtG7D,EAAa6D,uBAAuB5a,YAAY5vB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,KAC9F/G,GAA6B,oBAApBA,EAAM+pB,YAEf91B,EAAOyrB,EAAa6D,uBAAuB5X,UAAY1X,EACvDyrB,EAAa6D,uBAAuBtZ,UAGxCgO,EAAOoN,GAAG3qB,QAAQgB,iBAAiB,qCAAqCvgB,SAAQ,SAAU2jB,GAClFA,IAAS4gB,EAAa1G,YAAYla,KAClC7K,GAAQ6K,EAAK6M,UACb7M,EAAKmL,aAIbgO,EAAOoN,GAAG3qB,QAAQgB,iBAAiB,iCAAiCvgB,SAAQ,SAAU2jB,GAC9EA,IAAS4gB,EAAa1G,YAAYla,KAClC7K,GAAQ6K,EAAK6M,UACb7M,EAAKmL,aAUjB,GAHAxjB,EAAI,kBAAmBwN,EAAM,WAAYgkB,EAAOjW,QAAQgoB,UACxD/1B,EAAOgkB,EAAO5U,KAAKoV,gBAAgBxkB,GACnCxN,EAAI,kBAAmBwN,EAAM,SAAUgkB,EAAOjW,QAAQgoB,UAClDR,EACA9J,EAAargB,UAAYpL,OAKzB,GAFAyrB,EAAa/T,UAAY1X,EAErBw1B,EAAiB,CACjB,IAAIQ,GAAsB,EAAGptB,EAAsC6sB,IAAIzR,EAAOoN,GAAG3qB,QAAQU,cAAc,OAAQ,YAAa,iBAC5H,GAAI6uB,EAAqB,CACrB,IAAIC,EAAmBD,EAAoBthB,YACvCwhB,EAASD,EAAiBx/B,UAAU,EAAGw/B,EAAiBhtC,QAAQ,OAChEktC,EAAqBnS,EAAOoN,GAAG3qB,QAAQU,cAAc,wDAA6D+uB,EAAS,MAC3HC,GACAA,EAAmB7pB,aAAa,aAAc2pB,EAAiB9sB,OAAO+sB,EAAOtwC,OAAS,GAAGimB,OAAO1C,OAAO,EAAG,MAO1H,IAcIitB,EAdAC,EAAwBrS,EAAOoN,GAAG3qB,QAAQgB,iBAAiB,qCAC/D4uB,EAAsBnvC,SAAQ,SAAU2jB,EAAM5f,GAC5B,IAAVA,EACAqqC,EAAyBzqB,GAGzByqB,EAAuBzc,mBAAmB,YAAahO,EAAKO,WAC5DP,EAAKmL,aAGTqgB,EAAsBzwC,OAAS,GAC/Bo+B,EAAOoN,GAAG3qB,QAAQ8D,sBAAsB,YAAa8rB,EAAsB,IAI/E,IAAIC,EAAqBtS,EAAOoN,GAAG3qB,QAAQgB,iBAAiB,iCAC5D6uB,EAAmBpvC,SAAQ,SAAU2jB,EAAM5f,GACzB,IAAVA,EACAmrC,EAAuBvrB,GAGvBurB,EAAqBvd,mBAAmB,YAAahO,EAAKO,WAC1DP,EAAKmL,aAGTsgB,EAAmB1wC,OAAS,GAC5Bo+B,EAAOoN,GAAG3qB,QAAQ8D,sBAAsB,YAAa+rB,EAAmB,KAE5E,EAAGzsB,EAA6B0sB,IAAIvS,EAAOoN,GAAG3qB,QAASgmB,GACvDzI,EAAOoN,GAAG3qB,QAAQgB,iBAAiB,wCAAwCvgB,SAAQ,SAAU2jB,GACzFqpB,EAAkBrpB,EAAMmZ,MAE5BqQ,EAAUrQ,GACVwS,GAA2BxS,EAAQ,CAC/ByS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAOjBC,EAAc,SAAUC,EAAQ9qB,GAChC,GAAe,KAAX8qB,EACA,OAAO,EAGX,IAA6B,IAAzBA,EAAO5tC,QAAQ,OAAwC,IAAzB4tC,EAAO5tC,QAAQ,OAAwC,IAAzB4tC,EAAO5tC,QAAQ,KAC3E,SAAK,EAAGupC,EAA0BsE,IAAI/qB,IAAWA,EAAMgrB,QAAWhrB,EAAMirB,UAAYjrB,EAAM+K,OAAS+f,GAMvG,GAAe,SAAXA,EACA,SAAK,EAAGrE,EAA0BsE,IAAI/qB,IAAWA,EAAMgrB,SAAUhrB,EAAMirB,UAA2B,QAAfjrB,EAAM+K,MAK7F,IAAImgB,EAAUJ,EAAO71B,MAAM,IAC3B,GAAI61B,EAAOxM,WAAW,KAAM,CAExB,IAAI6M,EAA6B,IAAnBD,EAAQrxC,OAAeqxC,EAAQ,GAAKA,EAAQ,GAC1D,SAAwB,IAAnBA,EAAQrxC,SAAe,EAAG4sC,EAA0BsE,IAAI/qB,IAAU,EAAGymB,EAA0BsE,IAAI/qB,MAAWA,EAAMgrB,QAAWhrB,EAAMirB,UACtIjrB,EAAM+K,QAAU,UAAUsT,KAAK8M,GAAW,QAAU,OAASA,GAMtD,WAAXL,IACAI,EAAU,CAAC,IAAK,UAEpB,IAAIE,EAAWF,EAAQrxC,OAAS,GAAqB,MAAfqxC,EAAQ,GAC1CvoC,EAAOyoC,EAAWF,EAAQ,GAAKA,EAAQ,GAS3C,OARIE,KAAa,EAAG3E,EAA6B4E,OAAU,MAAMhN,KAAKd,UAAUQ,YAChE,MAARp7B,EACAA,EAAM,IAEO,MAARA,IACLA,EAAM,UAGV,EAAG8jC,EAA0BsE,IAAI/qB,IAAUA,EAAMrd,IAAI+6B,gBAAkB/6B,EAAI+6B,eAAkB1d,EAAMgrB,WAC7FI,IAAaprB,EAAMirB,UAAcG,GAAYprB,EAAMirB,YAS7DK,EAAa,SAAU5K,GACvB,IAAIE,EAAiBF,EAAME,eAC3B,GAAgC,IAA5BA,EAAerB,UAAkBqB,EAAe2K,UAAU1xC,SAAW6mC,EAAMc,YAC3E,OAAO,EAEX,IAAIgK,EAAW5K,EAAeoC,YAC9B,MAAOwI,GAAqC,KAAzBA,EAAS7iB,YACxB6iB,EAAWA,EAASxI,YAExB,IAAKwI,EAAU,CAEX,IAAIpC,GAAgB,EAAGvsB,EAAsCsJ,IAAIya,EAAgB,qBACjF,GAAIwI,IAAkBA,EAAcpG,YAAa,CAC7C,IAAIyI,EAAiB7K,EAAe3Y,cAAcA,cAAc+a,YAChE,GAAIyI,GAA8C,IAA5BA,EAAelM,UACjCkM,EAAexuB,UAAUiL,SAAS,mBAClC,OAAOujB,EAGf,OAAO,EAEN,SAAID,GAAkC,IAAtBA,EAASjM,WAAkBiM,EAASvuB,UAAUiL,SAAS,oBACvEsjB,EAASxwB,aAAa,gBAEhBwwB,GAIXE,EAAiB,SAAUhL,GAC3B,IAAIE,EAAiBF,EAAME,eACvByI,EAAezI,EAAe6C,gBAClC,QAAgC,IAA5B7C,EAAerB,UAAwC,IAAtBmB,EAAMc,cAAqB6H,GAA0C,IAA1BA,EAAa9J,WAEzF8J,EAAapsB,UAAUiL,SAAS,oBAAuBmhB,EAAaruB,aAAa,gBAC1EquB,GAIXsC,EAAe,SAAUjL,EAAOzI,GAChCA,EAAOoN,GAAG3qB,QAAQgB,iBAAiB,4BAA4BvgB,SAAQ,SAAU2jB,GAC7EA,EAAK7B,UAAUgN,OAAO,8BAE1B,IAAI2hB,GAAc,EAAG/uB,EAAyCgvB,IAAInL,EAAME,eAAgB,mBACpFkL,GAAkBpL,EAAMqL,YAAa,EAAGlvB,EAAyCgvB,IAAInL,EAAMkB,aAAc,mBAE7G,GAAKlB,EAAMqL,WAAeH,GAAeA,IAAgBE,EAAzD,CAGIF,IACAA,EAAY3uB,UAAUC,IAAI,2BAC1B0uB,EAAY3uB,UAAUgN,OAAO,4BAE7B,EAAGnM,EAAiC6B,IAAI+gB,IAE5C,IAAI8K,EAAWF,EAAW5K,GAC1B,GAAI8K,EAGA,OAFAA,EAASvuB,UAAUC,IAAI,gCACvBsuB,EAASvuB,UAAUgN,OAAO,2BAG9B,IAAIof,EAAeqC,EAAehL,GAClC,OAAI2I,GACAA,EAAapsB,UAAUC,IAAI,gCAC3BmsB,EAAapsB,UAAUgN,OAAO,iCAFlC,IAmBA+hB,EAAiB,SAAU/T,EAAQjY,GAEnC,GADAiY,EAAOoN,GAAG4G,cAAgBjsB,EAAMksB,YAC5BlsB,EAAMksB,YACN,OAAO,GAGyB,IAAhClsB,EAAMrd,IAAIzF,QAAQ,UAAiC,SAAd8iB,EAAMrd,KAAgC,YAAdqd,EAAMrd,KAAmC,QAAdqd,EAAMrd,KAChF,UAAdqd,EAAMrd,KAAiC,aAAdqd,EAAMrd,KAAoC,WAAdqd,EAAMrd,KAAqB,aAAa07B,KAAKre,EAAMrd,MACxGs1B,EAAOkU,KAAKC,oBAAoBnU,EAAQjY,GAE5C,IAAI0gB,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7C2I,EAAiBF,EAAME,eAC3B,IAAK0L,GAAkBtsB,EAAOiY,EAAQ2I,GAClC,OAAO,EAKX,GAHA2L,GAAe7L,EAAOzI,EAAQjY,GAC9BwsB,GAAM9L,GAEY,UAAd1gB,EAAMrd,KAAiC,QAAdqd,EAAMrd,KAA+B,cAAdqd,EAAMrd,MAAuD,IAAhCqd,EAAMrd,IAAIzF,QAAQ,YAC3F,EAAGupC,EAA0BsE,IAAI/qB,IAAwB,WAAdA,EAAMrd,KAAkC,WAAdqd,EAAMrd,IAC/E,OAAO,EAGX,IAAI8pC,GAAiB,EAAG5vB,EAAsC6sB,IAAI9I,EAAgB,eAAgB,KAClG,KAAK,EAAG6F,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,SAAWhrB,EAAMirB,UAA0B,UAAdjrB,EAAMrd,KAAmB8pC,GACtG/L,EAAMc,YAAciL,EAAe9jB,YAAY9uB,OAAQ,CAC1D,IAAI6yC,EAAsBD,EAAelJ,uBACrCmJ,IACAhM,EAAMiD,WAAWhpB,SAASipB,eAAe8I,EAAoB/jB,cAC7D+X,EAAMO,UAAS,IAEnB,IAAI0L,EAAqBF,EAAezJ,YACpC2J,IACAjM,EAAMiD,WAAWhpB,SAASipB,eAAe+I,EAAmBhkB,cAC5D+X,EAAMO,UAAS,IAGvB,IAAI2L,GAAW,EAAG/vB,EAAqCqJ,IAAI0a,EAAgB,KAE3E,GAAIiM,GAAY7sB,EAAOiY,EAAQ2U,EAAUlM,GACrC,OAAO,EAGX,GAAIoM,GAAQpM,EAAOzI,EAAQ2U,EAAU5sB,GACjC,OAAO,EAGX,GAAI+sB,GAAc9U,EAAQyI,EAAO1gB,EAAO4sB,GACpC,OAAO,EAGX,IAAII,GAAmB,EAAGnwB,EAAsCsJ,IAAIya,EAAgB,0BACpF,GAAIoM,GAAiD,QAA7BA,EAAiBtf,QAAmB,CACxD,IAAIuf,EAAoBD,EAAiBE,WACzC,GAAIC,GAAalV,EAAQjY,EAAOgtB,EAAkBtM,GAC9C,OAAO,EAGX,IAAqD,eAAhDuM,EAAkBjyB,aAAa,cACmB,eAAhDiyB,EAAkBjyB,aAAa,eAClC2tB,GAAkB1Q,EAAQjY,EAAO0gB,EAAOuM,EAAmBD,EAAiB/kB,eAC5E,OAAO,EAGX,GAAI4gB,GAAiB5Q,EAAQjY,EAAO0gB,EAAOuM,EAAmBD,EAAiB/kB,eAC3E,OAAO,EAIf,IAAImlB,GAAmB,EAAGvwB,EAAsC6sB,IAAI9I,EAAgB,YAAa,mBACjG,GAAIwM,EAAkB,CAClB,GAAkB,UAAdptB,EAAMrd,KAAiC,QAAdqd,EAAMrd,IAK/B,OAJA+9B,EAAM+B,mBAAmB2K,EAAiBrU,mBAAmBmU,YAC7DxM,EAAMO,UAAS,GACfjhB,EAAM8N,iBACNoZ,EAAUjP,EAAQ,CAAC,UACZ,EAEX,GAAkB,cAAdjY,EAAMrd,IAAqB,CAC3B,IAAIzC,GAAQ,EAAG4d,EAAiC2qB,IAAI2E,EAAkBnV,EAAOoN,GAAG3qB,SAASxa,MAC3E,IAAVA,GACAwgC,EAAMM,SAASJ,EAAgB,GAErB,IAAV1gC,IACA+3B,EAAOsP,KAAK8F,eAAiB,IAGrC,GAAI1E,GAAkB1Q,EAAQjY,EAAO0gB,EAAO0M,EAAkBA,EAAiBnlB,eAG3E,OADAif,EAAUjP,EAAQ,CAAC,UACZ,EAIf,IAAIqV,GAAc,EAAGzwB,EAAqCqJ,IAAI0a,EAAgB,QAC1E,EAAG/jB,EAAqCqJ,IAAI0a,EAAgB,MAChE,GAAI5gB,EAAMrd,IAAIzF,QAAQ,UAAY,GAAKowC,EAAa,CAChD,IAAIC,EAAeC,GAAYF,GAC/B,GAAIC,GAAgB5E,GAAkB1Q,EAAQjY,EAAO0gB,EAAO4M,EAAaC,GACrE,OAAO,EAEX,IAAIE,EAAgBC,GAAWJ,GAC/B,GAAIG,GAAiB5E,GAAiB5Q,EAAQjY,EAAO0gB,EAAO4M,EAAaG,GACrE,OAAO,EAGf,GAAIE,GAAS1V,EAAQjY,EAAO0gB,GACxB,OAAO,EAGX,GAAIkN,GAAQ3V,EAAQyI,EAAO1gB,GACvB,OAAO,EAGX,GAAI6tB,GAAO5V,EAAQyI,EAAO1gB,GACtB,OAAO,EAEX,IAAIoG,GAAiB,EAAG4Z,EAA+C5H,GAAGwI,GAC1E,GAAIxa,EAAgB,CAEhB,GAAIykB,EAAY,KAAM7qB,GAAQ,CAC1B,IAAI8tB,EAAuB1nB,EAAehL,cAAc,+BAKxD,OAJI0yB,GAAwBA,EAAqBnlB,YAAY7I,OAAOjmB,OAAS,GACzEk0C,GAAuB9V,EAAQ6V,EAAqBnlB,YAAYvL,OAAO,IAE3E4C,EAAM8N,kBACC,EAGX,GAAI+c,EAAY,KAAM7qB,GAAQ,CACtB8tB,EAAuB1nB,EAAehL,cAAc,+BAKxD,OAJI0yB,GAAwBA,EAAqBnlB,YAAY7I,OAAOjmB,OAAS,GACzEk0C,GAAuB9V,EAAQ6V,EAAqBnlB,YAAY7I,OAAS,MAE7EE,EAAM8N,kBACC,GAGf,IAAI4R,GAAe,EAAG7iB,EAAgCsnB,IAAIvD,GAC1D,GAAkB,cAAd5gB,EAAMrd,OAAwB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,QAA+B,KAArBtK,EAAMrkC,WAAmB,CACtI,GAAI2xC,GAAU/V,EAAQyI,EAAO1gB,EAAO4sB,GAChC,OAAO,EAEX,GAAIlN,GAAgBA,EAAa6D,wBACD,OAAzB7D,EAAahS,SAA6C,OAAzBgS,EAAahS,UACqB,eAAlEgS,EAAa6D,uBAAuBvoB,aAAa,cACiB,eAAlE0kB,EAAa6D,uBAAuBvoB,aAAa,cAAgC,CACrF,IAAIizB,GAAa,EAAGnwB,EAAiC2qB,IAAI/I,EAAczH,EAAOoN,GAAG3qB,QAASgmB,GAAOxgC,MACjG,GAAmB,IAAf+tC,GAAoC,IAAfA,GAAoBvO,EAAa3W,UAAUuV,WAAW5hB,EAA8B6E,EAAEwF,MAW3G,OATA2Z,EAAM+B,mBAAmB/C,EAAa6D,uBAAuBnoB,cAAc,iCAC3EslB,EAAMO,UAAS,GACf0K,EAAajL,EAAOzI,GACsE,KAAtFyH,EAAa/W,YAAY7I,OAAO/mB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,MAE9E2Y,EAAazV,SACbwgB,GAA2BxS,IAE/BjY,EAAM8N,kBACC,EAIf,GAAI1H,EAAgB,CAChB,IAAI8nB,EAAgB9nB,EAAe0S,kBAAkBnQ,YAAY9uB,QAC7D,EAAGikB,EAAiC2qB,IAAIriB,EAAgB6R,EAAOoN,GAAG3qB,SAASxa,QAAUguC,IACrFxN,EAAMM,SAAS5a,EAAe0S,kBAAkBoU,WAAYgB,EAAgB,GAC5ExN,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,KAIpD,QAAmB,YAAd1gB,EAAMrd,KAAmC,cAAdqd,EAAMrd,MAAwB+8B,IAE1DA,EAAahkB,iBAAiB,oBAAoBvgB,SAAQ,SAAU2jB,GAC3DA,EAAKoJ,SAAS0Y,IACf9hB,EAAK7B,UAAUC,IAAI,+BAGvBixB,GAAuBnuB,EAAO0f,EAAcgB,OAIpD0N,GAAwB1N,EAAO1gB,EAAMrd,QACjC+8B,IAAgB8I,EAAW9I,EAAczH,EAAQjY,EAAO0gB,MACxD1gB,EAAM8N,kBACC,KAMXvH,EAAgBtM,EAAoB,KAMpCo0B,EAAa,SAAUpW,EAAQjY,GAC/B,IAAIiF,EACAyb,EAAQ7gB,eAAeI,WAAW,GAAGC,aACrC0gB,EAAiBF,EAAME,eACW,IAAlCF,EAAME,eAAerB,UAAmD,QAAjCmB,EAAME,eAAelT,UAC5DkT,EAAiBF,EAAME,eAAea,WAAWf,EAAMc,YAAc,IAEzE,IAAI9B,GAAe,EAAG7iB,EAAsC6sB,IAAI9I,EAAgB,aAAc,KAE9F,GAAIlB,GAAgB1f,IAA8B,0BAApBA,EAAM+pB,WAAwD,MAAf/pB,EAAM7b,MAAe,CAI9F,IAFA,IAAIq9B,GAAc,EAAG1jB,EAAiC2qB,IAAI/I,EAAczH,EAAOgN,GAAGvqB,QAASgmB,GAAOxgC,MAC9FgpC,GAAa,EACRjqC,EAAIuiC,EAAc,EAE3BviC,EAAIygC,EAAa/W,YAAYvL,OAAO,EAAGokB,GAAatrB,YAAY,MAAOjX,IACnE,GAA2C,MAAvCygC,EAAa/W,YAAY7vB,OAAOmG,IAEO,OAAvCygC,EAAa/W,YAAY7vB,OAAOmG,GAAa,CAC7CiqC,GAAa,EACb,MAMR,GAHoB,IAAhB1H,IACA0H,GAAa,GAEbA,EAEA,YADAoF,GAAmBrW,GAGvB,GAAwB,0BAApBjY,EAAM+pB,UAAuC,CAE7C,IAAIwE,GAAyB,EAAG1xB,EAAsC6sB,IAAI9I,EAAgB,YAAa,4BACnG,EAAG/jB,EAAsC6sB,IAAI9I,EAAgB,YAAa,2BAC9E,GAAI2N,EAAwB,CACxB,GAAyD,4BAArDA,EAAuBvzB,aAAa,aAA4C,CAChF,IAAIwzB,EAAoBC,GAAc7N,EAAgB,0BACtD,GAAI4N,EAGA,OAFAA,EAAkB7lB,YAAc4lB,EAAuB5lB,iBACvD2lB,GAAmBrW,GAI3B,GAAyD,2BAArDsW,EAAuBvzB,aAAa,aAA2C,CAC3EwzB,EAAoBC,GAAc7N,EAAgB,2BAA2B,GACjF,GAAI4N,EAGA,OAFAA,EAAkB7lB,YAAc4lB,EAAuB5lB,iBACvD2lB,GAAmBrW,IAM/B,IAAIyW,GAAyB,EAAG7xB,EAAsC6sB,IAAI9I,EAAgB,YAAa,0BACvG,GAAI8N,EAAwB,CACxB,IAAIC,EAAwBD,EAAuB3V,mBAAmBA,mBAKtE,YAJI4V,GAA6E,4BAApDA,EAAsB3zB,aAAa,eAC5D2zB,EAAsB1kB,SACtBqkB,GAAmBrW,KAI3ByH,EAAahkB,iBAAiB,wCAAwCvgB,SAAQ,SAAU2jB,GACpD,IAA5BA,EAAK6J,YAAY9uB,QACjBilB,EAAKmL,YAGbyV,EAAahkB,iBAAiB,yCAAyCvgB,SAAQ,SAAU2jB,GACrD,IAA5BA,EAAK6J,YAAY9uB,QACjBilB,EAAKmL,YAIb,IAAI7D,GAAiB,EAAGvJ,EAAsC6sB,IAAI9I,EAAgB,YAAa,kBAC/F,GAAIxa,IAA+D,IAA7CA,EAAeuC,YAAYzrB,QAAQ,KAErD,YADAoxC,GAAmBrW,GAK3B,IAAoB,MAAfjY,EAAM7b,MAAoC,0BAApB6b,EAAM+pB,cAC5B,EAAGltB,EAAsC6sB,IAAI9I,EAAgB,YAAa,aACpE,EAAG/jB,EAAsC6sB,IAAI9I,EAAgB,YAAa,eAC1E,EAAG/jB,EAAsC6sB,IAAI9I,EAAgB,YAAa,iBAC1E,EAAG/jB,EAAsC6sB,IAAI9I,EAAgB,YAAa,sBAGjF,YADA0N,GAAmBrW,GAI3B,GAAIyH,GAAyD,OAAzCA,EAAa/W,YAAYigB,YAEzC0F,GAAmBrW,OAFvB,CAKKyH,IACDA,EAAezH,EAAOgN,GAAGvqB,SAEqF,yBAAnE,QAAzCuK,EAAKya,EAAa5G,yBAAsC,IAAP7T,OAAgB,EAASA,EAAGjK,aAAa,gBAE5F0kB,EAAezH,EAAOgN,GAAGvqB,UAEzB,EAAGmC,EAAsC6sB,IAAI9I,EAAgB,YAAa,oBAE1ElB,EAAezH,EAAOgN,GAAGvqB,UAGyB,IAAlDglB,EAAa/W,YAAYzrB,QAAQy7B,KAAKiW,QAEtClO,EAAMiD,WAAWhpB,SAASipB,eAAejL,KAAKiW,QAGlDlP,EAAahkB,iBAAiB,WAAWvgB,SAAQ,SAAU2jB,GACvDA,EAAKrD,gBAAgB,YAEzBikB,EAAahkB,iBAAiB,QAAQvgB,SAAQ,SAAU2jB,GACpDA,EAAK6M,UAAY7M,EAAKO,aAE1B,IAsCIkqB,EAtCAt1B,EAAOyrB,EAAa/W,YACpBkmB,EAAcnP,EAAa1G,YAAYf,EAAOgN,GAAGvqB,SACjDm0B,EACA56B,EAAOyrB,EAAa/W,aAIhB+W,EAAa6D,yBACbtvB,EAAOyrB,EAAa6D,uBAAuB5a,YAAc1U,EACzDyrB,EAAa6D,uBAAuBtZ,UAEpCyV,EAAa6D,wBAAoD,IAA1BtvB,EAAK/W,QAAQ,WAEpD+W,EAAOyrB,EAAa6D,uBAAuB5a,YAAc1U,EACzDyrB,EAAa6D,uBAAuBtZ,UAGxCgO,EAAOgN,GAAGvqB,QAAQgB,iBAAiB,qCAAqCvgB,SAAQ,SAAU2jB,EAAM5f,GAC9E,IAAVA,GAAe4f,IAAS4gB,EAAa1G,YAAYla,EAAKmJ,iBACtDhU,GAAQ,KAAO6K,EAAKmJ,cAAcU,YAClC7J,EAAKmJ,cAAcgC,aAI3BgO,EAAOgN,GAAGvqB,QAAQgB,iBAAiB,gCAAgCvgB,SAAQ,SAAU2jB,EAAM5f,GACzE,IAAVA,GAAe4f,IAAS4gB,EAAa1G,YAAYla,EAAKmJ,iBACtDhU,GAAQ,KAAO6K,EAAKmJ,cAAcU,YAClC7J,EAAKmJ,cAAcgC,cAI/BhW,EAAO66B,GAAuB76B,EAAMgkB,GAChC4W,EACAnP,EAAargB,UAAYpL,EAGzByrB,EAAa/T,UAAY1X,EAG7B,IAeIo2B,EAfAC,EAAwBrS,EAAOgN,GAAGvqB,QAAQgB,iBAAiB,qCAC/D4uB,EAAsBnvC,SAAQ,SAAU2jB,EAAM5f,GAC5B,IAAVA,EACAqqC,EAAyBzqB,EAAKmJ,eAG9BshB,EAAuBrF,iBAAiBja,SACxCsf,EAAuBzc,mBAAmB,YAAa,GAAKhO,EAAKmJ,cAAc5I,WAC/EP,EAAKmJ,cAAcgC,aAGvBqgB,EAAsBzwC,OAAS,GAC/Bo+B,EAAOgN,GAAGvqB,QAAQ8D,sBAAsB,YAAa+qB,GAIzD,IAAIgB,EAAqBtS,EAAOgN,GAAGvqB,QAAQgB,iBAAiB,gCAC5D6uB,EAAmBpvC,SAAQ,SAAU2jB,EAAM5f,GACzB,IAAVA,EACAmrC,EAAuBvrB,EAAKmJ,eAG5BoiB,EAAqBnG,iBAAiBja,SACtCogB,EAAqBvd,mBAAmB,YAAa,GAAKhO,EAAKmJ,cAAc5I,WAC7EP,EAAKmJ,cAAcgC,aAGvBsgB,EAAmB1wC,OAAS,GAC5Bo+B,EAAOgN,GAAGvqB,QAAQ8D,sBAAsB,YAAa6rB,IAEzD,EAAGvsB,EAA6B0sB,IAAIvS,EAAOgN,GAAGvqB,QAASgmB,GACvDqO,GAAa9W,GACbqW,GAAmBrW,EAAQ,CACvByS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,MAYjBoE,EAAgC,SAAU/W,EAAQjY,GAClD,IAAIiF,EAAI4E,EAAIzoB,EAAI6tC,EAAIC,EAEpB,GADAjX,EAAOgN,GAAGgH,cAAgBjsB,EAAMksB,YAC5BlsB,EAAMksB,YACN,OAAO,EAOX,IALoC,IAAhClsB,EAAMrd,IAAIzF,QAAQ,UAAiC,SAAd8iB,EAAMrd,KAAgC,YAAdqd,EAAMrd,KAAmC,QAAdqd,EAAMrd,KAChF,UAAdqd,EAAMrd,KAAiC,aAAdqd,EAAMrd,KAAoC,WAAdqd,EAAMrd,KAAqB,aAAa07B,KAAKre,EAAMrd,MACxGs1B,EAAOkU,KAAKC,oBAAoBnU,EAAQjY,GAG1B,UAAdA,EAAMrd,KAAiC,QAAdqd,EAAMrd,KAA+B,cAAdqd,EAAMrd,MAAuD,IAAhCqd,EAAMrd,IAAIzF,QAAQ,YAC3F,EAAGupC,EAA0BsE,IAAI/qB,IAAwB,WAAdA,EAAMrd,IACrD,OAAO,EAEX,IAAI+9B,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7C2I,EAAiBF,EAAME,eACW,IAAlCF,EAAME,eAAerB,UAAmD,QAAjCmB,EAAME,eAAelT,UAC5DkT,EAAiBF,EAAME,eAAea,WAAWf,EAAMc,YAAc,IAEzE,IAAI2N,GAAc,EAAGtyB,EAAsC6sB,IAAI9I,EAAgB,YAAa,QAExFwO,GAA0B,EAAGvyB,EAAsC6sB,IAAI9I,EAAgB,YAAa,qBAMxG,IALKwO,GAAiD,IAAtB1O,EAAMc,aAAqB2N,GAAeA,EAAY5L,wBACjB,sBAAjE4L,EAAY5L,uBAAuBvoB,aAAa,eAChDo0B,EAA0BD,EAAY5L,wBAGtC6L,GACkB,UAAdpvB,EAAMrd,OAAoB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,QACV,KAAlEoE,EAAwBrW,mBAAmBpQ,YAAY7I,SACvD,EAAGhC,EAAiC2qB,IAAI2G,EAAyBnX,EAAOgN,GAAGvqB,QAASgmB,GAAOxgC,QACvFkvC,EAAwBzmB,YAAY9uB,OAQxC,MAPkI,aAAnE,QAAzDorB,EAAKmqB,EAAwB7L,8BAA2C,IAAPte,OAAgB,EAASA,EAAGjK,aAAa,eAE5Go0B,EAAwB7L,uBAAuBhjB,aAAa,cAAe,gBAE/E6uB,EAAwBnlB,SACxBqkB,GAAmBrW,GACnBjY,EAAM8N,kBACC,EAIf,IAAIuhB,GAAoB,EAAGxyB,EAAsC6sB,IAAI9I,EAAgB,YAAa,aAC9F0O,GAAoB,EAAGzyB,EAAsC6sB,IAAI9I,EAAgB,YAAa,eAC9F2O,EAAwBF,EAW5B,GAVKE,GACGD,GAAwF,gBAAnEA,EAAkBvW,mBAAmB/d,aAAa,eACvEu0B,EAAwBD,GAG3BC,GAA+C,IAAtB7O,EAAMc,cAAqB2N,IAAeA,EAAY5L,wBACd,cAAjE4L,EAAY5L,uBAAuBvoB,aAAa,cACoB,gBAAjEm0B,EAAY5L,uBAAuBvoB,aAAa,eACpDu0B,EAAwBJ,EAAY5L,wBAEpCgM,EAAuB,CACvB,IAAIC,GAAa,EAAG1xB,EAAiC2qB,IAAI8G,EAAuBtX,EAAOgN,GAAGvqB,QAASgmB,GAAOxgC,MACtGuvC,EAA6D,gBAApDF,EAAsBv0B,aAAa,aAC5C00B,EAAyBH,EAK7B,GAJIE,IACAC,EAAyBH,EAAsBhM,uBAAuBA,uBACjEA,wBAELiM,IAAeD,EAAsB5mB,YAAY9uB,OAAQ,CAEzD,GAAkB,UAAdmmB,EAAMrd,OAAoB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,SAAWhrB,EAAMirB,UAC7B,KAAhEsE,EAAsBxW,mBAAmBpQ,YAAY7I,OAgBrD,MAfiI,aAAnE,QAAxD+J,EAAK6lB,EAAuBnM,8BAA2C,IAAP1Z,OAAgB,EAASA,EAAG7O,aAAa,eAC3G00B,EAAuBnM,uBAAuBtZ,SAC9CokB,EAAWpW,KAGPwX,IACAC,EAAuBzlB,SACvBslB,EAAsBhM,uBAAuBA,uBAAuBtZ,SACpEslB,EAAsBhM,uBAAuBtZ,UAEjDslB,EAAsBxW,mBAAmB9O,SACzCslB,EAAsBtlB,SACtBqkB,GAAmBrW,IAEvBjY,EAAM8N,kBACC,EAGX,GAAkB,QAAd9N,EAAMrd,IASN,OARA+sC,EAAuB5iB,mBAAmB,cAAe,6BAAiC4iB,EAAuB/mB,YAAY5vB,QAAQ,MAAO,KAAO,WAC/I,MAAMslC,KAAKqR,EAAuB/mB,eAClC+mB,EAAuB/mB,YAAc+mB,EAAuB/mB,YAAY5vB,QAAQ,UAAW,KAC3F2nC,EAAM+B,mBAAmB8M,EAAsBrC,YAC/CxM,EAAMO,UAAS,IAEnBoN,EAAWpW,GACXjY,EAAM8N,kBACC,GAKnB,GAAI+f,GAAO5V,EAAQyI,EAAO1gB,GACtB,OAAO,EAEX,IAAI0f,GAAe,EAAG7iB,EAAsC6sB,IAAI9I,EAAgB,aAAc,KAC1F3a,GAAc,EAAG+Z,EAA0CllC,GAAG8lC,EAAgB,QAElF,GAAkB,UAAd5gB,EAAMrd,OAAoB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,SAAWhrB,EAAMirB,UAAYvL,EAAc,CACvH,IAAIiQ,GAAU,EACVC,EAAelQ,EAAa/W,YAAY1uB,MAAM,SAC9C,EAAG6jB,EAAiC2qB,IAAI/I,EAAczH,EAAOgN,GAAGvqB,SAASxa,QAAU0vC,EAAeA,EAAa,GAAG/1C,OAAS,KAE3H81C,GAAU,GAEd,IAAIE,EAAc,KAClB,GAAI5pB,EAAa,CACb,GAAwH,kBAArE,QAA7C7kB,EAAK6kB,EAAYsd,8BAA2C,IAAPniC,OAAgB,EAASA,EAAG4Z,aAAa,gBAKhG,OAHAiL,EAAYsd,uBAAuBtZ,SACnCqkB,GAAmBrW,GACnBjY,EAAM8N,kBACC,EAGP+hB,GAAeC,GAAuB7pB,GAY9C,OATAya,EAAMiD,WAAWhpB,SAASipB,eAAeiM,IACzCnP,EAAMO,UAAS,GACXvB,GAAoD,KAApCA,EAAa/W,YAAY7I,SAAkB6vB,EAC3DtB,EAAWpW,GAGXqW,GAAmBrW,GAEvBjY,EAAM8N,kBACC,EAGX,GAAkB,cAAd9N,EAAMrd,OAAwB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,SAAWhrB,EAAMirB,SAAU,CAC3G,GAAIhlB,GAAiI,aAAnE,QAA7CgpB,EAAKhpB,EAAYsd,8BAA2C,IAAP0L,OAAgB,EAASA,EAAGj0B,aAAa,eACtB,KAAzF,EAAG8C,EAAiC2qB,IAAIxiB,EAAagS,EAAOgN,GAAGvqB,QAASgmB,GAAOxgC,QAEb,IAAlE+lB,EAAYjL,aAAa,aAAa9d,QAAQ,eAW9C,OATAwjC,EAAMM,SAAS/a,EAAa,GAC5Bya,EAAMqP,kBACiC,KAAnC9pB,EAAY0C,YAAY7I,OACxBuuB,EAAWpW,GAGXqW,GAAmBrW,GAEvBjY,EAAM8N,kBACC,EAGX,GAAI4R,GAA0G,KAA1F,EAAG5hB,EAAiC2qB,IAAI/I,EAAczH,EAAOgN,GAAGvqB,QAASgmB,GAAOxgC,OAChGw/B,EAAa6D,uBAAwB,CACrC7C,EAAMqP,kBACN,IAAIC,EAAsBtQ,EAAa6D,uBAAuBW,iBAsB9D,MArBsD,YAAlD8L,EAAoBh1B,aAAa,eACjCg1B,EAAoB/lB,SACpB+lB,EAAsBtQ,EAAa6D,uBAAuBW,kBAGR,YAAlD8L,EAAoBh1B,aAAa,eACjCg1B,EAAoBljB,mBAAmB,WAAY4S,EAAargB,WAChEqgB,EAAazV,UAEuB,KAApCyV,EAAa/W,YAAY7I,SAAkE,QAA9CovB,EAAKxP,EAAa6D,8BAA2C,IAAP2L,OAAgB,EAASA,EAAG9zB,cAAc,0CAIvF,YAAlD40B,EAAoBh1B,aAAa,eAEjC0lB,EAAM+B,mBAAmBuN,EAAoBnQ,WAC7Ca,EAAMO,UAAS,IAEnBqN,GAAmBrW,IARnBoW,EAAWpW,GAUfjY,EAAM8N,kBACC,GAGf,OAAO,GAIPnR,EAAkB1C,EAAoB,KAEtCtU,EAAW,SAAUsyB,GACQ,SAAzBA,EAAOjW,QAAQc,MACfmV,EAAOvd,QAAQuC,UAAUC,IAAI,gBAG7B+a,EAAOvd,QAAQuC,UAAUgN,OAAO,iBAWpCgmB,EAAS,SAAUhY,GACnBA,EAAOvd,QAAQ2E,UAAY,GAC3B4Y,EAAOvd,QAAQuC,UAAUC,IAAI,UAC7BvX,EAASsyB,IACT,EAAGtb,EAAqC8I,GAAGwS,EAAOjW,QAAQjgB,QAAQ+gB,MAAM4C,QAASuS,EAAOjW,QAAQjgB,QAAQ+gB,MAAM6C,MACzE,kBAA1BsS,EAAOjW,QAAQld,SACtBmzB,EAAOvd,QAAQc,MAAM1W,OAASmzB,EAAOjW,QAAQld,OAAS,MAElB,kBAA7BmzB,EAAOjW,QAAQkuB,YACtBjY,EAAOvd,QAAQc,MAAM00B,UAAYjY,EAAOjW,QAAQkuB,UAAY,MAE5B,kBAAzBjY,EAAOjW,QAAQoV,MACtBa,EAAOvd,QAAQc,MAAM4b,MAAQa,EAAOjW,QAAQoV,MAAQ,KAGpDa,EAAOvd,QAAQc,MAAM4b,MAAQa,EAAOjW,QAAQoV,MAEhDa,EAAOvd,QAAQiiB,YAAY1E,EAAOoB,QAAQ3e,SAC1C,IAAIqd,EAAiBpd,SAASG,cAAc,OAkC5C,GAjCAid,EAAezZ,UAAY,iBACa,SAApC2Z,EAAOjW,QAAQ3c,QAAQ7L,UACvBu+B,EAAe4E,YAAY1E,EAAO5yB,QAAQqV,SAE9Cqd,EAAe4E,YAAY1E,EAAOkN,QAAQzqB,QAAQuN,eAClD8P,EAAe4E,YAAY1E,EAAOgN,GAAGvqB,SACrCqd,EAAe4E,YAAY1E,EAAOoN,GAAG3qB,QAAQuN,eAC7C8P,EAAe4E,YAAY1E,EAAOl2B,QAAQ2Y,SACtCud,EAAOoB,QAAQgO,SAAS5B,UACxB1N,EAAe4E,YAAY1E,EAAOwN,SAAS/qB,SAEP,UAApCud,EAAOjW,QAAQ3c,QAAQ7L,WACvBy+B,EAAO5yB,QAAQqV,QAAQuC,UAAUC,IAAI,yBACrC6a,EAAe4E,YAAY1E,EAAO5yB,QAAQqV,UAE1Cud,EAAOkY,QACPpY,EAAe4E,YAAY1E,EAAOkY,OAAOz1B,SAEzCud,EAAOjW,QAAQwkB,OAAOthC,QACtB6yB,EAAe4E,YAAY1E,EAAOuO,OAAO9rB,SAE7Cqd,EAAe4E,YAAY1E,EAAOsP,KAAK7sB,SACvCqd,EAAe4E,YAAY1E,EAAOmY,IAAI11B,SACtCud,EAAOvd,QAAQiiB,YAAY5E,GAC3BA,EAAe9c,iBAAiB,SAAS,WACrCisB,EAAUjP,EAAQ,CAAC,kBAEnBA,EAAOoB,QAAQgO,SAASgJ,QAExBpY,EAAOvd,QAAQoS,mBAAmB,YAAa,6DAEnDwjB,GAAYrY,EAAQA,EAAOjW,QAAQY,KAAM2tB,EAAYtY,IACrDtd,SAASspB,YAAY,6BAA6B,EAAO,KACrD1G,UAAUC,UAAUtgC,QAAQ,WAAa,GAAsC,qBAA1Boe,OAAOk1B,eAAgC,CAE5F,IAAIC,GAAkB,EAClBC,EAAkB,SAAU1wB,GACxBywB,IAGJA,GAAkB,EAClBE,uBAAsB,WAClBF,GAAkB,EAClB,IAAIG,EAAiB3Y,EAAOoB,QAAQ3e,QACpCk2B,EAAep1B,MAAM0J,UAAY,OAC7B0rB,EAAexwB,wBAAwB/C,IAAM,IAC7CuzB,EAAep1B,MAAM0J,UAAY,iBAAmB0rB,EAAexwB,wBAAwB/C,IAAM,YAI7G/B,OAAOk1B,eAAev1B,iBAAiB,SAAUy1B,GACjDp1B,OAAOk1B,eAAev1B,iBAAiB,SAAUy1B,KAGrDG,EAAa,SAAU5Y,GACvB,IAAI6Y,EAAax1B,OAAO8f,YAAc1e,EAAsC6E,EAAE0F,aAAe,GAAK,GAClG,GAA2D,SAAvDgR,EAAOkN,QAAQzqB,QAAQuN,cAAczM,MAAMuE,QAAoB,CAC/D,IAAIhJ,GAAWkhB,EAAOkN,QAAQzqB,QAAQuN,cAAc5M,YAC9C4c,EAAOjW,QAAQjgB,QAAQgvC,UAAY,EACzC9Y,EAAOkN,QAAQzqB,QAAQc,MAAMzE,QAAU,QAAUle,KAAKgE,IAAIi0C,EAAY/5B,GAAW,KAErF,GAAsD,SAAlDkhB,EAAOoN,GAAG3qB,QAAQuN,cAAczM,MAAMuE,QAAoB,CACtDhJ,GAAWkhB,EAAOoN,GAAG3qB,QAAQuN,cAAc5M,YACzC4c,EAAOjW,QAAQjgB,QAAQgvC,UAAY,EACzC9Y,EAAOoN,GAAG3qB,QAAQc,MAAMzE,QAAU,QAAUle,KAAKgE,IAAIi0C,EAAY/5B,GAAW,KAEnC,UAAzCkhB,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,QAC7BkY,EAAOoB,QAAQ3e,QAAQc,MAAMw1B,YAAcn4C,KAAKgE,IAAI,EAAGwY,SAAS4iB,EAAOA,EAAOM,aAAa7d,QAAQc,MAAMw1B,aAAe,IAAK,KACpF,SAApC/Y,EAAOjW,QAAQ3c,QAAQ7L,SAAsBy+B,EAAO5yB,QAAQqV,QAAQu2B,YAAc,IAAM,KAG7FhZ,EAAOoB,QAAQ3e,QAAQc,MAAMw1B,YAAe,GACH,SAApC/Y,EAAOjW,QAAQ3c,QAAQ7L,SAAsBy+B,EAAO5yB,QAAQqV,QAAQu2B,YAAc,GAAM,MAGjGC,EAAwB,SAAUjZ,GAClC,GAAKA,EAAOjW,QAAQmvB,eAApB,CAGA,IAAIrsC,EAASwW,OAAOC,YACiB,kBAA1B0c,EAAOjW,QAAQld,SACtBA,EAASmzB,EAAOjW,QAAQld,OACgB,kBAA7BmzB,EAAOjW,QAAQkuB,YACtBprC,EAASjM,KAAKgE,IAAIiI,EAAQmzB,EAAOjW,QAAQkuB,YAE7CprC,EAASjM,KAAKiE,IAAIwe,OAAOC,YAAazW,IAEtCmzB,EAAOvd,QAAQuC,UAAUiL,SAAS,wBAClCpjB,EAASwW,OAAOC,aAGpB0c,EAAOA,EAAOM,aAAa7d,QAAQc,MAAM41B,YAAY,mBAAqBtsC,EAASmzB,EAAOoB,QAAQ3e,QAAQ4e,cAAgB,EAAK,QAGnI,SAAS+X,IACL/1B,OAAOg2B,oBAAoB,SAAUvM,GAEzC,IAqlJIwM,EArlJAhB,EAAc,SAAUtY,GACxBiZ,EAAsBjZ,GACtBoZ,IACA/1B,OAAOL,iBAAiB,SAAU8pB,EAAW,WACzC8L,EAAW5Y,GACXiZ,EAAsBjZ,KAG1B,IAAIuZ,GAAY,EAAG/K,EAAsCgL,OAAS7T,aAAa8T,QAAQzZ,EAAOjW,QAAQ1c,MAAM6B,IAY5G,OAXK8wB,EAAOjW,QAAQ1c,MAAMJ,QAAWssC,IAC7BvZ,EAAOjW,QAAQxjB,MACfgzC,EAAYvZ,EAAOjW,QAAQxjB,MAEtBy5B,EAAO0Z,kBACZH,EAAYvZ,EAAO5U,KAAKuuB,QAAQ3Z,EAAO0Z,mBAEjC1Z,EAAOjW,QAAQ1c,MAAMJ,SAC3BssC,EAAY,KAGbA,GAAa,IASpBK,GAAqB,SAAU5Z,GAC/B6Z,aAAa7Z,EAAOA,EAAOM,aAAawZ,oBACxC9Z,EAAOA,EAAOM,aAAawZ,mBAAqBz2B,OAAO+f,YAAW,WAC9D,GAA2E,UAAvEpD,EAAOA,EAAOM,aAAa7d,QAAQM,aAAa,qBAG/C,EAAG8C,EAA8Bk0B,IAAI/Z,EAAOA,EAAOM,aAAa7d,SAArE,CAGAgsB,EAAqBzO,EAAOoB,QAAQgO,SAAU3qB,EAAuC6E,EAAE4F,eACvF2f,EAAc7O,EAAOoB,QAAQgO,SAAU3qB,EAAuC6E,EAAE4F,eAChF,IAAIuZ,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7Cga,EAAcvR,EAAME,eACc,IAAlCF,EAAME,eAAerB,WACrB0S,EAAcvR,EAAME,eAAe3Y,eAEnCgqB,EAAYh1B,UAAUiL,SAAS,kBAC/B+pB,EAAcA,EAAYxQ,WAAWf,EAAMc,cAE/C,IAAIpb,EAAwC,OAAvB6R,EAAOM,aACxB,EAAG1b,EAAsC6sB,IAAIuI,EAAa,YAAa,YAAa,EAAGjS,EAA+C5H,GAAG6Z,GACzI7rB,GACAygB,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,aAEhD,IAAI6K,EAAsC,OAAvBja,EAAOM,aAAuB,EAAG1b,EAAsC6sB,IAAIuI,EAAa,YAAa,eACpH,EAAGp1B,EAAqCqJ,IAAI+rB,EAAa,cACzDC,GACArL,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,UAEhD,IAAI8K,GAAgB,EAAGt1B,EAAsC6sB,IAAIuI,EAAa,YAAa,UACvFE,GACAtL,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,SAEhD,IAAI+K,GAAY,EAAGv1B,EAAsC6sB,IAAIuI,EAAa,YAAa,MACnFG,GACAvL,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,WAEhD,IAAIgL,GAAW,EAAGx1B,EAAsC6sB,IAAIuI,EAAa,YAAa,KAClFI,GACAxL,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,WAEhD,IAAI5W,GAAW,EAAG5T,EAAsC6sB,IAAIuI,EAAa,YAAa,KAClFxhB,GACAoW,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,SAEhD,IAAIiL,GAAY,EAAGz1B,EAAqCqJ,IAAI+rB,EAAa,MACrEK,GACIA,EAAUr1B,UAAUiL,SAAS,eAC7B2e,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,UAEH,OAApCiL,EAAUrqB,cAAcyF,QAC7BmZ,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,iBAEH,OAApCiL,EAAUrqB,cAAcyF,SAC7BmZ,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,SAEhDP,EAAc7O,EAAOoB,QAAQgO,SAAU,CAAC,UAAW,YAGnDN,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,UAAW,WAExD,IAAIkL,GAAmB,EAAG11B,EAAsC6sB,IAAIuI,EAAa,YAAa,cAC1FM,IACAxL,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,WAAY,OAAQ,SAAU,SAAU,OAAQ,QACrF,OAAQ,eAAgB,QAAS,OAAQ,cAAe,SAAU,OAAQ,QAAS,WACvFR,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,UAEhD,IAAIrd,GAAc,EAAGnN,EAAsC6sB,IAAIuI,EAAa,YAAa,QACrFjoB,IACA+c,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,WAAY,OAAQ,SAAU,SAAU,OAAQ,QACrF,OAAQ,eAAgB,QAAS,OAAQ,SAAU,OAAQ,QAAS,WACxER,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,iBAEhD,IAAIkG,GAAe,EAAG1wB,EAAsC6sB,IAAIuI,EAAa,YAAa,SACtF1E,GACAxG,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,WAAY,OAAQ,eAAgB,QAAS,OAClF,QAAS,OAAQ,aAE1B,MAMHmL,GAAmB,SAAUva,EAAQjW,QACrB,IAAZA,IAAsBA,EAAU,CAChC0oB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEb5oB,EAAQ2oB,YACR1S,EAAOsP,KAAKvmC,OAAOi3B,GAEvB6Z,aAAa7Z,EAAOkN,QAAQsN,sBAC5Bxa,EAAOkN,QAAQsN,qBAAuBn3B,OAAO+f,YAAW,WACpD,IAAIpD,EAAOkN,QAAQ8G,cAAnB,CAGA,IAAIviC,EAAOs7B,EAAY/M,GACa,oBAAzBA,EAAOjW,QAAQhd,OAAwBgd,EAAQ4oB,aACtD3S,EAAOjW,QAAQhd,MAAM0E,GAErBuuB,EAAOjW,QAAQ/c,QAAQC,QACvB+yB,EAAOhzB,QAAQjE,OAAOi3B,EAAQvuB,GAE9BuuB,EAAOjW,QAAQ1c,MAAMJ,SAAU,EAAGuhC,EAAsCgL,QACxE7T,aAAa8U,QAAQza,EAAOjW,QAAQ1c,MAAM6B,GAAIuC,GAC1CuuB,EAAOjW,QAAQ1c,MAAMH,OACrB8yB,EAAOjW,QAAQ1c,MAAMH,MAAMuE,IAG/BuuB,EAAOwN,UACPxN,EAAOwN,SAASF,aAAatN,GAE7BjW,EAAQ0oB,oBACRzS,EAAOkU,KAAKwG,eAAe1a,MAEhCA,EAAOjW,QAAQ4wB,YAMlBC,GAAmB,SAAUzjB,GAC7B,IAAIia,EAAeja,EAAKqU,gBACxB,MAAO4F,EAAc,CACjB,GAA8B,IAA1BA,EAAa9J,UAA2C,MAAzB8J,EAAa3b,UAAoB2b,EAAa5F,iBACG,KAA7E4F,EAAahqB,UAAUtmB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,KAAcsiB,EAAarG,YACnG,OAAOqG,EAEXA,EAAeA,EAAa5F,gBAEhC,OAAO,GAEPqP,GAAa,SAAUpS,GACvB,IAAI8K,EAAW9K,EAAME,eAAeoC,YACpC,MAAOwI,GAAqC,KAAzBA,EAAS7iB,YACxB6iB,EAAWA,EAASxI,YAExB,SAAIwI,GAAkC,IAAtBA,EAASjM,UAAwC,SAArBiM,EAAS9d,SACV,gBAAvC8d,EAASxwB,aAAa,cACiB,gBAAvCwwB,EAASxwB,aAAa,cACiB,gBAAvCwwB,EAASxwB,aAAa,eAK1B+3B,GAAc,SAAU3jB,GACxB,IAAInb,EAAO,GACPu3B,EAAWpc,EAAK4T,YACpB,MAAOwI,EACuB,IAAtBA,EAASjM,SACTtrB,GAAQu3B,EAAS7iB,YAGjB1U,GAAQu3B,EAAS7f,UAErB6f,EAAWA,EAASxI,YAExB,OAAO/uB,GAEP++B,GAAkB,SAAU5jB,GAC5B,IAAInb,EAAO,GACPo1B,EAAeja,EAAKqU,gBACxB,MAAO4F,EAECp1B,EAD0B,IAA1Bo1B,EAAa9J,SACN8J,EAAa1gB,YAAc1U,EAG3Bo1B,EAAa1d,UAAY1X,EAEpCo1B,EAAeA,EAAa5F,gBAEhC,OAAOxvB,GAEPg/B,GAA2B,SAAUC,GACrC,IAAI1H,EAAW0H,EACf,MAAO1H,IAAaA,EAASxI,YACzBwI,EAAWA,EAASvjB,cAExB,OAAOujB,EAASxI,aAEhBmQ,GAAe,SAAUzS,GACzB,IAAI0S,EAAeJ,GAAgBtS,EAAME,gBACrCyS,EAAWN,GAAYrS,EAAME,gBAC7Bl3B,EAAOg3B,EAAME,eAAejY,YAC5BuO,EAASwJ,EAAMc,YACf8R,EAAa,GACbC,EAAY,GAOhB,OAN+B,KAA3B7pC,EAAK0T,OAAO,EAAG8Z,IAAkBxtB,EAAK0T,OAAO,EAAG8Z,KAAYxa,EAA8B6E,EAAEwF,MAAQqsB,KACpGE,EAAa,GAAKF,EAAe1pC,EAAK0T,OAAO,EAAG8Z,KAExB,KAAxBxtB,EAAK0T,OAAO8Z,IAAkBxtB,EAAK0T,OAAO8Z,KAAYxa,EAA8B6E,EAAEwF,MAAQssB,KAC9FE,EAAY,GAAK7pC,EAAK0T,OAAO8Z,GAAUmc,GAEpC,CACHE,UAAWA,EACXD,WAAYA,IAGhBE,GAAY,SAAUvb,EAAQyI,GAE9BvzB,MAAM3M,KAAKy3B,EAAOkN,QAAQzqB,QAAQ+mB,YAAYgS,MAAK,SAAUrkB,GACzD,GAAsB,IAAlBA,EAAKmQ,SAAgB,CACrB,IAAIqN,EAAWjyB,SAASG,cAAc,KACtC8xB,EAASrsB,aAAa,aAAc,KACpCqsB,EAASjkB,YAAcyG,EAAKzG,YAE5B,IAAI+qB,EAAqD,IAAlChT,EAAME,eAAerB,SAAiBmB,EAAMc,YAAcpS,EAAKzG,YAAY9uB,OAMlG,OALAu1B,EAAKukB,WAAWC,aAAahH,EAAUxd,GACvCA,EAAKnF,SACLyW,EAAMM,SAAS4L,EAASM,WAAYr0C,KAAKiE,IAAI8vC,EAASM,WAAWvkB,YAAY9uB,OAAQ65C,IACrFhT,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,IACjC,EAEN,IAAKtR,EAAKpU,aAAa,cAuBxB,MAtBqB,MAAjBoU,EAAK1B,QACL0B,EAAKnF,UAGgB,QAAjBmF,EAAK1B,SACLgT,EAAMiD,WAAWhpB,SAASG,cAAc,QAExCsU,EAAKzD,UAAY,qBAAyByD,EAAK/P,UAAY,QAGtC,OAAjB+P,EAAK1B,QAEL0B,EAAKzD,UAAY,qBAAyByD,EAAKzD,UAAY,aAG3D+U,EAAMiD,WAAWhpB,SAASG,cAAc,QACxCsU,EAAKzD,UAAY,qBAAyByD,EAAKzD,UAAY,SAGnE,EAAG7N,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,GAC5DA,EAAQ7gB,eAAeI,WAAW,KAE/B,MASf4zB,GAAa,SAAU5b,EAAQvK,GAC/B,IAAIgT,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7CyH,GAAe,EAAG7iB,EAAgCsnB,IAAIzD,EAAME,gBAC3DlB,IACDA,EAAegB,EAAME,eAAea,WAAWf,EAAMc,cAEpD9B,GAA2D,IAA3CzH,EAAOkN,QAAQzqB,QAAQ8c,SAAS39B,SACjD6lC,EAAezH,EAAOkN,QAAQzqB,SAE9BglB,IAAiBA,EAAaziB,UAAUiL,SAAS,2BACjDwY,EAAMiD,WAAWhpB,SAASG,cAAc,QAEF,UAAlC4kB,EAAargB,UAAUS,SAEvB4f,EAAargB,UAAY,aAEA,eAAzBqgB,EAAahS,SAA4BgS,EAAaziB,UAAUiL,SAAS,gBACzEwX,EAAargB,UAAY,IAAMqO,EAAU,mBAAuBgS,EAAargB,UAAUS,OAAS,KAAO4N,EAAU,IAGjHgS,EAAa/T,UAAY,IAAM+B,EAAU,mBAAuBgS,EAAargB,UAAUS,OAAS,KAAO4N,EAAU,KAErH,EAAG5P,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,GAC5D4H,EAAUrQ,KAGd6b,GAAgB,SAAU7b,GAC1B,IAAIyI,EAAQ7gB,eAAeI,WAAW,GAClCyf,GAAe,EAAG7iB,EAAgCsnB,IAAIzD,EAAME,gBAC3DlB,IACDA,EAAegB,EAAME,eAAea,WAAWf,EAAMc,cAErD9B,IACAgB,EAAMiD,WAAWhpB,SAASG,cAAc,QACxC4kB,EAAa/T,UAAY,qBAAyB+T,EAAargB,UAAY,QAC3E,EAAGvB,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,IAEhEzI,EAAOkN,QAAQqC,QAAQhsB,MAAMuE,QAAU,QAMvCg0B,GAAW,SAAUjvB,EAAgBmT,EAAQ+b,QAC/B,IAAVA,IAAoBA,GAAQ,GAChC,IAAIC,EAAkBnvB,EAAeye,uBACjC7C,EAAQuT,EAAgBnT,cAAcC,cACV,SAA5BkT,EAAgBvmB,SAChBumB,EAAgBz4B,MAAMuE,QAAU,eAC5Bi0B,EACAtT,EAAMM,SAASiT,EAAgB/G,WAAY,GAG3CxM,EAAM+B,mBAAmBwR,KAI7BA,EAAgBz4B,MAAMuE,QAAU,QAC3Bk0B,EAAgB/G,WAAWA,YAC5B+G,EAAgB/G,WAAWvQ,YAAYhiB,SAASipB,eAAe,KAEnElD,EAAM+B,mBAAmBwR,EAAgB/G,aAEzC8G,EACAtT,EAAMO,UAAS,GAGfP,EAAMO,UAAS,IAEnB,EAAGnjB,EAAiC6B,IAAI+gB,GACpC5b,EAAegU,kBAAkB7b,UAAUiL,SAAS,qBAGxD6mB,GAAa9W,IAiBbic,GAAwC,SAAUjc,EAAQjY,GAG1D,GADAiY,EAAOkN,QAAQ8G,cAAgBjsB,EAAMksB,YACjClsB,EAAMksB,YACN,OAAO,GAGyB,IAAhClsB,EAAMrd,IAAIzF,QAAQ,UAAiC,SAAd8iB,EAAMrd,KAAgC,YAAdqd,EAAMrd,KAAmC,QAAdqd,EAAMrd,KAChF,UAAdqd,EAAMrd,KAAiC,aAAdqd,EAAMrd,KAAoC,WAAdqd,EAAMrd,KAAqB,aAAa07B,KAAKre,EAAMrd,MACxGs1B,EAAOkU,KAAKC,oBAAoBnU,EAAQjY,GAE5C,IAAI0gB,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7C2I,EAAiBF,EAAME,eAC3B,IAAK0L,GAAkBtsB,EAAOiY,EAAQ2I,GAClC,OAAO,EAKX,GAHA2L,GAAe7L,EAAOzI,EAAQjY,GAC9BwsB,GAAM9L,GAEY,UAAd1gB,EAAMrd,KAAiC,QAAdqd,EAAMrd,KAA+B,cAAdqd,EAAMrd,MAAuD,IAAhCqd,EAAMrd,IAAIzF,QAAQ,YAC3F,EAAGupC,EAA0BsE,IAAI/qB,IAAwB,WAAdA,EAAMrd,KAAkC,WAAdqd,EAAMrd,IAC/E,OAAO,EAEX,IAAI+8B,GAAe,EAAG7iB,EAAgCsnB,IAAIvD,GACtDgM,GAAW,EAAG/vB,EAAqCqJ,IAAI0a,EAAgB,KAE3E,GAAIiM,GAAY7sB,EAAOiY,EAAQ2U,EAAUlM,GACrC,OAAO,EAGX,GAAIoM,GAAQpM,EAAOzI,EAAQ2U,EAAU5sB,GACjC,OAAO,EAGX,GAAI2tB,GAAS1V,EAAQjY,EAAO0gB,GACxB,OAAO,EAGX,IAAIuM,GAAoB,EAAGpwB,EAAsCsJ,IAAIya,EAAgB,yBACrF,GAAIqM,EAAmB,CAEnB,GAAkB,WAAdjtB,EAAMrd,KAA0D,IAAtCsqC,EAAkBzV,SAAS39B,OAKrD,OAJAo+B,EAAOkN,QAAQqC,QAAQhsB,MAAMuE,QAAU,OACvCktB,EAAkBnU,kBAAkBtd,MAAMuE,QAAU,OACpDkY,EAAOkN,QAAQzqB,QAAQy5B,OACvBn0B,EAAM8N,kBACC,EAGX,KAAK,EAAG2Y,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,UAAYjrB,EAAMgrB,QAAwB,UAAdhrB,EAAMrd,KACrC,eAAhDsqC,EAAkBjyB,aAAa,aAA+B,CAC9D,IAAIo5B,EAAgBnc,EAAOkN,QAAQqC,QAAQpsB,cAAc,iBAIzD,OAHAg5B,EAAcvT,QACduT,EAAcC,SACdr0B,EAAM8N,kBACC,EAEX,GAAqD,MAAjDmf,EAAkBjyB,aAAa,cAAuB,CACtD,GAAImyB,GAAalV,EAAQjY,EAAOitB,EAAkBnU,kBAAmB4H,GACjE,OAAO,EAEX,GAAImI,GAAiB5Q,EAAQjY,EAAO0gB,EAAOuM,EAAkBnU,kBAAmBmU,GAC5E,OAAO,EAEX,GAAoD,sBAAhDA,EAAkBjyB,aAAa,cAC/B2tB,GAAkB1Q,EAAQjY,EAAO0gB,EAAOuM,EAAkBnU,kBAAmBmU,GAC7E,OAAO,GAKnB,GAAIF,GAAc9U,EAAQyI,EAAO1gB,EAAO4sB,GACpC,OAAO,EAGX,IAAI0H,GAAe,EAAGz3B,EAAmC03B,IAAI3T,EAAgB,cAC7E,GAAI0T,IACKt0B,EAAMirB,UAAYjrB,EAAMgrB,QAAwB,UAAdhrB,EAAMrd,IAAiB,EACrD,EAAG8jC,EAA0BsE,IAAI/qB,GAMlC0gB,EAAMuC,eAAeqR,GAJrB5T,EAAMwC,cAAcoR,IAMxB,EAAGx2B,EAAiC6B,IAAI+gB,GACxC,IAAItR,EAAOzU,SAASG,cAAc,KASlC,OARAsU,EAAK7O,aAAa,aAAc,KAChC6O,EAAK/P,UAAY,KACjBqhB,EAAMiD,WAAWvU,GACjBsR,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,GACxC8R,GAAiBva,GACjB8W,GAAa9W,GACbjY,EAAM8N,kBACC,EAIf,IAAI1H,GAAiB,EAAG4Z,EAA+C5H,GAAGwI,GAC1E,GAAIxa,EAAgB,CAChB,GAA+B,OAA3BA,EAAesH,SAAoBkT,EAAejY,YAAY9uB,SAAW6mC,EAAMc,eAC9E,EAAGiF,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,QAAwB,UAAdhrB,EAAMrd,IAAiB,CAEvG,IAAI6xC,EAAe75B,SAASG,cAAc,KAS1C,OARA05B,EAAa7rB,YAAc,KAC3B6rB,EAAaj0B,aAAa,aAAc,KACxCqgB,EAAe3Y,cAAczJ,sBAAsB,WAAYg2B,GAC/D9T,EAAMM,SAASwT,EAAc,IAC7B,EAAG12B,EAAiC6B,IAAI+gB,GACxC8R,GAAiBva,GACjB8W,GAAa9W,GACbjY,EAAM8N,kBACC,EAGX,GAAI+c,EAAY,KAAM7qB,GAAQ,CAC1B,IAAI9gB,EAAQmW,SAAS+Q,EAAesH,QAAQtQ,OAAO,GAAI,IAAM,EAM7D,OALIle,EAAQ,IACR20C,GAAW5b,EAAQ,IAAM/4B,GACzBszC,GAAiBva,IAErBjY,EAAM8N,kBACC,EAGX,GAAI+c,EAAY,KAAM7qB,GAAQ,CACtB9gB,EAAQmW,SAAS+Q,EAAesH,QAAQtQ,OAAO,GAAI,IAAM,EAM7D,OALIle,EAAQ,IACR20C,GAAW5b,EAAQ,IAAM/4B,GACzBszC,GAAiBva,IAErBjY,EAAM8N,kBACC,EAEO,cAAd9N,EAAMrd,MAAwB,EAAG8jC,EAA0BsE,IAAI/qB,IAAWA,EAAMirB,UAAajrB,EAAMgrB,QAC1D,IAAtC5kB,EAAeuC,YAAY9uB,QAE9Bi6C,GAAc7b,GAItB,GAAI2V,GAAQ3V,EAAQyI,EAAO1gB,GACvB,OAAO,EAGX,GAAIA,EAAMgrB,QAAwB,UAAdhrB,EAAMrd,OAAoB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,SAAU,CAEtG,IAAIxa,GAAW,EAAG5T,EAAqCqJ,IAAI0a,EAAgB,KACvE6T,GAAgB,EAAG53B,EAAsC6sB,IAAI9I,EAAgB,YAAa,YAC1FwJ,GAAqB,EAAGvtB,EAAsC6sB,IAAI9I,EAAgB,YAAa,iBACnG,GAAInQ,GAAYgkB,GAAiBrK,GAC5BhkB,GAAoD,IAAlCA,EAAesH,QAAQ7zB,OAAe,CACzD,IAAI66C,EAAezc,EAAOkN,QAAQqC,QAAQpsB,cAAc,SACxDs5B,EAAa7T,QACb6T,EAAaL,UAIrB,GAAIM,GAAmB1c,EAAQjY,GAC3B,OAAO,EAGX,GAAI6qB,EAAY,MAAO7qB,GAAQ,CAC3B,IAAI4mB,EAAc3O,EAAOkN,QAAQqC,QAAQpsB,cAAc,oBACvD,GAAIwrB,EAGA,OAFAA,EAAYgO,QACZ50B,EAAM8N,kBACC,EAIf,GAAI+c,EAAY,MAAO7qB,GAAQ,CACvB4mB,EAAc3O,EAAOkN,QAAQqC,QAAQpsB,cAAc,sBACvD,GAAIwrB,EAGA,OAFAA,EAAYgO,QACZ50B,EAAM8N,kBACC,EAGf,GAAI+f,GAAO5V,EAAQyI,EAAO1gB,GACtB,OAAO,EAGX,KAAK,EAAGymB,EAA0BsE,IAAI/qB,IAAUA,EAAMirB,WAAajrB,EAAMgrB,QAAwB,UAAdhrB,EAAMrd,KAC5C,OAAzCi+B,EAAe3Y,cAAcyF,SAA6D,MAAzCkT,EAAe3Y,cAAcyF,QAa9E,MAZI,CAAC,SAAU,SAAU,IAAK,IAAK,KAAM,KAAKtI,SAASwb,EAAe3Y,cAAcyF,SAEhFgT,EAAMiD,WAAWhpB,SAASipB,eAAe,KAAOlnB,EAA8B6E,EAAEwF,OAGhF2Z,EAAMiD,WAAWhpB,SAASipB,eAAe,OAE7ClD,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,GACxC8R,GAAiBva,GACjB8W,GAAa9W,GACbjY,EAAM8N,kBACC,EAGX,GAAkB,cAAd9N,EAAMrd,OAAwB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,QAA+B,KAArBtK,EAAMrkC,WAAmB,CACtI,GAAI2xC,GAAU/V,EAAQyI,EAAO1gB,EAAO4sB,GAChC,OAAO,EAEX,GAAIlN,EAAc,CACd,GAAIA,EAAa6D,wBACV7D,EAAa6D,uBAAuBtmB,UAAUiL,SAAS,0BACY,MAAnEwX,EAAa6D,uBAAuBvoB,aAAa,eAExB,OAAzB0kB,EAAahS,SAA6C,OAAzBgS,EAAahS,QAAkB,CACnE,IAAIugB,GAAa,EAAGnwB,EAAiC2qB,IAAI/I,EAAczH,EAAOkN,QAAQzqB,QAASgmB,GAAOxgC,MACtG,GAAoB,IAAf+tC,GAA0C,IAAtBvN,EAAMc,aACX,IAAfyM,GAAoBvO,EAAa3W,UAAUuV,WAAW5hB,EAA8B6E,EAAEwF,MASvF,OAPAgtB,GAASrU,EAAa6D,uBAAuBW,iBAAkBjM,GAAQ,GACiB,KAApFyH,EAAargB,UAAUS,OAAO/mB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,MAE5E2Y,EAAazV,SACbuoB,GAAiBva,IAErBjY,EAAM8N,kBACC,EAGf,IAAI+mB,EAAmBnU,EAAMc,YAC7B,GAAyB,KAArBd,EAAMrkC,YAAiD,IAA5BukC,EAAerB,UACkB,OAA5DqB,EAAejY,YAAY7vB,OAAO+7C,EAAmB,IACrDjU,EAAejY,YAAY7vB,OAAO+7C,EAAmB,KAAOn4B,EAA8B6E,EAAEwF,MACzF,CAAC,SAAU,SAAU,IAAK,IAAK,KAAM,KAAK3B,SAASwb,EAAe3Y,cAAcyF,SAQnF,OANAkT,EAAejY,YAAciY,EAAejY,YAAYje,UAAU,EAAGmqC,EAAmB,GACpFn4B,EAA8B6E,EAAEwF,KACpC2Z,EAAMM,SAASJ,EAAgBiU,GAC/BnU,EAAMO,UAAS,GACfuR,GAAiBva,GACjBjY,EAAM8N,kBACC,EAGP8S,EAAejY,cAAgBjM,EAA8B6E,EAAEwF,MAA8B,IAAtB2Z,EAAMc,cACzEZ,EAAe6C,iBAAmBqP,GAAWpS,KACjDE,EAAejY,YAAc,IAIjC+W,EAAahkB,iBAAiB,uDAAuDvgB,SAAQ,SAAU2jB,GACnGA,EAAKga,kBAAkBtd,MAAMuE,QAAU,SACvCjB,EAAKolB,iBAAiB1oB,MAAMuE,QAAU,UAE1C2f,EAAahkB,iBAAiB,uDAAuDvgB,SAAQ,SAAU2jB,GACnGA,EAAKga,kBAAkBtd,MAAMuE,QAAU,SACvCjB,EAAKolB,iBAAiB1oB,MAAMuE,QAAU,WAIlD,IAAI,EAAG0mB,EAA6B4E,OAA+B,IAAtB3K,EAAMc,aAAqBZ,EAAejY,YAAYzrB,QAAQwf,EAA8B6E,EAAEwF,OAAS,GAChJ6Z,EAAe6C,iBAA+D,IAA5C7C,EAAe6C,gBAAgBlE,UACtB,SAA3CqB,EAAe6C,gBAAgB/V,UAChB,cAAd1N,EAAMrd,KAAqC,cAAdqd,EAAMrd,KAKpC,OAHA+9B,EAAM+B,mBAAmB7B,EAAe6C,iBACxC/C,EAAMO,UAAS,GACfjhB,EAAM8N,kBACC,EAEX,GAAIqgB,GAAuBnuB,EAAO0f,EAAcgB,GAE5C,OADA1gB,EAAM8N,kBACC,EAGX,GADAsgB,GAAwB1N,EAAO1gB,EAAMrd,KACnB,cAAdqd,EAAMrd,IAAqB,CAE3B,IAAImyC,EAAclU,EAAeoC,YAC7B8R,GAAwC,IAAzBA,EAAYvV,UAA4D,gBAA1CuV,EAAY95B,aAAa,cACtE0lB,EAAMwC,cAAc4R,GAG5B,SAAIpV,IAAgB8I,EAAW9I,EAAczH,EAAQjY,EAAO0gB,MACxD1gB,EAAM8N,kBACC,IAIX6mB,GAAqB,SAAU1c,EAAQjY,GAEvC,GAAI6qB,EAAY,MAAO7qB,GAAQ,CAC3B,IAAI4mB,EAAc3O,EAAOkN,QAAQqC,QAAQpsB,cAAc,wBACvD,GAAIwrB,EAGA,OAFAA,EAAYgO,QACZ50B,EAAM8N,kBACC,IAoBfinB,GAA0B,SAAU9c,GACpC6Z,aAAa7Z,EAAOkN,QAAQ4M,oBAC5B9Z,EAAOkN,QAAQ4M,mBAAqBz2B,OAAO+f,YAAW,WAClD,GAA+D,UAA3DpD,EAAOkN,QAAQzqB,QAAQM,aAAa,qBAGnC,EAAG8C,EAA8Bk0B,IAAI/Z,EAAOkN,QAAQzqB,SAAzD,CAGAgsB,EAAqBzO,EAAOoB,QAAQgO,SAAU3qB,EAAuC6E,EAAE4F,eACvF2f,EAAc7O,EAAOoB,QAAQgO,SAAU3qB,EAAuC6E,EAAE4F,eAChF,IAAIuZ,EAAQ7gB,eAAeI,WAAW,GAClCgyB,EAAcvR,EAAME,eAEpBqR,EADkC,IAAlCvR,EAAME,eAAerB,SACPmB,EAAME,eAAe3Y,cAGrBgqB,EAAYxQ,WAAWf,EAAMc,aAAeyQ,EAAYxQ,WAAW5nC,OAC3Eo4C,EAAYxQ,WAAW5nC,OAAS,EAChC6mC,EAAMc,aAEhB,IAAIwT,GAAmB,EAAGn4B,EAAsC6sB,IAAIuI,EAAa,YAAa,mBAC9F,GAAI+C,EAIA,OAHA/c,EAAOkN,QAAQqC,QAAQnoB,UAAY,GACnC41B,GAASD,EAAkB/c,QAC3Bid,GAAmBjd,EAAQ+c,GAI/B,IAAI1C,GAAY,EAAGz1B,EAAqCqJ,IAAI+rB,EAAa,MACrEK,GACIA,EAAUr1B,UAAUiL,SAAS,eAC7B2e,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,UAEH,OAApCiL,EAAUrqB,cAAcyF,QAC7BmZ,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,iBAEH,OAApCiL,EAAUrqB,cAAcyF,SAC7BmZ,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,SAEhDP,EAAc7O,EAAOoB,QAAQgO,SAAU,CAAC,UAAW,YAGnDN,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,UAAW,YAEpD,EAAGxqB,EAAqCqJ,IAAI+rB,EAAa,eACzDpL,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,YAE5C,EAAGxqB,EAAqCqJ,IAAI+rB,EAAa,OACzD,EAAGp1B,EAAqCqJ,IAAI+rB,EAAa,YACzDpL,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,WAE5C,EAAGxqB,EAAqCqJ,IAAI+rB,EAAa,OACzD,EAAGp1B,EAAqCqJ,IAAI+rB,EAAa,QACzDpL,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,aAE5C,EAAGxqB,EAAqCqJ,IAAI+rB,EAAa,YACzD,EAAGp1B,EAAqCqJ,IAAI+rB,EAAa,OACzDpL,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,WAGhDpP,EAAOkN,QAAQzqB,QACVgB,iBAAiB,0BACjBvgB,SAAQ,SAAU2jB,GACnBA,EAAK7B,UAAUgN,OAAO,4BAE1B,IAAIkrB,GAAiB,EAAGt4B,EAAsCsJ,IAAI8rB,EAAa,kBAC/E,GAAIkD,EAAgB,CAChB,IAAIC,EAAQD,EAAen6B,aAAa,eAAe/F,MAAM,KAC7D,GAAImgC,EAAMv7C,OAAS,GAAKs7C,EAAenS,YAAYQ,WAAW2R,EAAepc,oBAAqB,CAC9F,IAAIsc,EAAYF,EAAepc,mBAC1B/d,aAAa,eACb/F,MAAM,KACXmgC,EAAM3B,MAAK,SAAUtsC,GACjB,GAAIkuC,EAAUjwB,SAASje,GAEnB,OADAiuC,EAAQ,CAACjuC,IACF,KAInB8wB,EAAOkN,QAAQzqB,QACVgB,iBAAiB,mBACjBvgB,SAAQ,SAAU2jB,GACfA,EAAK9D,aAAa,eAAe9d,QAAQk4C,EAAM,KAAO,GACtDt2B,EAAK7B,UAAUC,IAAI,4BAI/B,IAAIuT,GAAW,EAAG5T,EAAqCqJ,IAAI+rB,EAAa,KACpExhB,GACAoW,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,SAEhD,IAAIkG,GAAe,EAAG1wB,EAAqCqJ,IAAI+rB,EAAa,SACxE7rB,GAAiB,EAAG4Z,EAA+C5H,GAAG6Z,IACtE,EAAGp1B,EAAqCqJ,IAAI+rB,EAAa,SACrD,EAAGp1B,EAAqCqJ,IAAI+rB,EAAa,QACzDlL,EAAe9O,EAAOoB,QAAQgO,SAAU,CACpC,WACA,OACA,SACA,SACA,OACA,QACA,OACA,eACA,QACA,OACA,cACA,SACA,OACA,QACA,WAEJR,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,WAG5CN,EAAe9O,EAAOoB,QAAQgO,SAAU,CACpC,WACA,OACA,SACA,SACA,OACA,QACA,OACA,eACA,QACA,OACA,SACA,OACA,QACA,WAEJR,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,iBAG3CjhB,GACL2gB,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,SACzCR,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,cAEvCkG,GACLxG,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,UAG7C,IAAIyB,GAAa,EAAGjsB,EAAsCsJ,IAAI8rB,EAAa,cAC3E,GAAInJ,EAIA,OAHA7Q,EAAOkN,QAAQqC,QAAQnoB,UAAY,GACnC41B,GAASnM,EAAY7Q,QACrBid,GAAmBjd,EAAQ6Q,GAI/B,IAAIa,GAAoB,EAAG3J,EAA0CllC,GAAGm3C,EAAa,cAiBrF,GAhBItI,IACA1R,EAAOkN,QAAQqC,QAAQnoB,UAAY,GACnCi2B,GAAM5U,EAAOiJ,EAAmB1R,GAChCsd,GAAQ7U,EAAOiJ,EAAmB1R,GAClCgd,GAAStL,EAAmB1R,GAC5Bid,GAAmBjd,EAAQ0R,IAG3B2I,IACAra,EAAOkN,QAAQqC,QAAQnoB,UAAY,GACnCi2B,GAAM5U,EAAO4R,EAAWra,GACxBsd,GAAQ7U,EAAO4R,EAAWra,GAC1Bgd,GAAS3C,EAAWra,GACpBid,GAAmBjd,EAAQqa,IAG3B/E,EAAc,CACHtV,EAAOjW,QAAQhE,KACZia,EAAOjW,QACrBiW,EAAOkN,QAAQqC,QAAQnoB,UAAY,GACnC,IAAIm2B,EAAgB,WAChB,IAAIC,EAASlI,EAAamI,KAAK77C,OAC3B87C,EAAYpI,EAAamI,KAAK,GAAGE,MAAM/7C,OACvCg8C,EAAMxgC,SAASygC,EAAQt3C,MAAO,KAAOi3C,EACrCM,EAAS1gC,SAAS2gC,EAASx3C,MAAO,KAAOm3C,EAC7C,GAAIE,IAAQJ,GAAUE,IAAcI,EAApC,CAGA,GAAIJ,IAAcI,EAEd,IADA,IAAIE,EAAaF,EAASJ,EACjB12C,EAAI,EAAGA,EAAIsuC,EAAamI,KAAK77C,OAAQoF,IAC1C,GAAIg3C,EAAa,EACb,IAAK,IAAI92C,EAAI,EAAGA,EAAI82C,EAAY92C,IAClB,IAANF,EACAsuC,EAAamI,KAAKz2C,GAAGilC,iBAAiBpX,mBAAmB,WAAY,cAGrEygB,EAAamI,KAAKz2C,GAAGilC,iBAAiBpX,mBAAmB,WAAY,mBAK7E,IAAK,IAAIvsB,EAAIo1C,EAAY,EAAGp1C,GAAKw1C,EAAQx1C,IACrCgtC,EAAamI,KAAKz2C,GAAG22C,MAAMr1C,GAAG0pB,SAK9C,GAAIwrB,IAAWI,EAAK,CAChB,IAAIK,EAAUL,EAAMJ,EACpB,GAAIS,EAAU,EAAG,CAEb,IADA,IAAIC,EAAU,OACLr8C,EAAI,EAAGA,EAAIi8C,EAAQj8C,IACxBq8C,GAAW,aAEf,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAASE,IACrB7I,EAAanyB,cAAc,SAC3BmyB,EACKnyB,cAAc,SACd0R,mBAAmB,YAAaqpB,GAGrC5I,EACKnyB,cAAc,SACd0R,mBAAmB,WAAYqpB,EAAU,cAKtD,IAASr8C,EAAI27C,EAAS,EAAG37C,GAAK+7C,EAAK/7C,IAC/ByzC,EAAamI,KAAK57C,GAAGmwB,SACY,IAA7BsjB,EAAamI,KAAK77C,QAClB0zC,EAAanyB,cAAc,SAAS6O,YAMpDosB,EAAa,SAAU9xC,GACvB+xC,GAAc/I,EAAchpC,GACf,UAATA,GACAgyC,EAAOt5B,UAAUgN,OAAO,wBACxBusB,EAASv5B,UAAUgN,OAAO,wBAC1BwsB,EAAQx5B,UAAUC,IAAI,yBAER,WAAT3Y,GACLgyC,EAAOt5B,UAAUgN,OAAO,wBACxBwsB,EAAQx5B,UAAUgN,OAAO,wBACzBusB,EAASv5B,UAAUC,IAAI,0BAGvBs5B,EAASv5B,UAAUgN,OAAO,wBAC1BwsB,EAAQx5B,UAAUgN,OAAO,wBACzBssB,EAAOt5B,UAAUC,IAAI,0BAEzB,EAAGY,EAAiC6B,IAAI+gB,GACxC8R,GAAiBva,IAEjBye,GAAK,EAAG75B,EAAqCqJ,IAAI+rB,EAAa,MAC9D0E,GAAK,EAAG95B,EAAqCqJ,IAAI+rB,EAAa,MAC9D2E,EAAY,OACZF,EACAE,EAAYF,EAAG17B,aAAa,UAAY,OAEnC27B,IACLC,EAAYD,EAAG37B,aAAa,UAAY,UAE5C,IAAIu7B,EAAS57B,SAASG,cAAc,UACpCy7B,EAAOh2B,aAAa,OAAQ,UAC5Bg2B,EAAOh2B,aAAa,aAAcjF,OAAOkK,WAAWqxB,UAAY,KAAM,EAAGpQ,EAAmCqQ,IAAI,OAAS,KACzHP,EAAOh2B,aAAa,YAAa,QACjCg2B,EAAOl3B,UACH,8DACJk3B,EAAOj4B,UACH,sDACmB,SAAds4B,EAAuB,wBAA0B,IAC1DL,EAAOp5B,QAAU,WACbk5B,EAAW,SAEf,IAAIG,EAAW77B,SAASG,cAAc,UACtC07B,EAASj2B,aAAa,OAAQ,UAC9Bi2B,EAASj2B,aAAa,aAAcjF,OAAOkK,WAAWuxB,YAAc,KAAM,EAAGtQ,EAAmCqQ,IAAI,OAAS,KAC7HN,EAASj2B,aAAa,YAAa,UACnCi2B,EAASn3B,UACL,gEACJm3B,EAASl4B,UACL,sDACmB,WAAds4B,EAAyB,wBAA0B,IAC5DJ,EAASr5B,QAAU,WACfk5B,EAAW,WAEf,IAAII,EAAU97B,SAASG,cAAc,UACrC27B,EAAQl2B,aAAa,OAAQ,UAC7Bk2B,EAAQl2B,aAAa,aAAcjF,OAAOkK,WAAWwxB,WAAa,KAAM,EAAGvQ,EAAmCqQ,IAAI,OAAS,KAC3HL,EAAQl2B,aAAa,YAAa,SAClCk2B,EAAQp3B,UACJ,+DACJo3B,EAAQn4B,UACJ,sDACmB,UAAds4B,EAAwB,wBAA0B,IAC3DH,EAAQt5B,QAAU,WACdk5B,EAAW,UAEf,IAAIY,EAAmBt8B,SAASG,cAAc,UAC9Cm8B,EAAiB12B,aAAa,OAAQ,UACtC02B,EAAiB12B,aAAa,aAAcjF,OAAOkK,WAAW0xB,eAAiB,KAAM,EAAGzQ,EAAmCqQ,IAAI,MAAQ,KACvIG,EAAiB12B,aAAa,YAAa,aAC3C02B,EAAiB53B,UACb,8DACJ43B,EAAiB34B,UACb,qDACJ24B,EAAiB95B,QAAU,WACvB,IAAIyjB,EAAiB/gB,eAAeI,WAAW,GAC1C2gB,eACD0M,GAAc,EAAGzwB,EAAqCqJ,IAAI0a,EAAgB,QAC1E,EAAG/jB,EAAqCqJ,IAAI0a,EAAgB,MAC5D0M,GACA6J,GAAUlf,EAAQyI,EAAO4M,IAGjC,IAAI8J,EAAoBz8B,SAASG,cAAc,UAC/Cs8B,EAAkB72B,aAAa,OAAQ,UACvC62B,EAAkB72B,aAAa,aAAcjF,OAAOkK,WAAW6xB,eAAiB,KAAM,EAAG5Q,EAAmCqQ,IAAI,OAAS,KACzIM,EAAkB72B,aAAa,YAAa,aAC5C62B,EAAkB/3B,UACd,+DACJ+3B,EAAkB94B,UACd,qDACJ84B,EAAkBj6B,QAAU,WACxB,IAAIyjB,EAAiB/gB,eAAeI,WAAW,GAC1C2gB,eACD0M,GAAc,EAAGzwB,EAAqCqJ,IAAI0a,EAAgB,QAC1E,EAAG/jB,EAAqCqJ,IAAI0a,EAAgB,MAC5D0M,GACA+J,GAAepf,EAAQyI,EAAO4M,IAGtC,IAAIgK,EAAsB38B,SAASG,cAAc,UACjDw8B,EAAoB/2B,aAAa,OAAQ,UACzC+2B,EAAoB/2B,aAAa,aAAcjF,OAAOkK,WAAW+xB,kBAAoB,KAAM,EAAG9Q,EAAmCqQ,IAAI,OAAS,KAC9IQ,EAAoB/2B,aAAa,YAAa,gBAC9C+2B,EAAoBj4B,UAChB,iEACJi4B,EAAoBh5B,UAChB,qDACJg5B,EAAoBn6B,QAAU,WAC1B,IAAIyjB,EAAiB/gB,eAAeI,WAAW,GAC1C2gB,eACD0M,GAAc,EAAGzwB,EAAqCqJ,IAAI0a,EAAgB,QAC1E,EAAG/jB,EAAqCqJ,IAAI0a,EAAgB,MAC5D0M,GACAkK,GAAavf,EAAQsV,EAAcD,IAG3C,IAAImK,EAAuB98B,SAASG,cAAc,UAClD28B,EAAqBl3B,aAAa,OAAQ,UAC1Ck3B,EAAqBl3B,aAAa,aAAcjF,OAAOkK,WAAWkyB,iBAAmB,KAAM,EAAGjR,EAAmCqQ,IAAI,OAAS,KAC9IW,EAAqBl3B,aAAa,YAAa,gBAC/Ck3B,EAAqBp4B,UACjB,kEACJo4B,EAAqBn5B,UACjB,qDACJm5B,EAAqBt6B,QAAU,WAC3B,IAAIyjB,EAAiB/gB,eAAeI,WAAW,GAC1C2gB,eACD0M,GAAc,EAAGzwB,EAAqCqJ,IAAI0a,EAAgB,QAC1E,EAAG/jB,EAAqCqJ,IAAI0a,EAAgB,MAC5D0M,GACAkK,GAAavf,EAAQsV,EAAcD,EAAa,gBAGxD,IAAIqK,EAAmBh9B,SAASG,cAAc,UAC9C68B,EAAiBp3B,aAAa,OAAQ,UACtCo3B,EAAiBp3B,aAAa,aAAcjF,OAAOkK,WAAW,cAAgB,KAAM,EAAGihB,EAAmCqQ,IAAI,MAAQ,KACtIa,EAAiBp3B,aAAa,YAAa,aAC3Co3B,EAAiBt4B,UACb,8DACJs4B,EAAiBr5B,UACb,qDACJq5B,EAAiBx6B,QAAU,WACvB,IAAIyjB,EAAiB/gB,eAAeI,WAAW,GAC1C2gB,eACD0M,GAAc,EAAGzwB,EAAqCqJ,IAAI0a,EAAgB,QAC1E,EAAG/jB,EAAqCqJ,IAAI0a,EAAgB,MAC5D0M,GACAsK,GAAU3f,EAAQyI,EAAO4M,IAGjC,IAAIuK,EAAsBl9B,SAASG,cAAc,UACjD+8B,EAAoBt3B,aAAa,OAAQ,UACzCs3B,EAAoBt3B,aAAa,aAAcjF,OAAOkK,WAAW,iBAAmB,KAAM,EAAGihB,EAAmCqQ,IAAI,OAAS,KAC7Ie,EAAoBt3B,aAAa,YAAa,gBAC9Cs3B,EAAoBx4B,UAChB,iEACJw4B,EAAoBv5B,UAChB,qDACJu5B,EAAoB16B,QAAU,WAC1B,IAAIyjB,EAAiB/gB,eAAeI,WAAW,GAC1C2gB,eACD0M,GAAc,EAAGzwB,EAAqCqJ,IAAI0a,EAAgB,QAC1E,EAAG/jB,EAAqCqJ,IAAI0a,EAAgB,MAC5D0M,GACAwK,GAAa7f,EAAQyI,EAAO6M,EAAcD,IAGlD,IAAIyK,EAAYp9B,SAASG,cAAc,QACvCi9B,EAAUx3B,aAAa,aAAcjF,OAAOkK,WAAWqwB,KACvDkC,EAAUz5B,UAAY,yCACtB,IAAIw3B,EAAUn7B,SAASG,cAAc,SACrCi9B,EAAUpb,YAAYmZ,GACtBA,EAAQvxC,KAAO,SACfuxC,EAAQh5C,IAAM,IACdg5C,EAAQx3B,UAAY,eACpBw3B,EAAQt6B,MAAM4b,MAAQ,OACtB0e,EAAQt6B,MAAMw8B,UAAY,SAC1BlC,EAAQv1B,aAAa,cAAejF,OAAOkK,WAAWqwB,KACtDC,EAAQt3C,MAAQ+uC,EAAamI,KAAK77C,OAAOwC,WACzCy5C,EAAQmC,QAAU,WACdzC,KAEJM,EAAQoC,UAAY,SAAUl4B,GAC1B,IAAIA,EAAMksB,YAGV,MAAkB,QAAdlsB,EAAMrd,KACNqzC,EAASnV,QACTmV,EAAS3B,cACTr0B,EAAM8N,uBAGV6mB,GAAmB1c,EAAQjY,IAE/B,IAAIm4B,EAAax9B,SAASG,cAAc,QACxCq9B,EAAW53B,aAAa,aAAcjF,OAAOkK,WAAWuwB,QACxDoC,EAAW75B,UAAY,yCACvB,IAAI03B,EAAWr7B,SAASG,cAAc,SACtCq9B,EAAWxb,YAAYqZ,GACvBA,EAASzxC,KAAO,SAChByxC,EAASl5C,IAAM,IACfk5C,EAAS13B,UAAY,eACrB03B,EAASx6B,MAAM4b,MAAQ,OACvB4e,EAASx6B,MAAMw8B,UAAY,SAC3BhC,EAASz1B,aAAa,cAAejF,OAAOkK,WAAWuwB,QACvDC,EAASx3C,MAAQ+uC,EAAamI,KAAK,GAAGE,MAAM/7C,OAAOwC,WACnD25C,EAASiC,QAAU,WACfzC,KAEJQ,EAASkC,UAAY,SAAUl4B,GAC3B,IAAIA,EAAMksB,YAGV,MAAkB,QAAdlsB,EAAMrd,KACNmzC,EAAQjV,QACRiV,EAAQzB,cACRr0B,EAAM8N,uBAGV6mB,GAAmB1c,EAAQjY,IAE/Bs1B,GAAM5U,EAAO6M,EAActV,GAC3Bsd,GAAQ7U,EAAO6M,EAActV,GAC7Bgd,GAAS1H,EAActV,GACvBA,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAa+3B,GAC1Dte,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAag4B,GAC1Dve,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAai4B,GAC1Dxe,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAa44B,GAC1Dnf,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAay4B,GAC1Dhf,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAai5B,GAC1Dxf,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAa84B,GAC1Drf,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAam5B,GAC1D1f,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAaq5B,GAC1D5f,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAau5B,GAC1D9f,EAAOkN,QAAQqC,QAAQ1a,mBAAmB,YAAa,OACvDmL,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAa25B,GAC1DjD,GAAmBjd,EAAQsV,GAG/B,IAAI6K,GAAiB,EAAGv7B,EAAsC6sB,IAAIuI,EAAa,YAAa,YACxFmG,GACAC,GAAkBpgB,EAAQmgB,GAG9B,IAAIE,GAAsB,EAAGz7B,EAAsC6sB,IAAIuI,EAAa,YAAa,iBACjG,GAAIqG,EAAqB,CACVrgB,EAAOjW,QAAQhE,KACZia,EAAOjW,QACrBiW,EAAOkN,QAAQqC,QAAQnoB,UAAY,GAC/B04B,EAAYp9B,SAASG,cAAc,QACvCi9B,EAAUx3B,aAAa,aAAcjF,OAAOkK,WAAW+yB,YAAc,KAAM,EAAG9R,EAAmCqQ,IAAI,UAAY,KACjIiB,EAAUz5B,UAAY,yCACtB,IAAIk6B,EAAU79B,SAASG,cAAc,SACrCi9B,EAAUpb,YAAY6b,GACtBA,EAAQl6B,UAAY,eACpBk6B,EAAQj4B,aAAa,cAAejF,OAAOkK,WAAW+yB,YAAc,KAAM,EAAG9R,EAAmCqQ,IAAI,UAAY,KAChI0B,EAAQh9B,MAAM4b,MAAQ,QACtBohB,EAAQh6C,MAAQ85C,EAAoBt9B,aAAa,wBACjDw9B,EAAQP,QAAU,WACe,KAAzBO,EAAQh6C,MAAMshB,QACdw4B,EAAoB/3B,aAAa,uBAAwBi4B,EAAQh6C,QAGzEg6C,EAAQN,UAAY,SAAUl4B,GAC1B,IAAIA,EAAMksB,YAGV,OAAK,EAAGzF,EAA0BsE,IAAI/qB,IACjCA,EAAMirB,WACPjrB,EAAMgrB,QACQ,UAAdhrB,EAAMrd,SAOVgyC,GAAmB1c,EAAQjY,IANvB0gB,EAAM+B,mBAAmB6V,GACzB5X,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,QACxC1gB,EAAM8N,mBAKdmnB,GAASqD,EAAqBrgB,GAC9BA,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAau5B,GAC1D7C,GAAmBjd,EAAQqgB,GAE/B,IAAIG,GAAqB,EAAG57B,EAAsCsJ,IAAI8rB,EAAa,yBAEnF,GAAIwG,GACAA,EAAmBz9B,aAAa,aAAa9d,QAAQ,UAAY,EAAG,CACzD+6B,EAAOjW,QAAQhE,KACZia,EAAOjW,QAKrB,GAJAiW,EAAOkN,QAAQqC,QAAQnoB,UAAY,GACnCi2B,GAAM5U,EAAO+X,EAAoBxgB,GACjCsd,GAAQ7U,EAAO+X,EAAoBxgB,GACnCgd,GAASwD,EAAoBxgB,GACwB,eAAjDwgB,EAAmBz9B,aAAa,aAA+B,CAC/D,IAAI09B,EAAe/9B,SAASG,cAAc,QAC1C49B,EAAan4B,aAAa,aAAcjF,OAAOkK,WAAW6iB,SAAW,KAAM,EAAG5B,EAAmCqQ,IAAI,UAAY,KACjI4B,EAAap6B,UAAY,yCACzB,IAAIq6B,EAAah+B,SAASG,cAAc,SACxC49B,EAAa/b,YAAYgc,GACzB,IAAIC,EAAgBH,EAAmB3f,kBAAkBA,kBACzD6f,EAAWr6B,UAAY,eACvBq6B,EAAWp4B,aAAa,cAAejF,OAAOkK,WAAW6iB,SAAW,KAAM,EAAG5B,EAAmCqQ,IAAI,UAAY,KAChI6B,EAAWn6C,MACPo6C,EAAct6B,UAAUphB,QAAQ,cAAgB,EAC1C07C,EAAct6B,UAAUrJ,MAAM,KAAK,GAAGA,MAAM,KAAK,GACjD,GACV0jC,EAAWV,QAAU,SAAUriC,GACK,KAA5B+iC,EAAWn6C,MAAMshB,OACjB84B,EAAct6B,UAAY,YAAcq6B,EAAWn6C,OAGnDo6C,EAAct6B,UAAY,GAC1B2Z,EAAOsP,KAAK8F,eAAiB,IAE7BoL,EAAmBvU,iBAAiBjnB,UAAUiL,SAAS,6BACvDuwB,EAAmBvU,iBAAiB7kB,UAChCo5B,EAAmB3f,kBAAkBzZ,UACzC8oB,EAAkBsQ,EAAmBvU,iBAAkBjM,IAE3Dua,GAAiBva,GAEA,IAAbriB,EAAEijC,SAEFnY,EAAMM,SAAS4X,EAAc1L,WAAY,GACzCxM,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,KAGhDiY,EAAWT,UAAY,SAAUl4B,GAC7B,IAAIA,EAAMksB,cAGNyI,GAAmB1c,EAAQjY,GAA/B,CAGA,GAAkB,WAAdA,EAAMrd,KACgC,UAAtCs1B,EAAOsP,KAAK7sB,QAAQc,MAAMuE,QAG1B,OAFAkY,EAAOsP,KAAK7sB,QAAQc,MAAMuE,QAAU,YACpCC,EAAM8N,iBAGVmK,EAAOsP,KAAK8M,OAAOr0B,EAAOiY,IACrB,EAAGwO,EAA0BsE,IAAI/qB,IACjCA,EAAMirB,UACO,UAAdjrB,EAAMrd,MACN+9B,EAAMM,SAAS4X,EAAc1L,WAAY,GACzCxM,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,GACxC1gB,EAAM8N,iBACN9N,EAAM6N,qBAGd8qB,EAAWG,QAAU,SAAU94B,GAC3B,IAAIA,EAAMksB,aACQ,UAAdlsB,EAAMrd,KACQ,YAAdqd,EAAMrd,KACQ,WAAdqd,EAAMrd,KACQ,cAAdqd,EAAMrd,IAJV,CAOA,IAAIo2C,EAAgB,GAChBp2C,EAAMg2C,EAAWn6C,MAAMkM,UAAU,EAAGiuC,EAAWK,gBACnDt8B,EAAgD6E,EAAE8F,eAAelsB,SAAQ,SAAU89C,GAC3EA,EAAQ/7C,QAAQyF,EAAI+6B,gBAAkB,GACtCqb,EAAc/7C,KAAK,CACfiX,KAAMglC,EACNz6C,MAAOy6C,OAInBhhB,EAAOsP,KAAK2R,QAAQH,EAAep2C,EAAKs1B,GACxCjY,EAAM8N,mBAEVmK,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAak6B,GAE9DxD,GAAmBjd,EAAQwgB,QAGtBA,GACDxgB,EAAOkN,QAAQzqB,QACVgB,iBAAiB,4BACjBvgB,SAAQ,SAAUyrC,GACnB,IAAIqN,EAAkBrN,EAAYrD,uBAClC0Q,EAAgBz4B,MAAMuE,QAAU,UAGxC04B,OAAqBz+C,EAEzB,GAAIosB,EAAgB,CAChB6R,EAAOkN,QAAQqC,QAAQnoB,UAAY,GAC/B04B,EAAYp9B,SAASG,cAAc,QACvCi9B,EAAUx3B,aAAa,aAAc,OAAa,EAAGkmB,EAAmCqQ,IAAI,UAAY,KACxGiB,EAAUz5B,UAAY,yCACtB,IAAI66B,EAAUx+B,SAASG,cAAc,SACrCi9B,EAAUpb,YAAYwc,GACtBA,EAAQ76B,UAAY,eACpB66B,EAAQ54B,aAAa,cAAe,OAAa,EAAGkmB,EAAmCqQ,IAAI,UAAY,KACvGqC,EAAQ39B,MAAM4b,MAAQ,QACtB+hB,EAAQ36C,MAAQ4nB,EAAepL,aAAa,YAAc,GAC1Dm+B,EAAQlB,QAAU,WACd7xB,EAAe7F,aAAa,UAAW44B,EAAQ36C,QAEnD26C,EAAQjB,UAAY,SAAUl4B,GAC1B,IAAIA,EAAMksB,YAGV,OAAK,EAAGzF,EAA0BsE,IAAI/qB,IACjCA,EAAMirB,WACPjrB,EAAMgrB,QACQ,UAAdhrB,EAAMrd,SAOVgyC,GAAmB1c,EAAQjY,IANvB0gB,EAAM+B,mBAAmBrc,GACzBsa,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,QACxC1gB,EAAM8N,mBAKdwnB,GAAM5U,EAAOta,EAAgB6R,GAC7Bsd,GAAQ7U,EAAOta,EAAgB6R,GAC/Bgd,GAAS7uB,EAAgB6R,GACzBA,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAau5B,GAC1D7C,GAAmBjd,EAAQ7R,GAM/B,GAHIqK,GACA2oB,GAAYnhB,EAAQxH,IAEnBkZ,IACA2I,IACA/E,IACAkL,IACAhoB,IACA2nB,IACAE,IACAlyB,IACA0iB,EAAY,CACb,IAAIpJ,GAAe,EAAG7iB,EAAsC6sB,IAAIuI,EAAa,aAAc,KACvFvS,GACAA,EAAazX,cAAc+Q,YAAYf,EAAOkN,QAAQzqB,UACtDud,EAAOkN,QAAQqC,QAAQnoB,UAAY,GACnCi2B,GAAM5U,EAAOhB,EAAczH,GAC3Bsd,GAAQ7U,EAAOhB,EAAczH,GAC7Bgd,GAASvV,EAAczH,GACvBid,GAAmBjd,EAAQyH,IAG3BzH,EAAOkN,QAAQqC,QAAQhsB,MAAMuE,QAAU,OAI/CkY,EAAOkN,QAAQzqB,QACVgB,iBAAiB,sCACjBvgB,SAAQ,SAAU2jB,GACnBA,EAAKtD,MAAMuE,QAAU,UAEzB,IAAIs5B,GAAmB,EAAGx8B,EAAsC6sB,IAAIhJ,EAAME,eAAgB,YAAa,aACnGyY,IACAA,EAAiBj+B,cAAc,QAAQI,MAAMuE,QAAU,aAE5D,MAEHm1B,GAAqB,SAAUjd,EAAQvd,GACvC,IAAIsd,EAAgBtd,EAChB6yB,GAAe,EAAG1wB,EAAqCqJ,IAAIxL,EAAS,SACpE6yB,IACAvV,EAAgBuV,GAEpBtV,EAAOkN,QAAQqC,QAAQhsB,MAAM6E,KAAO,IACpC4X,EAAOkN,QAAQqC,QAAQhsB,MAAMuE,QAAU,QACvCkY,EAAOkN,QAAQqC,QAAQhsB,MAAM6B,IACzBxkB,KAAKgE,KAAK,EAAGm7B,EAAcza,UAAY,GAAK0a,EAAOkN,QAAQzqB,QAAQ8C,WAAa,KACpFya,EAAOkN,QAAQqC,QAAQhsB,MAAM6E,KACzBxnB,KAAKiE,IAAIk7B,EAAcshB,WAAYrhB,EAAOkN,QAAQzqB,QAAQW,YAAc4c,EAAOkN,QAAQqC,QAAQnsB,aAAe,KAClH4c,EAAOkN,QAAQqC,QAAQjnB,aAAa,YAAayX,EAAcza,UAAY,IAAIlhB,aAE/Eg8C,GAAoB,SAAUpgB,EAAQmgB,GACtCngB,EAAOkN,QAAQqC,QAAQnoB,UAAY,GACnC,IAAIk6B,EAAgB,WACW,KAAvBv0C,EAAMxG,MAAMshB,SACmB,QAA3Bs4B,EAAe1qB,QACf0qB,EAAe73B,aAAa,MAAOvb,EAAMxG,OAGzC45C,EAAezvB,YAAc3jB,EAAMxG,OAIf,KAAxBg7C,EAAOh7C,MAAMshB,QACbs4B,EAAe73B,aAAa,kBAAmBi5B,EAAOh7C,QAG1Du5C,EAAYp9B,SAASG,cAAc,QACvCi9B,EAAUx3B,aAAa,aAAcjF,OAAOkK,WAAWi0B,gBACvD1B,EAAUz5B,UAAY,yCACtB,IAAItZ,EAAQ2V,SAASG,cAAc,SACnCi9B,EAAUpb,YAAY33B,GACtBA,EAAMsZ,UAAY,eAClBtZ,EAAMub,aAAa,cAAejF,OAAOkK,WAAWi0B,gBACpDz0C,EAAMwW,MAAM4b,MAAQ,QACpBpyB,EAAMxG,MACF45C,EAAep9B,aAAa,QAAUo9B,EAAezvB,YACzD3jB,EAAMizC,QAAU,WACZsB,KAEJv0C,EAAMkzC,UAAY,SAAUl4B,GACpB20B,GAAmB1c,EAAQjY,IAG/B05B,GAAWzhB,EAAQmgB,EAAgBp4B,EAAOw5B,IAE9C,IAAIG,EAAah/B,SAASG,cAAc,QACxC6+B,EAAWp5B,aAAa,aAAcjF,OAAOkK,WAAWo0B,SACxDD,EAAWr7B,UAAY,yCACvB,IAAIk7B,EAAS7+B,SAASG,cAAc,SACpC6+B,EAAWhd,YAAY6c,GACvBA,EAAOl7B,UAAY,eACnBk7B,EAAOj5B,aAAa,cAAejF,OAAOkK,WAAWo0B,SACrDJ,EAAOh7C,MAAQ45C,EAAep9B,aAAa,mBAC3Cw+B,EAAOvB,QAAU,WACbsB,KAEJC,EAAOtB,UAAY,SAAUl4B,GACrB20B,GAAmB1c,EAAQjY,IAG/B05B,GAAWzhB,EAAQmgB,EAAgBp4B,EAAOhb,IAE9CiwC,GAASmD,EAAgBngB,GACzBA,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAau5B,GAC1D9f,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAam7B,GAC1DzE,GAAmBjd,EAAQmgB,IAE3B9C,GAAQ,SAAU5U,EAAOhmB,EAASud,GAClC,IAAIgc,EAAkBv5B,EAAQ6oB,uBAC9B,GAAK0Q,IACCv5B,EAAQuN,cAAc+Q,YAAYf,EAAOkN,QAAQzqB,UAC3B,OAApBA,EAAQgT,SAFhB,CAKA,IAAImsB,EAAYl/B,SAASG,cAAc,UACvC++B,EAAUt5B,aAAa,OAAQ,UAC/Bs5B,EAAUt5B,aAAa,YAAa,MACpCs5B,EAAUt5B,aAAa,aAAcjF,OAAOkK,WAAWs0B,GAAK,KAAM,EAAGrT,EAAmCqQ,IAAI,OAAS,KACrH+C,EAAUx6B,UAAY,sDACtBw6B,EAAUv7B,UAAY,qDACtBu7B,EAAU18B,QAAU,WAChBujB,EAAMiD,WAAWhpB,SAASG,cAAc,QACxCm5B,EAAgBz1B,sBAAsB,cAAe9D,IACrD,EAAGoD,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,GAC5D8R,GAAiBva,GACjB8c,GAAwB9c,GACxB8W,GAAa9W,IAEjBA,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAaq7B,KAE1DtE,GAAU,SAAU7U,EAAOhmB,EAASud,GACpC,IAAI6c,EAAcp6B,EAAQqe,mBAC1B,GAAK+b,IACCp6B,EAAQuN,cAAc+Q,YAAYf,EAAOkN,QAAQzqB,UAC3B,OAApBA,EAAQgT,SAFhB,CAKA,IAAIqsB,EAAcp/B,SAASG,cAAc,UACzCi/B,EAAYx5B,aAAa,OAAQ,UACjCw5B,EAAYx5B,aAAa,YAAa,QACtCw5B,EAAYx5B,aAAa,aAAcjF,OAAOkK,WAAWw0B,KAAO,KAAM,EAAGvT,EAAmCqQ,IAAI,OAAS,KACzHiD,EAAY16B,UACR,wDACJ06B,EAAYz7B,UACR,qDACJy7B,EAAY58B,QAAU,WAClBujB,EAAMiD,WAAWhpB,SAASG,cAAc,QACxCg6B,EAAYt2B,sBAAsB,WAAY9D,IAC9C,EAAGoD,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,GAC5D8R,GAAiBva,GACjB8c,GAAwB9c,GACxB8W,GAAa9W,IAEjBA,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAau7B,KAE1D9E,GAAW,SAAUv6B,EAASud,GAC9B,IAAIgD,EAAQtgB,SAASG,cAAc,UACnCmgB,EAAM1a,aAAa,OAAQ,UAC3B0a,EAAM1a,aAAa,YAAa,UAChC0a,EAAM1a,aAAa,aAAcjF,OAAOkK,WAAWyE,OAAS,KAAM,EAAGwc,EAAmCqQ,IAAI,OAAS,KACrH7b,EAAM5b,UACF,4DACJ4b,EAAM3c,UAAY,qDAClB2c,EAAM9d,QAAU,WACZ,IAAIujB,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GACjDyI,EAAMwC,cAAcxoB,IACpB,EAAGoD,EAAiC6B,IAAI+gB,GACxChmB,EAAQuP,SACRuoB,GAAiBva,GACjB8c,GAAwB9c,IAE5BA,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAayc,IAE1Dye,GAAa,SAAUzhB,EAAQvd,EAASsF,EAAOi6B,GAC/C,IAAIj6B,EAAMksB,YAAV,CAGA,GAAkB,QAAdlsB,EAAMrd,IAIN,OAHAs3C,EAAiBpZ,QACjBoZ,EAAiB5F,cACjBr0B,EAAM8N,iBAGV,KAAK,EAAG2Y,EAA0BsE,IAAI/qB,KACjCA,EAAMirB,UACPjrB,EAAMgrB,QACQ,UAAdhrB,EAAMrd,IAAiB,CACvB,IAAI+9B,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAEjDvd,EAAQoS,mBAAmB,WAAYpQ,EAA8B6E,EAAEwF,MACvE2Z,EAAMwC,cAAcxoB,EAAQsoB,aAC5BtC,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,GACxC1gB,EAAM8N,oBAGVsrB,GAAc,SAAUnhB,EAAQxH,GACrBwH,EAAOjW,QAAQhE,KACZia,EAAOjW,QACrBiW,EAAOkN,QAAQqC,QAAQnoB,UAAY,GACnC,IAAI66B,EAAU,WACiB,KAAvBl1C,EAAMxG,MAAMshB,SACZ2Q,EAASpR,UAAYra,EAAMxG,OAE/BiyB,EAASlQ,aAAa,OAAQi5B,EAAOh7C,OACrCiyB,EAASlQ,aAAa,QAAS45B,EAAO37C,QAE1CiyB,EAAS/U,iBAAiB,iBAAiBvgB,SAAQ,SAAU2jB,GACzDA,EAAKrD,gBAAgB,kBAEzB,IAAIs8B,EAAYp9B,SAASG,cAAc,QACvCi9B,EAAUx3B,aAAa,aAAcjF,OAAOkK,WAAWi0B,gBACvD1B,EAAUz5B,UAAY,yCACtB,IAAItZ,EAAQ2V,SAASG,cAAc,SACnCi9B,EAAUpb,YAAY33B,GACtBA,EAAMsZ,UAAY,eAClBtZ,EAAMub,aAAa,cAAejF,OAAOkK,WAAWi0B,gBACpDz0C,EAAMwW,MAAM4b,MAAQ,QACpBpyB,EAAMxG,MAAQiyB,EAASpR,WAAa,GACpCra,EAAMizC,QAAU,WACZiC,KAEJl1C,EAAMkzC,UAAY,SAAUl4B,GACpB20B,GAAmB1c,EAAQjY,IAG/B05B,GAAWzhB,EAAQxH,EAAUzQ,EAAOw5B,IAExC,IAAIG,EAAah/B,SAASG,cAAc,QACxC6+B,EAAWp5B,aAAa,aAAcjF,OAAOkK,WAAW40B,MACxDT,EAAWr7B,UAAY,yCACvB,IAAIk7B,EAAS7+B,SAASG,cAAc,SACpC6+B,EAAWhd,YAAY6c,GACvBA,EAAOl7B,UAAY,eACnBk7B,EAAOj5B,aAAa,cAAejF,OAAOkK,WAAW40B,MACrDZ,EAAOh7C,MAAQiyB,EAASzV,aAAa,SAAW,GAChDw+B,EAAOvB,QAAU,WACbiC,KAEJV,EAAOtB,UAAY,SAAUl4B,GACrB20B,GAAmB1c,EAAQjY,IAG/B05B,GAAWzhB,EAAQxH,EAAUzQ,EAAOm6B,IAExC,IAAIhC,EAAax9B,SAASG,cAAc,QACxCq9B,EAAW53B,aAAa,aAAcjF,OAAOkK,WAAW60B,aACxDlC,EAAW75B,UAAY,yCACvB,IAAI67B,EAASx/B,SAASG,cAAc,SACpCq9B,EAAWxb,YAAYwd,GACvBA,EAAO77B,UAAY,eACnB67B,EAAO55B,aAAa,cAAejF,OAAOkK,WAAW60B,aACrDF,EAAO3+B,MAAM4b,MAAQ,OACrB+iB,EAAO37C,MAAQiyB,EAASzV,aAAa,UAAY,GACjDm/B,EAAOlC,QAAU,WACbiC,KAEJC,EAAOjC,UAAY,SAAUl4B,GACrB20B,GAAmB1c,EAAQjY,IAG/B05B,GAAWzhB,EAAQxH,EAAUzQ,EAAOhb,IAExCiwC,GAASxkB,EAAUwH,GACnBA,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAau5B,GAC1D9f,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAam7B,GAC1D1hB,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAa25B,GAC1DjD,GAAmBjd,EAAQxH,IAE3B6pB,GAAkB,SAAUt6B,EAAOiY,GACnC,IAAItc,EAAaqE,EAAMlgB,OACvBm4B,EAAOkN,QAAQqC,QAAQnoB,UAAY,GACnC,IAAIk7B,EAAY,WACZ5+B,EAAW4E,aAAa,MAAOm0B,EAAal2C,OAC5Cmd,EAAW4E,aAAa,MAAOi6B,EAAIh8C,OACnCmd,EAAW4E,aAAa,QAAS7e,EAAMlD,QAEvCu5C,EAAYp9B,SAASG,cAAc,QACvCi9B,EAAUx3B,aAAa,aAAcjF,OAAOkK,WAAWi1B,UACvD1C,EAAUz5B,UAAY,yCACtB,IAAIo2B,EAAe/5B,SAASG,cAAc,SAC1Ci9B,EAAUpb,YAAY+X,GACtBA,EAAap2B,UAAY,eACzBo2B,EAAan0B,aAAa,cAAejF,OAAOkK,WAAWi1B,UAC3D/F,EAAal2C,MAAQmd,EAAWX,aAAa,QAAU,GACvD05B,EAAauD,QAAU,WACnBsC,KAEJ7F,EAAawD,UAAY,SAAUwC,GAC/B/F,GAAmB1c,EAAQyiB,IAE/B,IAAIC,EAAUhgC,SAASG,cAAc,QACrC6/B,EAAQp6B,aAAa,aAAcjF,OAAOkK,WAAWo1B,eACrDD,EAAQr8B,UAAY,yCACpB,IAAIk8B,EAAM7/B,SAASG,cAAc,SACjC6/B,EAAQhe,YAAY6d,GACpBA,EAAIl8B,UAAY,eAChBk8B,EAAIj6B,aAAa,cAAejF,OAAOkK,WAAWo1B,eAClDJ,EAAIh/B,MAAM4b,MAAQ,OAClBojB,EAAIh8C,MAAQmd,EAAWX,aAAa,QAAU,GAC9Cw/B,EAAIvC,QAAU,WACVsC,KAEJC,EAAItC,UAAY,SAAUwC,GACtB/F,GAAmB1c,EAAQyiB,IAE/B,IAAIG,EAAYlgC,SAASG,cAAc,QACvC+/B,EAAUt6B,aAAa,aAAcjF,OAAOkK,WAAW9jB,OACvDm5C,EAAUv8B,UAAY,yCACtB,IAAI5c,EAAQiZ,SAASG,cAAc,SACnC+/B,EAAUle,YAAYj7B,GACtBA,EAAM4c,UAAY,eAClB5c,EAAM6e,aAAa,cAAejF,OAAOkK,WAAW9jB,OACpDA,EAAMlD,MAAQmd,EAAWX,aAAa,UAAY,GAClDtZ,EAAMu2C,QAAU,WACZsC,KAEJ74C,EAAMw2C,UAAY,SAAUwC,GACxB/F,GAAmB1c,EAAQyiB,IAE/BzF,GAASt5B,EAAYsc,GACrBA,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAau5B,GAC1D9f,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAam8B,GAC1D1iB,EAAOkN,QAAQqC,QAAQhpB,sBAAsB,YAAaq8B,GAC1D3F,GAAmBjd,EAAQtc,IAM3Bm/B,GAAmB,SAAU7iB,GACF,YAAvBA,EAAOM,YACPwc,GAAwB9c,GAEI,OAAvBA,EAAOM,aACZsZ,GAAmB5Z,IAOvB8iB,GAAgB,SAAU9iB,EAAQ+iB,EAAIh5B,QACtB,IAAZA,IAAsBA,EAAU,CAChC0oB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjB,IAAItI,EAAgBrK,EAAOkN,QAAQzqB,QACnC4nB,EAAcjjB,UAAY4Y,EAAO5U,KAAK43B,aAAaD,GACnD1Y,EAAc5mB,iBAAiB,6CAA6CvgB,SAAQ,SAAU2jB,GAC1FqpB,EAAkBrpB,EAAMmZ,GACxBnZ,EAAKykB,uBAAuBhjB,aAAa,QAAS,mBAEtDiyB,GAAiBva,EAAQjW,IAazBk5B,GAAY,SAAUxa,EAAOzI,EAAQkjB,GACrC,IAAIzgC,EAAUgmB,EAAME,eAAe3Y,cAC/BmzB,GAAO,EACPC,EAAc,GACdC,EAAiB,GACjBC,EAAYpI,GAAazS,GACzB8a,EAAiBD,EAAUjI,WAC3BmI,EAAgBF,EAAUhI,UAC9B,MAAO74B,IAAY0gC,EAAM,CACrB,IAAI1tB,EAAUhT,EAAQgT,QAUtB,GATgB,WAAZA,IACAA,EAAU,KAEE,MAAZA,IACAA,EAAU,MAEE,MAAZA,IACAA,EAAU,UAEE,MAAZA,GAA+B,WAAZA,GAAoC,OAAZA,EAAkB,CAC7D,IAAImW,EAAa,GACbuP,EAAe,GACfC,EAAW,GAC0C,MAArD34B,EAAQuN,cAAcjN,aAAa,gBACnCo4B,EAAeJ,GAAgBt4B,GAC/B24B,EAAWN,GAAYr4B,KAEvB8gC,GAAkBpI,KAClBvP,EAAauP,EAAe,IAAM1lB,EAAU,IAAM8tB,EAAiB,KAAO9tB,EAAU,IACpF8tB,EAAiB3X,IAEA,SAAhBsX,GAAsC,WAAZztB,GACV,WAAhBytB,GAAwC,OAAZztB,GACZ,kBAAhBytB,GAA+C,MAAZztB,KAEpCmW,GAAc,GAAKwX,EAAc3+B,EAA8B6E,EAAEwF,KAAO,QAAUu0B,EAClFF,GAAO,IAEPK,GAAiBpI,KACjBoI,EAAgB,IAAM/tB,EAAU,IAAM+tB,EAAgB,KAAO/tB,EAAU,IAAM2lB,EAC7ExP,GAAc4X,GAEuC,MAArD/gC,EAAQuN,cAAcjN,aAAa,eACnCN,EAAUA,EAAQuN,cAClBvN,EAAQ2E,UAAYwkB,IAGpBnpB,EAAQiR,UAAYkY,EACpBnpB,EAAUA,EAAQuN,eAEtBozB,EAAc,IAAM3tB,EAAU,IAAM2tB,EACpCC,EAAiB,KAAO5tB,EAAU,IAAM4tB,OAGxCF,GAAO,GAGf,EAAGt9B,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,IAE5Dgb,GAAe,SAAUzjB,EAAQ0P,EAAW3nB,GAC5C,KAAIiY,EAAOkN,QAAQ8G,eACZjsB,aAAiB27B,aADxB,CAKA,IAAIC,GAAe,EACfC,GAAY,EACZ5jB,EAAOkN,QAAQzqB,QAAQU,cAAc,QACrC6c,EAAOkN,QAAQzqB,QAAQU,cAAc,OAAO6O,SAEhD,IAAIyW,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7CkjB,EAAcxT,EAAU3sB,aAAa,aAEzC,GAAI2sB,EAAU1qB,UAAUiL,SAAS,wBAI7B,GAHoB,WAAhBizB,IACAA,EAAc,iBAEE,UAAhBA,EAAyB,CACzB,IAAIjJ,GAAe,EAAGr1B,EAAqCqJ,IAAIwa,EAAME,eAAgB,cAChFsR,IACDA,EAAexR,EAAME,eAAea,WAAWf,EAAMc,cAErD0Q,IACA0J,GAAe,EACfjU,EAAU1qB,UAAUgN,OAAO,wBAC3ByW,EAAMiD,WAAWhpB,SAASG,cAAc,QACxCo3B,EAAavmB,UAA8C,KAAlCumB,EAAa7yB,UAAUS,OAC5C,qBAAyBoyB,EAAa7yB,UAAY,OAAS6yB,EAAa7yB,WAC5E,EAAGvB,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,SAG/D,GAAoB,gBAAhBya,EAA+B,CACpC,IAAIW,GAAoB,EAAGj/B,EAAqCqJ,IAAIwa,EAAME,eAAgB,QACrFkb,IACDA,EAAoBpb,EAAME,eAAea,WAAWf,EAAMc,cAE1Dsa,IACAA,EAAkBnwB,UAAYmwB,EAAkBz8B,UAAUtmB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,IAAM,SAC9G,EAAGjJ,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,QAG3C,SAAhBya,EACAza,EAAMqL,WAIPrL,EAAMgB,WAAWhB,EAAME,eAAe3Y,eACtCtN,SAASspB,YAAY,UAAU,EAAO,KAJtCtpB,SAASspB,YAAY,UAAU,EAAO,IAOrB,UAAhBkX,GAA2C,SAAhBA,GAA0C,iBAAhBA,GAC1DY,GAAW9jB,EAAQyI,EAAOya,IAC1B,EAAGr9B,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,GAC5Dkb,GAAe,EACfjU,EAAU1qB,UAAUgN,OAAO,0BAI3B2xB,GAAe,EACfjU,EAAU1qB,UAAUgN,OAAO,wBACF,KAArByW,EAAMrkC,WACN6+C,GAAUxa,EAAOzI,EAAQkjB,GAGzBxgC,SAASspB,YAAYkX,GAAa,EAAO,SAIhD,CAEgD,IAA7CljB,EAAOkN,QAAQzqB,QAAQ+mB,WAAW5nC,SAClCo+B,EAAOkN,QAAQzqB,QAAQ2E,UAAY,+BACnC,EAAGvB,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,IAEhE,IAAIhB,GAAe,EAAG7iB,EAAgCsnB,IAAIzD,EAAME,gBAChE,GAAoB,UAAhBua,GAIA,GAHKzb,IACDA,EAAegB,EAAME,eAAea,WAAWf,EAAMc,cAErD9B,EAAc,CACdkc,GAAe,EACfjU,EAAU1qB,UAAUC,IAAI,wBACxBwjB,EAAMiD,WAAWhpB,SAASG,cAAc,QACxC,IAAIw3B,GAAY,EAAGz1B,EAAqCqJ,IAAIwa,EAAME,eAAgB,MAE9E0R,GAAa5S,EAAaxX,SAASoqB,GACnCA,EAAUjzB,UAAY,8BAAkCizB,EAAUjzB,UAAY,gBAG9EqgB,EAAa/T,UAAY,8BAAkC+T,EAAa/T,UAAY,iBAExF,EAAG7N,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,SAG/D,GAAoB,UAAhBya,GAA2C,SAAhBA,GAA0C,iBAAhBA,EAC1DY,GAAW9jB,EAAQyI,EAAOya,GAAa,IACvC,EAAGr9B,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,GAC5Dkb,GAAe,EACflV,EAAqBzO,EAAOoB,QAAQgO,SAAU,CAAC,QAAS,OAAQ,iBAChEM,EAAU1qB,UAAUC,IAAI,6BAEvB,GAAoB,gBAAhBi+B,EAA+B,CACpC,GAAyB,KAArBza,EAAMrkC,WAAmB,CACzB,IAAI+yB,EAAOzU,SAASG,cAAc,QAClCsU,EAAKzG,YAAcjM,EAA8B6E,EAAEwF,KACnD2Z,EAAMiD,WAAWvU,GACjBsR,EAAMM,SAAS5R,EAAK8d,WAAY,GAChCxM,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,QAEvC,GAAsC,IAAlCA,EAAME,eAAerB,SAAgB,CACtCnQ,EAAOzU,SAASG,cAAc,QAClC4lB,EAAMsb,iBAAiB5sB,GACvBsR,EAAMiD,WAAWvU,IACjB,EAAGtR,EAAiC6B,IAAI+gB,GAE5CiH,EAAU1qB,UAAUC,IAAI,6BAEvB,GAAoB,SAAhBi+B,EAAwB,CACzB/rB,EAAOzU,SAASG,cAAc,OAClCsU,EAAK9Q,UAAY,wBACjB8Q,EAAK7O,aAAa,YAAa,cAC/B6O,EAAK7O,aAAa,aAAc,KAChC6O,EAAK7O,aAAa,cAAe,OACR,KAArBmgB,EAAMrkC,WACN+yB,EAAK/P,UAAY,mCAGjB+P,EAAK/P,UAAY,cAAgBqhB,EAAMrkC,WAAa,qBACpDqkC,EAAMub,kBAEVvb,EAAMiD,WAAWvU,GACbsQ,IACAA,EAAa/T,UAAYsM,EAAO5U,KAAKqV,cAAcgH,EAAa/T,aAEpE,EAAG7N,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,GAC5DzI,EAAOkN,QAAQzqB,QAAQgB,iBAAiB,6CAA6CvgB,SAAQ,SAAU2jB,GACnGqpB,EAAkBrpB,EAAMmZ,MAE5B0P,EAAU1qB,UAAUC,IAAI,8BAEvB,GAAoB,SAAhBi+B,EAAwB,CAC7B,GAAyB,KAArBza,EAAMrkC,WAAmB,CACzB,IAAIo0B,EAAW9V,SAASG,cAAc,KACtC2V,EAAS1H,UAAYrM,EAA8B6E,EAAEwF,KACrD2Z,EAAMiD,WAAWlT,GACjBiQ,EAAMM,SAASvQ,EAASyc,WAAY,GACpCxM,EAAMO,UAAS,GACfmY,GAAYnhB,EAAQxH,GACpB,IAAIyrB,EAAmBjkB,EAAOkN,QAAQqC,QAAQpsB,cAAc,SAC5D8gC,EAAiB19C,MAAQ,GACzB09C,EAAiBrb,QACjBgb,GAAY,MAEX,CACGzsB,EAAOzU,SAASG,cAAc,KAClCsU,EAAK7O,aAAa,OAAQ,IAC1B6O,EAAK/P,UAAYqhB,EAAMrkC,WACvBqkC,EAAMsb,iBAAiB5sB,GACvBsR,EAAMiD,WAAWvU,IACjB,EAAGtR,EAAiC6B,IAAI+gB,GACxC0Y,GAAYnhB,EAAQ7I,GACpB,IAAI+sB,EAAoBlkB,EAAOkN,QAAQqC,QAAQ9rB,iBAAiB,SAChEygC,EAAkB,GAAG39C,MAAQ4wB,EAAKrG,UAClCozB,EAAkB,GAAGtb,QAEzB+a,GAAe,EACfjU,EAAU1qB,UAAUC,IAAI,6BAEvB,GAAoB,UAAhBi+B,EAAyB,CAC9B,IAAIiB,EAAc,kMAClB,GAAgC,KAA5B1b,EAAMrkC,WAAWyjB,OACb4f,GAAoG,KAApFA,EAAargB,UAAUS,OAAO/mB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,IAC5F2Y,EAAa/T,UAAYywB,EAGzBzhC,SAASspB,YAAY,cAAc,EAAOmY,GAE9C1b,EAAMgB,WAAWzJ,EAAOkN,QAAQzqB,QAAQU,cAAc,OAAOqoB,iBAC7DxL,EAAOkN,QAAQzqB,QAAQU,cAAc,OAAO6O,UAC5C,EAAGnM,EAAiC6B,IAAI+gB,OAEvC,CACD0b,EAAc,oCACd,IAAIC,EAAY3b,EAAMrkC,WAAW4Y,MAAM,MACnCqnC,EAAcD,EAAU,GAAGpnC,MAAM,KAAKpb,OAASwiD,EAAU,GAAGpnC,MAAM,MAAMpb,OAAS,IAAM,KAC3FwiD,EAAUlhD,SAAQ,SAAUu6C,EAAMx2C,GAChB,IAAVA,GACAw2C,EAAKzgC,MAAMqnC,GAAanhD,SAAQ,SAAUohD,EAAQC,GAE1CJ,GADa,IAAbI,EACe,OAASD,EAAS,aAGlB,OAASA,EAAS,WAGzCH,GAAe,kBAIXA,GADU,IAAVl9C,EACe,cAGA,OAEnBw2C,EAAKzgC,MAAMqnC,GAAanhD,SAAQ,SAAUshD,GACtCL,GAAe,OAASK,EAAO,WAEnCL,GAAe,YAGvBA,GAAe,mBACfzhC,SAASspB,YAAY,cAAc,EAAOmY,IAC1C,EAAGt+B,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,GAEhEkb,GAAe,EACfjU,EAAU1qB,UAAUC,IAAI,8BAEvB,GAAoB,SAAhBi+B,GACL,GAAIzb,EAAc,CACd,IAAIgd,EAAS,mDACyB,KAAlChd,EAAargB,UAAUS,OACvB4f,EAAa/T,UAAY+wB,EAGzBhd,EAAa5S,mBAAmB,WAAY4vB,IAEhD,EAAG5+B,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,SAUhE,GALAkb,GAAe,EACfjU,EAAU1qB,UAAUC,IAAI,wBACJ,WAAhBi+B,IACAA,EAAc,iBAEO,KAArBza,EAAMrkC,YAAsC,SAAhB8+C,GAA0C,WAAhBA,GAA4C,kBAAhBA,EAoBlFxgC,SAASspB,YAAYkX,GAAa,EAAO,QApB2E,CACpH,IAAIztB,EAAU,SACM,WAAhBytB,EACAztB,EAAU,KAEW,kBAAhBytB,IACLztB,EAAU,KAEV0B,EAAOzU,SAASG,cAAc4S,GAClC0B,EAAKzG,YAAcjM,EAA8B6E,EAAEwF,KACnD2Z,EAAMiD,WAAWvU,GACbA,EAAKqU,iBAAmBrU,EAAKqU,gBAAgB9a,cAAgBjM,EAA8B6E,EAAEwF,OAE7FqI,EAAKqU,gBAAgB9a,YAAc,IAEvC+X,EAAMM,SAAS5R,EAAK8d,WAAY,GAChCxM,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,IAOhDkb,GACA7G,GAAwB9c,GAExB4jB,GACArJ,GAAiBva,KAWrB0kB,GAA0B,WAC1B,SAASA,EAAS1kB,EAAQ2kB,GACtB,IAAI33B,EACAugB,EAAQ1pC,KACZA,KAAK4e,QAAUC,SAASG,cAAc,OAClC8hC,EAASt+B,YACR2G,EAAKnpB,KAAK4e,QAAQuC,WAAWC,IAAIlhB,MAAMipB,EAAI23B,EAASt+B,UAAUrJ,MAAM,MAEzE,IAAImpB,EAASwe,EAASxe,OAAS,MAAO,EAAGqI,EAAmCqQ,IAAI8F,EAASxe,QAAU,IAAM,GAClF,IAAnBwe,EAAShV,QACTxJ,EAASwe,EAASxe,OAAS,SAAU,EAAGqI,EAAmCqQ,IAAI8F,EAASxe,QAAU,OAAS,IAE/G,IAAIgS,EAAMwM,EAASxM,IAAMwM,EAASxM,IAAMhS,EAAS,GAAK9iB,OAAOkK,WAAWo3B,EAASz5C,MAAQi7B,EACrF1Q,EAA4B,WAAlBkvB,EAASz5C,KAAoB,MAAQ,SACnD,GAAuB,IAAnBy5C,EAAShV,MACT9rC,KAAK4e,QAAQ2E,UAAY,IAAMqO,EAAU,eAAkBkvB,EAASz5C,KAAO,KAAQitC,EAAM,KAAO1iB,EAAU,QAEzG,CACD5xB,KAAK4e,QAAQuC,UAAUC,IAAI,wBAC3B,IAAI2/B,EAAcliC,SAASG,cAAc4S,GACzCmvB,EAAYt8B,aAAa,YAAaq8B,EAASz5C,MAC/C05C,EAAYv+B,UAAY,wCAA0Cs+B,EAASE,YAC3ED,EAAYt8B,aAAa,aAAc6vB,GACvCyM,EAAYx9B,UAAYu9B,EAAS73C,KACjCjJ,KAAK4e,QAAQiiB,YAAYkgB,GAExBD,EAAS5lC,QAGdlb,KAAK4e,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC1FA,EAAM8N,iBACF0X,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAASxL,EAA6C6E,EAAE2F,uBAG3E,YAAvB+Q,EAAOM,YACPmjB,GAAazjB,EAAQuN,EAAM9qB,QAAQ8c,SAAS,GAAIxX,GAEpB,OAAvBiY,EAAOM,YACZwkB,GAAuB9kB,EAAQuN,EAAM9qB,QAAQ8c,SAAS,GAAIolB,EAAS5lC,QAAU,GAAI4lC,EAAS3lC,QAAU,IAGpG+lC,GAAe/kB,EAAQuN,EAAM9qB,QAAQ8c,SAAS,GAAIolB,EAAS5lC,QAAU,GAAI4lC,EAAS3lC,QAAU,QAIxG,OAAO0lC,EA7CkB,GAkDzBM,GAAkD,WAClD,IAAIC,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAVjC,GA0BlDhN,GAAc,SAAUrY,EAAQ1zB,EAAMyb,GACtC,IAAIw9B,EASJ,GARqB,kBAAVx9B,GACPknB,EAAUjP,EAAQ,CAAC,aAAc,SACjCjY,EAAM8N,iBACN0vB,EAAexY,EAAY/M,IAG3BulB,EAAex9B,EAEfiY,EAAOM,cAAgBh0B,GAAyB,kBAAVyb,EAA1C,CAeA,GAZIiY,EAAOwN,UACPxN,EAAOwN,SAASF,aAAatN,GAEG,SAAhCA,EAAOjW,QAAQjgB,QAAQ6gB,MAA4B,OAATre,EAC1C0zB,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,QAAU,QAGvCkY,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,QAAU,OAE3C+mB,EAAc7O,EAAOoB,QAAQgO,SAAU3qB,EAAuC6E,EAAE4F,eAChFuf,EAAqBzO,EAAOoB,QAAQgO,SAAU3qB,EAAuC6E,EAAE4F,eACvF4f,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,UAAW,WACvC,OAAT9iC,EACAyiC,EAAY/O,EAAOoB,QAAQgO,SAAU,CAAC,SACtCJ,EAAYhP,EAAOoB,QAAQgO,SAAU,CAAC,UAAW,SAAU,UAAW,gBAAiB,iBACvFpP,EAAOgN,GAAGvqB,QAAQc,MAAMuE,QAAU,OAClCkY,EAAOkN,QAAQzqB,QAAQuN,cAAczM,MAAMuE,QAAU,OACrDkY,EAAOoN,GAAG3qB,QAAQuN,cAAczM,MAAMuE,QAAU,QAChDkY,EAAO5U,KAAKo6B,aAAY,GACxBxlB,EAAO5U,KAAKq6B,kBAAiB,GAC7BzlB,EAAO5U,KAAKs6B,aAAY,GACxB1lB,EAAOM,YAAc,KACrBN,EAAOoN,GAAG3qB,QAAQ2E,UAAY4Y,EAAO5U,KAAKu6B,eAAeJ,GACzD/S,GAA2BxS,EAAQ,CAC/ByS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjBiG,EAAW5Y,GACXA,EAAOoN,GAAG3qB,QAAQgB,iBAAiB,wCAAwCvgB,SAAQ,SAAU2jB,GACzFqpB,EAAkBrpB,EAAMmZ,MAE5BA,EAAOoN,GAAG3qB,QAAQgB,iBAAiB,eAAevgB,SAAQ,SAAU2jB,IAChE,EAAG1C,EAA2BwJ,GAAG9G,EAAM,CACnCoD,IAAK+V,EAAOjW,QAAQE,IACpBQ,KAAMuV,EAAOjW,QAAQjgB,QAAQ2gB,eAIpC,GAAa,YAATne,EACLyiC,EAAY/O,EAAOoB,QAAQgO,SAAU,CAAC,SACtCJ,EAAYhP,EAAOoB,QAAQgO,SAAU,CAAC,UAAW,SAAU,UAAW,gBAAiB,iBACvFpP,EAAOgN,GAAGvqB,QAAQc,MAAMuE,QAAU,OAClCkY,EAAOkN,QAAQzqB,QAAQuN,cAAczM,MAAMuE,QAAU,QACrDkY,EAAOoN,GAAG3qB,QAAQuN,cAAczM,MAAMuE,QAAU,OAChDkY,EAAO5U,KAAKo6B,aAAY,GACxBxlB,EAAO5U,KAAKq6B,kBAAiB,GAC7BzlB,EAAO5U,KAAKs6B,aAAY,GACxB1lB,EAAOM,YAAc,UACrBsY,EAAW5Y,GACX8iB,GAAc9iB,EAAQulB,EAAc,CAChC9S,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjB3S,EAAOkN,QAAQzqB,QAAQgB,iBAAiB,eAAevgB,SAAQ,SAAU2jB,IACrE,EAAG1C,EAA2BwJ,GAAG9G,EAAM,CACnCoD,IAAK+V,EAAOjW,QAAQE,IACpBQ,KAAMuV,EAAOjW,QAAQjgB,QAAQ2gB,UAGrCuV,EAAOkN,QAAQqC,QAAQhsB,MAAMuE,QAAU,YAEtC,GAAa,OAATxb,EAAe,CACpB0iC,EAAYhP,EAAOoB,QAAQgO,SAAU,CAAC,SACtCL,EAAY/O,EAAOoB,QAAQgO,SAAU,CAAC,UAAW,SAAU,UAAW,gBAAiB,iBACvFpP,EAAOkN,QAAQzqB,QAAQuN,cAAczM,MAAMuE,QAAU,OACrDkY,EAAOoN,GAAG3qB,QAAQuN,cAAczM,MAAMuE,QAAU,QACZ,SAAhCkY,EAAOjW,QAAQjgB,QAAQ6gB,MAGc,WAAhCqV,EAAOjW,QAAQjgB,QAAQ6gB,QAF5BqV,EAAOgN,GAAGvqB,QAAQc,MAAMuE,QAAU,SAKtCkY,EAAO5U,KAAKo6B,aAAY,GACxBxlB,EAAO5U,KAAKq6B,kBAAiB,GAC7BzlB,EAAO5U,KAAKs6B,aAAY,GACxB1lB,EAAOM,YAAc,KACrB,IAAIslB,EAAS/O,GAAuB0O,EAAcvlB,GACnC,+BAAX4lB,IAEAA,EAAS,IAEb5lB,EAAOgN,GAAGvqB,QAAQ2E,UAAYw+B,EAC9BvP,GAAmBrW,EAAQ,CACvByS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjBiG,EAAW5Y,GAEfA,EAAOkU,KAAK2R,UAAU7lB,GACD,kBAAVjY,IAEPiY,EAAOA,EAAOM,aAAa7d,QAAQmmB,QACnCia,GAAiB7iB,IAErBqQ,EAAUrQ,GACViZ,EAAsBjZ,GAClBA,EAAOoB,QAAQgO,SAAS,eACxBpP,EAAOoB,QAAQgO,SAAS,aAAa3rB,iBAAiB,UAAUvgB,SAAQ,SAAU2jB,GAC9EA,EAAK7B,UAAUgN,OAAO,2BAE1BgO,EAAOoB,QAAQgO,SAAS,aAAajsB,cAAc,qBAAwB6c,EAAOM,YAAc,MAAOtb,UAAUC,IAAI,yBAEzH+a,EAAO5yB,QAAQ04C,OAAO9lB,EAA+B,OAAvBA,EAAOM,aAAwBN,EAAOjW,QAAQ3c,QAAQH,UAEpF84C,GAA0B,SAAUC,GAEpC,SAASD,EAAS/lB,EAAQ2kB,GACtB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAC/C4rC,EAAe/sB,SAASG,cAAc,OAK1C,OAJA4sB,EAAappB,UAAY,eAAoC,IAAnBs+B,EAAShV,MAAc,GAAK,wBACtEF,EAAaroB,UAAY,+BAAmC/D,OAAOkK,WAAW2f,QAAU,SAAU,EAAGsB,EAAmCqQ,IAAI,OAAS,sCAA0Cx7B,OAAOkK,WAAW04B,iBAAmB,SAAU,EAAGzX,EAAmCqQ,IAAI,OAAS,sCAA0Cx7B,OAAOkK,WAAW24B,UAAY,SAAU,EAAG1X,EAAmCqQ,IAAI,OAAS,aACtatR,EAAM9qB,QAAQiiB,YAAY+K,GAC1BlC,EAAM4Y,WAAWnmB,EAAQyP,EAAckV,GAChCpX,EAwBX,OAhCAyX,GAAUe,EAAUC,GAUpBD,EAASviD,UAAU2iD,WAAa,SAAUnmB,EAAQyP,EAAckV,GAC5D,IAAIjV,EAAY7rC,KAAK4e,QAAQ8c,SAAS,GACtCiQ,EAAcxP,EAAQyP,EAAcC,EAAWiV,EAAShV,OACxDF,EAAalQ,SAAS1Y,KAAK,GAAG7D,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAE/FswB,GAAYrY,EAAQ,UAAWjY,GAC/BA,EAAM8N,iBACN9N,EAAM6N,qBAEV6Z,EAAalQ,SAAS1Y,KAAK,GAAG7D,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAE/FswB,GAAYrY,EAAQ,KAAMjY,GAC1BA,EAAM8N,iBACN9N,EAAM6N,qBAEV6Z,EAAalQ,SAAS1Y,KAAK,GAAG7D,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAE/FswB,GAAYrY,EAAQ,KAAMjY,GAC1BA,EAAM8N,iBACN9N,EAAM6N,sBAGPmwB,EAjCkB,CAkC3BrB,IAKE0B,GAAgB,SAAUld,EAAQT,GAClC,OAAI,EAAG5iB,EAA8Bk0B,IAAI7Q,EAAQT,GACtC7gB,eAAexjB,WAEnB,IAsBPiiD,GAAa,SAAUrmB,EAAQqK,GAC/BA,EAAcrnB,iBAAiB,SAAS,WAChCgd,EAAOjW,QAAQ6e,OACf5I,EAAOjW,QAAQ6e,MAAMmE,EAAY/M,IAErCiP,EAAUjP,EAAQ,CAAC,aAAc,aAGrCsmB,GAAgB,SAAUtmB,EAAQqK,GAClCA,EAAcrnB,iBAAiB,YAAY,SAAU+E,GACpB,QAAzBA,EAAMlgB,OAAO4tB,UACb,EAAGnH,EAAgCI,GAAG3G,EAAMlgB,OAAQm4B,EAAOjW,QAAQhE,KAAMia,EAAOjW,QAAQc,WAIhG07B,GAAY,SAAUvmB,EAAQqK,GAC9BA,EAAcrnB,iBAAiB,QAAQ,SAAU+E,GAC7C,GAA2B,OAAvBiY,EAAOM,YAAsB,CAC7B,IAAIkmB,EAAgBxmB,EAAOoN,GAAG3qB,QAAQU,cAAc,4BAChDqjC,GACAA,EAAcxhC,UAAUgN,OAAO,+BAGP,YAAvBgO,EAAOM,aACXN,EAAOkN,QAAQuZ,cAAcx2B,SAASlI,EAAM2+B,gBAC7C1mB,EAAOkN,QAAQyZ,cAEnB3mB,EAAOA,EAAOM,aAAamI,OAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GACpEA,EAAOjW,QAAQmyB,MACflc,EAAOjW,QAAQmyB,KAAKnP,EAAY/M,QAIxC4mB,GAAY,SAAU5mB,EAAQqK,GAC9BA,EAAcrnB,iBAAiB,aAAa,SAAU+E,GAElDA,EAAM8+B,aAAa3wB,QAAQzR,EAAqC6E,EAAEyF,YAAatK,EAAqC6E,EAAEyF,gBAE1Hsb,EAAcrnB,iBAAiB,QAAQ,SAAU+E,GACzCA,EAAM8+B,aAAaC,QAAQriC,EAAqC6E,EAAEyF,aAElE0hB,GAAgBzQ,IAEXjY,EAAM8+B,aAAaE,MAAM55B,SAAS,UAAYpF,EAAM8+B,aAAaE,MAAM55B,SAAS,eAErF65B,GAAMhnB,EAAQjY,EAAO,CACjBk/B,UAAW,SAAUn0B,GACjBpQ,SAASspB,YAAY,cAAc,EAAOlZ,UAM1Do0B,GAAY,SAAUlnB,EAAQqK,EAAelY,GAC7CkY,EAAcrnB,iBAAiB,QAAQ,SAAU+E,GAAS,OAAOoK,EAAKpK,EAAOiY,OAE7EmnB,GAAW,SAAUnnB,EAAQqK,EAAelY,GAC5CkY,EAAcrnB,iBAAiB,OAAO,SAAU+E,GAC5CoK,EAAKpK,EAAOiY,GAERA,EAAOjW,QAAQq9B,QAAQn6C,QAAiC,YAAvB+yB,EAAOM,aACxCN,EAAOkN,QAAQma,YAAYrnB,GAE/Btd,SAASspB,YAAY,cAGzB8K,GAAe,SAAU9W,GAIzB,GAH2B,YAAvBA,EAAOM,aAA6BN,EAAOjW,QAAQq9B,QAAQn6C,QAC3D+yB,EAAOjW,QAAQq9B,QAAQE,UAAUtnB,EAAOkN,QAAQma,YAAYrnB,GAAQ,IAEnEA,EAAOjW,QAAQmvB,eAApB,CAGA,IAAI7O,EAAgBrK,EAAOA,EAAOM,aAAa7d,QAC3C8kC,GAAY,EAAG1hC,EAAiC2hC,IAAInd,GAAejlB,IAClC,kBAA1B4a,EAAOjW,QAAQld,QAAwBmzB,EAAOvd,QAAQuC,UAAUiL,SAAS,uBAChF5M,OAAO+K,SAAS/K,OAAOgL,QAASk5B,EAAYvnB,EAAOvd,QAAQ6C,UAAY0a,EAAOoB,QAAQ3e,QAAQ4e,aAAehe,OAAOC,YAAc,EAAI,KAErG,kBAA1B0c,EAAOjW,QAAQld,QAAuBmzB,EAAOvd,QAAQuC,UAAUiL,SAAS,yBAC/Eoa,EAAc9kB,UAAYgiC,EAAYld,EAAc9kB,UAAY8kB,EAAc9G,aAAe,EAAI,MAGrGkkB,GAAc,SAAUznB,EAAQqK,GAChCA,EAAcrnB,iBAAiB,WAAW,SAAU+E,GAEhD,KAAKiY,EAAOjW,QAAQulB,KAAKoY,OAAO9lD,OAAS,GAAKo+B,EAAOoB,QAAQgO,SAASC,SAClErP,EAAOsP,KAAK8M,OAAOr0B,EAAOiY,GAD9B,CASA,GAJIA,EAAOjW,QAAQq9B,QAAQn6C,QAAiC,YAAvB+yB,EAAOM,cACzB,cAAdvY,EAAMrd,KAAuBkoC,EAAY,KAAM7qB,KAChDiY,EAAOkN,QAAQma,YAAYrnB,GAEJ,OAAvBA,EAAOM,aACP,GAAIyW,EAA8B/W,EAAQjY,GACtC,YAGH,GAA2B,YAAvBiY,EAAOM,aACZ,GAAI2b,GAAsCjc,EAAQjY,GAC9C,YAGH,GAA2B,OAAvBiY,EAAOM,aACRyT,EAAe/T,EAAQjY,GACvB,OAGR,GAAIiY,EAAOjW,QAAQ49B,WAAa/U,EAAY,SAAU7qB,GAGlD,OAFAiY,EAAOjW,QAAQ49B,UAAU5a,EAAY/M,SACrCjY,EAAM8N,iBAIV,GAAI+c,EAAY,KAAM7qB,KAAWiY,EAAOoB,QAAQgO,SAAS8E,KAGrD,OAFAlU,EAAOkU,KAAKA,KAAKlU,QACjBjY,EAAM8N,iBAIV,GAAI+c,EAAY,KAAM7qB,KAAWiY,EAAOoB,QAAQgO,SAASwY,KAGrD,OAFA5nB,EAAOkU,KAAK0T,KAAK5nB,QACjBjY,EAAM8N,iBAIV,GAAkB,WAAd9N,EAAMrd,IAQN,MAP0C,UAAtCs1B,EAAOsP,KAAK7sB,QAAQc,MAAMuE,QAC1BkY,EAAOsP,KAAK7sB,QAAQc,MAAMuE,QAAU,OAE/BkY,EAAOjW,QAAQ89B,MAAQ9/B,EAAMksB,aAClCjU,EAAOjW,QAAQ89B,IAAI9a,EAAY/M,SAEnCjY,EAAM8N,iBAIV,IAAI,EAAG2Y,EAA0BsE,IAAI/qB,IAAUA,EAAMgrB,SAAWhrB,EAAMirB,UAAY,eAAe5M,KAAKre,EAAM+K,MAAO,CAC/G,GAA2B,YAAvBkN,EAAOM,YAA2B,CAClC,IAAI7K,EAAU1N,EAAM+K,KAAKhyB,QAAQ,QAAS,MACtC,EAAG8jB,EAAqCqJ,IAAIrG,eAAeI,WAAW,GAAG2gB,eAAgBlT,GACzFomB,GAAc7b,GAGd4b,GAAW5b,EAAQvK,GAEvB8kB,GAAiBva,OAEW,OAAvBA,EAAOM,YACZwnB,GAAe9nB,EAAQ,IAAI+nB,OAAO3qC,SAAS2K,EAAM+K,KAAKhyB,QAAQ,QAAS,IAAK,KAAO,KAEvD,OAAvBk/B,EAAOM,aACZwV,GAAuB9V,EAAQ,IAAI+nB,OAAO3qC,SAAS2K,EAAM+K,KAAKhyB,QAAQ,QAAS,IAAK,KAAO,KAG/F,OADAinB,EAAM8N,kBACC,EAGX,IAAI,EAAG2Y,EAA0BsE,IAAI/qB,IAAUA,EAAMgrB,SAAWhrB,EAAMirB,UAAY,eAAe5M,KAAKre,EAAM+K,MAUxG,MATmB,WAAf/K,EAAM+K,KACNulB,GAAYrY,EAAQ,UAAWjY,GAEX,WAAfA,EAAM+K,KACXulB,GAAYrY,EAAQ,KAAMjY,GAEN,WAAfA,EAAM+K,MACXulB,GAAYrY,EAAQ,KAAMjY,IAEvB,EAGXiY,EAAOjW,QAAQqX,QAAQoa,MAAK,SAAUmJ,GAClC,IAAKA,EAASxe,QAAUwe,EAASvjB,QAAS,CACtC,GAAIujB,EAASvjB,QAAS,CAClB,IAAI4mB,EAAMrD,EAASvjB,QAAQoa,MAAK,SAAUyM,GACtC,QAAKA,EAAY9hB,SAGbyM,EAAYqV,EAAY9hB,OAAQpe,IAChCiY,EAAOoB,QAAQgO,SAAS6Y,EAAY/8C,MAAMq0B,SAAS,GAC9C2oB,cAAc,IAAIxE,aAAY,EAAGlV,EAAgCoB,QACtE7nB,EAAM8N,kBACC,QAJX,MAOJ,QAAOmyB,EAEX,OAAO,EAEX,GAAIpV,EAAY+R,EAASxe,OAAQpe,GAG7B,OAFAiY,EAAOoB,QAAQgO,SAASuV,EAASz5C,MAAMq0B,SAAS,GAAG2oB,cAAc,IAAIxE,aAAY,EAAGlV,EAAgCoB,QACpH7nB,EAAM8N,kBACC,UAKnBsyB,GAAc,SAAUnoB,EAAQqK,GAChCA,EAAcrnB,iBAAiB,eAAe,SAAU+E,GACpDsiB,EAAc+d,UAAY,WACtBhlB,YAAW,WACP,IAAIilB,EAAajC,GAAcpmB,EAAOA,EAAOM,aAAa7d,SACtD4lC,EAAWxgC,QACgB,YAAvBmY,EAAOM,aAA6BN,EAAOjW,QAAQq9B,QAAQn6C,UACtD,EAAG2X,EAAsC6sB,IAAI1pB,EAAMlgB,OAAQ,YAAa,qBACxE,EAAG+c,EAAsC6sB,IAAI1pB,EAAMlgB,OAAQ,YAAa,uBAIzEm4B,EAAOkN,QAAQyZ,cAHf3mB,EAAOkN,QAAQob,eAMnBtoB,EAAOjW,QAAQqyB,QACfpc,EAAOjW,QAAQqyB,OAAOiM,IAIC,YAAvBroB,EAAOM,aAA6BN,EAAOjW,QAAQq9B,QAAQn6C,QAC3D+yB,EAAOkN,QAAQyZ,sBAiBnC4B,GAAe,SAAUvoB,EAAQvuB,GACjC,IAAIg3B,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GACjDyI,EAAMqP,kBACNrP,EAAMiD,WAAWhpB,SAASipB,eAAejL,KAAKiW,QAC9ClO,EAAMiD,WAAWhpB,SAASipB,eAAel6B,IACzC,IAAIg2B,GAAe,EAAG7iB,EAAsC6sB,IAAIhJ,EAAME,eAAgB,aAAc,KAC/FlB,IACDA,EAAezH,EAAOgN,GAAGvqB,SAE7B,IAAIzG,EAAO,uBACPgkB,EAAO5U,KAAKo9B,eAAe/gB,EAAa/W,aAAa5vB,QAAQ,mKAAoK,uLACjO,SACA2mC,EAAa1G,YAAYf,EAAOgN,GAAGvqB,SACnCglB,EAAargB,UAAYpL,EAGzByrB,EAAa/T,UAAY1X,GAE7B,EAAG6J,EAA6B0sB,IAAIvS,EAAOgN,GAAGvqB,QAASgmB,GACvDqO,GAAa9W,IAEbwW,GAAgB,SAAUiS,EAAUn8C,EAAMo8C,QACvB,IAAfA,IAAyBA,GAAa,GAC1C,IAAIC,EAAcF,EACW,IAAzBE,EAAYrhB,WACZqhB,EAAcA,EAAY34B,eAE9B,MAAO24B,EAAa,CAChB,GAAIA,EAAY5lC,aAAa,eAAiBzW,EAC1C,OAAOq8C,EAGPA,EADAD,EACcC,EAAYrd,uBAGZqd,EAAY7nB,mBAGlC,OAAO,GAEP+V,GAAyB,SAAU76B,EAAMgkB,GAMzC,OALAxxB,EAAI,kBAAmBwN,EAAM,WAAYgkB,EAAOjW,QAAQgoB,UACxD/1B,EAAO,uBACHgkB,EAAO5U,KAAKw9B,gBAAgB5sC,GAAMlb,QAAQ,mKAAoK,uLAC9M,SACJ0N,EAAI,kBAAmBwN,EAAM,SAAUgkB,EAAOjW,QAAQgoB,UAC/C/1B,GAEP67B,GAAyB,SAAU7pB,GACnC,IAAI66B,EAAW76B,EAAYjL,aAAa,aACpCi5B,EAAkBhuB,EAAYsd,uBAE9Bwd,EAAcD,GAAyB,SAAbA,GAAoC,UAAbA,GAAqC,mBAAbA,GAC5D,YAAbA,GAAuC,kCAAbA,GAA6D,mCAAbA,GAC1D,oBAAbA,GAA+C,4BAAbA,GAAuD,2BAAbA,EAC/E76B,EAAY0C,YAAc,GAC1Bq4B,GAAQ,EACK,YAAbF,IACAE,GAAQ,GAEZ,MAAO/M,IAAoB+M,EAAO,CAC9B,IAAIC,EAAehN,EAAgBj5B,aAAa,aAChD,GAAqB,cAAjBimC,GAAiD,sBAAjBA,GAAyD,gBAAjBA,GACvD,YAAjBA,EAA4B,CAC5B,IAAIC,EAAejN,EAAgBtrB,YACnC,GAAqB,cAAjBs4B,GACc,2BAAbH,GAAsD,oBAAbA,EAIzC,GAAiB,4BAAbA,GACL7M,EAAgBlb,mBAAmByK,WAAWvd,GAAc,CAE5D,IAAIk7B,EAAa1S,GAAcxoB,EAAa,0BACxCk7B,GAAcA,EAAW5d,yBACzB0Q,EAAkBkN,EAAW5d,uBAC7Bwd,EAAaG,EAAeH,QAIhCA,EAAaG,EAAeH,OAZ5BA,EAAaG,EAAanoD,QAAQ,MAAO,KAAOgoD,MAe9B,YAAjBE,IACLD,GAAQ,GAEZ/M,EAAkBA,EAAgB1Q,uBAEtC,OAAOwd,GAEPzS,GAAqB,SAAUrW,EAAQjW,QACvB,IAAZA,IAAsBA,EAAU,CAChC0oB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEb5oB,EAAQ2oB,YACR1S,EAAOsP,KAAKvmC,OAAOi3B,GAEvBA,EAAOl2B,QAAQf,OAAOi3B,GACtB,IAAIvuB,EAAOs7B,EAAY/M,GACa,oBAAzBA,EAAOjW,QAAQhd,OAAwBgd,EAAQ4oB,aACtD3S,EAAOjW,QAAQhd,MAAM0E,GAErBuuB,EAAOjW,QAAQ/c,QAAQC,QACvB+yB,EAAOhzB,QAAQjE,OAAOi3B,EAAQvuB,GAE9BuuB,EAAOjW,QAAQ1c,MAAMJ,SAAU,EAAGuhC,EAAsCgL,QACxE7T,aAAa8U,QAAQza,EAAOjW,QAAQ1c,MAAM6B,GAAIuC,GAC1CuuB,EAAOjW,QAAQ1c,MAAMH,OACrB8yB,EAAOjW,QAAQ1c,MAAMH,MAAMuE,IAG/BuuB,EAAOwN,UACPxN,EAAOwN,SAASF,aAAatN,GAEjC6Z,aAAa7Z,EAAOgN,GAAGmc,kBACvBnpB,EAAOgN,GAAGmc,iBAAmB9lC,OAAO+f,YAAW,WACvCrZ,EAAQ0oB,qBAAuBzS,EAAOgN,GAAGgH,eACzChU,EAAOkU,KAAKwG,eAAe1a,KAEhCA,EAAOjW,QAAQ4wB,YAElBmN,GAAiB,SAAU9nB,EAAQz5B,GACnC,IAAIkiC,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7C7R,GAAiB,EAAG4Z,EAA0CllC,GAAG4lC,EAAME,eAAgB,QACvFxa,GAAwD,KAAtCA,EAAeuC,YAAY7I,SAC7CthB,EAAQ,KAAOA,GAEnBkiC,EAAMO,UAAS,GACftmB,SAASspB,YAAY,cAAc,EAAOzlC,IAE1Cw+C,GAAiB,SAAU/kB,EAAQ0P,EAAW3wB,EAAQC,GACtD,IAAIypB,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7CkjB,EAAcxT,EAAU3sB,aAAa,aAEG,IAAxCid,EAAOgN,GAAGvqB,QAAQ+mB,WAAW5nC,SAC7Bo+B,EAAOgN,GAAGvqB,QAAQ2E,UAAY,2JAC9B,EAAGvB,EAA6B0sB,IAAIvS,EAAOgN,GAAGvqB,QAASgmB,IAE3D,IAAIhB,GAAe,EAAG7iB,EAAgCsnB,IAAIzD,EAAME,gBAC5D3a,GAAc,EAAG+Z,EAA0CllC,GAAG4lC,EAAME,eAAgB,QACxF,GAAKlB,EAAL,CAGA,GAAoB,SAAhByb,EAAwB,CACxB,IAAIlnC,OAAO,EAQX,OANIA,EADqB,KAArBysB,EAAMrkC,WACC,GAAK2a,EAAS2hB,KAAKiW,MAAQ33B,EAG3B,GAAKD,EAAS0pB,EAAMrkC,WAAa4a,EAAOle,QAAQ,IAAK4/B,KAAKiW,MAAQ,UAE7Ej0B,SAASspB,YAAY,cAAc,EAAOhwB,GAGzC,GAAoB,WAAhBknC,GAA4C,SAAhBA,GAA0C,WAAhBA,GAC3C,gBAAhBA,GAAiD,SAAhBA,GAA0C,UAAhBA,GAA2C,SAAhBA,EAAwB,CAC1GlnC,OAAO,EAeX,OAZIA,EADqB,KAArBysB,EAAMrkC,WACC,GAAK2a,EAAS2hB,KAAKiW,OAAyB,SAAhBuM,EAAyB,GAAKlkC,GAG1D,GAAKD,EAAS0pB,EAAMrkC,WAAas8B,KAAKiW,OAAyB,SAAhBuM,EAAyB,GAAKlkC,GAEpE,UAAhBkkC,GAA4C,SAAhBA,GAA0Bl1B,GAA2C,KAA5BA,EAAY0C,YACjF1U,EAAO,OAASA,EAEK,SAAhBknC,IACLlnC,EAAO,OAAS+C,EAAS,KAAO2hB,KAAKiW,YAEzCj0B,SAASspB,YAAY,cAAc,EAAOhwB,GAGzC,IAAoB,UAAhBknC,GAA2C,SAAhBA,GAA0C,iBAAhBA,GAC1C,UAAhBA,IACIl1B,EAAa,CACb,IAAIkkB,EAAS,KACO,UAAhBgR,EACAhR,EAAS,SAEY,iBAAhBgR,EACLhR,EAAS,MAEY,UAAhBgR,IACLhR,EAAS,MAEb,IAAIkX,EAAU5S,GAAcxoB,EAAa,WAQzC,OAPIo7B,EACAA,EAAQC,mBAAmB,WAAYnX,GAGvCzK,EAAa4hB,mBAAmB,aAAcnX,QAElDkE,EAAWpW,IAInB,EAAGna,EAA6B0sB,IAAIvS,EAAOgN,GAAGvqB,QAASgmB,GACvD4N,GAAmBrW,KAInBspB,GAAa,SAAUtpB,GACvB,OAAQA,EAAOM,aACX,IAAK,KACD,OAAON,EAAOoN,GAAG3qB,QACrB,IAAK,UACD,OAAOud,EAAOkN,QAAQzqB,QAC1B,IAAK,KACD,OAAOud,EAAOgN,GAAGvqB,UAKzB8mC,GAAa,SAAUvpB,EAAQwpB,GAC3BxpB,EAAOjW,QAAQmuB,OAAOqR,aACtBvpB,EAAOjW,QAAQmuB,OAAOuR,QAAUzpB,EAAOjW,QAAQmuB,OAAOqR,cAEtDvpB,EAAOjW,QAAQmuB,OAAOuR,SACtBr0B,OAAOs0B,KAAK1pB,EAAOjW,QAAQmuB,OAAOuR,SAASvmD,SAAQ,SAAUwH,GACzD8+C,EAAIllB,iBAAiB55B,EAAKs1B,EAAOjW,QAAQmuB,OAAOuR,QAAQ/+C,QAMhE6d,GAAkD,SAAUC,EAASC,EAAYC,EAAGC,GACpF,SAASC,EAAMriB,GAAS,OAAOA,aAAiBmiB,EAAIniB,EAAQ,IAAImiB,GAAE,SAAUG,GAAWA,EAAQtiB,MAC/F,OAAO,IAAKmiB,IAAMA,EAAII,WAAU,SAAUD,EAASE,GAC/C,SAASC,EAAUziB,GAAS,IAAM0iB,EAAKN,EAAUO,KAAK3iB,IAAW,MAAOoX,GAAKoL,EAAOpL,IACpF,SAASwL,EAAS5iB,GAAS,IAAM0iB,EAAKN,EAAU,SAASpiB,IAAW,MAAOoX,GAAKoL,EAAOpL,IACvF,SAASsL,EAAKlmB,GAAUA,EAAOuD,KAAOuiB,EAAQ9lB,EAAOwD,OAASqiB,EAAM7lB,EAAOwD,OAAOyI,KAAKga,EAAWG,GAClGF,GAAMN,EAAYA,EAAU5kB,MAAMykB,EAASC,GAAc,KAAKS,YAGlEE,GAAsD,SAAUZ,EAASlC,GACzE,IAAsGlkB,EAAGiU,EAAGgT,EAAGC,EAA3G3jB,EAAI,CAAEkJ,MAAO,EAAG0a,KAAM,WAAa,GAAW,EAAPF,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOG,KAAM,GAAIC,IAAK,IAChG,OAAOH,EAAI,CAAEJ,KAAMQ,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BL,EAAEK,OAAOC,UAAY,WAAa,OAAO/lB,OAAUylB,EACvJ,SAASI,EAAKvnB,GAAK,OAAO,SAAU0nB,GAAK,OAAOZ,EAAK,CAAC9mB,EAAG0nB,KACzD,SAASZ,EAAKzX,GACV,GAAIpP,EAAG,MAAM,IAAIO,UAAU,mCAC3B,MAAOgD,EAAG,IACN,GAAIvD,EAAI,EAAGiU,IAAMgT,EAAY,EAAR7X,EAAG,GAAS6E,EAAE,UAAY7E,EAAG,GAAK6E,EAAE,YAAcgT,EAAIhT,EAAE,YAAcgT,EAAE/mB,KAAK+T,GAAI,GAAKA,EAAE6S,SAAWG,EAAIA,EAAE/mB,KAAK+T,EAAG7E,EAAG,KAAKlL,KAAM,OAAO+iB,EAE3J,OADIhT,EAAI,EAAGgT,IAAG7X,EAAK,CAAS,EAARA,EAAG,GAAQ6X,EAAE9iB,QACzBiL,EAAG,IACP,KAAK,EAAG,KAAK,EAAG6X,EAAI7X,EAAI,MACxB,KAAK,EAAc,OAAX7L,EAAEkJ,QAAgB,CAAEtI,MAAOiL,EAAG,GAAIlL,MAAM,GAChD,KAAK,EAAGX,EAAEkJ,QAASwH,EAAI7E,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAK7L,EAAE8jB,IAAI/U,MAAO/O,EAAE6jB,KAAK9U,MAAO,SACxC,QACI,GAAM2U,EAAI1jB,EAAE6jB,OAAMH,EAAIA,EAAEznB,OAAS,GAAKynB,EAAEA,EAAEznB,OAAS,MAAkB,IAAV4P,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE7L,EAAI,EAAG,SACjG,GAAc,IAAV6L,EAAG,MAAc6X,GAAM7X,EAAG,GAAK6X,EAAE,IAAM7X,EAAG,GAAK6X,EAAE,IAAM,CAAE1jB,EAAEkJ,MAAQ2C,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAY7L,EAAEkJ,MAAQwa,EAAE,GAAI,CAAE1jB,EAAEkJ,MAAQwa,EAAE,GAAIA,EAAI7X,EAAI,MAC7D,GAAI6X,GAAK1jB,EAAEkJ,MAAQwa,EAAE,GAAI,CAAE1jB,EAAEkJ,MAAQwa,EAAE,GAAI1jB,EAAE8jB,IAAI1kB,KAAKyM,GAAK,MACvD6X,EAAE,IAAI1jB,EAAE8jB,IAAI/U,MAChB/O,EAAE6jB,KAAK9U,MAAO,SAEtBlD,EAAK8U,EAAKhkB,KAAKkmB,EAAS7iB,GAC1B,MAAOgY,GAAKnM,EAAK,CAAC,EAAGmM,GAAItH,EAAI,EAAK,QAAUjU,EAAIinB,EAAI,EACtD,GAAY,EAAR7X,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEjL,MAAOiL,EAAG,GAAKA,EAAG,QAAK,EAAQlL,MAAM,KAM9EqjD,GAAwB,WACxB,SAASA,IACL9lD,KAAK+lD,aAAc,EACnB/lD,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,gBAE7B,OAAOsjC,EANgB,GAQvBE,GAAe,SAAU7pB,EAAQ8pB,GACjC9pB,EAAOmY,IAAI4R,OA6CX,IA5CA,IAAIC,EAAiB,GACjBC,EAAW,GACXC,EAAe,GAGfxyB,GAFOsI,EAAOjW,QAAQhE,KACZia,EAAOjW,QACP,SAAUogC,EAAMnjD,GAC1B,IAAIojD,EAAON,EAAM9iD,GACbqjD,GAAW,EACVD,EAAKl/C,OACN++C,GAAY,OAAS5mC,OAAOkK,WAAW+8B,UAAY,QACnDD,GAAW,GAEXD,EAAKG,KAAOvqB,EAAOjW,QAAQmuB,OAAOtzC,MAClCqlD,GAAY,OAASG,EAAKl/C,KAAO,IAAMmY,OAAOkK,WAAWi9B,KAAO,IAAMxqB,EAAOjW,QAAQmuB,OAAOtzC,IAAM,KAAO,KAAO,SAChHylD,GAAW,GAEf,IAAI1jD,EAAYyjD,EAAKl/C,KAAK+S,YAAY,KAClCwsC,EAAUL,EAAKl/C,KAAKia,OAAOxe,GAC3B+jD,EAAW1qB,EAAOjW,QAAQmuB,OAAOwS,SAASN,EAAKl/C,KAAKia,OAAO,EAAGxe,IAAc8jD,EAChF,GAAIzqB,EAAOjW,QAAQmuB,OAAOyS,OAAQ,CAC9B,IAAIC,EAAW5qB,EAAOjW,QAAQmuB,OAAOyS,OAAO3tC,MAAM,KAAK6tC,MAAK,SAAUhkC,GAClE,IAAIva,EAAOua,EAAKgB,OAChB,GAA0B,IAAtBvb,EAAKrH,QAAQ,MACb,GAAIwlD,EAAQhlB,gBAAkBn5B,EAAKm5B,cAC/B,OAAO,OAIX,GAAI2kB,EAAK99C,KAAK0Q,MAAM,KAAK,KAAO1Q,EAAK0Q,MAAM,KAAK,GAC5C,OAAO,EAGf,OAAO,KAEN4tC,IACDX,GAAY,OAASG,EAAKl/C,KAAO,IAAMmY,OAAOkK,WAAWu9B,cAAgB,QACzET,GAAW,GAGfA,IACAL,EAAejlD,KAAKqlD,GACpBF,GAAgB,OAASQ,EAAW,IAAMrnC,OAAOkK,WAAWw9B,UAAY,WAGvEZ,EAAOL,EAAMloD,OAAQoF,EAAI,EAAGA,EAAImjD,EAAMnjD,IAC3C0wB,EAAQyyB,EAAMnjD,GAGlB,OADAg5B,EAAOmY,IAAI/J,KAAK,OAAS6b,EAAWC,EAAe,SAC5CF,GAEPgB,GAAmB,SAAUvmB,EAAczE,GAC3C,IAAIqK,EAAgBif,GAAWtpB,GAC/BqK,EAAczB,QACd,IAAIqiB,EAAW55B,KAAKC,MAAMmT,GACtBwlB,EAAW,GACO,IAAlBgB,EAASn4B,OACTm3B,EAAW,GAAKgB,EAASC,KAEzBD,EAAS/+C,KAAKi/C,UAAYF,EAAS/+C,KAAKi/C,SAASvpD,OAAS,IAC1DqoD,EAAW,WAAaA,EAAW,QACnCgB,EAAS/+C,KAAKi/C,SAASjoD,SAAQ,SAAUgJ,GACrC,IAAIvF,EAAYuF,EAAK+R,YAAY,KAC7BysC,EAAW1qB,EAAOjW,QAAQmuB,OAAOwS,SAASx+C,EAAKiZ,OAAO,EAAGxe,IAAcuF,EAAKiZ,OAAOxe,GACvFsjD,GAAY,OAASS,EAAW,IAAMrnC,OAAOkK,WAAW69B,YAAc,WAE1EnB,GAAY,SAEZA,EACAjqB,EAAOmY,IAAI/J,KAAK6b,GAGhBjqB,EAAOmY,IAAI4R,OAEf,IAAIsB,EAAe,GACnBj2B,OAAOs0B,KAAKuB,EAAS/+C,KAAKo/C,SAASpoD,SAAQ,SAAUwH,GACjD,IAAIgjB,EAAOu9B,EAAS/+C,KAAKo/C,QAAQ5gD,GAC7B/D,EAAY+D,EAAIuT,YAAY,KAC5B3R,EAAO5B,EAAIya,OAAOxe,GAClB+jD,EAAW1qB,EAAOjW,QAAQmuB,OAAOwS,SAAShgD,EAAIya,OAAO,EAAGxe,IAAc2F,EAC1EA,EAAOA,EAAKm5B,cACiB,IAAzBn5B,EAAKrH,QAAQ,SAA0C,IAAzBqH,EAAKrH,QAAQ,SAA0C,IAAzBqH,EAAKrH,QAAQ,QAC9C,YAAvB+6B,EAAOM,YACP+qB,GAAgB,4HAAuI39B,EAAO,qCAElI,OAAvBsS,EAAOM,YACZ+qB,GAAgB,mCAAwC39B,EAAO,eAG/D29B,GAAgB,IAAMX,EAAW,KAAOh9B,EAAO,MAGpB,IAA1BphB,EAAKrH,QAAQ,UACU,IAAzBqH,EAAKrH,QAAQ,SACY,IAAzBqH,EAAKrH,QAAQ,SACY,IAAzBqH,EAAKrH,QAAQ,SAA0C,IAAzBqH,EAAKrH,QAAQ,SAClB,IAAzBqH,EAAKrH,QAAQ,SAA2C,IAA1BqH,EAAKrH,QAAQ,UAA4C,IAA1BqH,EAAKrH,QAAQ,UAA2C,IAAzBqH,EAAKrH,QAAQ,SAA4C,IAA3BqH,EAAKrH,QAAQ,WAC9G,IAAzBqH,EAAKrH,QAAQ,SACY,IAAzBqH,EAAKrH,QAAQ,SACa,IAA1BqH,EAAKrH,QAAQ,SACW,YAAvB+6B,EAAOM,YACP+qB,GAAgB,aAAgBX,EAAW,UAAch9B,EAAO,OAGhE29B,GAAgB,KAAOX,EAAW,KAAOh9B,EAAO,MAIzB,YAAvBsS,EAAOM,YACP+qB,GAAgB,YAAe39B,EAAO,KAAQg9B,EAAW,SAGzDW,GAAgB,IAAMX,EAAW,KAAOh9B,EAAO,UAI3D,EAAG7H,EAAiC6B,IAAIsY,EAAOkY,OAAOzP,OACtD/lB,SAASspB,YAAY,cAAc,EAAOqf,GAC1CrrB,EAAOkY,OAAOzP,MAAQ7gB,eAAeI,WAAW,GAAGC,cAEnDsjC,GAAc,SAAUvrB,EAAQ8pB,EAAOrnC,GAAW,OAAO8F,QAAU,OAAQ,OAAQ,GAAQ,WAC3F,IAAIijC,EAAUC,EAAaC,EAAsBC,EAAYthB,EAAeuhB,EAAgBC,EAAUC,EAAW7jB,EAAIjb,EAAItiB,EAAK1D,EAAGmjD,EAAMX,EACvI,OAAOpgC,GAAYvlB,MAAM,SAAU+tB,GAC/B,OAAQA,EAAG/iB,OACP,KAAK,EAGD,IAFA28C,EAAW,GACXC,GAA8C,IAAnCzrB,EAAOjW,QAAQmuB,OAAO6T,SAAoBjC,EAAMloD,OAAS,EAC/DoF,EAAI,EAAGA,EAAIykD,EAAUzkD,IACtB0kD,EAAW5B,EAAM9iD,GACb0kD,aAAoBM,mBACpBN,EAAWA,EAASO,aAExBT,EAASzmD,KAAK2mD,GAElB,OAAK1rB,EAAOjW,QAAQmuB,OAAO1qC,QACpB,CAAC,EAAawyB,EAAOjW,QAAQmuB,OAAO1qC,QAAQg+C,IADR,CAAC,EAAa,GAE7D,KAAK,EAED,OADAG,EAAa/5B,EAAGrI,OACU,kBAAfoiC,GACP3rB,EAAOmY,IAAI/J,KAAKud,GACT,CAAC,IAEL,CAAC,GACZ,KAAK,EACD,OAAK3rB,EAAOjW,QAAQmuB,OAAOjlB,KAAQ+M,EAAOkY,OAOrClY,EAAOjW,QAAQmuB,OAAOkS,KACpB,CAAC,EAAapqB,EAAOjW,QAAQmuB,OAAOkS,KAAKoB,IADR,CAAC,EAAa,IAN9C/oC,IACAA,EAAQlc,MAAQ,IAEpBy5B,EAAOmY,IAAI/J,KAAK,qCACT,CAAC,IAIhB,KAAK,EACDod,EAAW55B,EAAGrI,OACdqI,EAAG/iB,MAAQ,EACf,KAAK,EACD,GAAImxB,EAAOjW,QAAQmuB,OAAOmS,WACtBsB,EAAa3rB,EAAOjW,QAAQmuB,OAAOmS,SAASmB,GAClB,kBAAfG,GAEP,OADA3rB,EAAOmY,IAAI/J,KAAKud,GACT,CAAC,GAMhB,GAHAthB,EAAgBif,GAAWtpB,GAC3BA,EAAOkY,OAAOzP,OAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC3D4rB,EAAiB/B,GAAa7pB,EAAQwrB,GACR,IAA1BI,EAAehqD,OAIf,OAHI6gB,IACAA,EAAQlc,MAAQ,IAEb,CAAC,GAIZ,IAFAslD,EAAW,IAAIK,SACfJ,EAAY9rB,EAAOjW,QAAQmuB,OAAO4T,UAC7B7jB,EAAK,EAAGjb,EAAKoI,OAAOs0B,KAAKoC,GAAY7jB,EAAKjb,EAAGprB,OAAQqmC,IACtDv9B,EAAMsiB,EAAGib,GACT4jB,EAASz0B,OAAO1sB,EAAKohD,EAAUphD,IAEnC,IAAK1D,EAAI,EAAGmjD,EAAOyB,EAAehqD,OAAQoF,EAAImjD,EAAMnjD,IAChD6kD,EAASz0B,OAAO4I,EAAOjW,QAAQmuB,OAAOiU,UAAWP,EAAe5kD,IAqDpE,OAnDAwiD,EAAM,IAAIplB,eACVolB,EAAInlB,KAAK,OAAQrE,EAAOjW,QAAQmuB,OAAOjlB,KACnC+M,EAAOjW,QAAQmuB,OAAOkU,OACtB5C,EAAIllB,iBAAiB,iBAAkBtE,EAAOjW,QAAQmuB,OAAOkU,OAE7DpsB,EAAOjW,QAAQmuB,OAAOmU,kBACtB7C,EAAI6C,iBAAkB,GAE1B9C,GAAWvpB,EAAQwpB,GACnBxpB,EAAOkY,OAAO0R,aAAc,EAC5Bvf,EAAc/hB,aAAa,kBAAmB,SAC9CkhC,EAAI8C,mBAAqB,WACrB,GAAI9C,EAAI+C,aAAenoB,eAAeooB,KAAM,CAGxC,GAFAxsB,EAAOkY,OAAO0R,aAAc,EAC5Bvf,EAAc/hB,aAAa,kBAAmB,QAC1CkhC,EAAIl7C,QAAU,KAAOk7C,EAAIl7C,OAAS,IAClC,GAAI0xB,EAAOjW,QAAQmuB,OAAOuU,QACtBzsB,EAAOjW,QAAQmuB,OAAOuU,QAAQpiB,EAAemf,EAAI/kB,kBAEhD,CACD,IAAIA,EAAe+kB,EAAI/kB,aACnBzE,EAAOjW,QAAQmuB,OAAOwU,SACtBjoB,EAAezE,EAAOjW,QAAQmuB,OAAOwU,OAAO5C,EAAON,EAAI/kB,eAE3DumB,GAAiBvmB,EAAczE,QAI/BA,EAAOjW,QAAQmuB,OAAO50C,MACtB08B,EAAOjW,QAAQmuB,OAAO50C,MAAMkmD,EAAI/kB,cAGhCzE,EAAOmY,IAAI/J,KAAKob,EAAI/kB,cAGxBhiB,IACAA,EAAQlc,MAAQ,IAEpBy5B,EAAOkY,OAAOz1B,QAAQc,MAAMuE,QAAU,SAG9C0hC,EAAItR,OAAOyU,WAAa,SAAU5kC,GAC9B,GAAKA,EAAM6kC,iBAAX,CAGA,IAAIC,EAAW9kC,EAAM+kC,OAAS/kC,EAAMglC,MAAQ,IAC5C/sB,EAAOkY,OAAOz1B,QAAQc,MAAMuE,QAAU,QACtC,IAAIklC,EAAchtB,EAAOkY,OAAOz1B,QAChCuqC,EAAYzpC,MAAM4b,MAAQ0tB,EAAW,MAEzCrD,EAAIjlB,KAAKsnB,GACF,CAAC,WAepBoB,GAAc,SAAUjtB,EAAQyI,EAAO1gB,GACvC,IAAIiF,EACAya,GAAe,EAAG7iB,EAAgCsnB,IAAIzD,EAAME,gBAKhE,GAJKlB,IAEDA,EAAezH,EAAOkN,QAAQzqB,SAE9BsF,GAA6B,iBAApBA,EAAM+pB,WACQ,iBAApB/pB,EAAM+pB,WACc,mBAApB/pB,EAAM+pB,WACc,eAApB/pB,EAAM+pB,WACc,iBAApB/pB,EAAM+pB,WACc,wBAApB/pB,EAAM+pB,WACc,wBAApB/pB,EAAM+pB,WACc,sBAApB/pB,EAAM+pB,WACc,kBAApB/pB,EAAM+pB,WACc,iBAApB/pB,EAAM+pB,WACc,KAApB/pB,EAAM+pB,YACL/pB,EAAO,CACX,IAAImlC,EAAwBtS,GAAiBnS,EAAME,gBAC/CukB,GAEAA,EAAsBl7B,SAG1BgO,EAAOkN,QAAQzqB,QAAQgB,iBAAiB,OAAOvgB,SAAQ,SAAUiqD,GAC7DA,EAAIn7B,YAERyW,EAAMiD,WAAWhpB,SAASG,cAAc,QAExC4kB,EAAahkB,iBAAiB,WAAWvgB,SAAQ,SAAU2jB,GACvDA,EAAKrD,gBAAgB,YAGzBikB,EAAahkB,iBAAiB,mBAAmBvgB,SAAQ,SAAU2jB,GAC/B,KAA5BA,EAAK6J,YAAY7I,SACjBhB,EAAK7B,UAAUgN,OAAO,iBAAkB,yBACxCnL,EAAKrD,gBAAgB,mBAIkB,QAA9CwJ,EAAKya,EAAa6D,8BAA2C,IAAPte,GAAyBA,EAAGvJ,iBAAiB,mBAAmBvgB,SAAQ,SAAU2jB,GACrG,KAA5BA,EAAK6J,YAAY7I,SACjBhB,EAAK7B,UAAUgN,OAAO,iBAAkB,yBACxCnL,EAAKrD,gBAAgB,mBAG7B,IAAI4pC,EAAS,GACkC,wBAA3C3lB,EAAa1kB,aAAa,eAE1B0kB,EAAezH,EAAOkN,QAAQzqB,SAElC,IA+EI4qC,EA/EAC,EAAmB7lB,EAAa1G,YAAYf,EAAOkN,QAAQzqB,SAC3D+uB,GAAkB,EAAG5sB,EAAsC6sB,IAAIhK,EAAc,YAAa,mBAC9F,GAAK6lB,EAiDDF,EAAS3lB,EAAargB,cAjDH,CAEnB,IAAI+f,GAAiB,EAAGviB,EAA2B+sB,IAAIlJ,EAAME,gBAC7D,GAAIxB,IAAmBqK,EAAiB,CACpC,IAAIE,GAAoB,EAAG3J,EAA0CllC,GAAG4lC,EAAME,eAAgB,cAG1FlB,EAFAiK,GAEe,EAAG9sB,EAAgCsnB,IAAIzD,EAAME,iBAAmBlB,EAGhEN,EAQvB,GAJIqK,IACA/J,EAAe+J,GAEnB4b,EAAS3lB,EAAa/T,UACO,OAAzB+T,EAAahS,SAA6C,OAAzBgS,EAAahS,QAAkB,CAEhE,IAAImc,EAAkBnK,EAAa6D,uBAC/BuG,EAAkBpK,EAAa3G,oBAC/B8Q,GAAgD,OAA5BA,EAAgBnc,SAAgD,OAA5Bmc,EAAgBnc,UACxE23B,EAASxb,EAAgBle,UAAY05B,EACrCxb,EAAgB5f,WAEhB6f,GAAgD,OAA5BA,EAAgBpc,SAAgD,OAA5Boc,EAAgBpc,UACxE23B,GAAkBvb,EAAgBne,UAClCme,EAAgB7f,UAGpBo7B,EAASA,EAAOtsD,QAAQ,uBAAwB,6BAGpDk/B,EAAOkN,QAAQzqB,QAAQgB,iBAAiB,qCAAqCvgB,SAAQ,SAAU2jB,GACvFA,IAAS4gB,EAAa1G,YAAYla,KAClCumC,GAAUvmC,EAAK6M,UACf7M,EAAKmL,aAIbgO,EAAOkN,QAAQzqB,QAAQgB,iBAAiB,iCAAiCvgB,SAAQ,SAAU2jB,GACnFA,IAAS4gB,EAAa1G,YAAYla,KAClCumC,GAAUvmC,EAAK6M,UACf7M,EAAKmL,aAiBjB,GATAo7B,EAASA,EAAOtsD,QAAQ,8CAA+C,IAClEA,QAAQ,sCAAuC,IAC/CA,QAAQ,0CAA2C,IACzC,mCAAXssD,GAA+CptB,EAAOsP,KAAK8F,iBAC3DgY,EAAS,iCAAiCtsD,QAAQ,MAAO,MAAQk/B,EAAOsP,KAAK8F,iBAEjF5mC,EAAI,gBAAiB4+C,EAAQ,WAAYptB,EAAOjW,QAAQgoB,UACxDqb,EAASptB,EAAO5U,KAAKqV,cAAc2sB,GACnC5+C,EAAI,gBAAiB4+C,EAAQ,SAAUptB,EAAOjW,QAAQgoB,UAClDub,EACA7lB,EAAargB,UAAYgmC,OAIzB,GADA3lB,EAAa/T,UAAY05B,EACrB5b,EAAiB,CAEjB,IAAIQ,GAAsB,EAAGptB,EAAmC03B,IAAItc,EAAOkN,QAAQzqB,QAAQU,cAAc,OAAQ,MACjH,GAAI6uB,EAAqB,CACrB,IAAIG,EAAqBnS,EAAOkN,QAAQzqB,QAAQU,cAAc,wDAA6D6uB,EAAoBjvB,aAAa,eAAiB,MACzKovB,GACAA,EAAmB7pB,aAAa,aAAc0pB,EAAoBthB,YAAY7I,OAAO1C,OAAO,EAAG,MAM/G,IAcIooC,EAdAlb,EAAwBrS,EAAOkN,QAAQzqB,QAAQgB,iBAAiB,qCACpE4uB,EAAsBnvC,SAAQ,SAAU2jB,EAAM5f,GAC5B,IAAVA,EACAomD,EAA2BxmC,GAG3BwmC,EAAyBx4B,mBAAmB,YAAahO,EAAKO,WAC9DP,EAAKmL,aAGTqgB,EAAsBzwC,OAAS,GAC/Bo+B,EAAOkN,QAAQzqB,QAAQ8D,sBAAsB,YAAa8rB,EAAsB,IAIpF,IAAIC,EAAqBtS,EAAOkN,QAAQzqB,QAAQgB,iBAAiB,iCACjE6uB,EAAmBpvC,SAAQ,SAAU2jB,EAAM5f,GACzB,IAAVA,EACAsmD,EAAyB1mC,GAGzB0mC,EAAuB14B,mBAAmB,YAAahO,EAAKO,WAC5DP,EAAKmL,aAGTsgB,EAAmB1wC,OAAS,GAC5Bo+B,EAAOkN,QAAQzqB,QAAQ8D,sBAAsB,YAAa+rB,EAAmB,KAGjF,EAAGzsB,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,GAC5DzI,EAAOkN,QAAQzqB,QAAQgB,iBAAiB,6CACnCvgB,SAAQ,SAAU2jB,GACnBqpB,EAAkBrpB,EAAMmZ,MAExBjY,IAA8B,0BAApBA,EAAM+pB,WAA6D,yBAApB/pB,EAAM+pB,YAC/D9R,EAAOjW,QAAQq9B,QAAQn6C,SACvB+yB,EAAOkN,QAAQsgB,qBAAqBxtB,GACpCA,EAAOjW,QAAQq9B,QAAQE,UAAUtnB,EAAOkN,QAAQma,YAAYrnB,GAAQ,KAG5EqQ,EAAUrQ,GACVua,GAAiBva,EAAQ,CACrByS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAKjB8a,GAAwE,SAAUC,EAAQC,GAE1F,OADIv4B,OAAOuX,eAAkBvX,OAAOuX,eAAe+gB,EAAQ,MAAO,CAAEnnD,MAAOonD,IAAiBD,EAAOC,IAAMA,EAClGD,GAEPE,GAAmE,SAAUplC,EAASC,EAAYC,EAAGC,GACrG,SAASC,EAAMriB,GAAS,OAAOA,aAAiBmiB,EAAIniB,EAAQ,IAAImiB,GAAE,SAAUG,GAAWA,EAAQtiB,MAC/F,OAAO,IAAKmiB,IAAMA,EAAII,WAAU,SAAUD,EAASE,GAC/C,SAASC,EAAUziB,GAAS,IAAM0iB,EAAKN,EAAUO,KAAK3iB,IAAW,MAAOoX,GAAKoL,EAAOpL,IACpF,SAASwL,EAAS5iB,GAAS,IAAM0iB,EAAKN,EAAU,SAASpiB,IAAW,MAAOoX,GAAKoL,EAAOpL,IACvF,SAASsL,EAAKlmB,GAAUA,EAAOuD,KAAOuiB,EAAQ9lB,EAAOwD,OAASqiB,EAAM7lB,EAAOwD,OAAOyI,KAAKga,EAAWG,GAClGF,GAAMN,EAAYA,EAAU5kB,MAAMykB,EAASC,GAAc,KAAKS,YAGlE2kC,GAAuE,SAAUrlC,EAASlC,GAC1F,IAAsGlkB,EAAGiU,EAAGgT,EAAGC,EAA3G3jB,EAAI,CAAEkJ,MAAO,EAAG0a,KAAM,WAAa,GAAW,EAAPF,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOG,KAAM,GAAIC,IAAK,IAChG,OAAOH,EAAI,CAAEJ,KAAMQ,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BL,EAAEK,OAAOC,UAAY,WAAa,OAAO/lB,OAAUylB,EACvJ,SAASI,EAAKvnB,GAAK,OAAO,SAAU0nB,GAAK,OAAOZ,EAAK,CAAC9mB,EAAG0nB,KACzD,SAASZ,EAAKzX,GACV,GAAIpP,EAAG,MAAM,IAAIO,UAAU,mCAC3B,MAAOgD,EAAG,IACN,GAAIvD,EAAI,EAAGiU,IAAMgT,EAAY,EAAR7X,EAAG,GAAS6E,EAAE,UAAY7E,EAAG,GAAK6E,EAAE,YAAcgT,EAAIhT,EAAE,YAAcgT,EAAE/mB,KAAK+T,GAAI,GAAKA,EAAE6S,SAAWG,EAAIA,EAAE/mB,KAAK+T,EAAG7E,EAAG,KAAKlL,KAAM,OAAO+iB,EAE3J,OADIhT,EAAI,EAAGgT,IAAG7X,EAAK,CAAS,EAARA,EAAG,GAAQ6X,EAAE9iB,QACzBiL,EAAG,IACP,KAAK,EAAG,KAAK,EAAG6X,EAAI7X,EAAI,MACxB,KAAK,EAAc,OAAX7L,EAAEkJ,QAAgB,CAAEtI,MAAOiL,EAAG,GAAIlL,MAAM,GAChD,KAAK,EAAGX,EAAEkJ,QAASwH,EAAI7E,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAK7L,EAAE8jB,IAAI/U,MAAO/O,EAAE6jB,KAAK9U,MAAO,SACxC,QACI,GAAM2U,EAAI1jB,EAAE6jB,OAAMH,EAAIA,EAAEznB,OAAS,GAAKynB,EAAEA,EAAEznB,OAAS,MAAkB,IAAV4P,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE7L,EAAI,EAAG,SACjG,GAAc,IAAV6L,EAAG,MAAc6X,GAAM7X,EAAG,GAAK6X,EAAE,IAAM7X,EAAG,GAAK6X,EAAE,IAAM,CAAE1jB,EAAEkJ,MAAQ2C,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAY7L,EAAEkJ,MAAQwa,EAAE,GAAI,CAAE1jB,EAAEkJ,MAAQwa,EAAE,GAAIA,EAAI7X,EAAI,MAC7D,GAAI6X,GAAK1jB,EAAEkJ,MAAQwa,EAAE,GAAI,CAAE1jB,EAAEkJ,MAAQwa,EAAE,GAAI1jB,EAAE8jB,IAAI1kB,KAAKyM,GAAK,MACvD6X,EAAE,IAAI1jB,EAAE8jB,IAAI/U,MAChB/O,EAAE6jB,KAAK9U,MAAO,SAEtBlD,EAAK8U,EAAKhkB,KAAKkmB,EAAS7iB,GAC1B,MAAOgY,GAAKnM,EAAK,CAAC,EAAGmM,GAAItH,EAAI,EAAK,QAAUjU,EAAIinB,EAAI,EACtD,GAAY,EAAR7X,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEjL,MAAOiL,EAAG,GAAKA,EAAG,QAAK,EAAQlL,MAAM,KAoB9E+tC,GAAoB,SAAUtsB,EAAOiY,EAAQ2I,GAC7C,GAAsB,MAAlB5gB,EAAMmrB,SAAkC,KAAfnrB,EAAM+K,MAA6B,iBAAd/K,EAAMrd,KAAiD,OAAvBs1B,EAAOM,YAAsB,CAC3G,IAAImH,GAAe,EAAG7iB,EAAgCsnB,IAAIvD,GAE1D,GAAIlB,GAAoD,KAApCA,EAAa/W,YAAY7I,OAEzC,OADAmY,EAAOA,EAAOM,aAAa0T,eAAgB,GACpC,EAGf,OAAO,GAGPM,GAAiB,SAAU7L,EAAOzI,EAAQjY,GAC1C,KAAkB,UAAdA,EAAMrd,KAAiC,QAAdqd,EAAMrd,KAA+B,cAAdqd,EAAMrd,KAAuBqd,EAAMrd,IAAIzF,QAAQ,UAAY,IACxG,EAAGupC,EAA0BsE,IAAI/qB,IAAwB,WAAdA,EAAMrd,KAAoBqd,EAAMirB,UAAYjrB,EAAMgrB,QADpG,CAIA,IAAI+a,GAAa,EAAGlpC,EAAqCqJ,IAAIwa,EAAME,eAAgB,OAC/E,EAAG/jB,EAAqCqJ,IAAIwa,EAAME,eAAgB,MACtE,GAAImlB,GAAuH,KAAzG,EAAGjoC,EAAiC2qB,IAAIsd,EAAY9tB,EAAOA,EAAOM,aAAa7d,QAASgmB,GAAOxgC,MAAa,CAC1H,IAAI8lD,EAAWrrC,SAASipB,eAAelnB,EAA8B6E,EAAEwF,MACvE2Z,EAAMiD,WAAWqiB,GACjBtlB,EAAMwC,cAAc8iB,MAIxB5X,GAA0B,SAAU1N,EAAO/9B,GAC3C,GAAY,cAARA,GAA+B,YAARA,EAAmB,CAC1C,IAAIsjD,GAAgB,EAAGppC,EAAsC6sB,IAAIhJ,EAAME,eAAgB,YAAa,iBAChG,EAAG/jB,EAAsC6sB,IAAIhJ,EAAME,eAAgB,YAAa,iBAChF,EAAG/jB,EAAsC6sB,IAAIhJ,EAAME,eAAgB,YAAa,eAChFqlB,IACY,cAARtjD,GACA+9B,EAAMwC,cAAc+iB,EAAch+B,eAE1B,YAARtlB,GACA+9B,EAAMuC,eAAegjB,EAAch+B,kBAK/Ci+B,GAAmB,SAAUjuB,EAAQz+B,GACrC,IAAIknC,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7CyH,GAAe,EAAG7iB,EAAgCsnB,IAAIzD,EAAME,gBAC5DlB,IACAA,EAAa5S,mBAAmBtzB,EAAU,qBAAyBkjB,EAA8B6E,EAAEwF,KAAO,gBAC1G,EAAGjJ,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEoa,GAAiB7iB,GACjByQ,GAAgBzQ,KAGpBuV,GAAc,SAAUF,GACxB,IAAIC,GAAe,EAAG1wB,EAAqCqJ,IAAIonB,EAAa,SAC5E,SAAIC,IAAgBA,EAAamI,KAAK,GAAGE,MAAM,GAAGpS,WAAW8J,KAClDC,GAIXG,GAAa,SAAUJ,GACvB,IAAIC,GAAe,EAAG1wB,EAAqCqJ,IAAIonB,EAAa,SAC5E,SAAIC,IAAgBA,EAAarJ,iBAAiBA,iBAAiBA,iBAAiBV,WAAW8J,KACpFC,GAKX4Y,GAAiB,SAAU7Y,EAAa5M,EAAO0lB,QAC5B,IAAfA,IAAyBA,GAAa,GAC1C,IAAInS,EAAkB3G,EAAY/J,uBAqBlC,OApBK0Q,IAEGA,EADA3G,EAAYrlB,cAAcsb,uBACR+J,EAAYrlB,cAAcsb,uBAAuBW,iBAEV,UAApDoJ,EAAYrlB,cAAcA,cAAcyF,SAC7C4f,EAAYrlB,cAAcA,cAAcsb,uBACtB+J,EAAYrlB,cACzBA,cAAcsb,uBAAuBW,iBAAiBA,iBAGzC,MAGtB+P,IACAvT,EAAM+B,mBAAmBwR,GACpBmS,GACD1lB,EAAMO,UAAS,IAEnB,EAAGnjB,EAAiC6B,IAAI+gB,IAErCuT,GAEPpL,GAAmB,SAAU5Q,EAAQjY,EAAO0gB,EAAOhmB,EAASglB,GAC5D,IAAIlmC,GAAW,EAAGskB,EAAiC2qB,IAAI/tB,EAASud,EAAOA,EAAOM,aAAa7d,QAASgmB,GACpG,GAAmB,cAAd1gB,EAAMrd,MAAiG,IAA1E+X,EAAQiO,YAAYigB,YAAYxrB,OAAO5jB,EAAS0G,OAAOhD,QAAQ,OAC9E,eAAd8iB,EAAMrd,KAAwBnJ,EAAS0G,OAASwa,EAAQiO,YAAYigB,YAAY/uC,OAAS,CAC1F,IAAIi7C,EAAcpV,EAAa3G,mBAY/B,OAXK+b,GACAA,IAAwC,UAAxBA,EAAYpnB,SAAuBonB,EAAY95B,aAAa,eAC7E0kB,EAAa5S,mBAAmB,WAAY,qBAAyBpQ,EAA8B6E,EAAEwF,KAAO,cAC5G,EAAGjJ,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,KAGxEA,EAAM+B,mBAAmBqS,GACzBpU,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,IAE5C1gB,EAAM8N,kBACC,EAEX,OAAO,GAEP6a,GAAoB,SAAU1Q,EAAQjY,EAAO0gB,EAAOhmB,EAASglB,GAC7D,IAAIlmC,GAAW,EAAGskB,EAAiC2qB,IAAI/tB,EAASud,EAAOA,EAAOM,aAAa7d,QAASgmB,GACpG,GAAmB,YAAd1gB,EAAMrd,MAAsF,IAAjE+X,EAAQiO,YAAYvL,OAAO,EAAG5jB,EAAS0G,OAAOhD,QAAQ,QAClE,cAAd8iB,EAAMrd,KAAsC,cAAdqd,EAAMrd,KAA4C,KAArB+9B,EAAMrkC,aAC5C,IAAnB7C,EAAS0G,MAAc,CAC3B,IAAI+zC,EAAkBvU,EAAa6D,uBAanC,OAXK0Q,GACAA,IAAgD,UAA5BA,EAAgBvmB,SAAuBumB,EAAgBj5B,aAAa,eACzF0kB,EAAa5S,mBAAmB,cAAe,qBAAyBpQ,EAA8B6E,EAAEwF,KAAO,cAC/G,EAAGjJ,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,KAGxEA,EAAM+B,mBAAmBwR,GACzBvT,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,IAE5C1gB,EAAM8N,kBACC,EAEX,OAAO,GAEPiuB,GAAa,SAAU9jB,EAAQyI,EAAOn8B,EAAM6a,QAC7B,IAAXA,IAAqBA,GAAS,GAClC,IAAIwnB,GAAc,EAAG/pB,EAAqCqJ,IAAIwa,EAAME,eAAgB,MAKpF,GAJA3I,EAAOA,EAAOM,aAAa7d,QAAQgB,iBAAiB,OAAOvgB,SAAQ,SAAUiqD,GACzEA,EAAIn7B,YAERyW,EAAMiD,WAAWhpB,SAASG,cAAc,QACpCsE,GAAUwnB,EAAa,CAGvB,IADA,IAAIyf,EAAQ,GACHpnD,EAAI,EAAGA,EAAI2nC,EAAY3e,cAAcggB,kBAAmBhpC,IAAK,CAClE,IAAIy1C,EAAe9N,EAAY3e,cAAcuP,SAASv4B,GAAGmc,cAAc,SACnEs5B,GACAA,EAAazqB,SAEjBo8B,GAAS,qBAAyBzf,EAAY3e,cAAcuP,SAASv4B,GAAGogB,UAAUinC,WAAa,OAEnG1f,EAAY3e,cAAc6E,mBAAmB,cAAeu5B,GAC5Dzf,EAAY3e,cAAcgC,cAG1B,GAAK2c,EAuBD,GAAa,UAATriC,EACAqiC,EAAY3e,cAAcvM,iBAAiB,MAAMvgB,SAAQ,SAAU2jB,GAC/DA,EAAKgO,mBAAmB,aAAc,6BAAmE,IAAlChO,EAAK6J,YAAYzrB,QAAQ,KAAa,GAAK,MAClH4hB,EAAK7B,UAAUC,IAAI,sBAGtB,CACG0pB,EAAYxrB,cAAc,UAC1BwrB,EAAY3e,cAAcvM,iBAAiB,MAAMvgB,SAAQ,SAAU2jB,GAC/DA,EAAK1D,cAAc,SAAS6O,SAC5BnL,EAAK7B,UAAUgN,OAAO,kBAG9B,IAAIvP,OAAU,EACD,SAATnW,GACAmW,EAAUC,SAASG,cAAc,MACjCJ,EAAQ6F,aAAa,cAAe,OAGpC7F,EAAUC,SAASG,cAAc,MACjCJ,EAAQ6F,aAAa,cAAe,OAExC7F,EAAQ6F,aAAa,aAAc,KACnC7F,EAAQ6F,aAAa,aAAcqmB,EAAY3e,cAAcjN,aAAa,eAC1EN,EAAQ2E,UAAYunB,EAAY3e,cAAc5I,UAC9CunB,EAAY3e,cAAc0rB,WAAW4S,aAAa7rC,EAASksB,EAAY3e,mBAhD7D,CAEd,IAAIyX,GAAe,EAAG7iB,EAAsC6sB,IAAIhJ,EAAME,eAAgB,aAAc,KAC/FlB,IACDzH,EAAOA,EAAOM,aAAa7d,QAAQU,cAAc,OAAO6O,SACxDyV,EAAezH,EAAOA,EAAOM,aAAa7d,QAAQU,cAAc,KAChEskB,EAAargB,UAAY,SAEhB,UAAT9a,GACAm7B,EAAa5S,mBAAmB,cAAe,wEAAgF4S,EAAargB,UAAY,cACxJqgB,EAAazV,UAEC,SAAT1lB,GACLm7B,EAAa5S,mBAAmB,cAAe,0BAA8B4S,EAAargB,UAAY,cACtGqgB,EAAazV,UAEC,iBAAT1lB,IACLm7B,EAAa5S,mBAAmB,cAAe,0BAA8B4S,EAAargB,UAAY,cACtGqgB,EAAazV,YAmCzBu8B,GAAa,SAAUvuB,EAAQqa,EAAW5R,GAC1C,IAAIuT,EAAkB3B,EAAU/O,uBAChC,GAAI+O,GAAa2B,EAAiB,CAC9B,IAAIwS,EAAe,CAACnU,GACpBnlC,MAAM3M,KAAKkgC,EAAMgmB,gBAAgBlvB,UAAUr8B,SAAQ,SAAU2jB,EAAM5f,GACzC,IAAlB4f,EAAKygB,UAAkB+S,GAAyC,KAA5BxzB,EAAK6J,YAAY7I,QAClDwyB,EAAUt3B,aAAa,kBAAoB8D,EAAK9D,aAAa,kBAClD,IAAV9b,GACAunD,EAAazpD,KAAKs1C,GAEtBA,EAAYA,EAAUvZ,uBAG9Bd,EAAOA,EAAOM,aAAa7d,QAAQgB,iBAAiB,OAAOvgB,SAAQ,SAAUiqD,GACzEA,EAAIn7B,YAERyW,EAAMiD,WAAWhpB,SAASG,cAAc,QACxC,IAAI6rC,EAAkB1S,EAAgBhsB,cAClC2+B,EAAW,GACfH,EAAatrD,SAAQ,SAAU2jB,GAC3B,IAAIqrB,EAASrrB,EAAK9D,aAAa,eACT,IAAlBmvB,EAAOtwC,SACPswC,EAAS,IAAMA,EAAOlxC,OAAO,IAEjC2tD,GAAY,qBAAwB9nC,EAAK9D,aAAa,gBAAkB,kBAAsBmvB,EAAS,KAAQrrB,EAAKO,UAAY,QAChIP,EAAKmL,YAETgqB,EAAgBnnB,mBAAmB,YAAa,IAAM65B,EAAgBj5B,QAAU,mBAAuBk5B,EAAW,KAAOD,EAAgBj5B,QAAU,KACxH,YAAvBuK,EAAOM,YACPouB,EAAgBh7B,UAAYsM,EAAO5U,KAAKqV,cAAciuB,EAAgBh7B,WAGtEg7B,EAAgBh7B,UAAYsM,EAAO5U,KAAKoV,gBAAgBkuB,EAAgBh7B,YAE5E,EAAG7N,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxE,IAAImmB,GAAqB,EAAGhqC,EAA2B+sB,IAAIlJ,EAAME,gBAC7DimB,GACAA,EAAmBnrC,iBAAiB,WAAauc,EAAOM,YAAc,8BACjEp9B,SAAQ,SAAU2jB,GACnBqpB,EAAkBrpB,EAAMmZ,GACG,YAAvBA,EAAOM,aACPzZ,EAAKykB,uBAAuBhjB,aAAa,QAAS,mBAI9DmoB,GAAgBzQ,GAChB6iB,GAAiB7iB,QAGjBA,EAAOA,EAAOM,aAAa7d,QAAQmmB,SAGvCimB,GAAc,SAAU7uB,EAAQqa,EAAW5R,EAAOtB,GAClD,IAAI2nB,GAAoB,EAAGlqC,EAAqCqJ,IAAIosB,EAAUrqB,cAAe,MAC7F,GAAI8+B,EAAmB,CACnB9uB,EAAOA,EAAOM,aAAa7d,QAAQgB,iBAAiB,OAAOvgB,SAAQ,SAAUiqD,GACzEA,EAAIn7B,YAERyW,EAAMiD,WAAWhpB,SAASG,cAAc,QACxC,IAAI6rC,EAAkBrU,EAAUrqB,cAC5B++B,EAAuBL,EAAgBriB,YACvC2iB,EAAe,CAAC3U,GACpBnlC,MAAM3M,KAAKkgC,EAAMgmB,gBAAgBlvB,UAAUr8B,SAAQ,SAAU2jB,EAAM5f,GACzC,IAAlB4f,EAAKygB,UAAkB+S,GAAyC,KAA5BxzB,EAAK6J,YAAY7I,QACrDwyB,EAAUt3B,aAAa,kBAAoB8D,EAAK9D,aAAa,kBAC/C,IAAV9b,GACA+nD,EAAajqD,KAAKs1C,GAEtBA,EAAYA,EAAUvZ,uBAG9B,IAAImuB,GAAY,EACZC,EAAc,GAClBR,EAAgBjrC,iBAAiB,MAAMvgB,SAAQ,SAAU2jB,GACjDooC,IACAC,GAAeroC,EAAK6M,UACf7M,EAAKia,oBAAuBja,EAAKykB,uBAIlCzkB,EAAKmL,SAHLnL,EAAKmJ,cAAcgC,UAMvBnL,EAAK0kB,WAAWyjB,EAAaA,EAAaptD,OAAS,MACnDqtD,GAAY,MAGpBD,EAAaG,UAAUjsD,SAAQ,SAAU2jB,GACrCioC,EAAkBvoC,sBAAsB,WAAYM,MAEpDqoC,IACAH,EAAqB3nC,UAAY8nC,EACjCF,EAAa,GAAGzoC,sBAAsB,YAAawoC,IAE5B,YAAvB/uB,EAAOM,YACP6G,EAAezT,UAAYsM,EAAO5U,KAAKqV,cAAc0G,EAAezT,WAGpEyT,EAAezT,UAAYsM,EAAO5U,KAAKoV,gBAAgB2G,EAAezT,YAE1E,EAAG7N,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxE,IAAImmB,GAAqB,EAAGhqC,EAA2B+sB,IAAIlJ,EAAME,gBAC7DimB,GACAA,EAAmBnrC,iBAAiB,WAAauc,EAAOM,YAAc,8BACjEp9B,SAAQ,SAAU2jB,GACnBqpB,EAAkBrpB,EAAMmZ,GACG,YAAvBA,EAAOM,aACPzZ,EAAKykB,uBAAuBhjB,aAAa,QAAS,mBAI9DmoB,GAAgBzQ,GAChB6iB,GAAiB7iB,QAGjBA,EAAOA,EAAOM,aAAa7d,QAAQmmB,SAGvCyV,GAAgB,SAAU/I,EAAchpC,GAKxC,IAJA,IAAIk4C,EAAO58B,eAAeI,WAAW,GAAG2gB,eAAe3Y,cACnDo/B,EAAY9Z,EAAamI,KAAK,GAAGE,MAAM/7C,OACvCytD,EAAS/Z,EAAamI,KAAK77C,OAC3B0tD,EAAgB,EACXtoD,EAAI,EAAGA,EAAIqoD,EAAQroD,IACxB,IAAK,IAAIE,EAAI,EAAGA,EAAIkoD,EAAWloD,IAC3B,GAAIouC,EAAamI,KAAKz2C,GAAG22C,MAAMz2C,GAAGqkC,WAAWiZ,GAAO,CAChD8K,EAAgBpoD,EAChB,MAIZ,IAAK,IAAIoB,EAAI,EAAGA,EAAI+mD,EAAQ/mD,IACxBgtC,EAAamI,KAAKn1C,GAAGq1C,MAAM2R,GAAehnC,aAAa,QAAShc,IAGpEykC,GAAS,SAAUt/B,GAEnB,IAAIygC,EAASzgC,EAAKk/B,YAAY3zB,MAAM,MAAMtI,MAC1C,MAAe,KAAXw9B,KAG+B,KAA/BA,EAAOpxC,QAAQ,OAAQ,KACW,KAA/BoxC,EAAOpxC,QAAQ,OAAQ,KACS,KAAhCoxC,EAAOpxC,QAAQ,QAAS,OACvBoxC,EAAOpxC,QAAQ,KAAM,IAAIc,OAAS,MAC9BswC,EAAOjtC,QAAQ,MAAQ,IAAyC,IAApCitC,EAAOmc,WAAWppD,QAAQ,MACnDwM,EAAKk/B,YAAY3zB,MAAM,MAAMpb,OAAS,KAId,IAA3BswC,EAAOjtC,QAAQ,SAA0C,IAAzBitC,EAAOjtC,QAAQ,WAU3D+rC,GAAc,SAAUv/B,GAExB,IAAI89C,EAAY99C,EAAKk/B,YAAY3zB,MAAM,MAEvC,OADAvL,EAAO89C,EAAU76C,MACY,IAAzBjD,EAAKxM,QAAQ,SAAwC,IAAvBwM,EAAKxM,QAAQ,QAG/CwM,EAAOA,EAAK48C,WACC,KAAT58C,GAAoC,IAArB89C,EAAU3tD,SAGE,KAA3B6P,EAAK3Q,QAAQ,KAAM,KACW,KAA3B2Q,EAAK3Q,QAAQ,KAAM,OAK1B2vC,GAAkB,SAAUzQ,EAAQjW,QACpB,IAAZA,IAAsBA,EAAU,CAChC0oB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEU,YAAvB3S,EAAOM,YACPia,GAAiBva,EAAQjW,GAEG,OAAvBiW,EAAOM,YACZkS,GAA2BxS,EAAQjW,GAEP,OAAvBiW,EAAOM,aACZ+V,GAAmBrW,EAAQjW,IAG/B8qB,GAAU,SAAUpM,EAAOzI,EAAQ2U,EAAU5sB,GAC7C,IAAIiF,EACA2b,EAAiBF,EAAME,eACvB0R,GAAY,EAAGz1B,EAAqCqJ,IAAI0a,EAAgB,MAC5E,GAAI0R,EAAW,CACX,KAAK,EAAG7L,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,QAAwB,UAAdhrB,EAAMrd,MAEjEqd,EAAMirB,UAAY2B,GAAY0F,EAAUpqB,SAAS0kB,IAAaA,EAAS7T,mBASzE,OARIuZ,IAAcA,EAAU3pB,YAAY8+B,SAAS,OAE7CnV,EAAUgP,mBAAmB,YAAa,MAE9C5gB,EAAMiD,WAAWhpB,SAASipB,eAAe,SACzClD,EAAMO,UAAS,GACfyH,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAEX,KAAK,EAAG2Y,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,QAAwB,cAAdhrB,EAAMrd,MACrF2vC,EAAU/O,wBAA+C,KAArB7C,EAAMrkC,YAC6D,KAAxG,EAAGyhB,EAAiC2qB,IAAI6J,EAAWra,EAAOA,EAAOM,aAAa7d,QAASgmB,GAAOxgC,MAY9F,OAVIoyC,EAAUvZ,oBACVuZ,EAAUrqB,cAAc6E,mBAAmB,cAAe,0BAA8BwlB,EAAUjzB,UAAY,QAC9GizB,EAAUroB,UAGVqoB,EAAUrqB,cAAc0D,UAAY,0BAA8B2mB,EAAUjzB,UAAY,QAE5F,EAAGvB,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAGX,KAAK,EAAG2Y,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,QAAwB,cAAdhrB,EAAMrd,KACH,KAAnF2vC,EAAU3pB,YAAY7I,OAAO/mB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,KACtD,KAArB2Z,EAAMrkC,YAAmH,QAAjD,QAA3C4oB,EAAKqtB,EAAU/O,8BAA2C,IAAPte,OAAgB,EAASA,EAAGyI,SAQ5G,OAPA4kB,EAAU/O,uBAAuB+d,mBAAmB,YAAa,QACjE5gB,EAAM+B,mBAAmB6P,EAAU/O,wBACnC7C,EAAMO,UAAS,GACfqR,EAAUroB,UACV,EAAGnM,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAEX,KAAK,EAAG2Y,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,QAAwB,QAAdhrB,EAAMrd,IAAe,CAElF,IAAIgtC,GAAU,EAad,IAZ0B,IAAtBjP,EAAMc,cAC2B,IAA5BZ,EAAerB,WAAmBqB,EAAe6C,iBAClB,IAA5B7C,EAAerB,UAA8C,OAA5BqB,EAAe5B,WAInDsT,EAAUr1B,UAAUiL,SAAS,gBAAwC,IAAtBwY,EAAMc,aACX,IAA5CZ,EAAe6C,gBAAgBlE,UACY,UAA3CqB,EAAe6C,gBAAgB/V,WAJlCiiB,GAAU,GAQVA,GAAgC,KAArBjP,EAAMrkC,WAQjB,OAPI2jB,EAAMirB,SACN6b,GAAY7uB,EAAQqa,EAAW5R,EAAO4R,EAAUrqB,eAGhDu+B,GAAWvuB,EAAQqa,EAAW5R,GAElC1gB,EAAM8N,kBACC,GAInB,OAAO,GAGP+f,GAAS,SAAU5V,EAAQyI,EAAO1gB,GAClC,GAAIiY,EAAOjW,QAAQ0lC,KAAqB,QAAd1nC,EAAMrd,IAkB5B,OAjBIqd,EAAMirB,WAImB,KAArBvK,EAAMrkC,YACNqkC,EAAMiD,WAAWhpB,SAASipB,eAAe3L,EAAOjW,QAAQ0lC,MACxDhnB,EAAMO,UAAS,KAGfP,EAAMqP,kBACNrP,EAAMiD,WAAWhpB,SAASipB,eAAe3L,EAAOjW,QAAQ0lC,MACxDhnB,EAAMO,UAAS,MAGvB,EAAGnjB,EAAiC6B,IAAI+gB,GACxCgI,GAAgBzQ,GAChBjY,EAAM8N,kBACC,GAGX+e,GAAc,SAAU7sB,EAAOiY,EAAQ2U,EAAUlM,GACjD,GAAKkM,EAAL,CAGA,KAAK,EAAGnG,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,QAAwB,UAAdhrB,EAAMrd,IAAiB,CACpF,IAAIglD,EAAQtqD,OAAOuoD,IAAIrU,IAAqBA,EAAmBmU,GAAqB,CAAC,GAAI,IAAK,CAAC,GAAI,MAAO9Y,EAASjkB,aAAa5vB,QAAQ,QAAS,IAAI+mB,OACjJ8nC,EAAYD,EAAM1yC,MAAM,KAC5B,GAAI0yC,EAAMrpB,WAAW,MAAQqpB,EAAMF,SAAS,MAAQG,EAAU/tD,OAAS,EAAG,CAEtE,IAAIguD,EAAgBD,EAAUh7B,KAAI,WAAc,MAAO,SAAUrd,KAAK,KAQtE,OAPAs4C,EACIjb,EAASjkB,YAAc,KAAOk/B,EAAcn9C,UAAU,EAAGm9C,EAAchuD,OAAS,GAAK,WACzF+yC,EAASjhB,UAAYsM,EAAO5U,KAAKqV,cAAcmvB,IAC/C,EAAG/pC,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChB8W,GAAa9W,GACbjY,EAAM8N,kBACC,EAGX,GAAIkb,GAAO4D,EAASvtB,YAAcutB,EAASrJ,uBAAwB,CAE/D,IAAIukB,EAAa,GACbC,EAAgBnb,EAASvtB,UAAUupB,YAAY3zB,MAAM,MAWzD,OAVI8yC,EAAcluD,OAAS,IACvBkuD,EAAcp7C,MACdm7C,EAAa,qBAAyBC,EAAcx4C,KAAK,MAAQ,QAErEq9B,EAAS9f,mBAAmB,WAAYg7B,EAAa,oDACrDlb,EAAS3iB,UACT,EAAGnM,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChB8W,GAAa9W,GACbjY,EAAM8N,kBACC,EAEX,GAAImb,GAAY2D,EAASvtB,WAYrB,MAV2B,YAAvB4Y,EAAOM,YACPqU,EAASjhB,UAAYsM,EAAO5U,KAAKqV,cAAckU,EAASvtB,UAAY,iCAGpEutB,EAASjhB,UAAYsM,EAAO5U,KAAKoV,gBAAgBmU,EAASvtB,UAAY,kCAE1E,EAAGvB,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChB8W,GAAa9W,GACbjY,EAAM8N,kBACC,EAIf,GAAI4S,EAAMqL,WAAaa,EAASrJ,wBAAwC,cAAdvjB,EAAMrd,OAC3D,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,SAAWhrB,EAAMirB,UACpE2B,EAASjkB,YAAYigB,YAAY3zB,MAAM,MAAMpb,OAAS,GACiD,KAAvG,EAAGikB,EAAiC2qB,IAAImE,EAAU3U,EAAOA,EAAOM,aAAa7d,QAASgmB,GAAOxgC,MAAa,CAC1G,IAAI8nD,GAAc,EAAGnrC,EAA4BorC,IAAIrb,EAASrJ,wBAO9D,OANKykB,EAAYr/B,YAAY8+B,SAAS,QAClCO,EAAYr/B,YAAcq/B,EAAYr/B,YAAc,MAExDq/B,EAAY//B,cAAc6E,mBAAmB,YAAa,QAAU8f,EAASvtB,WAC7EutB,EAAS3iB,UACT,EAAGnM,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,IACjE,EAEX,OAAO,IAEPyW,GAAY,SAAUlf,EAAQyI,EAAO4M,GAErC,IADA,IAAI6I,EAAU,GACLr8C,EAAI,EAAGA,EAAIwzC,EAAYrlB,cAAcggB,kBAAmBnuC,IAC7Dq8C,GAAW,cAAiB7I,EAAYrlB,cAAcuP,SAAS19B,GAAGkhB,aAAa,SAAW,WAElE,OAAxBsyB,EAAY5f,QACZ4f,EAAYrlB,cAAcA,cAAc6E,mBAAmB,WAAY,cAAgBqpB,EAAU,iBAGjG7I,EAAYrlB,cAAc6E,mBAAmB,WAAY,OAASqpB,EAAU,SAEhFzN,GAAgBzQ,IAEhBof,GAAiB,SAAUpf,EAAQyI,EAAO4M,GAE1C,IADA,IAAI6I,EAAU,GACLr8C,EAAI,EAAGA,EAAIwzC,EAAYrlB,cAAcggB,kBAAmBnuC,IACjC,OAAxBwzC,EAAY5f,QACZyoB,GAAW,cAAiB7I,EAAYrlB,cAAcuP,SAAS19B,GAAGkhB,aAAa,SAAW,WAG1Fm7B,GAAW,cAAiB7I,EAAYrlB,cAAcuP,SAAS19B,GAAGkhB,aAAa,SAAW,WAGlG,GAA4B,OAAxBsyB,EAAY5f,QAAkB,CAC9B4f,EAAYrlB,cAAcA,cAAc6E,mBAAmB,cAAe,cAAgBqpB,EAAU,iBACpGzV,EAAMiD,WAAWhpB,SAASG,cAAc,QACxC,IAAIotC,EAAY5a,EAAYrlB,cAAc5I,UAAUtmB,QAAQ,QAAS,QAAQA,QAAQ,UAAW,SAChGu0C,EAAYrlB,cAAcA,cAAc8Q,mBAAmBjM,mBAAmB,aAAco7B,GAC5F5a,EAAYrlB,cAAcA,cAAcgC,UACxC,EAAGnM,EAA6B0sB,IAAIvS,EAAOoN,GAAG3qB,QAASgmB,QAGvD4M,EAAYrlB,cAAc6E,mBAAmB,cAAe,OAASqpB,EAAU,SAEnFzN,GAAgBzQ,IAEhBuf,GAAe,SAAUvf,EAAQsV,EAAcD,EAAa/oC,QAC/C,IAATA,IAAmBA,EAAO,YAC9B,IAAIrF,EAAQ,EACR+0C,EAAkB3G,EAAY/J,uBAClC,MAAO0Q,EACH/0C,IACA+0C,EAAkBA,EAAgB1Q,uBAEtC,IAAK,IAAItkC,EAAI,EAAGA,EAAIsuC,EAAamI,KAAK77C,OAAQoF,IAChC,IAANA,EACAsuC,EAAamI,KAAKz2C,GAAG22C,MAAM12C,GAAO4tB,mBAAmBvoB,EAAM,cAG3DgpC,EAAamI,KAAKz2C,GAAG22C,MAAM12C,GAAO4tB,mBAAmBvoB,EAAM,cAGnEmkC,GAAgBzQ,IAEhB2f,GAAY,SAAU3f,EAAQyI,EAAO4M,GACrC,GAA4B,OAAxBA,EAAY5f,QAAkB,CAC9B,IAAIy6B,EAAe7a,EAAYrlB,cAAcA,cACzCqlB,EAAYrlB,cAAcsb,uBAC1B7C,EAAM+B,mBAAmB6K,EAAYrlB,cAAcsb,uBAAuBW,kBAG1ExD,EAAM+B,mBAAmB0lB,EAAa5kB,uBAAuBW,iBAAiBA,kBAE3C,IAAnCikB,EAAalgB,kBACbkgB,EAAal+B,SAGbqjB,EAAYrlB,cAAcgC,SAE9ByW,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,GACxCgI,GAAgBzQ,KAGpB6f,GAAe,SAAU7f,EAAQyI,EAAO6M,EAAcD,GACtD,IAAIpuC,EAAQ,EACR+0C,EAAkB3G,EAAY/J,uBAClC,MAAO0Q,EACH/0C,IACA+0C,EAAkBA,EAAgB1Q,wBAElC+J,EAAY/J,wBAA0B+J,EAAYvU,sBAClD2H,EAAM+B,mBAAmB6K,EAAY/J,wBAA0B+J,EAAYvU,oBAC3E2H,EAAMO,UAAS,IAEnB,IAAK,IAAIhiC,EAAI,EAAGA,EAAIsuC,EAAamI,KAAK77C,OAAQoF,IAAK,CAC/C,IAAI22C,EAAQrI,EAAamI,KAAKz2C,GAAG22C,MACjC,GAAqB,IAAjBA,EAAM/7C,OAAc,CACpB0zC,EAAatjB,SACb6wB,GAAiB7iB,GACjB,MAEJ2d,EAAM12C,GAAO+qB,UAEjB,EAAGnM,EAAiC6B,IAAI+gB,GACxCgI,GAAgBzQ,IAEhB0V,GAAW,SAAU1V,EAAQjY,EAAO0gB,GACpC,IAAIE,EAAiBF,EAAME,eACvB0M,GAAc,EAAGzwB,EAAqCqJ,IAAI0a,EAAgB,QAC1E,EAAG/jB,EAAqCqJ,IAAI0a,EAAgB,MAChE,GAAI0M,EAAa,CAEb,KAAK,EAAG7G,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,QAAwB,UAAdhrB,EAAMrd,IAAiB,CAC/E2qC,EAAYpJ,oBACZoJ,EAAYpJ,kBAAsBoJ,EAAYpJ,iBAAiBV,WAAW8J,EAAYzN,YAC1C,OAAzCyN,EAAYpJ,iBAAiBxW,UACjC4f,EAAYxgB,mBAAmB,YAAa,QAEhD,IAAIs7B,EAAYztC,SAASG,cAAc,MAMvC,OALA4lB,EAAMiD,WAAWykB,GACjB1nB,EAAMwC,cAAcklB,GACpB1f,GAAgBzQ,GAChB8W,GAAa9W,GACbjY,EAAM8N,kBACC,EAGX,GAAkB,QAAd9N,EAAMrd,IAAe,CACrB,GAAIqd,EAAMirB,SAIN,OAFAkb,GAAe7Y,EAAa5M,GAC5B1gB,EAAM8N,kBACC,EAEX,IAAIgnB,EAAcxH,EAAYvU,mBAmB9B,OAlBK+b,IAEGA,EADAxH,EAAYrlB,cAAc8Q,mBACZuU,EAAYrlB,cAAc8Q,mBAAmBD,kBAEF,UAApDwU,EAAYrlB,cAAcA,cAAcyF,SAC7C4f,EAAYrlB,cAAcA,cAAc8Q,mBAEpCuU,EAAYrlB,cAAcA,cAAc8Q,mBAAmBD,kBAAkBA,kBAGnE,MAGlBgc,IACApU,EAAM+B,mBAAmBqS,IACzB,EAAGh3B,EAAiC6B,IAAI+gB,IAE5C1gB,EAAM8N,kBACC,EAEX,IAAIyf,EAAeD,EAAYrlB,cAAcA,cAAcA,cAC3D,GAAkB,YAAdjI,EAAMrd,IAAmB,CAEzB,GADAqd,EAAM8N,iBACsB,OAAxBwf,EAAY5f,QASZ,OARI6f,EAAahK,wBACb7C,EAAM+B,mBAAmB8K,EAAahK,wBACtC7C,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,IAGxCwlB,GAAiBjuB,EAAQ,gBAEtB,EAIX,IAFA,IAAIn+B,EAAI,EACJuuD,EAAY/a,EAAYrlB,cACrBnuB,EAAIuuD,EAAUzS,MAAM/7C,OAAQC,IAC/B,GAAIuuD,EAAUzS,MAAM97C,GAAG0pC,WAAW8J,GAC9B,MAGR,IAAI2G,EAAkBoU,EAAU9kB,uBAOhC,OANK0Q,IACDA,EAAkBoU,EAAUpgC,cAAcsb,uBAAuB2J,YAErExM,EAAM+B,mBAAmBwR,EAAgB2B,MAAM97C,IAC/C4mC,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,IACjC,EAEX,GAAkB,cAAd1gB,EAAMrd,IAAqB,CAC3Bqd,EAAM8N,iBACFu6B,EAAY/a,EAAYrlB,cAC5B,IAAKogC,EAAUtvB,oBAA8C,OAAxBuU,EAAY5f,QAS7C,OARI6f,EAAaxU,oBACb2H,EAAM+B,mBAAmB8K,EAAaxU,oBACtC2H,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,IAGxCwlB,GAAiBjuB,EAAQ,aAEtB,EAGX,IADIn+B,EAAI,EACDA,EAAIuuD,EAAUzS,MAAM/7C,OAAQC,IAC/B,GAAIuuD,EAAUzS,MAAM97C,GAAG0pC,WAAW8J,GAC9B,MAGJwH,EAAcuT,EAAUtvB,mBAO5B,OANK+b,IACDA,EAAcuT,EAAUpgC,cAAc8Q,mBAAmBmU,YAE7DxM,EAAM+B,mBAAmBqS,EAAYc,MAAM97C,IAC3C4mC,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,IACjC,EAGX,GAA2B,YAAvBzI,EAAOM,eACN,EAAGkO,EAA0BsE,IAAI/qB,IAAwB,UAAdA,EAAMrd,MAAoBqd,EAAMirB,UAAYjrB,EAAMgrB,OAAQ,CACtG,IAAI0J,EAAezc,EAAOkN,QAAQqC,QAAQpsB,cAAc,iBAIxD,OAHAs5B,EAAa7T,QACb6T,EAAaL,SACbr0B,EAAM8N,kBACC,EAGX,KAAK,EAAG2Y,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,QAAwB,cAAdhrB,EAAMrd,KAC7D,IAAtB+9B,EAAMc,aAA0C,KAArBd,EAAMrkC,WAAmB,CACvD,IAAIisD,EAAsBnC,GAAe7Y,EAAa5M,GAAO,GAa7D,OAZK4nB,GAAuB/a,IACgB,KAApCA,EAAa5kB,YAAY7I,QACzBytB,EAAa5hB,UAAY,iCACzB,EAAG7N,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,KAGxEA,EAAMuC,eAAesK,GACrB7M,EAAMO,UAAS,IAEnByH,GAAgBzQ,IAEpBjY,EAAM8N,kBACC,EAGX,GAAI+c,EAAY,MAAO7qB,GAGnB,OAFAq3B,GAAepf,EAAQyI,EAAO4M,GAC9BttB,EAAM8N,kBACC,EAGX,GAAI+c,EAAY,KAAM7qB,GAGlB,OAFAm3B,GAAUlf,EAAQyI,EAAO4M,GACzBttB,EAAM8N,kBACC,EAGX,GAAI+c,EAAY,MAAO7qB,GAGnB,OAFAw3B,GAAavf,EAAQsV,EAAcD,EAAa,eAChDttB,EAAM8N,kBACC,EAGX,GAAI+c,EAAY,MAAO7qB,GAGnB,OAFAw3B,GAAavf,EAAQsV,EAAcD,GACnCttB,EAAM8N,kBACC,EAGX,GAAI+c,EAAY,KAAM7qB,GAGlB,OAFA43B,GAAU3f,EAAQyI,EAAO4M,GACzBttB,EAAM8N,kBACC,EAGX,GAAI+c,EAAY,MAAO7qB,GAGnB,OAFA83B,GAAa7f,EAAQyI,EAAO6M,EAAcD,GAC1CttB,EAAM8N,kBACC,EAGX,GAAI+c,EAAY,MAAO7qB,GAAQ,CAC3B,GAA2B,OAAvBiY,EAAOM,YAIP,OAHA+d,GAAc/I,EAAc,QAC5B7E,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAGP,IAAI8Y,EAAc3O,EAAOkN,QAAQqC,QAAQpsB,cAAc,sBACvD,GAAIwrB,EAGA,OAFAA,EAAYgO,QACZ50B,EAAM8N,kBACC,EAKnB,GAAI+c,EAAY,MAAO7qB,GAAQ,CAC3B,GAA2B,OAAvBiY,EAAOM,YAIP,OAHA+d,GAAc/I,EAAc,UAC5B7E,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAGH8Y,EAAc3O,EAAOkN,QAAQqC,QAAQpsB,cAAc,wBACvD,GAAIwrB,EAGA,OAFAA,EAAYgO,QACZ50B,EAAM8N,kBACC,EAKnB,GAAI+c,EAAY,MAAO7qB,GAAQ,CAC3B,GAA2B,OAAvBiY,EAAOM,YAIP,OAHA+d,GAAc/I,EAAc,SAC5B7E,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAGH8Y,EAAc3O,EAAOkN,QAAQqC,QAAQpsB,cAAc,uBACvD,GAAIwrB,EAGA,OAFAA,EAAYgO,QACZ50B,EAAM8N,kBACC,GAKvB,OAAO,GAEPqf,GAAe,SAAUlV,EAAQjY,EAAOitB,EAAmBvM,GAE3D,GAAkC,QAA9BuM,EAAkBvf,SAAqBmd,EAAY,KAAM7qB,GAGzD,OAFA0gB,EAAM+B,mBAAmBwK,EAAkBnU,mBAC3C9Y,EAAM8N,kBACC,EAIX,GAAImK,EAAOjW,QAAQ0lC,KAAqB,QAAd1nC,EAAMrd,MAAkBqd,EAAMirB,UAAiC,KAArBvK,EAAMrkC,WAKtE,OAJAqkC,EAAMiD,WAAWhpB,SAASipB,eAAe3L,EAAOjW,QAAQ0lC,MACxDhnB,EAAMO,UAAS,GACfyH,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAGX,GAAkB,cAAd9N,EAAMrd,OAAwB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,OAAQ,CAC3G,IAAIud,GAAe,EAAGzqC,EAAiC2qB,IAAIwE,EAAmBhV,EAAOA,EAAOM,aAAa7d,QAASgmB,GAClH,IAA4B,IAAvB6nB,EAAaroD,OACU,IAAvBqoD,EAAaroD,OAA+C,OAAhC+sC,EAAkBlkB,YACvB,KAArB2X,EAAMrkC,WAMT,OALA4wC,EAAkBhlB,cAAc0D,UAC5B,0BAA8BshB,EAAkBnU,kBAAkBzZ,UAAY,QAClF,EAAGvB,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAIf,QAAK,EAAG2Y,EAA0BsE,IAAI/qB,KAAWA,EAAMgrB,QAAwB,UAAdhrB,EAAMrd,MAC9DsqC,EAAkBnU,kBAAkBnQ,YAAY8+B,SAAS,OAC1Dxa,EAAkBnU,kBAAkBwoB,mBAAmB,YAAa,MAExE5gB,EAAMqP,kBACNrP,EAAMiD,WAAWhpB,SAASipB,eAAe,OACzClD,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,IACnC,EAAG+F,EAA6B4E,QACN,YAAvBpT,EAAOM,YACP2sB,GAAYjtB,EAAQyI,GAGpB17B,EAAMizB,EAAQyI,IAGtBqO,GAAa9W,GACbjY,EAAM8N,kBACC,IAIXif,GAAgB,SAAU9U,EAAQyI,EAAO1gB,EAAO4sB,GAChD,IAAIhM,EAAiBF,EAAME,eACvB+I,GAAoB,EAAG9sB,EAAqCqJ,IAAI0a,EAAgB,cACpF,GAAI+I,GAA0C,KAArBjJ,EAAMrkC,WAAmB,CAC9C,GAAkB,cAAd2jB,EAAMrd,OAAwB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,QACa,KAAhH,EAAGltB,EAAiC2qB,IAAIkB,EAAmB1R,EAAOA,EAAOM,aAAa7d,QAASgmB,GAAOxgC,MAOtG,OALAwgC,EAAMiD,WAAWhpB,SAASG,cAAc,QACxC6uB,EAAkBhe,UAAYge,EAAkBtqB,WAChD,EAAGvB,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAEX,GAAI8e,GAA0B,UAAd5sB,EAAMrd,OAAoB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,QACrE,eAAnC4B,EAAS3kB,cAAcyF,QAA0B,CAEpD,IAAI86B,GAAU,EAcd,GAb6E,OAAzE5b,EAASvtB,UAAUtmB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,KACQ,KAAzE6lB,EAASvtB,UAAUtmB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,KAEjEyhC,GAAU,EACV5b,EAAS3iB,UAEJ2iB,EAASvtB,UAAUooC,SAAS,UACjC,EAAG3pC,EAAiC2qB,IAAImE,EAAU3U,EAAOA,EAAOM,aAAa7d,QAASgmB,GAAOxgC,QACzF0sC,EAASjkB,YAAY9uB,OAAS,IAElC+yC,EAASvtB,UAAYutB,EAASvtB,UAAUjC,OAAO,EAAGwvB,EAASvtB,UAAUxlB,OAAS,GAC9E2uD,GAAU,GAEVA,EAMA,OAJA7e,EAAkB7c,mBAAmB,WAAY,qBAAyBpQ,EAA8B6E,EAAEwF,KAAO,gBACjH,EAAGjJ,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAGf,IAAI4R,GAAe,EAAG7iB,EAAgCsnB,IAAIvD,GAC1D,GAA2B,YAAvB3I,EAAOM,aAA6BmH,GAAgBmL,EAAY,MAAO7qB,GAOvE,OALA0gB,EAAMiD,WAAWhpB,SAASG,cAAc,QACxC4kB,EAAa/T,UAAY,8BAAkC+T,EAAa/T,UAAY,iBACpF,EAAG7N,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,GAC5D8R,GAAiBva,GACjBjY,EAAM8N,kBACC,EAEX,GAAI+a,GAAiB5Q,EAAQjY,EAAO0gB,EAAOiJ,EAAmBA,GAC1D,OAAO,EAEX,GAAIhB,GAAkB1Q,EAAQjY,EAAO0gB,EAAOiJ,EAAmBA,GAC3D,OAAO,EAGf,OAAO,GAEPiE,GAAU,SAAU3V,EAAQyI,EAAO1gB,GACnC,IAAI4gB,EAAiBF,EAAME,eACvB6nB,GAAkB,EAAG5rC,EAAsCsJ,IAAIya,EAAgB,eACnF,GAAI6nB,EAAiB,CACjB,GAAI5d,EAAY,MAAO7qB,GAAQ,CAE3B,IAAI00B,EAAe+T,EAAgB3vB,kBASnC,OARI4b,EAAagU,QACbhU,EAAaj5B,gBAAgB,WAG7Bi5B,EAAan0B,aAAa,UAAW,WAEzCmoB,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAGX,GAAkB,cAAd9N,EAAMrd,OAAwB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,QAA+B,KAArBtK,EAAMrkC,YAC1F,IAAtBqkC,EAAMc,cACwB,IAA5BZ,EAAerB,UAAkBqB,EAAe6C,iBACN,UAA3C7C,EAAe6C,gBAAgB/V,SACA,IAA5BkT,EAAerB,UAAiB,CACvC,IAAI0U,EAAkBwU,EAAgBllB,uBAEtC,GADAklB,EAAgBrtC,cAAc,SAAS6O,SACnCgqB,EAAiB,CACjB,IAAI0U,GAAW,EAAG9rC,EAA4BorC,IAAIhU,GAClD0U,EAAS1gC,cAAc6E,mBAAmB,YAAa,QAAU27B,EAAgBppC,UAAUS,QAC3F2oC,EAAgBx+B,cAGhBw+B,EAAgBxgC,cAAc6E,mBAAmB,cAAe,2BAA+B27B,EAAgBppC,UAAUS,QAAU,MAAQ,QACvI2oC,EAAgB1vB,mBAChB0vB,EAAgBx+B,SAGhBw+B,EAAgBxgC,cAAcgC,SAMtC,OAHA,EAAGnM,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChBjY,EAAM8N,kBACC,EAEX,GAAkB,UAAd9N,EAAMrd,OAAoB,EAAG8jC,EAA0BsE,IAAI/qB,KAAWA,EAAMirB,WAAajrB,EAAMgrB,OAAQ,CACvG,GAA2C,KAAvCyd,EAAgB9/B,YAAY7I,OAE5B,IAAI,EAAGjD,EAAsCsJ,IAAIsiC,EAAgBxgC,cAAe,eAAgB,CAE5F,IAAImX,GAAiB,EAAGviB,EAA2B+sB,IAAIhJ,GACnDxB,GACA0nB,GAAY7uB,EAAQwwB,EAAiB/nB,EAAOtB,QAKhD,GAAIqpB,EAAgB1vB,mBAAoB,CAEpC,IAAI6vB,EAAc,GACdC,EAAe,GACfC,GAAY,EAChB37C,MAAM3M,KAAKioD,EAAgBxgC,cAAcuP,UAAUr8B,SAAQ,SAAU4tD,GAC7DN,EAAgBjlB,WAAWulB,GAC3BD,GAAY,EAGRA,EACAF,GAAeG,EAASp9B,UAGxBk9B,GAAgBE,EAASp9B,aAIrC,IAAIq9B,EAAgBP,EAAgBxgC,cAAcyF,QAC9Cu7B,EAAuD,OAA1CR,EAAgBxgC,cAAcyF,QAAmB,GAAK,iBAAoB+6B,EAAgBxgC,cAAcjN,aAAa,eAAiB,IACnJkuC,EAAiB,GACjBL,IACAK,EAA2D,OAA1CT,EAAgBxgC,cAAcyF,QAAmB,GAAK,aACvEm7B,EAAe,IAAMG,EAAgB,qBAAyBC,EAAa,mBAAuBJ,EAAe,KAAOG,EAAgB,KAI5IP,EAAgBxgC,cAAc0D,UAAYk9B,EAAe,iCAAqCG,EAAgB,uBAA2BC,EAAa,kBAAsBC,EAAiB,IAAMN,EAAc,KAAOI,EAAgB,SAIxOP,EAAgBxgC,cAAc6E,mBAAmB,WAAY,iCACO,IAAhE27B,EAAgBxgC,cAAcvM,iBAAiB,MAAM7hB,OAErD4uD,EAAgBxgC,cAAcgC,SAI9Bw+B,EAAgBx+B,cAKK,IAA5B2W,EAAerB,UAAwC,IAAtBmB,EAAMc,aACN,UAAtCZ,EAAesM,WAAWxf,QAE1BgT,EAAMM,SAASJ,EAAea,WAAW,GAAI,IAI7Cf,EAAM0C,YAAYqlB,EAAgB5oB,WAClC4oB,EAAgB37B,mBAAmB,WAAY,wCAA6C27B,EAAgBztC,aAAa,eAAiB,wCAC1IL,SAASS,cAAc,OAAOjW,MAAMu7B,EAAMqP,oBAM9C,OAJA,EAAGjyB,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChB8W,GAAa9W,GACbjY,EAAM8N,kBACC,GAGf,OAAO,GAEPkgB,GAAY,SAAU/V,EAAQyI,EAAO1gB,EAAO4sB,GAC5C,GAAsC,IAAlClM,EAAME,eAAerB,SAAgB,CAErC,IAAI4pB,EAAezoB,EAAME,eAAepJ,SAASkJ,EAAMc,aACvD,GAAI2nB,GAAyC,OAAzBA,EAAaz7B,QAI7B,OAHAgT,EAAM+B,mBAAmB0mB,EAAa5lB,wBACtC7C,EAAMO,UAAS,GACfjhB,EAAM8N,kBACC,EAGf,GAAI8e,EAAU,CACV,IAAIqH,EAAkBrH,EAASrJ,uBAC/B,GAAI0Q,GAA0H,KAAvG,EAAGn2B,EAAiC2qB,IAAImE,EAAU3U,EAAOA,EAAOM,aAAa7d,QAASgmB,GAAOxgC,SAC9G,EAAGumC,EAA6B4E,OAAqC,OAA5B4I,EAAgBvmB,SAAiD,UAA5BumB,EAAgBvmB,SAAsB,CACtH,GAAgC,UAA5BumB,EAAgBvmB,QAAqB,CAErC,IAAI07B,EAAkBnV,EAAgB/P,iBAAiBA,iBAAiBA,iBACxEklB,EAAgB/pC,UACZ+pC,EAAgB/pC,UAAUinC,WAAa,QAAU1Z,EAASjkB,YAAY7I,OAC1E8sB,EAAS3iB,cAITgqB,EAAgBhqB,SAKpB,OAHA,EAAGnM,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,GACxEgI,GAAgBzQ,GAChBjY,EAAM8N,kBACC,GAGf,OAAO,GAEP0e,GAAQ,SAAU9L,IACd,EAAG+F,EAA6B4E,OAA2C,IAAlC3K,EAAME,eAAerB,UAC7B,OAAjCmB,EAAME,eAAelT,SACrBgT,EAAMuC,eAAevC,EAAME,iBAI/BuN,GAAyB,SAAUnuB,EAAO0f,EAAcgB,GACxD,IAAIzb,EAAI4E,EACR,KAAK,EAAG4c,EAA6B4E,MACjC,OAAO,EAEX,GAAkB,YAAdrrB,EAAMrd,KAAqB+8B,GAAiH,WAAjD,QAA9Cza,EAAKya,EAAa6D,8BAA2C,IAAPte,OAAgB,EAASA,EAAGyI,SAAsB,CACrJ,IAAI6f,EAAe7N,EAAa6D,uBAIhC,OAHA7C,EAAM+B,mBAAmB8K,EAAamI,KAAKnI,EAAamI,KAAK77C,OAAS,GAAGqqC,kBACzExD,EAAMO,UAAS,GACfjhB,EAAM8N,kBACC,EAEX,QAAkB,cAAd9N,EAAMrd,MAAuB+8B,GAA6G,WAAjD,QAA1C7V,EAAK6V,EAAa3G,0BAAuC,IAAPlP,OAAgB,EAASA,EAAG6D,YAC7HgT,EAAM+B,mBAAmB/C,EAAa3G,mBAAmB2c,KAAK,GAAGE,MAAM,IACvElV,EAAMO,UAAS,GACfjhB,EAAM8N,kBACC,IAIXmxB,GAAQ,SAAUhnB,EAAQjY,EAAO9d,GAAY,OAAO2jD,QAA2B,OAAQ,OAAQ,GAAQ,WACvG,IAAIwD,EAAUC,EAAWvH,EAAOt9B,EAAW8kC,EAAgBC,EAAK1kD,EAAQimB,EAAMf,EAAaxwB,EAAU6+B,EAAaqH,EAAcgB,EAC5Hzb,EACJ,OAAO6gC,GAA6BhqD,MAAM,SAAU+tB,GAChD,OAAQA,EAAG/iB,OACP,KAAK,EAsGD,OArGAkZ,EAAM6N,kBACN7N,EAAM8N,iBACF,kBAAmB9N,GACnBqpC,EAAWrpC,EAAMkO,cAAc6wB,QAAQ,aACvCuK,EAAYtpC,EAAMkO,cAAc6wB,QAAQ,cACxCgD,EAAQ/hC,EAAMkO,cAAc6zB,QAG5BsH,EAAWrpC,EAAM8+B,aAAaC,QAAQ,aACtCuK,EAAYtpC,EAAM8+B,aAAaC,QAAQ,cACnC/+B,EAAM8+B,aAAaE,MAAM55B,SAAS,WAClC28B,EAAQ/hC,EAAM8+B,aAAa2K,QAGnChlC,EAAY,GACZ8kC,EAAiB,SAAUn6B,EAAMs6B,GAC7B,IAAKA,EACD,MAAO,CAAC,GAAI/wB,KAAKgxB,cAErB,IAAI5uC,EAAMqU,EAAKw6B,YACf,GAA6C,KAAzCx6B,EAAKy6B,oBAAoBC,OAAOC,MAAehvC,IAAmC,IAA5BA,EAAI7d,QAAQ,YAClE+6B,EAAOjW,QAAQmuB,OAAO6Z,aAAc,CACpC,IAAIC,EAAQ,IAAI5tB,eAChB4tB,EAAM3tB,KAAK,OAAQrE,EAAOjW,QAAQmuB,OAAO6Z,cACrC/xB,EAAOjW,QAAQmuB,OAAOkU,OACtB4F,EAAM1tB,iBAAiB,iBAAkBtE,EAAOjW,QAAQmuB,OAAOkU,OAE/DpsB,EAAOjW,QAAQmuB,OAAOmU,kBACtB2F,EAAM3F,iBAAkB,GAE5B9C,GAAWvpB,EAAQgyB,GACnBA,EAAM1tB,iBAAiB,eAAgB,mCACvC0tB,EAAM1F,mBAAqB,WACvB,GAAI0F,EAAMzF,aAAenoB,eAAeooB,KAAM,CAC1C,GAAqB,MAAjBwF,EAAM1jD,OAAgB,CACtB,IAAIm2B,EAAeutB,EAAMvtB,aACrBzE,EAAOjW,QAAQmuB,OAAO+Z,kBACtBxtB,EAAezE,EAAOjW,QAAQmuB,OAAO+Z,gBAAgBD,EAAMvtB,eAE/D,IAAIytB,EAAiB7gC,KAAKC,MAAMmT,GAChC,GAA4B,IAAxBytB,EAAep/B,KAEf,YADAkN,EAAOmY,IAAI/J,KAAK8jB,EAAehH,KAGnC,IAAIiH,EAAaD,EAAehmD,KAAKkmD,YACrC,GAA2B,OAAvBpyB,EAAOM,YACPN,EAAOgN,GAAGvqB,QAAQgB,iBAAiB,4BAC9BvgB,SAAQ,SAAU2jB,GACfA,EAAK6J,cAAgByhC,IACrBtrC,EAAK6J,YAAcwhC,EAAehmD,KAAK+mB,YAI9C,CACD,IAAIvP,EAAasc,EAAOA,EAAOM,aAAa7d,QAAQU,cAAc,YAAegvC,EAAa,MAC9FzuC,EAAWZ,IAAMovC,EAAehmD,KAAK+mB,IACV,OAAvB+M,EAAOM,cACP5c,EAAW4nB,uBAAuBA,uBAAuBlkB,UACrD8qC,EAAehmD,KAAK+mB,KAGhCwd,GAAgBzQ,QAGhBA,EAAOmY,IAAI/J,KAAK4jB,EAAMvtB,cAEtBzE,EAAOjW,QAAQmuB,OAAOma,mBACtBryB,EAAOjW,QAAQmuB,OAAOma,kBAAkBL,EAAMvtB,gBAI1DutB,EAAMztB,KAAKlT,KAAKihC,UAAU,CAAEr/B,IAAKnQ,KAErC,MAA2B,OAAvBkd,EAAOM,YACA,CAAC,2DAA+Dxd,EAAM,UAAW4d,KAAKgxB,cAEjE,YAAvB1xB,EAAOM,YACL,CAAC,GAAII,KAAKgxB,cAGV,CAAC,yCAA6C5uC,EAAM,UAAW4d,KAAKgxB,eAI/EN,EAAStwD,QAAQ,SAAU,KAAKA,QAAQ,kCAAmC,IAAI+mB,SAC/E,YAAewpC,EAAY,KAAQA,EAAY,QAC/CD,EAAStwD,QAAQ,SAAU,KAAKA,QAAQ,kCAAmC,IAAI+mB,SAC3E,sCAAmCwpC,EAAY,KAAQA,EAAY,iCACvED,EAAW,IAEfG,GAAM,IAAIgB,WAAYC,gBAAgBpB,EAAU,aAC5CG,EAAIjrC,OACJ8qC,EAAWG,EAAIjrC,KAAKc,WAExBgqC,EAAW1wB,KAAK+xB,SAASrB,GACzBpxB,EAAOkN,QAAQma,YAAYrnB,GAC3BnzB,EAASmzB,EAAOA,EAAOM,aAAa7d,QAAQ6gB,aAC5CxQ,EAAOgd,EAAiBshB,EAAUC,EAAWrxB,EAAOM,aACpDvO,EAAqC,OAAvBiO,EAAOM,aACjB,EAAG1b,EAAsC6sB,IAAI1pB,EAAMlgB,OAAQ,YAAa,eACxE,EAAG+c,EAAqCqJ,IAAIlG,EAAMlgB,OAAQ,QACzDkqB,GAEsB,OAAvBiO,EAAOM,YACP5d,SAASspB,YAAY,cAAc,EAAOqlB,EAAUvwD,QAAQ,KAAM,SAASA,QAAQ,KAAM,UAGzFS,GAAW,EAAGskB,EAAiC2qB,IAAIzoB,EAAMlgB,OAAQm4B,EAAOA,EAAOM,aAAa7d,SAClD,QAAtCsP,EAAY/B,cAAcyF,UAE1B47B,GAAa5sC,EAA8B6E,EAAEwF,MAEjDiD,EAAYrB,YAAcqB,EAAYrB,YAAYje,UAAU,EAAGlR,EAAS0G,OAClEopD,EAAYt/B,EAAYrB,YAAYje,UAAUlR,EAAS+oC,MAC7D,EAAGzkB,EAAsC6sC,IAAInxD,EAAS0G,MAAQopD,EAAUzvD,OAAQL,EAAS0G,MAAQopD,EAAUzvD,OAAQmwB,EAAY/B,gBACtF,QAApChD,EAAK+E,EAAY/B,qBAAkC,IAAPhD,OAAgB,EAASA,EAAG8T,mBAAmB9b,UAAUiL,SAAS,UAAY+P,EAAOM,YAAc,gBAChJvO,EAAY/B,cAAc8Q,mBAAmB1Z,UAAY2K,EAAY2B,UACrEwc,EAAkBne,EAAY/B,cAAc8Q,mBAAoBd,KAGjE,CAAC,EAAa,IAnBI,CAAC,EAAa,GAoB3C,KAAK,EACD,OAAKlN,GACL7oB,EAASg9C,UAAUn0B,GACZ,CAAC,EAAa,IAFH,CAAC,EAAa,GAGpC,KAAK,EACD,MAA0B,KAApBs+B,EAASvpC,OAAuB,CAAC,EAAa,IACpDuY,EAAc1d,SAASG,cAAc,OACrCud,EAAYhZ,UAAYgqC,EACxBhxB,EAAY3c,iBAAiB,WAAWvgB,SAAQ,SAAUya,GACtDA,EAAE6F,gBAAgB,YAEtB4c,EAAY3c,iBAAiB,gBAAgBvgB,SAAQ,SAAUya,GAC3DA,EAAEqU,YAEqB,OAAvBgO,EAAOM,aACP9T,EAAUmmC,iBAAmB,CAAErB,eAAgBA,GAC/CtxB,EAAO5U,KAAKqB,eAAe,CAAED,UAAWA,KACxC,EAAG3G,EAA0B+sC,IAAI5yB,EAAO5U,KAAKunC,iBAAiBvyB,EAAYhZ,WAAY4Y,IAE1D,YAAvBA,EAAOM,aACZ9T,EAAU+T,eAAiB,CAAE+wB,eAAgBA,GAC7CtxB,EAAO5U,KAAKqB,eAAe,CAAED,UAAWA,KACxC,EAAG3G,EAA0B+sC,IAAI5yB,EAAO5U,KAAKmV,eAAeH,EAAYhZ,WAAY4Y,KAGpFxT,EAAUg8B,eAAiB,CAAE8I,eAAgBA,GAC7CtxB,EAAO5U,KAAKqB,eAAe,CAAED,UAAWA,IACxC+7B,GAAavoB,EAAQA,EAAO5U,KAAKuuB,QAAQvZ,EAAYhZ,WAAWupB,cAEpE3Q,EAAO5yB,QAAQrE,OAAOi3B,GACf,CAAC,EAAa,IACzB,KAAK,EACD,OAAM8pB,EAAMloD,OAAS,IAAMo+B,EAAOjW,QAAQmuB,OAAOjlB,KAAO+M,EAAOjW,QAAQmuB,OAAO1qC,SACvE,CAAC,EAAa+9C,GAAYvrB,EAAQ8pB,IADuD,CAAC,EAAa,GAElH,KAAK,EAED,OADAl4B,EAAGrI,OACI,CAAC,EAAa,GACzB,KAAK,EACwB,KAArB8nC,EAAUxpC,QAAkC,IAAjBiiC,EAAMloD,SACN,OAAvBo+B,EAAOM,aACP9T,EAAUm5B,eAAiB,CAAE2L,eAAgBA,GAC7CtxB,EAAO5U,KAAKqB,eAAe,CAAED,UAAWA,KACxC,EAAG3G,EAA0B+sC,IAAI5yB,EAAO5U,KAAKu6B,eAAe0L,GAAYrxB,IAE5C,YAAvBA,EAAOM,aACZ9T,EAAUw2B,aAAe,CAAEsO,eAAgBA,GAC3CtxB,EAAO5U,KAAKqB,eAAe,CAAED,UAAWA,KACxC,EAAG3G,EAA0B+sC,IAAI5yB,EAAO5U,KAAK43B,aAAaqO,GAAYrxB,KAGtExT,EAAUg8B,eAAiB,CAAE8I,eAAgBA,GAC7CtxB,EAAO5U,KAAKqB,eAAe,CAAED,UAAWA,IACxC+7B,GAAavoB,EAAQqxB,IAEzBrxB,EAAO5yB,QAAQrE,OAAOi3B,IAE1BpO,EAAG/iB,MAAQ,EACf,KAAK,EA4BD,MA3B2B,OAAvBmxB,EAAOM,cACPmH,GAAe,EAAG7iB,EAAgCsnB,KAAI,EAAGrmB,EAA8BuuB,IAAIpU,GAAQ2I,gBAC/FlB,IACAgB,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7CA,EAAOA,EAAOM,aAAa7d,QAAQgB,iBAAiB,OAAOvgB,SAAQ,SAAUiqD,GACzEA,EAAIn7B,YAERyW,EAAMiD,WAAWhpB,SAASG,cAAc,QACb,YAAvBmd,EAAOM,YACPmH,EAAa/T,UAAYsM,EAAO5U,KAAKqV,cAAcgH,EAAa/T,WAGhE+T,EAAa/T,UAAYsM,EAAO5U,KAAKoV,gBAAgBiH,EAAa/T,YAEtE,EAAG7N,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASgmB,IAE5EzI,EAAOA,EAAOM,aAAa7d,QAAQgB,iBAAiB,WAAauc,EAAOM,YAAc,8BACjFp9B,SAAQ,SAAU2jB,GACnBqpB,EAAkBrpB,EAAMmZ,OAGhCA,EAAOkN,QAAQsgB,qBAAqBxtB,GACpCyQ,GAAgBzQ,GACZA,EAAOA,EAAOM,aAAa7d,QAAQ6gB,aAAez2B,EAClDjM,KAAKiE,IAAIm7B,EAAOA,EAAOM,aAAa7d,QAAQ8gB,aAAclgB,OAAOC,aAAe,GAChFwzB,GAAa9W,GAEV,CAAC,WAgBpB6yB,GAAc,SAAU7yB,GACxBA,EAAOsP,KAAKvmC,OAAOi3B,GACnB,IAAI2I,GAAiB,EAAG9iB,EAA8BuuB,IAAIpU,GAAQ2I,eAE9DwM,GAAmB,EAAGvwB,EAAsC6sB,IAAI9I,EAAgB,YAAa,mBACjG,GAAIwM,EACA,GAAuF,KAAnFA,EAAiBzkB,YAAY5vB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,KAAckR,EAAOsP,KAAK8F,eAAgB,CACrHD,EAAiBzkB,YAAcjM,EAA8B6E,EAAEwF,KAAOkR,EAAOsP,KAAK8F,eAClF,IAAI3M,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GACjDyI,EAAM+B,mBAAmB2K,OAExB,CACD,IAAI2d,EAAkB,GAClBC,EAAQ5d,EAAiBzkB,YAAYje,UAAU,GAAG,EAAGoT,EAAiC2qB,IAAI2E,EAAkBnV,EAAOoN,GAAG3qB,SAASxa,OAC9HnH,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,IACnDrK,EAAgD6E,EAAE8F,eAAelsB,SAAQ,SAAU89C,GAC3EA,EAAQ/7C,QAAQ8tD,EAAMttB,gBAAkB,GACxCqtB,EAAgB/tD,KAAK,CACjBiX,KAAMglC,EACNz6C,MAAOy6C,OAInBhhB,EAAOsP,KAAK2R,QAAQ6R,EAAiBC,EAAO/yB,KAIpDwS,GAA6B,SAAUxS,EAAQjW,QAC/B,IAAZA,IAAsBA,EAAU,CAChC0oB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEb5oB,EAAQ2oB,YACRmgB,GAAY7yB,GAEhB6Z,aAAa7Z,EAAOoN,GAAG+b,kBACvBnpB,EAAOoN,GAAG+b,iBAAmB9lC,OAAO+f,YAAW,WAC3C,IAAIpD,EAAOoN,GAAG4G,cAAd,CAGA,IAAIviC,EAAOs7B,EAAY/M,GACa,oBAAzBA,EAAOjW,QAAQhd,OAAwBgd,EAAQ4oB,aACtD3S,EAAOjW,QAAQhd,MAAM0E,GAErBuuB,EAAOjW,QAAQ/c,QAAQC,QACvB+yB,EAAOhzB,QAAQjE,OAAOi3B,EAAQvuB,GAE9BuuB,EAAOjW,QAAQ1c,MAAMJ,SAAU,EAAGuhC,EAAsCgL,QACxE7T,aAAa8U,QAAQza,EAAOjW,QAAQ1c,MAAM6B,GAAIuC,GAC1CuuB,EAAOjW,QAAQ1c,MAAMH,OACrB8yB,EAAOjW,QAAQ1c,MAAMH,MAAMuE,IAG/BuuB,EAAOwN,UACPxN,EAAOwN,SAASF,aAAatN,GAE7BjW,EAAQ0oB,oBACRzS,EAAOkU,KAAKwG,eAAe1a,MAEhCA,EAAOjW,QAAQ4wB,YAElB7E,GAAyB,SAAU9V,EAAQz5B,GAC3C,IAAIkiC,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7C7R,GAAiB,EAAGvJ,EAAgCsnB,IAAIzD,EAAME,iBAAmBF,EAAME,eAC3F,GAAIxa,EAAgB,CAChB,IAAI0nB,EAAuB1nB,EAAehL,cAAc,+BACpD0yB,EACAA,EAAqBzuB,UAAY7gB,GAGjC4nB,EAAek7B,mBAAmB,aAAc9iD,GAChDkiC,EAAM+B,mBAAmBrc,GACzBsa,EAAMO,UAAS,IAEnBj8B,EAAMizB,EAAQyI,EAAMxgB,cACpB2xB,GAAmB5Z,KAGvBgzB,GAAe,SAAUvqB,EAAOzI,EAAQ1zB,GACxC,IAAI0hD,GAAgB,EAAGppC,EAAsC6sB,IAAIhJ,EAAME,eAAgB,YAAar8B,GACpG,GAAI0hD,EAAe,CACfA,EAAcntB,kBAAkB7O,SAChCg8B,EAAc/hB,iBAAiBja,SAC/ByW,EAAMiD,WAAWhpB,SAASG,cAAc,QACxC,IAAIud,EAAc1d,SAASG,cAAc,OACzCud,EAAYhZ,UAAY4Y,EAAO5U,KAAKoV,gBAAgBwtB,EAAct6B,WAClEs6B,EAAct6B,UAAY0M,EAAYS,kBAAkBzZ,UAAUS,SAGtEi9B,GAAyB,SAAU9kB,EAAQ0P,EAAW3wB,EAAQC,GAC9D,IAAIypB,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7CkjB,EAAcxT,EAAU3sB,aAAa,aACrCi3B,EAAcvR,EAAME,eACK,IAAzBqR,EAAY1S,WACZ0S,EAAcA,EAAYhqB,eAE9B,IAAI2zB,GAAe,EAEnB,GAAIjU,EAAU1qB,UAAUiL,SAAS,wBAC7B,GAAoB,UAAhBizB,EAAyB,CACzB,IAAIjJ,GAAe,EAAGr1B,EAAqCqJ,IAAI+rB,EAAa,cACxEC,IACAxR,EAAMiD,WAAWhpB,SAASG,cAAc,QACxCo3B,EAAavmB,UAA8C,KAAlCumB,EAAa7yB,UAAUS,OAC5C,qBAAyBoyB,EAAa7yB,UAAY,OAAS6yB,EAAa7yB,gBAG/E,GAAoB,SAAhB87B,EAAwB,CAC7B,IAAI1qB,GAAW,EAAG5T,EAAsC6sB,IAAIhJ,EAAME,eAAgB,YAAa,KAC/F,GAAInQ,EAAU,CACV,IAAIy6B,GAAe,EAAGruC,EAAsCsJ,IAAIua,EAAME,eAAgB,mBAClFsqB,GACAxqB,EAAMiD,WAAWhpB,SAASG,cAAc,QACxC2V,EAAS9E,UAAYu/B,EAAa7rC,WAGlCoR,EAAS9E,UAAY8E,EAASrV,cAAc,oBAAoBiE,UAAY,aAI/D,WAAhB87B,EACL8P,GAAavqB,EAAOzI,EAAQ,MAEP,SAAhBkjB,EACL8P,GAAavqB,EAAOzI,EAAQ,UAEP,WAAhBkjB,EACL8P,GAAavqB,EAAOzI,EAAQ,KAEP,gBAAhBkjB,EACL8P,GAAavqB,EAAOzI,EAAQ,QAEP,UAAhBkjB,GAA2C,SAAhBA,GAA0C,iBAAhBA,IAC1DY,GAAW9jB,EAAQyI,EAAOya,GAC1BS,GAAe,EACfjU,EAAU1qB,UAAUgN,OAAO,6BAG9B,CAE2C,IAAxCgO,EAAOoN,GAAG3qB,QAAQ+mB,WAAW5nC,SAC7Bo+B,EAAOoN,GAAG3qB,QAAQ2E,UAAY,+BAC9B,EAAGvB,EAA6B0sB,IAAIvS,EAAOoN,GAAG3qB,QAASgmB,IAE3D,IAAIhB,GAAe,EAAG7iB,EAAgCsnB,IAAIzD,EAAME,gBAChE,GAAoB,SAAhBua,GACA,GAAIzb,EAAc,CACd,IAAIgd,EAAS,mDACyB,KAAlChd,EAAargB,UAAUS,OACvB4f,EAAa/T,UAAY+wB,EAGzBhd,EAAa5S,mBAAmB,WAAY4vB,SAInD,GAAoB,UAAhBvB,EACDzb,IACAgB,EAAMiD,WAAWhpB,SAASG,cAAc,QACxC4kB,EAAa/T,UAAY,8BAAkC+T,EAAa/T,UAAY,gBACpFiwB,GAAe,EACfjU,EAAU1qB,UAAUC,IAAI,8BAG3B,GAAoB,SAAhBi+B,EAAwB,CAC7B,IAAIlnC,OAAO,EAEPA,EADqB,KAArBysB,EAAMrkC,WACC2a,EAAS,QAAUC,EAGnB,GAAKD,EAAS0pB,EAAMrkC,WAAa4a,EAAOle,QAAQ,IAAK,UAEhE4hB,SAASspB,YAAY,cAAc,EAAOhwB,GAC1C2nC,GAAe,EACfjU,EAAU1qB,UAAUC,IAAI,6BAEvB,GAAoB,WAAhBi+B,GAA4C,SAAhBA,GAA0C,WAAhBA,GACxC,gBAAhBA,GAAiD,SAAhBA,GAA0C,UAAhBA,EAAyB,CACnFlnC,OAAO,EACc,KAArBysB,EAAMrkC,WACN4X,EAAO+C,EAAS,QAAUC,GAItBhD,EADgB,SAAhBknC,GAA0C,UAAhBA,EACnB,GAAKnkC,EAAS0pB,EAAMrkC,WAAa,QAAU4a,EAG3C,GAAKD,EAAS0pB,EAAMrkC,WAAa4a,EAAS,QAErDypB,EAAMub,kBAEU,UAAhBd,GAA2C,SAAhBA,IAC3BlnC,EAAO,KAAOA,EAAO,QAEzB,IAAIgS,EAActL,SAASG,cAAc,QACzCmL,EAAY5G,UAAYpL,EACxBysB,EAAMiD,WAAW1d,GACjBjhB,EAAMizB,EAAQyI,GACM,UAAhBya,IACAza,EAAM+B,mBAAmB5iB,eAAeI,WAAW,GAAG2gB,eAAe3Y,gBACrE,EAAGnK,EAAiC6B,IAAI+gB,QAGvB,UAAhBya,GAA2C,SAAhBA,GAA0C,iBAAhBA,IAC1DY,GAAW9jB,EAAQyI,EAAOya,GAAa,GACvCS,GAAe,EACflV,EAAqBzO,EAAOoB,QAAQgO,SAAU,CAAC,QAAS,OAAQ,iBAChEM,EAAU1qB,UAAUC,IAAI,0BAGhC,EAAGY,EAA6B0sB,IAAIvS,EAAOoN,GAAG3qB,QAASgmB,GACvD+J,GAA2BxS,GACvB2jB,GACA/J,GAAmB5Z,IAKvBkzB,GAAqD,SAAU1qC,EAASC,EAAYC,EAAGC,GACvF,SAASC,EAAMriB,GAAS,OAAOA,aAAiBmiB,EAAIniB,EAAQ,IAAImiB,GAAE,SAAUG,GAAWA,EAAQtiB,MAC/F,OAAO,IAAKmiB,IAAMA,EAAII,WAAU,SAAUD,EAASE,GAC/C,SAASC,EAAUziB,GAAS,IAAM0iB,EAAKN,EAAUO,KAAK3iB,IAAW,MAAOoX,GAAKoL,EAAOpL,IACpF,SAASwL,EAAS5iB,GAAS,IAAM0iB,EAAKN,EAAU,SAASpiB,IAAW,MAAOoX,GAAKoL,EAAOpL,IACvF,SAASsL,EAAKlmB,GAAUA,EAAOuD,KAAOuiB,EAAQ9lB,EAAOwD,OAASqiB,EAAM7lB,EAAOwD,OAAOyI,KAAKga,EAAWG,GAClGF,GAAMN,EAAYA,EAAU5kB,MAAMykB,EAASC,GAAc,KAAKS,YAGlEiqC,GAAyD,SAAU3qC,EAASlC,GAC5E,IAAsGlkB,EAAGiU,EAAGgT,EAAGC,EAA3G3jB,EAAI,CAAEkJ,MAAO,EAAG0a,KAAM,WAAa,GAAW,EAAPF,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOG,KAAM,GAAIC,IAAK,IAChG,OAAOH,EAAI,CAAEJ,KAAMQ,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BL,EAAEK,OAAOC,UAAY,WAAa,OAAO/lB,OAAUylB,EACvJ,SAASI,EAAKvnB,GAAK,OAAO,SAAU0nB,GAAK,OAAOZ,EAAK,CAAC9mB,EAAG0nB,KACzD,SAASZ,EAAKzX,GACV,GAAIpP,EAAG,MAAM,IAAIO,UAAU,mCAC3B,MAAOgD,EAAG,IACN,GAAIvD,EAAI,EAAGiU,IAAMgT,EAAY,EAAR7X,EAAG,GAAS6E,EAAE,UAAY7E,EAAG,GAAK6E,EAAE,YAAcgT,EAAIhT,EAAE,YAAcgT,EAAE/mB,KAAK+T,GAAI,GAAKA,EAAE6S,SAAWG,EAAIA,EAAE/mB,KAAK+T,EAAG7E,EAAG,KAAKlL,KAAM,OAAO+iB,EAE3J,OADIhT,EAAI,EAAGgT,IAAG7X,EAAK,CAAS,EAARA,EAAG,GAAQ6X,EAAE9iB,QACzBiL,EAAG,IACP,KAAK,EAAG,KAAK,EAAG6X,EAAI7X,EAAI,MACxB,KAAK,EAAc,OAAX7L,EAAEkJ,QAAgB,CAAEtI,MAAOiL,EAAG,GAAIlL,MAAM,GAChD,KAAK,EAAGX,EAAEkJ,QAASwH,EAAI7E,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAK7L,EAAE8jB,IAAI/U,MAAO/O,EAAE6jB,KAAK9U,MAAO,SACxC,QACI,GAAM2U,EAAI1jB,EAAE6jB,OAAMH,EAAIA,EAAEznB,OAAS,GAAKynB,EAAEA,EAAEznB,OAAS,MAAkB,IAAV4P,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE7L,EAAI,EAAG,SACjG,GAAc,IAAV6L,EAAG,MAAc6X,GAAM7X,EAAG,GAAK6X,EAAE,IAAM7X,EAAG,GAAK6X,EAAE,IAAM,CAAE1jB,EAAEkJ,MAAQ2C,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAY7L,EAAEkJ,MAAQwa,EAAE,GAAI,CAAE1jB,EAAEkJ,MAAQwa,EAAE,GAAIA,EAAI7X,EAAI,MAC7D,GAAI6X,GAAK1jB,EAAEkJ,MAAQwa,EAAE,GAAI,CAAE1jB,EAAEkJ,MAAQwa,EAAE,GAAI1jB,EAAE8jB,IAAI1kB,KAAKyM,GAAK,MACvD6X,EAAE,IAAI1jB,EAAE8jB,IAAI/U,MAChB/O,EAAE6jB,KAAK9U,MAAO,SAEtBlD,EAAK8U,EAAKhkB,KAAKkmB,EAAS7iB,GAC1B,MAAOgY,GAAKnM,EAAK,CAAC,EAAGmM,GAAItH,EAAI,EAAK,QAAUjU,EAAIinB,EAAI,EACtD,GAAY,EAAR7X,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEjL,MAAOiL,EAAG,GAAKA,EAAG,QAAK,EAAQlL,MAAM,KAW9E8sD,GAAsB,WACtB,SAASA,EAAKC,GACV,IAAI9lB,EAAQ1pC,KACZA,KAAKyvD,UAAY,GACjBzvD,KAAK8C,WAAa,EAClB9C,KAAK0vD,UAAY,SAAU9wC,EAASud,GAChCuN,EAAM9qB,QAAQc,MAAMuE,QAAU,OAC9B,IAAIvhB,EAAQkf,mBAAmBhD,EAAQM,aAAa,eAChD0lB,EAAQplB,OAAOuE,eAAeI,WAAW,GAE7C,GAA2B,OAAvBgY,EAAOM,YAAsB,CAC7B,IAAI6U,GAAmB,EAAGvwB,EAAsC6sB,IAAIhJ,EAAME,eAAgB,YAAa,mBACvG,GAAIwM,EAUA,OATAA,EAAiBzkB,YAAcjM,EAA8B6E,EAAEwF,KAAOvoB,EAAMoqC,YAC5ElI,EAAM+B,mBAAmB2K,GACzB1M,EAAMO,UAAS,GACfwJ,GAA2BxS,GAC3BmV,EAAiBnlB,cAAcvM,iBAAiB,QAAQvgB,SAAQ,SAAU2jB,GACtEA,EAAKR,UAAY,YAAc9f,EAAMoqC,eAEzCT,EAAkBiF,EAAiBnlB,cAAc7M,cAAc,uBAAwB6c,QACvFuN,EAAM6H,eAAiB7uC,EAAMoqC,aAIrC,GAA2B,YAAvB3Q,EAAOM,aAA+D,IAAlCmI,EAAME,eAAerB,SAAgB,CACzE,IAAIqB,EAAiBF,EAAME,eACvB8T,OAAe,EAOnB,GALIA,EADA9T,EAAe3jB,UAAUiL,SAAS,gBACnB0Y,EAGAA,EAAe9H,kBAE9B4b,GAAgBA,EAAaz3B,UAAUiL,SAAS,gBAQhD,OAPAwsB,EAAal2C,MAAQA,EAAMoqC,YAC3BlI,EAAM+B,mBAAmBiS,GACzBhU,EAAMO,UAAS,GAGfyT,EAAayL,cAAc,IAAIxE,YAAY,QAAS,CAAE9C,OAAQ,UAC9DrT,EAAM6H,eAAiB7uC,EAAMoqC,aAyBrC,GArBAlI,EAAMM,SAASN,EAAME,eAAgB4E,EAAM5mC,WAC3C8hC,EAAMub,iBACFhkB,EAAOjW,QAAQulB,KAAKhe,MACO,OAAvB0O,EAAOM,aACP,EAAGza,EAA0B+sC,IAAI5yB,EAAO5U,KAAKw9B,gBAAgBriD,GAAQy5B,GAEzC,YAAvBA,EAAOM,aACZ,EAAGza,EAA0B+sC,IAAI5yB,EAAO5U,KAAKqV,cAAcl6B,GAAQy5B,IAGnE,EAAGna,EAA0B+sC,IAAI5yB,EAAO5U,KAAKoV,gBAAgBj6B,GAAQy5B,IAIzE,EAAGna,EAA0B+sC,IAAIrsD,EAAOy5B,GAEpB,MAApBuN,EAAM+lB,WAAqB/sD,EAAMtB,QAAQ,MAAQ,GAA4B,OAAvB+6B,EAAOM,aAC7DmI,EAAMiD,WAAWhpB,SAASipB,eAAe,MAE7ClD,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,GACb,YAAvBzI,EAAOM,YAA2B,CAClC,IAAIkzB,GAAa,EAAG5uC,EAAsCsJ,IAAIua,EAAME,eAAgB,yBAChF6qB,GAAcA,EAAWvnB,iBAAiBjnB,UAAUiL,SAAS,6BAC7DujC,EAAWvnB,iBAAiB7kB,UAAYosC,EAAW3yB,kBAAkBzZ,UACrE8oB,EAAkBsjB,EAAWvnB,iBAAkBjM,SAGlD,GAA2B,OAAvBA,EAAOM,YAAsB,CAC9BkzB,GAAa,EAAG5uC,EAAsCsJ,IAAIua,EAAME,eAAgB,0BAChF6qB,GAAcA,EAAW1yB,mBAAmB9b,UAAUiL,SAAS,wBAC/DujC,EAAW1yB,mBAAmB1Z,UAAYosC,EAAWpsC,UACrD8oB,EAAkBsjB,EAAW1yB,mBAAoBd,IAGzDyQ,GAAgBzQ,IAEpBn8B,KAAK4vD,QAAU,EACf5vD,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,cACzBxiB,KAAKuxC,eAAiB,GACtBie,EAAYtuD,KAAK,CAAE2F,IAAK,MAsL5B,OApLA0oD,EAAK5vD,UAAUuF,OAAS,SAAUi3B,GAC9B,IAAIuN,EAAQ1pC,KACZ,GAAKwf,OAAOuE,eAAe8rC,UAA3B,CAGA,IAAIC,EACAlrB,EAAQ7gB,eAAeI,WAAW,GACtC2rC,EAAmBlrB,EAAME,eAAejY,YAAYje,UAAU,EAAGg2B,EAAMc,cAAgB,GACvF,IAAI7+B,EAAM7G,KAAK+vD,OAAOD,EAAkB3zB,EAAOjW,QAAQulB,KAAKoY,QAC5D,GAAmB,qBAARh9C,EACP7G,KAAK4e,QAAQc,MAAMuE,QAAU,OAC7B+xB,aAAah2C,KAAK4vD,aAGlB,GAAuB,MAAnB5vD,KAAKyvD,UAAmB,CACxB,IAAIO,EAAsB,KAARnpD,EAAas1B,EAAOjW,QAAQulB,KAAKD,MAAQrP,EAAO5U,KAAK0oC,YACnEC,EAAmB,GACvB3+B,OAAOs0B,KAAKmK,GAAa3wD,SAAQ,SAAU89C,GACI,IAAvCA,EAAQ/7C,QAAQyF,EAAI+6B,iBAChBouB,EAAY7S,GAAS/7C,QAAQ,MAAQ,EACrC8uD,EAAiBhvD,KAAK,CAClBiX,KAAM,aAAgB63C,EAAY7S,GAAW,aAAiBA,EAAU,SAAYA,EAAU,IAC9Fz6C,MAAO,IAAMy6C,EAAU,MAI3B+S,EAAiBhvD,KAAK,CAClBiX,KAAM,oCAAwC63C,EAAY7S,GAAW,UAAYA,EACjFz6C,MAAOstD,EAAY7S,SAKnCn9C,KAAKo9C,QAAQ8S,EAAkBrpD,EAAKs1B,QAGpCA,EAAOjW,QAAQulB,KAAKoY,OAAOxkD,SAAQ,SAAU2jB,GACrCA,EAAKnc,MAAQ6iC,EAAM+lB,YACnBzZ,aAAatM,EAAMkmB,QACnBlmB,EAAMkmB,OAASpwC,OAAO+f,YAAW,WAAc,OAAO8vB,GAAa3lB,OAAO,OAAQ,GAAQ,WACtF,IAAIvgB,EACJ,OAAOmmC,GAAetvD,MAAM,SAAU+tB,GAClC,OAAQA,EAAG/iB,OACP,KAAK,EAED,OADAme,EAAKnpB,KAAKo9C,QACH,CAAC,EAAap6B,EAAKyoB,KAAK5kC,IACnC,KAAK,EAED,OADAsiB,EAAGjpB,MAAMF,KAAM,CAAC+tB,EAAGrI,OAAQ7e,EAAKs1B,IACzB,CAAC,YAGjBA,EAAOjW,QAAQulB,KAAKniC,aAM/CimD,EAAK5vD,UAAUy9C,QAAU,SAAU/0C,EAAMxB,EAAKs1B,GAC1C,IAAIuN,EAAQ1pC,KACZ,GAAoB,IAAhBqI,EAAKtK,OAAT,CAIA,IAAIyoC,EAAgBrK,EAAOA,EAAOM,aAAa7d,QAC3CuxC,GAAmB,EAAGnuC,EAAiC2hC,IAAInd,GAC3Dj1B,EAAI4+C,EAAiB5rC,MACgB,SAApC4X,EAAOjW,QAAQ3c,QAAQ7L,SAAsBy+B,EAAO5yB,QAAQqV,QAAQu2B,YAAc,GACnF3iC,EAAI29C,EAAiB5uC,IACrB6uC,EAAY,GAChB/nD,EAAKhJ,SAAQ,SAAUgxD,EAAUltD,GAC7B,KAAIA,EAAI,GAAR,CAIA,IAAIgV,EAAOk4C,EAASl4C,KACpB,GAAY,KAARtR,EAAY,CACZ,IAAI/D,EAAYqV,EAAKiC,YAAY,KAAO,EACpCk2C,EAAcn4C,EAAKmJ,OAAOxe,GAC1BytD,EAAeD,EAAY1uB,cAAcxgC,QAAQyF,EAAI+6B,eACrD2uB,GAAgB,IAChBD,EAAcA,EAAY1hD,UAAU,EAAG2hD,GAAgB,MACnDD,EAAY1hD,UAAU2hD,EAAcA,EAAe1pD,EAAI9I,QAAU,OACjEuyD,EAAY1hD,UAAU2hD,EAAe1pD,EAAI9I,QAC7Coa,EAAOA,EAAKmJ,OAAO,EAAGxe,GAAawtD,GAG3CF,GAAa,uBAA0B17B,mBAAmB27B,EAAS3tD,OAAS,QAAiB,IAANS,EAAU,+BAAiC,IAAM,KAAOgV,EAAO,gBAE1JnY,KAAK4e,QAAQ2E,UAAY6sC,EACzB,IAAIr/B,EAAaxX,SAASsF,SAAS2xC,YAAY9/B,iBAAiB8V,EAAe,MAC1EiqB,iBAAiB,eAAgB,IACtCzwD,KAAK4e,QAAQc,MAAM6B,IAAM/O,GAAKue,GAAc,IAAM,KAClD/wB,KAAK4e,QAAQc,MAAM6E,KAAOhT,EAAI,KAC9BvR,KAAK4e,QAAQc,MAAMuE,QAAU,QAC7BjkB,KAAK4e,QAAQc,MAAM+qB,MAAQ,OAC3BzqC,KAAK4e,QAAQgB,iBAAiB,UAAUvgB,SAAQ,SAAUuf,GACtDA,EAAQO,iBAAiB,SAAS,SAAU+E,GACxCwlB,EAAMgmB,UAAU9wC,EAASud,GACzBjY,EAAM8N,uBAIVhyB,KAAK4e,QAAQ0F,wBAAwB4lB,OAAS1qB,OAAOC,cACrDzf,KAAK4e,QAAQc,MAAM6B,IAAM/O,EAAIxS,KAAK4e,QAAQ4e,aAAe,MAEzDx9B,KAAK4e,QAAQ0F,wBAAwBmmB,MAAQjrB,OAAO8f,aACpDt/B,KAAK4e,QAAQc,MAAM6E,KAAO,OAC1BvkB,KAAK4e,QAAQc,MAAM+qB,MAAQ,UA/C3BzqC,KAAK4e,QAAQc,MAAMuE,QAAU,QAkDrCsrC,EAAK5vD,UAAU44C,OAAS,SAAUr0B,EAAOiY,GACrC,GAAuD,IAAnDn8B,KAAK4e,QAAQgB,iBAAiB,UAAU7hB,QACT,SAA/BiC,KAAK4e,QAAQc,MAAMuE,QACnB,OAAO,EAEX,IAAIysC,EAAqB1wD,KAAK4e,QAAQU,cAAc,yBACpD,GAAkB,cAAd4E,EAAMrd,IAUN,OATAqd,EAAM8N,iBACN9N,EAAM6N,kBACN2+B,EAAmB/wC,gBAAgB,SAC9B+wC,EAAmBzzB,mBAIpByzB,EAAmBzzB,mBAAmBza,UAAY,uBAHlDxiB,KAAK4e,QAAQ8c,SAAS,GAAGlZ,UAAY,wBAKlC,EAEN,GAAkB,YAAd0B,EAAMrd,IAAmB,CAI9B,GAHAqd,EAAM8N,iBACN9N,EAAM6N,kBACN2+B,EAAmB/wC,gBAAgB,SAC9B+wC,EAAmBjpB,uBAKpBipB,EAAmBjpB,uBAAuBjlB,UAAY,2BALV,CAC5C,IAAImuC,EAAW3wD,KAAK4e,QAAQ8c,SAAS39B,OACrCiC,KAAK4e,QAAQ8c,SAASi1B,EAAW,GAAGnuC,UAAY,uBAKpD,OAAO,EAEN,SAAK,EAAGmoB,EAA0BsE,IAAI/qB,IAAWA,EAAMirB,UAAajrB,EAAMgrB,QAAwB,UAAdhrB,EAAMrd,KAAoBqd,EAAMksB,eACrHlsB,EAAM8N,iBACN9N,EAAM6N,kBACN/xB,KAAK0vD,UAAUgB,EAAoBv0B,IAC5B,IAIfozB,EAAK5vD,UAAUowD,OAAS,SAAUD,EAAkBjM,GAChD,IAUIh9C,EAVA6iC,EAAQ1pC,KAWZ,GAVAA,KAAK8C,WAAa,EAClB9C,KAAKyvD,UAAY,GACjB5L,EAAOxkD,SAAQ,SAAU2jB,GACrB,IAAI4tC,EAAmBd,EAAiB11C,YAAY4I,EAAKnc,KACrD6iC,EAAM5mC,UAAY8tD,IAClBlnB,EAAM+lB,UAAYzsC,EAAKnc,IACvB6iC,EAAM5mC,UAAY8tD,OAIF,IAApB5wD,KAAK8C,UACL,OAAO+D,EAEX,IAAIuJ,EAAY0/C,EAAiB32C,MAAMnZ,KAAKyvD,WACxCoB,EAAWzgD,EAAUA,EAAUrS,OAAS,GACxC+yD,EAAY,GAChB,GAAI1gD,EAAUrS,OAAS,GAAK8yD,EAAS7sC,SAAW6sC,EAC5C,GAAyB,IAArBzgD,EAAUrS,QAAiC,KAAjBqS,EAAU,IAAaA,EAAU,GAAGrS,OAAS+yD,EACvEjqD,EAAMuJ,EAAU,OAEf,CACD,IAAI2gD,EAAU3gD,EAAUA,EAAUrS,OAAS,GAAGZ,OAAO,GACD,OAAhD,EAAGmkC,EAA6B9Z,GAAGupC,IAAoBF,EAAS9yD,OAAS+yD,IACzEjqD,EAAMgqD,GAIlB,OAAOhqD,GAEJ0oD,EA5Qc,GA4RrByB,GAAoB,WACpB,SAASA,EAAG70B,GACRn8B,KAAKmwC,eAAgB,EACrB,IAAI9hB,EAAaxP,SAASG,cAAc,OACxCqP,EAAW7L,UAAY,YACvB6L,EAAW9K,UAAY,0CAA+C4Y,EAAOjW,QAAQ+qC,YAAc,uDACnGjxD,KAAK4e,QAAUyP,EAAW2O,kBAC1Bh9B,KAAKkxD,UAAU/0B,GACfqmB,GAAWrmB,EAAQn8B,KAAK4e,SACxB6jC,GAActmB,EAAQn8B,KAAK4e,SAC3B8jC,GAAUvmB,EAAQn8B,KAAK4e,SACvBglC,GAAYznB,EAAQn8B,KAAK4e,SACzB0lC,GAAYnoB,EAAQn8B,KAAK4e,SACzBmkC,GAAU5mB,EAAQn8B,KAAK4e,SACvBykC,GAAUlnB,EAAQn8B,KAAK4e,QAAS5e,KAAKsuB,MACrCg1B,GAASnnB,EAAQn8B,KAAK4e,QAAS5e,KAAKsuB,MA6LxC,OA3LA0iC,EAAGrxD,UAAU2uB,KAAO,SAAUpK,EAAOiY,GACjC,IAAIyI,EAAQ7gB,eAAeI,WAAW,GACtC,GAAyB,KAArBygB,EAAMrkC,WAAV,CAGA2jB,EAAM6N,kBACN7N,EAAM8N,iBACN,IAAIuK,EAAc1d,SAASG,cAAc,OACzCud,EAAYsE,YAAY+D,EAAMgmB,iBAC9B1mC,EAAMkO,cAAcC,QAAQ,aAAc8J,EAAO5U,KAAK+hB,eAAe/M,EAAYhZ,WAAWS,QAC5FE,EAAMkO,cAAcC,QAAQ,YAAa,MAE7C2+B,EAAGrxD,UAAUuxD,UAAY,SAAU/0B,GAC/B,IAAIuN,EAAQ1pC,KACZA,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GAC7Ci/B,GAAMhnB,EAAQjY,EAAO,CACjBk/B,UAAW,SAAUn0B,GACjBpQ,SAASspB,YAAY,cAAc,EAAOlZ,SAItDjvB,KAAK4e,QAAQO,iBAAiB,oBAAoB,SAAU+E,GACxDwlB,EAAMyG,eAAgB,KAE1BnwC,KAAK4e,QAAQO,iBAAiB,kBAAkB,SAAU+E,IACjD,EAAGymB,EAA6B4E,OACjCrmC,EAAMizB,EAAQpY,eAAeI,WAAW,GAAGC,cAE/CslB,EAAMyG,eAAgB,KAE1BnwC,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GACrB,iBAApBA,EAAM+pB,WAAoD,mBAApB/pB,EAAM+pB,YAI5CvE,EAAMxB,aACNwB,EAAMxB,cAAe,EAGrBwB,EAAMyG,eAAgC,MAAfjsB,EAAM7b,MAA+B,MAAf6b,EAAM7b,MAA+B,MAAf6b,EAAM7b,MAG7Ea,EAAMizB,EAAQpY,eAAeI,WAAW,GAAGC,cAAc,EAAOF,OAEpElkB,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GAC7C,GAA6B,UAAzBA,EAAMlgB,OAAO4tB,QASb,OARI1N,EAAMlgB,OAAO4oD,QACb1oC,EAAMlgB,OAAOygB,aAAa,UAAW,WAGrCP,EAAMlgB,OAAO2b,gBAAgB,WAEjC+pB,EAAMxB,cAAe,OACrByG,GAA2BxS,GAG/B,IAAIyI,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAE7CnT,GAAiB,EAAGjI,EAAsCsJ,IAAInG,EAAMlgB,OAAQ,sBAiBhF,GAhBKglB,IACDA,GAAiB,EAAGjI,EAAsCsJ,IAAIua,EAAME,eAAgB,uBAEpF9b,IACIA,EAAeye,uBAAuBzK,kBACtC4H,EAAM+B,mBAAmB3d,EAAeye,uBAAuBzK,mBAI/D4H,EAAM+B,mBAAmB3d,EAAeye,wBAE5C7C,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,GACxCqO,GAAa9W,IAGY,QAAzBjY,EAAMlgB,OAAO4tB,QAAmB,CAChC,IAAIu/B,EAAcjtC,EAAMlgB,OAAOmoB,cAAc7M,cAAc,4BACvD6xC,IACAvsB,EAAMgB,WAAWurB,IACjB,EAAGnvC,EAAiC6B,IAAI+gB,IAIhD,IAAIjQ,GAAW,EAAG5T,EAAsC6sB,IAAI1pB,EAAMlgB,OAAQ,YAAa,KACvF,IAAI2wB,GAAcA,EAASxT,UAAUiL,SAAS,2BAA9C,CAIA,GAAIlI,EAAMlgB,OAAOk5B,YAAYwM,EAAM9qB,UAAY8qB,EAAM9qB,QAAQwpB,kBAAoBxD,EAAMqL,UAAW,CAC9F,IAAImhB,EAAW1nB,EAAM9qB,QAAQwpB,iBAAiB9jB,wBAC1CJ,EAAM1R,EAAI4+C,EAAS7vC,IAAM6vC,EAASpoD,SACa,MAA3C0gC,EAAM9qB,QAAQwpB,iBAAiBxW,SACyE,KAAxG8X,EAAM9qB,QAAQwpB,iBAAiBvb,YAAY7I,OAAO/mB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,KAChG2Z,EAAM+B,mBAAmB+C,EAAM9qB,QAAQwpB,kBACvCxD,EAAMO,UAAS,KAGfuE,EAAM9qB,QAAQoS,mBAAmB,YAAa,qBAAyBpQ,EAA8B6E,EAAEwF,KAAO,cAC9G,EAAGjJ,EAA6B0sB,IAAIhF,EAAM9qB,QAASgmB,KAItC,KAArBA,EAAMrkC,WACNsvC,EAAajL,EAAOzI,GAIpBoD,YAAW,WACPsQ,GAAa,EAAG7tB,EAA8BuuB,IAAIpU,GAASA,MAGnEsQ,EAASvoB,EAAOiY,GAChB4Z,GAAmB5Z,QA3Bf3c,OAAOghB,KAAK7L,EAASrV,cAAc,qCAAqCuN,gBA6BhF7sB,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GAC7C,IAAIA,EAAMksB,eAAe,EAAGzF,EAA0BsE,IAAI/qB,GAO1D,GAJkB,UAAdA,EAAMrd,KACNosC,GAAa9W,GAEjB4Z,GAAmB5Z,GACA,cAAdjY,EAAMrd,KAAqC,WAAdqd,EAAMrd,KACJ,KAAhCs1B,EAAOoN,GAAG3qB,QAAQ2E,WAA4D,IAAxC4Y,EAAOoN,GAAG3qB,QAAQ+mB,WAAW5nC,SACnEo+B,EAAOoN,GAAG3qB,QAAQoe,mBAAqE,MAAhDb,EAAOoN,GAAG3qB,QAAQoe,kBAAkBpL,SACd,IAA1DuK,EAAOoN,GAAG3qB,QAAQoe,kBAAkBmP,mBACD,KAAlChQ,EAAOoN,GAAG3qB,QAAQiO,aAAwD,OAAlCsP,EAAOoN,GAAG3qB,QAAQiO,YAJlE,CASA,IAAI+X,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC/B,cAAdjY,EAAMrd,MAEF,EAAG8jC,EAA6B4E,OAA8C,OAArC3K,EAAME,eAAejY,aAA8C,IAAtB+X,EAAMc,cAC5Fd,EAAME,eAAejY,YAAc,GACnCgjB,EAAajL,EAAOzI,IAGxBuN,EAAM9qB,QAAQgB,iBAAiB,kBAAkBvgB,SAAQ,SAAU2jB,GAC/D,IAAIspC,EAAYtpC,EAAK1D,cAAc,MAC/BgtC,GACAA,EAAUn+B,aAIbjK,EAAMrd,IAAIzF,QAAQ,UAAY,GACjB,cAAd8iB,EAAMrd,KAAqC,eAAdqd,EAAMrd,KACnCmoD,GAAY7yB,GAEhB0T,EAAajL,EAAOzI,IAEG,MAAlBjY,EAAMmrB,SAAkC,KAAfnrB,EAAM+K,MAA6B,iBAAd/K,EAAMrd,KAEzDgpC,EAAajL,EAAOzI,GAExB,IAAIqR,GAAuB,EAAGzsB,EAAsCsJ,IAAIua,EAAME,eAAgB,sBAC9F,GAAI0I,EAAsB,CACtB,GAAkB,YAAdtpB,EAAMrd,KAAmC,cAAdqd,EAAMrd,IAUjC,OATI2mC,EAAqB/F,uBAAuBzK,kBAC5C4H,EAAM+B,mBAAmB6G,EAAqB/F,uBAAuBzK,mBAIrE4H,EAAM+B,mBAAmB6G,EAAqB/F,wBAElD7C,EAAMO,UAAS,GACfjhB,EAAM8N,kBACC,EAEX,GAAqC,SAAjCwb,EAAqB5b,UACN,cAAd1N,EAAMrd,KAAqC,eAAdqd,EAAMrd,KAWpC,MAVqE,gBAAjE2mC,EAAqBrhB,cAAcjN,aAAa,cAEhDsuB,EAAqBrhB,cAAcq5B,mBAAmB,WAAY5kC,EAA8B6E,EAAEwF,MAClG2Z,EAAMM,SAASsI,EAAqBrhB,cAAc+a,YAAa,IAG/DtC,EAAM+B,mBAAmB6G,EAAqBrhB,cAAcic,kBAEhExD,EAAMO,UAAS,GACfjhB,EAAM8N,kBACC,QAtDXmK,EAAOoN,GAAG3qB,QAAQ2E,UAAY,OA2DnCytC,EA5MY,GAkNnBK,GAAU,SAAUl1B,GACpB,MAA2B,OAAvBA,EAAOM,YACAN,EAAO5U,KAAKsB,QAAQqgB,EAAY/M,IAEX,YAAvBA,EAAOM,YACLN,EAAO5U,KAAK+pC,eAAen1B,EAAOkN,QAAQzqB,QAAQ2E,WAE7B,OAAvB4Y,EAAOM,YACLN,EAAO5U,KAAKgqC,iBAAiBp1B,EAAOoN,GAAG3qB,QAAQ2E,gBADrD,GAMLxB,GAAU5D,EAAoB,KAE9BuC,GAAgBvC,EAAoB,KAMpCqzC,GAAyB,WACzB,SAASA,EAAQC,GACbzxD,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,iBACzBxiB,KAAK4e,QAAQ2E,UAAY,sCAA0CkuC,EAAe,sDAoCtF,OAlCAD,EAAQ7xD,UAAUuF,OAAS,SAAUi3B,GACjC,IAAIhkB,EAAO,GAOX,OALIA,EADyC,UAAzCgkB,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,SACtB,EAAGvD,GAAiCjc,GAAG03B,EAAOl2B,QAAQ2Y,QAAQwpB,iBAAkBpoC,KAAK4e,QAAQwpB,iBAAkBjM,IAG/G,EAAGzb,GAAiCjc,GAAG03B,EAAOA,EAAOM,aAAa7d,QAAS5e,KAAK4e,QAAQwpB,iBAAkBjM,GAE9GhkB,GAEXq5C,EAAQ7xD,UAAUsiD,OAAS,SAAU9lB,EAAQoO,GACzC,IAAIphB,OACS,IAATohB,IAAmBA,GAAO,GAC9B,IAAI5K,EAAwD,QAA1CxW,EAAKgT,EAAOoB,QAAQgO,SAAShiC,eAA4B,IAAP4f,OAAgB,EAASA,EAAG6T,kBAUhG,GATIuN,GAAQ/qB,OAAO8f,YAAc1e,EAAsC6E,EAAE0F,cACrEnrB,KAAK4e,QAAQc,MAAMuE,QAAU,QAC7BjkB,KAAKkF,OAAOi3B,GACG,OAAfwD,QAAsC,IAAfA,GAAiCA,EAAWxe,UAAUC,IAAI,0BAGjFphB,KAAK4e,QAAQc,MAAMuE,QAAU,OACd,OAAf0b,QAAsC,IAAfA,GAAiCA,EAAWxe,UAAUgN,OAAO,yBAEpFpK,eAAe8gB,WAAa,EAAG,CAC/B,IAAID,EAAQ7gB,eAAeI,WAAW,GAClCgY,EAAOA,EAAOM,aAAa7d,QAAQwN,SAASwY,EAAME,iBAClD,EAAG9iB,EAAiC6B,IAAI+gB,GAGxCzI,EAAOA,EAAOM,aAAa7d,QAAQmmB,QAG3CgQ,EAAW5Y,IAERq1B,EAxCiB,GA6CxBjxC,GAAcpC,EAAoB,KAmBlCuzC,GAAyB,WACzB,SAASA,EAAQv1B,GACb,IAAIuN,EAAQ1pC,KACZA,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,iBACzB,IAAIwG,EAAiBnK,SAASG,cAAc,OAC5CgK,EAAexG,UAAY,eACvB2Z,EAAOjW,QAAQyrC,QAAQ1rD,SACvB+iB,EAAe7H,UAAUC,IAAI+a,EAAOjW,QAAQyrC,QAAQ1rD,SAExD+iB,EAAetJ,MAAMu1B,SAAW9Y,EAAOjW,QAAQjgB,QAAQgvC,SAAW,KAClEjsB,EAAe7J,iBAAiB,QAAQ,SAAU+E,GAC9C,GAA6B,aAAzBA,EAAMlgB,OAAO4tB,QAAjB,CAIA,IAAI2K,EAAc1d,SAASG,cAAc,OACzCud,EAAY/Z,UAAY,eACxB+Z,EAAYsE,YAAY9c,eAAeI,WAAW,GAAGymC,iBACrDlhB,EAAMkoB,QAAQz1B,EAAQI,GACtBrY,EAAM8N,qBAEVhJ,EAAe7J,iBAAiB,SAAS,SAAU+E,GAC/C,IAAIiG,GAAc,EAAGpJ,EAAqCqJ,IAAIlG,EAAMlgB,OAAQ,QAC5E,GAAImmB,IAAe,EAAGpJ,EAAsCsJ,IAAIF,EAAa,cAA7E,CACI,IAAIG,EAAiBtB,EAAe1J,cAAc,IAAM6K,EAAYjL,aAAa,mBAC7EoL,IACAof,EAAM9qB,QAAQ8C,UAAY4I,EAAe7I,eAIpB,QAAzByC,EAAMlgB,OAAO4tB,UACb,EAAGnH,EAAgCI,GAAG3G,EAAMlgB,OAAQm4B,EAAOjW,QAAQhE,KAAMia,EAAOjW,QAAQc,UAGhG,IAAI6qC,EAAU11B,EAAOjW,QAAQjgB,QAAQ4rD,QACjCC,EAAgBjzC,SAASG,cAAc,OAC3C8yC,EAActvC,UAAY,yBAE1B,IADA,IAAIuvC,EAAa,GACR5uD,EAAI,EAAGA,EAAI0uD,EAAQ9zD,OAAQoF,IAAK,CACrC,IAAI6uD,EAASH,EAAQ1uD,GACrB,GAAsB,kBAAX6uD,EAIX,OAAQA,GACJ,IAAK,UACDD,EAAW7wD,KAAK,sGAChB,MACJ,IAAK,SACD6wD,EAAW7wD,KAAK,4DAChB,MACJ,IAAK,SACD6wD,EAAW7wD,KAAK,mEAChB,MACJ,IAAK,YACD6wD,EAAW7wD,KAAK,sLAChB,MACJ,IAAK,QACD6wD,EAAW7wD,KAAK,6KAChB,WAlBJ6wD,EAAW7wD,KAAK,oCAAyC8wD,EAAOnrD,IAAM,YAAgBmrD,EAAOxvC,UAAY,KAAQwvC,EAAOr2B,QAAU,gBAAmBq2B,EAAOr2B,QAAU,IAAO,IAAM,KAAQq2B,EAAOpkD,KAAO,aAqBjNkkD,EAAcvuC,UAAYwuC,EAAWt+C,KAAK,IACnB,IAAnBo+C,EAAQ9zD,SACR+zD,EAAcpyC,MAAMuE,QAAU,QAElCjkB,KAAK4e,QAAQiiB,YAAYixB,GACzB9xD,KAAK4e,QAAQiiB,YAAY7X,GACzB8oC,EAAc3yC,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC/E,IAAI+tC,GAAM,EAAG/tB,EAA0CllC,GAAGklB,EAAMlgB,OAAQ,UACxE,GAAKiuD,EAAL,CAGA,IAAIxpD,EAAOwpD,EAAI/yC,aAAa,aACxBgzC,EAAeL,EAAQla,MAAK,SAAUwa,GAAK,OAAc,OAANA,QAAoB,IAANA,OAAe,EAASA,EAAEtrD,OAAS4B,KACpGypD,EACAA,EAAapZ,MAAMrwC,GAGV,cAATA,GAAiC,UAATA,GAKxBugB,EAAetJ,MAAM4b,MADZ,YAAT7yB,EAC6B,OAEf,WAATA,EACwB,QAGA,QAE7BugB,EAAewW,YAAcxW,EAAemD,cAAc5M,cAC1DyJ,EAAetJ,MAAM4b,MAAQ,QAEjCoO,EAAMxkC,OAAOi3B,GACb21B,EAAclyC,iBAAiB,UAAUvgB,SAAQ,SAAU2jB,GACvDA,EAAK7B,UAAUgN,OAAO,sCAE1B8jC,EAAI9wC,UAAUC,IAAI,oCAnBdsoB,EAAMkoB,QAAQz1B,EAAQuN,EAAM9qB,QAAQwpB,iBAAiBI,WAAU,GAAO//B,OA4JlF,OAtIAipD,EAAQ/xD,UAAUuF,OAAS,SAAUi3B,EAAQz5B,GACzC,IAAIgnC,EAAQ1pC,KAEZ,GADAg2C,aAAah2C,KAAKoyD,aACiB,SAA/BpyD,KAAK4e,QAAQc,MAAMuE,QAMvB,GAAIvhB,EACA1C,KAAK4e,QAAQwpB,iBAAiB7kB,UAAY7gB,OAG9C,GAC2D,KADvDwmC,EAAY/M,GACXl/B,QAAQ,qCAAsC,IADnD,CAKA,IAAIo1D,GAAkB,IAAIjkD,MAAOC,UAC7BqzC,EAAexY,EAAY/M,GAC/Bn8B,KAAKoyD,YAAc5yC,OAAO+f,YAAW,WACjC,GAAIpD,EAAOjW,QAAQjgB,QAAQmpB,IAAK,CAC5B,IAAI++B,EAAQ,IAAI5tB,eAChB4tB,EAAM3tB,KAAK,OAAQrE,EAAOjW,QAAQjgB,QAAQmpB,KAC1C++B,EAAM1tB,iBAAiB,eAAgB,kCACvC0tB,EAAM1F,mBAAqB,WACvB,GAAI0F,EAAMzF,aAAenoB,eAAeooB,KACpC,GAAqB,MAAjBwF,EAAM1jD,OAAgB,CACtB,IAAI6nD,EAAe9kC,KAAKC,MAAM0gC,EAAMvtB,cACpC,GAA0B,IAAtB0xB,EAAarjC,KAEb,YADAkN,EAAOmY,IAAI/J,KAAK+nB,EAAajL,KAG7BlrB,EAAOjW,QAAQjgB,QAAQmjB,YACvBkpC,EAAajqD,KAAO8zB,EAAOjW,QAAQjgB,QAAQmjB,UAAUkpC,EAAajqD,OAEtEqhC,EAAM9qB,QAAQwpB,iBAAiB7kB,UAAY+uC,EAAajqD,KACxDqhC,EAAM+K,YAAYtY,EAAQk2B,OAEzB,CACD,IAAIl6C,EAAOgkB,EAAO5U,KAAKsB,QAAQ64B,GAC3BvlB,EAAOjW,QAAQjgB,QAAQmjB,YACvBjR,EAAOgkB,EAAOjW,QAAQjgB,QAAQmjB,UAAUjR,IAE5CuxB,EAAM9qB,QAAQwpB,iBAAiB7kB,UAAYpL,EAC3CuxB,EAAM+K,YAAYtY,EAAQk2B,KAItClE,EAAMztB,KAAKlT,KAAKihC,UAAU,CAAE/M,aAAcA,SAEzC,CACD,IAAIvpC,EAAOgkB,EAAO5U,KAAKsB,QAAQ64B,GAC3BvlB,EAAOjW,QAAQjgB,QAAQmjB,YACvBjR,EAAOgkB,EAAOjW,QAAQjgB,QAAQmjB,UAAUjR,IAE5CuxB,EAAM9qB,QAAQwpB,iBAAiB7kB,UAAYpL,EAC3CuxB,EAAM+K,YAAYtY,EAAQk2B,MAE/Bl2B,EAAOjW,QAAQjgB,QAAQqD,YA5CtBtJ,KAAK4e,QAAQwpB,iBAAiB7kB,UAAY,OAXK,sBAA3CvjB,KAAK4e,QAAQM,aAAa,cAC1Bid,EAAOmY,IAAI4R,QAwDvBwL,EAAQ/xD,UAAU80C,YAAc,SAAUtY,EAAQo2B,GAC1Cp2B,EAAOjW,QAAQjgB,QAAQwnB,OACvB0O,EAAOjW,QAAQjgB,QAAQwnB,MAAMztB,KAAK4e,SAEtC,IAAI4zC,GAAQ,IAAIpkD,MAAOC,UAAYkkD,GAC9B,IAAInkD,MAAOC,UAAYkkD,EAAa,MAErCp2B,EAAOmY,IAAI/J,KAAK/qB,OAAOkK,WAAW+oC,eAAex1D,QAAQ,OAAQu1D,EAAKjyD,aACtE47B,EAAOl2B,QAAQ2Y,QAAQ6F,aAAa,YAAa,sBAES,sBAArD0X,EAAOl2B,QAAQ2Y,QAAQM,aAAa,eACzCid,EAAOmY,IAAI4R,OACX/pB,EAAOl2B,QAAQ2Y,QAAQe,gBAAgB,cAE3C,IAAI+yC,EAAkBv2B,EAAOl2B,QAAQ2Y,QAAQU,cAAc,0BACvDozC,GACAA,EAAgBvxC,UAAUgN,OAAO,0BAErC,EAAG5P,EAA2Bnc,GAAG+5B,EAAOl2B,QAAQ2Y,QAAQwpB,mBACxD,EAAG1pB,EAAqC/E,GAAGwiB,EAAOjW,QAAQjgB,QAAQugB,KAAM2V,EAAOl2B,QAAQ2Y,QAAQwpB,iBAAkBjM,EAAOjW,QAAQE,MAChI,EAAG5F,EAAiCrd,GAAGg5B,EAAOl2B,QAAQ2Y,QAAQwpB,iBAAkBjM,EAAOjW,QAAQE,IAAK+V,EAAOjW,QAAQc,QACnH,EAAGxI,EAAqCqG,GAAGsX,EAAOl2B,QAAQ2Y,QAAQwpB,iBAAkBjM,EAAOjW,QAAQE,MACnG,EAAG3H,EAAmCuH,GAAGmW,EAAOl2B,QAAQ2Y,QAAQwpB,iBAAkBjM,EAAOjW,QAAQE,MACjG,EAAG9H,EAA6ByL,GAAGoS,EAAOl2B,QAAQ2Y,QAAQwpB,iBAAkBjM,EAAOjW,QAAQE,IAAK+V,EAAOjW,QAAQc,QAC/G,EAAGvG,EAAiCoE,GAAGsX,EAAOl2B,QAAQ2Y,QAAQwpB,iBAAkBjM,EAAOjW,QAAQE,IAAK+V,EAAOjW,QAAQc,QACnH,EAAGrG,EAAmCqJ,GAAGmS,EAAOl2B,QAAQ2Y,QAAQwpB,iBAAkBjM,EAAOjW,QAAQE,MACjG,EAAGhI,EAAyB6L,GAAGkS,EAAOl2B,QAAQ2Y,QAAQwpB,iBAAkBjM,EAAOjW,QAAQE,MACvF,EAAG7F,GAA6B2J,GAAGiS,EAAOl2B,QAAQ2Y,QAAQwpB,kBAE1D,IAAI5B,EAAgBrK,EAAOl2B,QAAQ2Y,QAC/Bwd,EAAUD,EAAO5yB,QAAQrE,OAAOi3B,GACpB,KAAZC,IACAA,EAAU,SAEdoK,EAAc5mB,iBAAiB,2BAA2BvgB,SAAQ,SAAU2jB,GACxEA,EAAKO,UAAY6Y,GACjB,EAAG9b,EAA2BwJ,GAAG9G,EAAM,CACnCoD,IAAK+V,EAAOjW,QAAQE,IACpBQ,KAAMuV,EAAOjW,QAAQjgB,QAAQ2gB,WAGrC,EAAGtG,EAA2BwJ,GAAGqS,EAAOl2B,QAAQ2Y,QAAQwpB,iBAAkB,CACtEhiB,IAAK+V,EAAOjW,QAAQE,IACpBQ,KAAMuV,EAAOjW,QAAQjgB,QAAQ2gB,QAGrC8qC,EAAQ/xD,UAAUiyD,QAAU,SAAUz1B,EAAQw2B,EAAalqD,QAC1C,IAATA,IAAmBA,EAAO,aAEjB,UAATA,EACAkqD,EAAY/yC,iBAAiB,qBAAqBvgB,SAAQ,SAAU2jB,GAChEA,EAAKtD,MAAMuE,QAAU,aAIzB0uC,EAAY/yC,iBAAiB,kBAAkBvgB,SAAQ,SAAU2jB,GAC7DA,EAAK6M,UAAY,yFAAkG7M,EAAK9D,aAAa,aAAe,mEAI5JyzC,EAAYjzC,MAAMub,gBAAkB,OAEpC03B,EAAY/yC,iBAAiB,QAAQvgB,SAAQ,SAAU2jB,GACnDA,EAAKtD,MAAMkzC,gBAAkB,UAEjC5yD,KAAK4e,QAAQ2U,OAAOo/B,GACpB,IAAI/tB,EAAQ+tB,EAAY3tB,cAAcC,cACtCL,EAAMgB,WAAW+sB,IACjB,EAAG3wC,EAAiC6B,IAAI+gB,GACxC/lB,SAASspB,YAAY,QACrBnoC,KAAK4e,QAAQwpB,iBAAiBja,SAC9BgO,EAAOmY,IAAI/J,KAAK,UAAmD,UAAT9hC,EAAmB,KAAO,WAAa,SAE9FipD,EA7OiB,GAkPxBmB,GAAwB,WACxB,SAASA,EAAO12B,GACZn8B,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,gCAAkC2Z,EAAOjW,QAAQwkB,OAAOhtC,SACjFsC,KAAK4e,QAAQ2E,UAAY,qEACzBvjB,KAAKkxD,UAAU/0B,GA0CnB,OAxCA02B,EAAOlzD,UAAUuxD,UAAY,SAAU/0B,GACnC,IAAIuN,EAAQ1pC,KACZA,KAAK4e,QAAQO,iBAAiB,aAAa,SAAU+E,GACjD,IAAI4uC,EAAej0C,SACfrM,EAAI0R,EAAM6uC,QACV/pD,EAASmzB,EAAOvd,QAAQ4e,aACxB4W,EAAY,GAAKjY,EAAOvd,QAAQU,cAAc,mBAAmBogB,aACrEozB,EAAaE,YAAc,WAAc,OAAO,GAC5CxzC,OAAOyzC,eACPzzC,OAAOyzC,gBAEXvpB,EAAM9qB,QAAQuC,UAAUC,IAAI,2BAC5B0xC,EAAaI,YAAc,SAAUC,GACM,QAAnCh3B,EAAOjW,QAAQwkB,OAAOhtC,SACtBy+B,EAAOvd,QAAQc,MAAM1W,OAASjM,KAAKgE,IAAIqzC,EAAWprC,GAAUwJ,EAAI2gD,EAAUJ,UAAY,KAGtF52B,EAAOvd,QAAQc,MAAM1W,OAASjM,KAAKgE,IAAIqzC,EAAWprC,GAAUmqD,EAAUJ,QAAUvgD,IAAM,KAEtF2pB,EAAOjW,QAAQmvB,iBACflZ,EAAOgN,GAAGvqB,QAAQc,MAAM0zC,cACpBj3B,EAAOgN,GAAGvqB,QAAQuN,cAAcqR,aAAe,EAAI,OAG/Ds1B,EAAavO,UAAY,WACjBpoB,EAAOjW,QAAQwkB,OAAOrhC,OACtB8yB,EAAOjW,QAAQwkB,OAAOrhC,MAAM8yB,EAAOvd,QAAQ4e,aAAex0B,GAE1DwW,OAAOyzC,eACPzzC,OAAOyzC,gBAEXH,EAAaI,YAAc,KAC3BJ,EAAavO,UAAY,KACzBuO,EAAaE,YAAc,KAC3BF,EAAaO,cAAgB,KAC7BP,EAAaQ,SAAW,KACxB5pB,EAAM9qB,QAAQuC,UAAUgN,OAAO,gCAIpC0kC,EA/CgB,GAyDvBU,GAAwB,WACxB,SAASA,EAAOp3B,GACZn8B,KAAKmwC,eAAgB,EACrBnwC,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,yBACzBxiB,KAAK4e,QAAQ6F,aAAa,cAAe0X,EAAOjW,QAAQ+qC,aACxDjxD,KAAK4e,QAAQ6F,aAAa,kBAAmB,QAC7CzkB,KAAK4e,QAAQ6F,aAAa,aAAc,SACxCzkB,KAAKkxD,UAAU/0B,GACfqmB,GAAWrmB,EAAQn8B,KAAK4e,SACxB8jC,GAAUvmB,EAAQn8B,KAAK4e,SACvBglC,GAAYznB,EAAQn8B,KAAK4e,SACzB0lC,GAAYnoB,EAAQn8B,KAAK4e,SACzBmkC,GAAU5mB,EAAQn8B,KAAK4e,SACvBykC,GAAUlnB,EAAQn8B,KAAK4e,QAAS5e,KAAKsuB,MACrCg1B,GAASnnB,EAAQn8B,KAAK4e,QAAS5e,KAAKsuB,MA0ExC,OAxEAilC,EAAO5zD,UAAU2uB,KAAO,SAAUpK,EAAOiY,GACrCjY,EAAM6N,kBACN7N,EAAM8N,iBACN9N,EAAMkO,cAAcC,QAAQ,aAAckwB,GAAcpmB,EAAOA,EAAOM,aAAa7d,WAEvF20C,EAAO5zD,UAAUuxD,UAAY,SAAU/0B,GACnC,IAAIuN,EAAQ1pC,KACZA,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GAC7Ci/B,GAAMhnB,EAAQjY,EAAO,CACjBk/B,UAAW,SAAUn0B,GACjBpQ,SAASspB,YAAY,cAAc,EAAOlZ,SAItDjvB,KAAK4e,QAAQO,iBAAiB,UAAU,WACpC,GAA6C,UAAzCgd,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,QAAjC,CAGA,IAAIuvC,EAAgB9pB,EAAM9qB,QAAQ8C,UAC9B+xC,EAAa/pB,EAAM9qB,QAAQ8gB,aAC3Bg0B,EAAmBhqB,EAAM9qB,QAAQ6gB,aAAek0B,WAAWjqB,EAAM9qB,QAAQc,MAAM0zC,eAAiB,KAChGntD,EAAUk2B,EAAOl2B,QAAQ2Y,QAEzB3Y,EAAQyb,UADP8xC,EAAgBC,EAAa,IACTD,EAAgBC,GACjCxtD,EAAQw5B,aAAei0B,EAAmBD,EAG1BD,EAChBvtD,EAAQw5B,aAAei0B,MAGnC1zD,KAAK4e,QAAQO,iBAAiB,oBAAoB,SAAU+E,GACxDwlB,EAAMyG,eAAgB,KAE1BnwC,KAAK4e,QAAQO,iBAAiB,kBAAkB,SAAU+E,IACjD,EAAGymB,EAA6B4E,OACjCgD,EAAWpW,EAAQjY,GAEvBwlB,EAAMyG,eAAgB,KAE1BnwC,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GACrB,iBAApBA,EAAM+pB,WAAoD,mBAApB/pB,EAAM+pB,YAI5CvE,EAAMyG,eAAgC,MAAfjsB,EAAM7b,MAA+B,MAAf6b,EAAM7b,MAA+B,MAAf6b,EAAM7b,OAGzEqhC,EAAMxB,aACNwB,EAAMxB,cAAe,EAGzBqK,EAAWpW,EAAQjY,QAEvBlkB,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GACzCA,EAAMksB,cAAe,EAAGzF,EAA0BsE,IAAI/qB,KAGvC,cAAdA,EAAMrd,KAAqC,WAAdqd,EAAMrd,KACJ,KAAhCs1B,EAAOgN,GAAGvqB,QAAQ2E,WAA4D,IAAxC4Y,EAAOgN,GAAGvqB,QAAQ+mB,WAAW5nC,SACnEo+B,EAAOgN,GAAGvqB,QAAQoe,mBAAqE,QAAhDb,EAAOgN,GAAGvqB,QAAQoe,kBAAkBpL,SACd,IAA1DuK,EAAOgN,GAAGvqB,QAAQoe,kBAAkBmP,mBACiB,KAApDhQ,EAAOgN,GAAGvqB,QAAQoe,kBAAkBnQ,aAAwD,OAAlCsP,EAAOgN,GAAGvqB,QAAQiO,YAKlE,UAAd3I,EAAMrd,KACNosC,GAAa9W,GAJbA,EAAOgN,GAAGvqB,QAAQ2E,UAAY,QAQnCgwC,EAzFgB,GA8FvBK,GAAqB,WACrB,SAASA,IACL5zD,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,aAsB7B,OApBAoxC,EAAIj0D,UAAU4qC,KAAO,SAAU38B,EAAM4kD,GACjC,IAAI9oB,EAAQ1pC,KAGZ,QAFa,IAATwyD,IAAmBA,EAAO,KAC9BxyD,KAAK4e,QAAQ4D,UAAY,8BACZ,IAATgwC,EAKA,OAJAxyD,KAAK4e,QAAQ2E,UAAY,oCAAwC3V,EAAO,sDACxE5N,KAAK4e,QAAQU,cAAc,sBAAsBH,iBAAiB,SAAS,WACvEuqB,EAAMwc,UAIdlmD,KAAK4e,QAAQ2E,UAAY,oCAAwC3V,EAAO,SACxE2xB,YAAW,WACPmK,EAAMwc,SACPsM,IAEPoB,EAAIj0D,UAAUumD,KAAO,WACjBlmD,KAAK4e,QAAQ4D,UAAY,2BACzBxiB,KAAK4e,QAAQ2E,UAAY,IAEtBqwC,EAzBa,GAgCpBC,GAAiB,SAAU/sC,EAAMqV,GACjC,GAAIA,EAAOjW,QAAQjgB,QAAQ6gB,OAASA,EAApC,CAIA,OADAqV,EAAOjW,QAAQjgB,QAAQ6gB,KAAOA,EACtBA,GACJ,IAAK,OACDqV,EAAOgN,GAAGvqB,QAAQc,MAAMuE,QAAU,QAClCkY,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,QAAU,QACvCkY,EAAOl2B,QAAQf,OAAOi3B,GACtB4O,EAAkB5O,EAAOoB,QAAQgO,SAAU,CAAC,SAC5C,MACJ,IAAK,SACDpP,EAAOgN,GAAGvqB,QAAQc,MAAMuE,QAAU,QAClCkY,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,QAAU,OACvC2mB,EAAqBzO,EAAOoB,QAAQgO,SAAU,CAAC,SAC/C,MACJ,QACI,MAEJpP,EAAOwN,UACPxN,EAAOwN,SAASF,aAAatN,KAKjC23B,GAAqD,WACrD,IAAI1S,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV9B,GAiBrDuS,GAAsB,SAAU5R,GAEhC,SAAS4R,EAAK53B,EAAQ2kB,GAClB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAoBnD,MAnBoC,SAAhCm8B,EAAOjW,QAAQjgB,QAAQ6gB,MACvB4iB,EAAM9qB,QAAQ8c,SAAS,GAAGva,UAAUC,IAAI,wBAE5CsoB,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3F,IAAIyb,EAAa+J,EAAM9qB,QAAQoe,kBAC3B2C,EAAWxe,UAAUiL,SAASxL,EAA6C6E,EAAE2F,uBAGjFlH,EAAM8N,iBACqB,OAAvBmK,EAAOM,cAGyB,SAAhCN,EAAOjW,QAAQjgB,QAAQ6gB,KACvB+sC,GAAe,SAAU13B,GAGzB03B,GAAe,OAAQ13B,QAGxBuN,EAEX,OAxBAoqB,GAAaC,EAAM5R,GAwBZ4R,EAzBc,CA0BvBlT,IAIEmT,GAAoB,WACpB,SAASA,IACLh0D,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,qBAE7B,OAAOwxC,EALY,GAUnBtpC,GAAevM,EAAoB,KAEnC81C,GAA0D,WAC1D,IAAI7S,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAVzB,GAkB1D0S,GAA2B,SAAU/R,GAErC,SAAS+R,EAAU/3B,EAAQ2kB,GACvB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAC/C6rC,EAAYnC,EAAM9qB,QAAQ8c,SAAS,GACnCkQ,EAAe/sB,SAASG,cAAc,OAC1C4sB,EAAappB,UAAY,eAAoC,IAAnBs+B,EAAShV,MAAc,GAAK,wBACtE,IAAIvoB,EAAY,GAiBhB,OAhBA3C,EAA4C6E,EAAE6F,WAAWjsB,SAAQ,SAAU2nB,GACvEzD,GAAa,WAAayD,EAAQ,eAEtC4kB,EAAaroB,UACT,yCAA4C/D,OAAOC,YAAc,EAAI,OAAU8D,EAAY,SAC/FqoB,EAAazsB,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GACjD,WAAzBA,EAAMlgB,OAAO4tB,UACbwZ,EAAUjP,EAAQ,CAAC,eACnBA,EAAOjW,QAAQjgB,QAAQugB,KAAK9G,MAAQwE,EAAMlgB,OAAO6oB,aACjD,EAAGnC,GAA+BR,GAAGhG,EAAMlgB,OAAO6oB,YAAasP,EAAOjW,QAAQE,KAC9ElC,EAAM8N,iBACN9N,EAAM6N,sBAGd2X,EAAM9qB,QAAQiiB,YAAY+K,GAC1BD,EAAcxP,EAAQyP,EAAcC,EAAWiV,EAAShV,OACjDpC,EAEX,OAzBAuqB,GAAkBC,EAAW/R,GAyBtB+R,EA1BmB,CA2B5BrT,IAIEsT,GAA6D,WAC7D,IAAI/S,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAVtB,GAiB7D4S,GAA8B,SAAUjS,GAExC,SAASiS,EAAaj4B,EAAQ2kB,GAC1B,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAC/C6rC,EAAYnC,EAAM9qB,QAAQ8c,SAAS,GACnCkQ,EAAe/sB,SAASG,cAAc,OAC1C4sB,EAAappB,UAAY,eAAoC,IAAnBs+B,EAAShV,MAAc,GAAK,wBACtE,IAAIvoB,EAAY,GAiBhB,OAhBAgO,OAAOs0B,KAAK1pB,EAAOjW,QAAQjgB,QAAQ+gB,MAAM2E,MAAMtsB,SAAQ,SAAUwH,GAC7D0c,GAAa,sBAAyB1c,EAAM,KAAQs1B,EAAOjW,QAAQjgB,QAAQ+gB,MAAM2E,KAAK9kB,GAAO,eAEjG+kC,EAAaroB,UACT,yCAA4C/D,OAAOC,YAAc,EAAI,OAAU8D,EAAY,SAC/FqoB,EAAazsB,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GACjD,WAAzBA,EAAMlgB,OAAO4tB,UACbwZ,EAAUjP,EAAQ,CAAC,eACnBA,EAAOjW,QAAQjgB,QAAQ+gB,MAAM4C,QAAU1F,EAAMlgB,OAAOkb,aAAa,cACjE,EAAG2B,EAAqC8I,GAAGwS,EAAOjW,QAAQjgB,QAAQ+gB,MAAM4C,QAASuS,EAAOjW,QAAQjgB,QAAQ+gB,MAAM6C,MAC9G3F,EAAM8N,iBACN9N,EAAM6N,sBAGd2X,EAAM9qB,QAAQiiB,YAAY+K,GAC1BD,EAAcxP,EAAQyP,EAAcC,EAAWiV,EAAShV,OACjDpC,EAEX,OAzBAyqB,GAAqBC,EAAcjS,GAyB5BiS,EA1BsB,CA2B/BvT,IAIEwT,GAAyB,WACzB,SAASA,EAAQl4B,GACbn8B,KAAK4e,QAAUC,SAASG,cAAc,QACtChf,KAAK4e,QAAQ4D,UAAY,yDACzBxiB,KAAKkF,OAAOi3B,EAAQ,IAgCxB,OA9BAk4B,EAAQ10D,UAAUuF,OAAS,SAAUi3B,EAAQ/U,GACzC,IAAIrpB,EAASqpB,EAAOukC,SAAS,MAAQvkC,EAAOrpB,OAAS,EAAIqpB,EAAOrpB,OAChE,GAAoC,SAAhCo+B,EAAOjW,QAAQ/c,QAAQV,MAAmB0zB,EAAOA,EAAOM,aAAc,CACtE,IAAIF,EAAcJ,EAAOA,EAAOM,aAAa7d,QAAQ4pB,WAAU,GAC/DjM,EAAY3c,iBAAiB,4BAA4BvgB,SAAQ,SAAU2jB,GACvEA,EAAKmL,YAETpwB,EAASw+B,EAAY1P,YAAY9uB,OAEK,kBAA/Bo+B,EAAOjW,QAAQ/c,QAAQpI,KAC1BhD,EAASo+B,EAAOjW,QAAQ/c,QAAQpI,IAChCf,KAAK4e,QAAQ4D,UAAY,uCAGzBxiB,KAAK4e,QAAQ4D,UAAY,iBAE7BxiB,KAAK4e,QAAQ2E,UAAYxlB,EAAS,IAAMo+B,EAAOjW,QAAQ/c,QAAQpI,KAG/Df,KAAK4e,QAAQ2E,UAAY,GAAKxlB,EAElCiC,KAAK4e,QAAQ6F,aAAa,aAAc0X,EAAOjW,QAAQ/c,QAAQV,MAC3D0zB,EAAOjW,QAAQ/c,QAAQE,OACvB8yB,EAAOjW,QAAQ/c,QAAQE,MAAMtL,EAAQ,CACjCqL,OAAQ+yB,EAAOjW,QAAQ/c,QAAQC,OAC/BrI,IAAKo7B,EAAOjW,QAAQ/c,QAAQpI,IAC5B0H,KAAM0zB,EAAOjW,QAAQ/c,QAAQV,QAIlC4rD,EApCiB,GAyCxBC,GAAuD,WACvD,IAAIlT,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV5B,GAgBvD+S,GAAwB,SAAUpS,GAElC,SAASoS,EAAOp4B,EAAQ2kB,GACpB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KASnD,OARA0pC,EAAM9qB,QAAQ8c,SAAS,GAAGnY,UAAYu9B,EAAS73C,KAC/CygC,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3FA,EAAM8N,iBACF9N,EAAMgO,cAAc/Q,UAAUiL,SAASxL,EAA6C6E,EAAE2F,sBAG1F01B,EAAShI,MAAM50B,EAAOiY,MAEnBuN,EAEX,OAbA4qB,GAAeC,EAAQpS,GAahBoS,EAdgB,CAezB1T,IAIE2T,GAAyD,WACzD,IAAIpT,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV1B,GAiBzDiT,GAA0B,SAAUtS,GAEpC,SAASsS,EAASt4B,EAAQ2kB,GACtB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAmBnD,OAlBA0pC,EAAM9qB,QAAQoe,kBAAkB7d,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GACjG,IAAIyb,EAAa+J,EAAM9qB,QAAQoe,kBAC3B2C,EAAWxe,UAAUiL,SAASxL,EAA6C6E,EAAE2F,uBAGjFlH,EAAM8N,iBACF2N,EAAWxe,UAAUiL,SAAS,yBAC9BuT,EAAWxe,UAAUgN,OAAO,wBAC5BgO,EAAOwN,SAAS/qB,QAAQc,MAAMuE,QAAU,OACxC8wB,EAAW5Y,KAGXwD,EAAWxe,UAAUC,IAAI,wBACzB+a,EAAOwN,SAAS/qB,QAAQc,MAAMuE,QAAU,QACxC8wB,EAAW5Y,GACXA,EAAOwN,SAASF,aAAatN,QAG9BuN,EAEX,OAvBA8qB,GAAiBC,EAAUtS,GAuBpBsS,EAxBkB,CAyB3B5T,IAIE6T,GAAyB,WACzB,SAASA,IACL10D,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,0BAE7B,OAAOkyC,EALiB,GAUxBC,GAAsD,WACtD,IAAIvT,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV7B,GAkBtDoT,GAAuB,SAAUzS,GAEjC,SAASyS,EAAMz4B,EAAQ2kB,GACnB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAC/C4rC,EAAe/sB,SAASG,cAAc,OAC1C4sB,EAAappB,UAAY,mCACzB,IAAIqyC,EAAkB,GACtBtjC,OAAOs0B,KAAK1pB,EAAOjW,QAAQulB,KAAKD,OAAOnsC,SAAQ,SAAUwH,GACrD,IAAIiuD,EAAa34B,EAAOjW,QAAQulB,KAAKD,MAAM3kC,GACvCiuD,EAAW1zD,QAAQ,MAAQ,EAC3ByzD,GAAmB,wBAA2BhuD,EAAM,kBAAsBA,EAAM,yBAA6BA,EAAM,kBAAsBA,EAAM,uCAA6CiuD,EAAa,eAGzMD,GAAmB,uBAA0BC,EAAa,kBAAsBjuD,EAAM,uCAA4CiuD,EAAa,sBAGvJ,IAAIC,EAAW,yFAA+F54B,EAAOjW,QAAQulB,KAAKupB,WAAa,IAAM,kBAKrJ,OAJAppB,EAAaroB,UAAY,kDAAiF,SAA1B4Y,EAAOjW,QAAQld,OAAoB,OAASmzB,EAAOjW,QAAQld,OAAS,IAAM,OAAU6rD,EAAkB,SAAWE,EACjMrrB,EAAM9qB,QAAQiiB,YAAY+K,GAC1BD,EAAcxP,EAAQyP,EAAclC,EAAM9qB,QAAQ8c,SAAS,GAAIolB,EAAShV,OACxEpC,EAAM4Y,WAAWnmB,EAAQyP,GAClBlC,EAsCX,OA1DAirB,GAAcC,EAAOzS,GAsBrByS,EAAMj1D,UAAU2iD,WAAa,SAAUnmB,EAAQyP,GAC3CA,EAAahsB,iBAAiB,yBAAyBvgB,SAAQ,SAAUuf,GACrEA,EAAQO,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GACzEA,EAAM8N,iBACN,IAAItvB,EAAQkc,EAAQM,aAAa,cAC7B0lB,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7ChkB,EAAOzV,EAOX,GAN2B,YAAvBy5B,EAAOM,YACPtkB,EAAOgkB,EAAO5U,KAAKqV,cAAcl6B,GAEL,OAAvBy5B,EAAOM,cACZtkB,EAAOgkB,EAAO5U,KAAKoV,gBAAgBj6B,IAEnCA,EAAMtB,QAAQ,MAAQ,GAA4B,OAAvB+6B,EAAOM,YAAsB,CACxD,IAAIF,EAAc1d,SAASG,cAAc,OACzCud,EAAYhZ,UAAYpL,EACxBA,EAAOokB,EAAYS,kBAAkBA,kBAAkBnN,UAAY,KACnE,EAAG7N,EAA0B+sC,IAAI52C,EAAMgkB,QAGvCyI,EAAMqP,kBACNrP,EAAMiD,WAAWhpB,SAASipB,eAAeplC,IAE7CkiC,EAAMO,UAAS,IACf,EAAGnjB,EAAiC6B,IAAI+gB,GACxCgH,EAAalsB,MAAMuE,QAAU,OAC7B2oB,GAAgBzQ,MAEpBvd,EAAQO,iBAAiB,aAAa,SAAU+E,GACf,WAAzBA,EAAMlgB,OAAO4tB,UACbga,EAAatsB,cAAc,uBAAuBiE,UAC9CW,EAAMlgB,OAAOkb,aAAa,oBAKvC01C,EA3De,CA4DxB/T,IAMEoU,GAAW,SAAU94B,EAAQoM,EAASse,GACtC,IAAIlyB,EAAW9V,SAASG,cAAc,KAClC,aAAc2V,GACdA,EAASsgC,SAAWpO,EACpBlyB,EAASjV,MAAMuE,QAAU,OACzB0Q,EAASxE,KAAOd,IAAIG,gBAAgB,IAAIL,KAAK,CAACoZ,KAC9C1pB,SAAS4D,KAAKoe,YAAYlM,GAC1BA,EAASmkB,QACTnkB,EAASxG,UAGTgO,EAAOmY,IAAI/J,KAAK/qB,OAAOkK,WAAWwrC,YAAa,IAGnDC,GAAiB,SAAUh5B,GAC3B,IAAIoM,EAAUW,EAAY/M,GAC1B84B,GAAS94B,EAAQoM,EAASA,EAAQjnB,OAAO,EAAG,IAAM,QAElD8zC,GAAY,SAAUj5B,GACtBA,EAAOmY,IAAI/J,KAAK/qB,OAAOkK,WAAW2rC,SAAU,MAC5C,IAAIC,EAASz2C,SAASS,cAAc,UACpCg2C,EAAOC,gBAAgB/0B,OACvB80B,EAAOC,gBAAgBC,MAAM,gCAAqCr5B,EAAOjW,QAAQE,IAAM,oCAAwC+V,EAAOjW,QAAQE,IAAM,yPAA8P+V,EAAOjW,QAAQjgB,QAAQ+gB,MAAQ,yCAA6CmV,EAAOjW,QAAQjgB,QAAQugB,KAAK9G,MAAQ,yGAClgB41C,EAAOC,gBAAgBp2B,QACvBI,YAAW,WACP+1B,EAAOG,cAAcC,YAAYxsB,EAAY/M,GAAS,OACvD,MAEHw5B,GAAa,SAAUx5B,GACvB,IAAIoM,EAAU8oB,GAAQl1B,GAClBhkB,EAAO,4DAAmEgkB,EAAOjW,QAAQE,IAAM,oCAAwC+V,EAAOjW,QAAQE,IAAM,iBAAmB+V,EAAOjW,QAAQhE,KAAO,iCAAoCia,EAAOjW,QAAQE,IAAM,wFAA8FmiB,EAAU,gHAAkHpM,EAAOjW,QAAQjgB,QAAQ+gB,MAAM4C,QAAU,OAASuS,EAAOjW,QAAQjgB,QAAQ+gB,MAAM6C,KAAO,2EAA6E2D,KAAKihC,UAAUtyB,EAAOjW,QAAQjgB,QAAQugB,MAAQ,sBAAwB2V,EAAOjW,QAAQE,IAAM,+DAAiE+V,EAAOjW,QAAQE,IAAM,qBAAuBoH,KAAKihC,UAAUtyB,EAAOjW,QAAQjgB,QAAQ2gB,MAAQ,yDAA2DuV,EAAOjW,QAAQE,IAAM,OAAS+V,EAAOjW,QAAQc,MAAQ,oDAAsDmV,EAAOjW,QAAQE,IAAM,mDAAqD+V,EAAOjW,QAAQE,IAAM,gDAAkD+V,EAAOjW,QAAQE,IAAM,OAAS+V,EAAOjW,QAAQc,MAAQ,kDAAoDmV,EAAOjW,QAAQE,IAAM,OAAS+V,EAAOjW,QAAQc,MAAQ,8CAAgDmV,EAAOjW,QAAQE,IAAM,qHAAsH+V,EAAOjW,QAAQE,IAAM,kBAAoB+V,EAAOjW,QAAQjd,KAAO,gCAClkDgsD,GAAS94B,EAAQhkB,EAAMowB,EAAQjnB,OAAO,EAAG,IAAM,UAI/Cs0C,GAAuD,WACvD,IAAIxU,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV5B,GAiBvDqU,GAAwB,SAAU1T,GAElC,SAAS0T,EAAO15B,EAAQ2kB,GACpB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAC/C6rC,EAAYnC,EAAM9qB,QAAQ8c,SAAS,GACnCkQ,EAAe/sB,SAASG,cAAc,OA0B1C,OAzBA4sB,EAAappB,UAAY,eAAoC,IAAnBs+B,EAAShV,MAAc,GAAK,wBACtEF,EAAaroB,UAAY,+HACzBqoB,EAAazsB,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC9E,IAAIyb,EAAazb,EAAMlgB,OACvB,GAA2B,WAAvB27B,EAAW/N,QAAsB,CACjC,OAAQ+N,EAAWzgB,aAAa,cAC5B,IAAK,WACDi2C,GAAeh5B,GACf,MACJ,IAAK,MACDi5B,GAAUj5B,GACV,MACJ,IAAK,OACDw5B,GAAWx5B,GACX,MACJ,QACI,MAERiP,EAAUjP,EAAQ,CAAC,eACnBjY,EAAM8N,iBACN9N,EAAM6N,sBAGd2X,EAAM9qB,QAAQiiB,YAAY+K,GAC1BD,EAAcxP,EAAQyP,EAAcC,EAAWiV,EAAShV,OACjDpC,EAEX,OAhCAksB,GAAeC,EAAQ1T,GAgChB0T,EAjCgB,CAkCzBhV,IAIEiV,GAA2D,WAC3D,IAAI1U,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAVxB,GAgB3DuU,GAA4B,SAAU5T,GAEtC,SAAS4T,EAAW55B,EAAQ2kB,GACxB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAEnD,OADA0pC,EAAM4Y,WAAWnmB,EAAQ2kB,GAClBpX,EAiDX,OArDAosB,GAAmBC,EAAY5T,GAM/B4T,EAAWp2D,UAAU2iD,WAAa,SAAUnmB,EAAQ2kB,GAChD9gD,KAAK4e,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC1FA,EAAM8N,iBACFmK,EAAOvd,QAAQ4D,UAAU8G,SAAS,uBAC7Bw3B,EAAShV,QACV9rC,KAAKujB,UAAYu9B,EAAS73C,MAE9BkzB,EAAOvd,QAAQc,MAAMs2C,OAAS,GAC9Bn3C,SAAS4D,KAAK/C,MAAM0f,SAAW,GAC/BjD,EAAOvd,QAAQuC,UAAUgN,OAAO,sBAChCoD,OAAOs0B,KAAK1pB,EAAOoB,QAAQgO,UAAUlsC,SAAQ,SAAUwH,GACnD,IAAIovD,EAAa95B,EAAOoB,QAAQgO,SAAS1kC,GAAKuqC,WAC1C6kB,IACAA,EAAWzzC,UAAYyzC,EAAWzzC,UAAUvlB,QAAQ,MAAO,WAG/Dk/B,EAAOhzB,UACPgzB,EAAOhzB,QAAQyV,QAAQ4D,UAAY2Z,EAAOhzB,QAAQyV,QAAQ4D,UAAUvlB,QAAQ,MAAO,UAIlF6jD,EAAShV,QACV9rC,KAAKujB,UAAY,6DAErB4Y,EAAOvd,QAAQc,MAAMs2C,OAAS75B,EAAOjW,QAAQgwC,WAAW9yD,MAAM7C,WAC9Dse,SAAS4D,KAAK/C,MAAM0f,SAAW,SAC/BjD,EAAOvd,QAAQuC,UAAUC,IAAI,sBAC7BmQ,OAAOs0B,KAAK1pB,EAAOoB,QAAQgO,UAAUlsC,SAAQ,SAAUwH,GACnD,IAAIovD,EAAa95B,EAAOoB,QAAQgO,SAAS1kC,GAAKuqC,WAC1C6kB,IACAA,EAAWzzC,UAAYyzC,EAAWzzC,UAAUvlB,QAAQ,MAAO,WAG/Dk/B,EAAOhzB,UACPgzB,EAAOhzB,QAAQyV,QAAQ4D,UAAY2Z,EAAOhzB,QAAQyV,QAAQ4D,UAAUvlB,QAAQ,MAAO,SAGvFk/B,EAAOwN,UACPxN,EAAOwN,SAASF,aAAatN,GAE7B2kB,EAAShI,OACTgI,EAAShI,MAAM50B,EAAOiY,GAE1B4Y,EAAW5Y,GACXiZ,EAAsBjZ,OAGvB45B,EAtDoB,CAuD7BlV,IAIEsV,GAAyD,WACzD,IAAI/U,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV1B,GAqBzD4U,GAA0B,SAAUjU,GAEpC,SAASiU,EAASj6B,EAAQ2kB,GACtB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAC/C4rC,EAAe/sB,SAASG,cAAc,OAK1C,OAJA4sB,EAAappB,UAAY,kCACzBopB,EAAaroB,UAAY,yCAA+C/D,OAAOkK,WAAW2sC,SAAW,KAAM,EAAG1rB,EAAmCqQ,IAAI,YAAc,qDAA2Dx7B,OAAOkK,WAAW4sC,SAAW,SAAU,EAAG3rB,EAAmCqQ,IAAI,OAAS,uDAA6Dx7B,OAAOkK,WAAW6sC,SAAW,SAAU,EAAG5rB,EAAmCqQ,IAAI,OAAS,wDAA8Dx7B,OAAOkK,WAAW8sC,SAAW,SAAU,EAAG7rB,EAAmCqQ,IAAI,OAAS,yDAA+Dx7B,OAAOkK,WAAW+sC,SAAW,SAAU,EAAG9rB,EAAmCqQ,IAAI,OAAS,0DAAgEx7B,OAAOkK,WAAWgtC,SAAW,SAAU,EAAG/rB,EAAmCqQ,IAAI,OAAS,aAC15BtR,EAAM9qB,QAAQiiB,YAAY+K,GAC1BlC,EAAM4Y,WAAWnmB,EAAQyP,GAClBlC,EA4CX,OApDAysB,GAAiBC,EAAUjU,GAU3BiU,EAASz2D,UAAU2iD,WAAa,SAAUnmB,EAAQyP,GAC9C,IAAIC,EAAY7rC,KAAK4e,QAAQ8c,SAAS,GACtCmQ,EAAU1sB,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3EA,EAAM8N,iBACF6Z,EAAU1qB,UAAUiL,SAASxL,EAA6C6E,EAAE2F,uBAGhFygB,EAAUwM,OACNxM,EAAU1qB,UAAUiL,SAAS,yBACF,YAAvB+P,EAAOM,aACPub,GAAc7b,GACdua,GAAiBva,IAEW,OAAvBA,EAAOM,aACZwV,GAAuB9V,EAAQ,IAEnC0P,EAAU1qB,UAAUgN,OAAO,0BAG3Bid,EAAUjP,EAAQ,CAAC,eACnByP,EAAalsB,MAAMuE,QAAU,aAGrC,IAAK,IAAI9gB,EAAI,EAAGA,EAAI,EAAGA,IACnByoC,EAAalQ,SAAS1Y,KAAK7f,GAAGgc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC/FA,EAAM8N,iBACqB,YAAvBmK,EAAOM,aACPsb,GAAW5b,EAAQjY,EAAMlgB,OAAOkb,aAAa,aAC7Cw3B,GAAiBva,GACjB0P,EAAU1qB,UAAUC,IAAI,yBAEI,OAAvB+a,EAAOM,aACZwV,GAAuB9V,EAAQjY,EAAMlgB,OAAOkb,aAAa,eACzD2sB,EAAU1qB,UAAUC,IAAI,yBAGxB6iC,GAAe9nB,EAAQjY,EAAMlgB,OAAOkb,aAAa,eAErD0sB,EAAalsB,MAAMuE,QAAU,WAIlCmyC,EArDkB,CAsD3BvV,IAIE8V,GAAqD,WACrD,IAAIvV,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV9B,GAerDoV,GAAsB,SAAUzU,GAEhC,SAASyU,EAAKz6B,EAAQ2kB,GAClB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAKnD,OAJA0pC,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3FA,EAAM8N,iBACNmK,EAAOmY,IAAI/J,KAAK,+kCAAwzC,MAEr0Cb,EAEX,OATAitB,GAAaC,EAAMzU,GASZyU,EAVc,CAWvB/V,IAIEgW,GAAuD,WACvD,IAAIzV,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV5B,GAmBvDsV,GAAwB,SAAU3U,GAElC,SAAS2U,EAAO36B,EAAQ2kB,GACpB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAanD,OAZA0pC,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAE3F,GADAA,EAAM8N,kBACF0X,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAASxL,EAA6C6E,EAAE2F,sBAC3E,OAAvB+Q,EAAOM,YADX,CAIA,IAAImI,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7Cqa,GAAY,EAAGz1B,EAAqCqJ,IAAIwa,EAAME,eAAgB,MAC9E0R,GACAkU,GAAWvuB,EAAQqa,EAAW5R,OAG/B8E,EAEX,OAjBAmtB,GAAeC,EAAQ3U,GAiBhB2U,EAlBgB,CAmBzBjW,IAIEkW,GAAqD,WACrD,IAAI3V,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV9B,GAgBrDwV,GAAsB,SAAU7U,GAEhC,SAAS6U,EAAK76B,EAAQ2kB,GAClB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAKnD,OAJA0pC,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3FA,EAAM8N,iBACNmK,EAAOmY,IAAI/J,KAAK,i+BAA65C3pB,EAA8BkJ,EAAI,YAAc+S,KAAKo6B,QAAU,0KAAwM,MAEjrDvtB,EAEX,OATAqtB,GAAaC,EAAM7U,GASZ6U,EAVc,CAWvBnW,IAIEqW,GAA4D,WAC5D,IAAI9V,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAVvB,GAiB5D2V,GAA6B,SAAUhV,GAEvC,SAASgV,EAAYh7B,EAAQ2kB,GACzB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KASnD,OARA0pC,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3FA,EAAM8N,iBACF0X,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAASxL,EAA6C6E,EAAE2F,sBAC3E,OAAvB+Q,EAAOM,aAGX2tB,GAAiBjuB,EAAQ,eAEtBuN,EAEX,OAbAwtB,GAAoBC,EAAahV,GAa1BgV,EAdqB,CAe9BtW,IAIEuW,GAA6D,WAC7D,IAAIhW,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAVtB,GAiB7D6V,GAA8B,SAAUlV,GAExC,SAASkV,EAAal7B,EAAQ2kB,GAC1B,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KASnD,OARA0pC,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3FA,EAAM8N,iBACF0X,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAASxL,EAA6C6E,EAAE2F,sBAC3E,OAAvB+Q,EAAOM,aAGX2tB,GAAiBjuB,EAAQ,kBAEtBuN,EAEX,OAbA0tB,GAAqBC,EAAclV,GAa5BkV,EAdsB,CAe/BxW,IAIEyW,GAAwD,WACxD,IAAIlW,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV3B,GAmBxD+V,GAAyB,SAAUpV,GAEnC,SAASoV,EAAQp7B,EAAQ2kB,GACrB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAanD,OAZA0pC,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAE3F,GADAA,EAAM8N,kBACF0X,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAASxL,EAA6C6E,EAAE2F,sBAC3E,OAAvB+Q,EAAOM,YADX,CAIA,IAAImI,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7Cqa,GAAY,EAAGz1B,EAAqCqJ,IAAIwa,EAAME,eAAgB,MAC9E0R,GACAwU,GAAY7uB,EAAQqa,EAAW5R,EAAO4R,EAAUrqB,mBAGjDud,EAEX,OAjBA4tB,GAAgBC,EAASpV,GAiBlBoV,EAlBiB,CAmB1B1W,IAIE2W,GAAwD,WACxD,IAAIpW,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV3B,GAgBxDiW,GAAiC,SAAUtV,GAE3C,SAASqP,EAAQr1B,EAAQ2kB,GACrB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAanD,OAZIm8B,EAAOjW,QAAQ3c,SACfmgC,EAAM9qB,QAAQoe,kBAAkB7b,UAAUC,IAAI,wBAElDsoB,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3FA,EAAM8N,iBACN,IAAI2N,EAAaxD,EAAOoB,QAAQgO,SAAShiC,QAAQyzB,kBAC7C2C,EAAWxe,UAAUiL,SAASxL,EAA6C6E,EAAE2F,uBAGjF+Q,EAAOjW,QAAQ3c,QAAQH,QAAUsgC,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAAS,wBACpF+P,EAAO5yB,QAAQ04C,OAAO9lB,EAAQA,EAAOjW,QAAQ3c,QAAQH,YAElDsgC,EAEX,OAjBA8tB,GAAgBhG,EAASrP,GAiBlBqP,EAlByB,CAmBlC3Q,IAIE6W,GAAwD,WACxD,IAAItW,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV3B,GAkBxDmW,GAAiC,SAAUxV,GAE3C,SAASuP,EAAQv1B,EAAQ2kB,GACrB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAEnD,OADA0pC,EAAM4Y,WAAWnmB,GACVuN,EAgDX,OApDAguB,GAAgBhG,EAASvP,GAMzBuP,EAAQ/xD,UAAU2iD,WAAa,SAAUnmB,GACrC,IAAIuN,EAAQ1pC,KACZA,KAAK4e,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC1FA,EAAM8N,iBACN,IAAI2N,EAAa+J,EAAM9qB,QAAQoe,kBAC/B,IAAI2C,EAAWxe,UAAUiL,SAASxL,EAA6C6E,EAAE2F,qBAAjF,CAGA,IAAIwsC,EAAWh3C,EAA8C6E,EAAE4F,cAAcpqB,OAAO,CAAC,OAAQ,YAAa,aACtG0+B,EAAWxe,UAAUiL,SAAS,yBAC9BuT,EAAWxe,UAAUgN,OAAO,wBACD,OAAvBgO,EAAOM,aACPN,EAAOgN,GAAGvqB,QAAQc,MAAMuE,QAAU,QACE,SAAhCkY,EAAOjW,QAAQjgB,QAAQ6gB,KACvBqV,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,QAAU,QAGvCkY,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,QAAU,SAI3CkY,EAAOA,EAAOM,aAAa7d,QAAQuN,cAAczM,MAAMuE,QAAU,QACjEkY,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,QAAU,QAE3C+mB,EAAc7O,EAAOoB,QAAQgO,SAAUqsB,GACvCz7B,EAAO5yB,QAAQrE,OAAOi3B,KAGtB8O,EAAe9O,EAAOoB,QAAQgO,SAAUqsB,GACxCz7B,EAAOl2B,QAAQ2Y,QAAQc,MAAMuE,QAAU,QACZ,OAAvBkY,EAAOM,YACPN,EAAOgN,GAAGvqB,QAAQc,MAAMuE,QAAU,OAGlCkY,EAAOA,EAAOM,aAAa7d,QAAQuN,cAAczM,MAAMuE,QAAU,OAErEkY,EAAOl2B,QAAQf,OAAOi3B,GACtBwD,EAAWxe,UAAUC,IAAI,wBACzBgqB,EAAUjP,EAAQ,CAAC,aAAc,OAAQ,YACzCoD,YAAW,WACPpD,EAAO5yB,QAAQrE,OAAOi3B,KACvBA,EAAOjW,QAAQjgB,QAAQqD,MAAQ,KAEtCyrC,EAAW5Y,QAGZu1B,EArDyB,CAsDlC7Q,IAIEgX,GAA6B,WAC7B,SAASA,EAAY/9C,GAOjB,IAAIg+C,EAEJ,GARA93D,KAAK+3D,YAAc,IACnB/3D,KAAKg4D,aAAc,EACnBh4D,KAAKi4D,WAAY,EACjBj4D,KAAKk4D,YAAc,GACnBl4D,KAAKm4D,aAAe,GACpBn4D,KAAKo4D,gBAAkB,EAGK,qBAAjBC,aACPP,EAAU,IAAIO,iBAEb,KAAIC,mBAIL,OAHAR,EAAU,IAAIQ,mBAKlBt4D,KAAKu4D,oBAAsBT,EAAQU,WAEnC,IAAIC,EAASX,EAAQY,aAEjBC,EAAab,EAAQc,wBAAwB9+C,GAEjD6+C,EAAWE,QAAQJ,GAKnBz4D,KAAK84D,SAAWhB,EAAQiB,sBAAsB,KAAM,EAAG,GAEvD/4D,KAAK84D,SAASE,eAAiB,KAE/BP,EAAOI,QAAQ74D,KAAK84D,UACpB94D,KAAK84D,SAASD,QAAQf,EAAQmB,aAC9Bj5D,KAAKi4D,WAAY,EAyGrB,OAtGAJ,EAAYl4D,UAAUu5D,iBAAmB,SAAUC,EAAiBC,GAChEp5D,KAAKk4D,YAAYh3D,KAAK,IAAIm4D,aAAaF,IACvCn5D,KAAKm4D,aAAaj3D,KAAK,IAAIm4D,aAAaD,IACxCp5D,KAAKo4D,iBAAmB,MAE5BP,EAAYl4D,UAAU25D,yBAA2B,WACzCt5D,KAAKi4D,YACLj4D,KAAKg4D,aAAc,EACnBh4D,KAAKk4D,YAAYn6D,OAASiC,KAAKm4D,aAAap6D,OAAS,EACrDiC,KAAKo4D,gBAAkB,IAG/BP,EAAYl4D,UAAU45D,cAAgB,WAClCv5D,KAAKg4D,aAAc,GAEvBH,EAAYl4D,UAAU65D,iBAAmB,WAMrC,IAJA,IAAIC,EAAaz5D,KAAK05D,aAAa15D,KAAKk4D,aACpCyB,EAAc35D,KAAK05D,aAAa15D,KAAKm4D,cAErCyB,EAAc,IAAIP,aAAaI,EAAW17D,QACrCoF,EAAI,EAAGA,EAAIs2D,EAAW17D,SAAUoF,EACrCy2D,EAAYz2D,GAAK,IAAOs2D,EAAWt2D,GAAKw2D,EAAYx2D,IAGpDnD,KAAKu4D,oBAAsBv4D,KAAK+3D,cAChC6B,EAAc55D,KAAK65D,iBAAiBD,EAAa55D,KAAK+3D,cAE1D,IAAI+B,EAAkB,GAA0B,EAArBF,EAAY77D,OACnCg8D,EAAS,IAAIC,YAAYF,GACzBG,EAAO,IAAIC,SAASH,GAExB/5D,KAAKm6D,cAAcF,EAAM,EAAG,QAC5BA,EAAKG,UAAU,EAAGN,GAAgB,GAClC95D,KAAKm6D,cAAcF,EAAM,EAAG,QAE5Bj6D,KAAKm6D,cAAcF,EAAM,GAAI,QAC7BA,EAAKG,UAAU,GAAI,IAAI,GACvBH,EAAKI,UAAU,GAAI,GAAG,GACtBJ,EAAKI,UAAU,GAAI,GAAG,GACtBJ,EAAKG,UAAU,GAAIp6D,KAAK+3D,aAAa,GACrCkC,EAAKG,UAAU,GAAuB,EAAnBp6D,KAAK+3D,aAAiB,GACzCkC,EAAKI,UAAU,GAAI,GAAG,GACtBJ,EAAKI,UAAU,GAAI,IAAI,GAEvB,IAAIC,EAA0C,EAArBV,EAAY77D,OACrCiC,KAAKm6D,cAAcF,EAAM,GAAI,QAC7BA,EAAKG,UAAU,GAAIE,GAAoB,GAKvC,IAHA,IAAIC,EAAMX,EAAY77D,OAClBqF,EAAQ,GACRq1D,EAAS,EACJp1D,EAAI,EAAGA,EAAIk3D,EAAKl3D,IACrB42D,EAAKO,SAASp3D,EAAOw2D,EAAYv2D,IAAM,MAASo1D,IAAS,GACzDr1D,GAAS,EAEb,OAAO,IAAI+rB,KAAK,CAAC8qC,GAAO,CAAExxD,KAAM,eAEpCovD,EAAYl4D,UAAUk6D,iBAAmB,SAAUE,EAAQU,GACvD,GAAIA,IAASz6D,KAAKu4D,oBACd,OAAOwB,EAEX,GAAIU,EAAOz6D,KAAKu4D,oBAEZ,OAAOwB,EAEX,IAAIW,EAAkB16D,KAAKu4D,oBAAsBkC,EAC7CE,EAAY59D,KAAK69D,MAAMb,EAAOh8D,OAAS28D,GACvCx7D,EAAS,IAAIm6D,aAAasB,GAC1BE,EAAe,EACfC,EAAe,EACnB,MAAOD,EAAe37D,EAAOnB,OAAQ,CAIjC,IAHA,IAAIg9D,EAAmBh+D,KAAK69D,OAAOC,EAAe,GAAKH,GACnDM,EAAQ,EACRC,EAAQ,EACH93D,EAAI23D,EAAc33D,EAAI43D,GAAoB53D,EAAI42D,EAAOh8D,OAAQoF,IAClE63D,GAASjB,EAAO52D,GAChB83D,IAEJ/7D,EAAO27D,GAAgBG,EAAQC,EAC/BJ,IACAC,EAAeC,EAEnB,OAAO77D,GAEX24D,EAAYl4D,UAAU+5D,aAAe,SAAUwB,GAI3C,IAHA,IAAIh8D,EAAS,IAAIm6D,aAAar5D,KAAKo4D,iBAC/Bh9B,EAAS,EACTm/B,EAAMW,EAAqBn9D,OACtBoF,EAAI,EAAGA,EAAIo3D,IAAOp3D,EAAG,CAC1B,IAAI42D,EAASmB,EAAqB/3D,GAClCjE,EAAOi8D,IAAIpB,EAAQ3+B,GACnBA,GAAU2+B,EAAOh8D,OAErB,OAAOmB,GAEX24D,EAAYl4D,UAAUw6D,cAAgB,SAAUF,EAAM7+B,EAAQ14B,GAE1D,IADA,IAAI63D,EAAM73D,EAAM3E,OACPoF,EAAI,EAAGA,EAAIo3D,EAAKp3D,IACrB82D,EAAKmB,SAAShgC,EAASj4B,EAAGT,EAAM8Q,WAAWrQ,KAG5C00D,EA7IqB,GAkJ5BwD,GAAuD,WACvD,IAAIja,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV5B,GAkBvD8Z,GAAwB,SAAUnZ,GAElC,SAASmZ,EAAOn/B,EAAQ2kB,GACpB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAEnD,OADA0pC,EAAM4Y,WAAWnmB,GACVuN,EAgDX,OApDA2xB,GAAeC,EAAQnZ,GAMvBmZ,EAAO37D,UAAU2iD,WAAa,SAAUnmB,GACpC,IACIo/B,EADA7xB,EAAQ1pC,KAEZA,KAAK4e,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAE1F,GADAA,EAAM8N,kBACF0X,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAASxL,EAA6C6E,EAAE2F,qBAAtG,CAGA,IAAIob,EAAgBrK,EAAOA,EAAOM,aAAa7d,QAC/C,GAAK28C,EAsBL,GAAIA,EAAcvD,YAAa,CAC3BuD,EAAchC,gBACdp9B,EAAOmY,IAAI4R,OACX,IAAIK,EAAO,IAAIiV,KAAK,CAACD,EAAc/B,oBAAqB,UAAW,IAAKprD,MAAQC,UAAY,OAAQ,CAAE5F,KAAM,eAC5Gi/C,GAAYvrB,EAAQ,CAACoqB,IACrB7c,EAAM9qB,QAAQ8c,SAAS,GAAGva,UAAUgN,OAAO,6BAG3CgO,EAAOmY,IAAI/J,KAAK/qB,OAAOkK,WAAW+xC,WAClCj1B,EAAc/hB,aAAa,kBAAmB,SAC9C82C,EAAcjC,2BACd5vB,EAAM9qB,QAAQ8c,SAAS,GAAGva,UAAUC,IAAI,6BAhCxCqgB,UAAUi6B,aAAaC,aAAa,CAAEC,OAAO,IAAQzwD,MAAK,SAAU0wD,GAChEN,EAAgB,IAAI1D,GAAYgE,GAChCN,EAAczC,SAASE,eAAiB,SAAUl/C,GAE9C,GAAKyhD,EAAcvD,YAAnB,CAIA,IAAIzzC,EAAOzK,EAAEgiD,YAAYC,eAAe,GACpCtxB,EAAQ3wB,EAAEgiD,YAAYC,eAAe,GACzCR,EAAcrC,iBAAiB30C,EAAMkmB,KAEzC8wB,EAAcjC,2BACdn9B,EAAOmY,IAAI/J,KAAK/qB,OAAOkK,WAAW+xC,WAClCj1B,EAAc/hB,aAAa,kBAAmB,SAC9CilB,EAAM9qB,QAAQ8c,SAAS,GAAGva,UAAUC,IAAI,2BACzC0O,OAAM,WACLqM,EAAOmY,IAAI/J,KAAK/qB,OAAOkK,WAAW,uBAmB3C4xC,EArDgB,CAsDzBza,IAIEmb,GAAqD,WACrD,IAAI5a,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV9B,GAiBrDya,GAAsB,SAAU9Z,GAEhC,SAAS8Z,EAAK9/B,EAAQ2kB,GAClB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KASnD,OARAirC,EAAe,CAAE8Y,KAAMra,EAAM9qB,SAAW,CAAC,SACzC8qB,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3FA,EAAM8N,iBACF0X,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAASxL,EAA6C6E,EAAE2F,sBAGtG+Q,EAAOkU,KAAK0T,KAAK5nB,MAEduN,EAEX,OAbAsyB,GAAaC,EAAM9Z,GAaZ8Z,EAdc,CAevBpb,IAIEqb,GAAqD,WACrD,IAAI9a,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV9B,GAiBrD2a,GAAsB,SAAUha,GAEhC,SAASga,EAAKhgC,EAAQ2kB,GAClB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KASnD,OARAirC,EAAe,CAAEoF,KAAM3G,EAAM9qB,SAAW,CAAC,SACzC8qB,EAAM9qB,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC3FA,EAAM8N,iBACF0X,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAASxL,EAA6C6E,EAAE2F,sBAGtG+Q,EAAOkU,KAAKA,KAAKlU,MAEduN,EAEX,OAbAwyB,GAAaC,EAAMha,GAaZga,EAdc,CAevBtb,IAIEub,GAAuD,WACvD,IAAIhb,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV5B,GAiBvD6a,GAA+B,SAAUla,GAEzC,SAAS2D,EAAO3pB,EAAQ2kB,GACpB,IAAIpX,EAAQyY,EAAO1jD,KAAKuB,KAAMm8B,EAAQ2kB,IAAa9gD,KAC/Cs8D,EAAY,qBAShB,OARIngC,EAAOjW,QAAQmuB,OAAO6T,WACtBoU,GAAa,wBAEbngC,EAAOjW,QAAQmuB,OAAOyS,SACtBwV,GAAa,YAAengC,EAAOjW,QAAQmuB,OAAOyS,OAAS,KAE/Dpd,EAAM9qB,QAAQ8c,SAAS,GAAGnY,UAAY,IAAMu9B,EAAS73C,MAAQ,2DAA6DqzD,EAAY,IACtI5yB,EAAM4Y,WAAWnmB,GACVuN,EAuBX,OAnCA0yB,GAAetW,EAAQ3D,GAcvB2D,EAAOnmD,UAAU2iD,WAAa,SAAUnmB,GACpC,IAAIuN,EAAQ1pC,KACZA,KAAK4e,QAAQ8c,SAAS,GAAGvc,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAC1F,GAAIwlB,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAASxL,EAA6C6E,EAAE2F,qBAGlG,OAFAlH,EAAM6N,uBACN7N,EAAM8N,oBAIdhyB,KAAK4e,QAAQU,cAAc,SAASH,iBAAiB,UAAU,SAAU+E,GACrE,GAAIwlB,EAAM9qB,QAAQoe,kBAAkB7b,UAAUiL,SAASxL,EAA6C6E,EAAE2F,qBAGlG,OAFAlH,EAAM6N,uBACN7N,EAAM8N,iBAGwB,IAA9B9N,EAAMlgB,OAAOiiD,MAAMloD,QAGvB2pD,GAAYvrB,EAAQjY,EAAMlgB,OAAOiiD,MAAO/hC,EAAMlgB,YAG/C8hD,EApCuB,CAqChCjF,IAgCE0b,GAAyB,WACzB,SAASA,EAAQpgC,GACb,IAAIuN,EAAQ1pC,KACRkmB,EAAUiW,EAAOjW,QACrBlmB,KAAKurC,SAAW,GAChBvrC,KAAK4e,QAAUC,SAASG,cAAc,OACtChf,KAAK4e,QAAQ4D,UAAY,iBACzB0D,EAAQqX,QAAQl+B,SAAQ,SAAUyhD,EAAU39C,GACxC,IAAI2nC,EAAcpB,EAAM8yB,QAAQrgC,EAAQ2kB,EAAU39C,GAElD,GADAumC,EAAM9qB,QAAQiiB,YAAYiK,GACtBgW,EAASvjB,QAAS,CAClB,IAAIk/B,EAAiB59C,SAASG,cAAc,OAC5Cy9C,EAAej6C,UAAY,kCAC3Bi6C,EAAet9C,kBAAiB,EAAGwrB,EAAgCoB,OAAO,SAAU7nB,GAChFu4C,EAAe/8C,MAAMuE,QAAU,UAEnC68B,EAASvjB,QAAQl+B,SAAQ,SAAU+kD,EAAasY,GAC5CtY,EAAYtY,MAAQ,EACpB2wB,EAAe57B,YAAY6I,EAAM8yB,QAAQrgC,EAAQioB,EAAajhD,EAAIu5D,OAEtE5xB,EAAYjK,YAAY47B,GACxB9wB,EAAcxP,EAAQsgC,EAAgB3xB,EAAYpP,SAAS,GAAI,OAGnES,EAAOjW,QAAQmX,cAAc6oB,MAC7BlmD,KAAK4e,QAAQuC,UAAUC,IAAI,wBAE3B+a,EAAOjW,QAAQmX,cAAcC,KAC7Bt9B,KAAK4e,QAAQuC,UAAUC,IAAI,uBAE3B+a,EAAOjW,QAAQ/c,QAAQC,SACvB+yB,EAAOhzB,QAAU,IAAIkrD,GAAQl4B,GAC7Bn8B,KAAK4e,QAAQiiB,YAAY1E,EAAOhzB,QAAQyV,UAwGhD,OArGA29C,EAAQ58D,UAAU68D,QAAU,SAAUrgC,EAAQ2kB,EAAU19C,GACpD,IAAIu5D,EACJ,OAAQ7b,EAASz5C,MACb,IAAK,OACL,IAAK,SACL,IAAK,OACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,OACL,IAAK,eACL,IAAK,QACL,IAAK,OACL,IAAK,cACL,IAAK,OACL,IAAK,QACDs1D,EAAc,IAAI9b,GAAS1kB,EAAQ2kB,GACnC,MACJ,IAAK,QACD6b,EAAc,IAAI/H,GAAMz4B,EAAQ2kB,GAChC,MACJ,IAAK,WACD6b,EAAc,IAAIvG,GAASj6B,EAAQ2kB,GACnC,MACJ,IAAK,IACD6b,EAAc,IAAIjI,GAClB,MACJ,IAAK,KACDiI,EAAc,IAAI3I,GAClB,MACJ,IAAK,OACD2I,EAAc,IAAIR,GAAKhgC,EAAQ2kB,GAC/B,MACJ,IAAK,OACD6b,EAAc,IAAIV,GAAK9/B,EAAQ2kB,GAC/B,MACJ,IAAK,OACD6b,EAAc,IAAI/F,GAAKz6B,EAAQ2kB,GAC/B,MACJ,IAAK,OACD6b,EAAc,IAAI5I,GAAK53B,EAAQ2kB,GAC/B,MACJ,IAAK,UACD6b,EAAc,IAAIhF,GAAgBx7B,EAAQ2kB,GAC1C,MACJ,IAAK,aACD6b,EAAc,IAAI5G,GAAW55B,EAAQ2kB,GACrC,MACJ,IAAK,SACD6b,EAAc,IAAIN,GAAclgC,EAAQ2kB,GACxC,MACJ,IAAK,SACD6b,EAAc,IAAIrB,GAAOn/B,EAAQ2kB,GACjC,MACJ,IAAK,OACD6b,EAAc,IAAI3F,GAAK76B,EAAQ2kB,GAC/B,MACJ,IAAK,YACD6b,EAAc,IAAIza,GAAS/lB,EAAQ2kB,GACnC,MACJ,IAAK,WACD6b,EAAc,IAAIlI,GAASt4B,EAAQ2kB,GACnC,MACJ,IAAK,UACD6b,EAAc,IAAIpF,GAAQp7B,EAAQ2kB,GAClC,MACJ,IAAK,SACD6b,EAAc,IAAI7F,GAAO36B,EAAQ2kB,GACjC,MACJ,IAAK,UACD6b,EAAc,IAAIlF,GAAgBt7B,EAAQ2kB,GAC1C,MACJ,IAAK,eACD6b,EAAc,IAAIxF,GAAYh7B,EAAQ2kB,GACtC,MACJ,IAAK,gBACD6b,EAAc,IAAItF,GAAal7B,EAAQ2kB,GACvC,MACJ,IAAK,aACD6b,EAAc,IAAIzI,GAAU/3B,EAAQ2kB,GACpC,MACJ,IAAK,gBACD6b,EAAc,IAAIvI,GAAaj4B,EAAQ2kB,GACvC,MACJ,IAAK,SACD6b,EAAc,IAAI9G,GAAO15B,EAAQ2kB,GACjC,MACJ,QACI6b,EAAc,IAAIpI,GAAOp4B,EAAQ2kB,GACjC,MAER,GAAK6b,EAAL,CAGA,IAAI91D,EAAMi6C,EAASz5C,KAKnB,MAJY,OAARR,GAAwB,MAARA,IAChBA,GAAYzD,GAEhBpD,KAAKurC,SAAS1kC,GAAO81D,EAAY/9C,QAC1B+9C,EAAY/9C,UAEhB29C,EAxIiB,GA6IxBxvD,GAAmBoR,EAAoB,KAUvCy+C,GAA2B,WAC3B,SAAST,IACLn8D,KAAK68D,UAAY,GACjB78D,KAAK88D,aAEL98D,KAAKoU,IAAM,IAAIrH,GAuNnB,OArNAovD,EAAKx8D,UAAUo9D,WAAa,SAAU5gC,GAClCn8B,KAAK88D,aACL98D,KAAKgiD,UAAU7lB,IAEnBggC,EAAKx8D,UAAUqiD,UAAY,SAAU7lB,GAC5BA,EAAOoB,UAGRv9B,KAAKm8B,EAAOM,aAAaugC,UAAUj/D,OAAS,EAC5CitC,EAAc7O,EAAOoB,QAAQgO,SAAU,CAAC,SAGxCN,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,SAEK,IAA9CvrC,KAAKm8B,EAAOM,aAAawgC,UAAUl/D,OACnCitC,EAAc7O,EAAOoB,QAAQgO,SAAU,CAAC,SAGxCN,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,WAGjD4wB,EAAKx8D,UAAU0wC,KAAO,SAAUlU,GAC5B,GAA2E,UAAvEA,EAAOA,EAAOM,aAAa7d,QAAQM,aAAa,sBAGhDlf,KAAKm8B,EAAOM,aAAaugC,UAAUj/D,OAAS,GAAhD,CAGA,IAAIm/D,EAAQl9D,KAAKm8B,EAAOM,aAAaugC,UAAUnsD,MAC1CqsD,IAGLl9D,KAAKm8B,EAAOM,aAAawgC,UAAU/7D,KAAKg8D,GACxCl9D,KAAKm9D,WAAWD,EAAO/gC,GACvBn8B,KAAKm8B,EAAOM,aAAa2gC,SAAU,EAEnChyB,EAAUjP,EAAQ,CAAC,YAEvBggC,EAAKx8D,UAAUokD,KAAO,SAAU5nB,GAC5B,GAA2E,UAAvEA,EAAOA,EAAOM,aAAa7d,QAAQM,aAAa,mBAApD,CAGA,IAAIg+C,EAAQl9D,KAAKm8B,EAAOM,aAAawgC,UAAUpsD,MAC1CqsD,IAGLl9D,KAAKm8B,EAAOM,aAAaugC,UAAU97D,KAAKg8D,GACxCl9D,KAAKm9D,WAAWD,EAAO/gC,GAAQ,MAEnCggC,EAAKx8D,UAAU2wC,oBAAsB,SAAUnU,EAAQjY,GACnD,GAAkC,IAA9BH,eAAe8gB,cAG+B,IAA9C7kC,KAAKm8B,EAAOM,aAAaugC,UAAUj/D,QAAiE,IAAjDiC,KAAKm8B,EAAOM,aAAaugC,UAAU,GAAGj/D,QACzFiC,KAAKm8B,EAAOM,aAAawgC,UAAUl/D,OAAS,OAG5C,EAAG4sC,EAA6B4E,OAAuB,cAAdrrB,EAAMrd,QAI/C,EAAG8jC,EAA4B0yB,MAAnC,CAIA,IAAIzvD,EAAO5N,KAAKs9D,SAASnhC,GACrBvuB,EAAK3Q,QAAQ,QAAS,IAAIA,QAAQ,2BAA4B,MAC1D+C,KAAKm8B,EAAOM,aAAaugC,UAAU,GAAG,GAAGjuD,MAAM,GAAG,GAAG9R,QAAQ,QAAS,MAI9E+C,KAAKm8B,EAAOM,aAAaugC,UAAU,GAAG,GAAGjuD,MAAM,GAAG,GAAKnB,EACvD5N,KAAKm8B,EAAOM,aAAa8gC,SAAW3vD,KAGxCuuD,EAAKx8D,UAAUk3C,eAAiB,SAAU1a,GAEtC,IAAIvuB,EAAO5N,KAAKs9D,SAASnhC,GAAQ,GAC7BqhC,EAAOx9D,KAAKoU,IAAIvG,UAAUD,EAAM5N,KAAKm8B,EAAOM,aAAa8gC,UAAU,GACnEE,EAAYz9D,KAAKoU,IAAIkH,WAAW1N,EAAM5N,KAAKm8B,EAAOM,aAAa8gC,SAAUC,GACpD,IAArBC,EAAU1/D,QAAgBiC,KAAKm8B,EAAOM,aAAaugC,UAAUj/D,OAAS,IAG1EiC,KAAKm8B,EAAOM,aAAa8gC,SAAW3vD,EACpC5N,KAAKm8B,EAAOM,aAAaugC,UAAU97D,KAAKu8D,GACpCz9D,KAAKm8B,EAAOM,aAAaugC,UAAUj/D,OAASiC,KAAK68D,WACjD78D,KAAKm8B,EAAOM,aAAaugC,UAAU3/C,QAEnCrd,KAAKm8B,EAAOM,aAAa2gC,UACzBp9D,KAAKm8B,EAAOM,aAAawgC,UAAY,GACrCj9D,KAAKm8B,EAAOM,aAAa2gC,SAAU,EACnCnyB,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,UAEzCvrC,KAAKm8B,EAAOM,aAAaugC,UAAUj/D,OAAS,GAC5CitC,EAAc7O,EAAOoB,QAAQgO,SAAU,CAAC,WAGhD4wB,EAAKx8D,UAAUw9D,WAAa,SAAUD,EAAO/gC,EAAQuhC,GAEjD,IAAI9vD,EACJ,QAFe,IAAX8vD,IAAqBA,GAAS,GAE9BA,EAAQ,CACR,IAAIC,EAAgB39D,KAAKoU,IAAI8H,eAAeghD,GAAO5R,UACnDqS,EAAct+D,SAAQ,SAAUyb,GAC5BA,EAAM/L,MAAM1P,SAAQ,SAAUm+D,GAC1BA,EAAK,IAAMA,EAAK,SAGxB5vD,EAAO5N,KAAKoU,IAAIiI,YAAYshD,EAAe39D,KAAKm8B,EAAOM,aAAa8gC,UAAU,QAG9E3vD,EAAO5N,KAAKoU,IAAIiI,YAAY6gD,EAAOl9D,KAAKm8B,EAAOM,aAAa8gC,UAAU,GAU1E,GARAv9D,KAAKm8B,EAAOM,aAAa8gC,SAAW3vD,EACpCuuB,EAAOA,EAAOM,aAAa7d,QAAQ2E,UAAY3V,EACpB,OAAvBuuB,EAAOM,aACPN,EAAOA,EAAOM,aAAa7d,QAAQgB,iBAAiB,WAAauc,EAAOM,YAAc,8BACjFp9B,SAAQ,SAAUukC,GACnByI,EAAkBzI,EAAczH,MAGnCA,EAAOA,EAAOM,aAAa7d,QAAQU,cAAc,QAOlD,EAAG0C,EAA6B0sB,IAAIvS,EAAOA,EAAOM,aAAa7d,QAASud,EAAOA,EAAOM,aAAa7d,QAAQomB,cAAcC,eACzHgO,GAAa9W,OAR6C,CAE1D,IAAIyI,EAAQ7gB,eAAeI,WAAW,GACtCygB,EAAMyC,aAAalL,EAAOA,EAAOM,aAAa7d,SAC9CgmB,EAAMO,UAAS,GAMnByH,GAAgBzQ,EAAQ,CACpByS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjBkQ,GAAiB7iB,GACjBA,EAAOA,EAAOM,aAAa7d,QAAQgB,iBAAiB,WAAauc,EAAOM,YAAc,8BACjFp9B,SAAQ,SAAU2jB,GACnBqpB,EAAkBrpB,EAAMmZ,MAExBn8B,KAAKm8B,EAAOM,aAAaugC,UAAUj/D,OAAS,EAC5CitC,EAAc7O,EAAOoB,QAAQgO,SAAU,CAAC,SAGxCN,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,SAEK,IAA9CvrC,KAAKm8B,EAAOM,aAAawgC,UAAUl/D,OACnCitC,EAAc7O,EAAOoB,QAAQgO,SAAU,CAAC,SAGxCN,EAAe9O,EAAOoB,QAAQgO,SAAU,CAAC,UAGjD4wB,EAAKx8D,UAAUm9D,WAAa,WACxB98D,KAAKupC,GAAK,CACN6zB,SAAS,EACTG,SAAU,GACVN,UAAW,GACXD,UAAW,IAEfh9D,KAAKmpC,GAAK,CACNi0B,SAAS,EACTG,SAAU,GACVN,UAAW,GACXD,UAAW,IAEfh9D,KAAKqpC,QAAU,CACX+zB,SAAS,EACTG,SAAU,GACVN,UAAW,GACXD,UAAW,KAGnBb,EAAKx8D,UAAU29D,SAAW,SAAUnhC,EAAQyhC,GAExC,IAAIx5C,EACJ,QAFiB,IAAbw5C,IAAuBA,GAAW,GAEJ,IAA9B75C,eAAe8gB,aAAqB1I,EAAOA,EAAOM,aAAa7d,QAAQU,cAAc,OAAQ,CAC7F,IAAIslB,EAAQ7gB,eAAeI,WAAW,GACtC,GAAIgY,EAAOA,EAAOM,aAAa7d,QAAQwN,SAASwY,EAAME,gBAAiB,CACnE1gB,EAAawgB,EAAMxgB,aACnB,IAAIojB,EAAa3oB,SAASG,cAAc,QACxCwoB,EAAWhlB,UAAY,aACvBoiB,EAAMiD,WAAWL,IAIzB,IAAIq2B,EAAe1hC,EAAOoN,GAAG3qB,QAAQ4pB,WAAU,GAC/Cq1B,EAAaj+C,iBAAiB,WAAauc,EAAOM,YAAc,8BAC3Dp9B,SAAQ,SAAU2jB,IACfA,EAAKga,kBAAkB7b,UAAUiL,SAAS,qBAC1CpJ,EAAKga,kBAAkB7b,UAAUiL,SAAS,sBAC1CpJ,EAAKga,kBAAkB7b,UAAUiL,SAAS,uBAC1CpJ,EAAKga,kBAAkBrd,gBAAgB,sBACvCqD,EAAKga,kBAAkBrd,gBAAgB,kBACvCqD,EAAKga,kBAAkBzZ,UAAYP,EAAKykB,uBAAuBzK,kBAAkBzZ,UACjFP,EAAKyB,aAAa,cAAe,MAEjCzB,EAAKga,kBAAkB7b,UAAUiL,SAAS,mBAC1CpJ,EAAKyB,aAAa,cAAe,KACjCzB,EAAKga,kBAAkBnQ,YAAc7J,EAAKga,kBAAkB9d,aAAa,aACzE8D,EAAKga,kBAAkBrd,gBAAgB,iBAG/C,IAAI/R,EAAOuuB,EAAOA,EAAOM,aAAa7d,QAAQ2E,UAQ9C,OAPA4Y,EAAOA,EAAOM,aAAa7d,QAAQgB,iBAAiB,eAAevgB,SAAQ,SAAU2jB,GACjFA,EAAKmL,YAGLyvC,GAAYx5C,IACZ,EAAGpC,EAAiC6B,IAAIO,GAErCxW,EAAK3Q,QAAQ,mCAAoC,UAErDk/D,EA5NmB,GAiO1Bn7C,GAAQ7C,EAAoB,KAI5B2/C,GAAyB,WACzB,SAASA,EAAQ53C,GACblmB,KAAKsxB,eAAiB,CAClBjoB,WAAOnL,EACPsL,MAAO,CACHJ,QAAQ,GAEZgd,IAAKxF,EAA6B6E,EAAEY,IACpCsrC,QAAS,CACL1rD,QAAS,IAEbs9C,QAAS,CACLn6C,QAAQ,GAEZD,QAAS,CACLC,QAAQ,EACRX,KAAM,YAEVylC,UAAU,EACVgoB,WAAY,CACR9yD,MAAO,IAEX4F,OAAQ,OACRyiC,KAAM,CACFniC,MAAO,IACPkiC,MAAO,CACH,KAAM,KACN,KAAM,KACN,SAAY,KACZ,KAAQ,MACR,MAAS,KACT,OAAU,MACV,MAAS,KACT,KAAQ,OAEZjlB,UAAW3F,EAA6B6E,EAAEY,IAAM,qBAChDw9B,OAAQ,GACRp2B,OAAO,GAEXxkB,KAAM,MACNiZ,KAAM,QACN4E,KAAM,KACNvd,QAAS,CACLH,QAAQ,EACR1L,SAAU,QAEduzD,YAAa,GACbhrD,QAAS,CACL4rD,QAAS,CAAC,UAAW,SAAU,SAAU,YAAa,SACtDvoD,MAAO,IACPkd,KAAM5F,EAAsC6E,EAAEgB,aAC9CC,SAAU9F,EAA0C6E,EAAEkB,iBACtDC,KAAMhG,EAAsC6E,EAAEoB,aAC9CouB,SAAU,IACVnuB,KAAM,OACNE,MAAOpG,EAAuC6E,EAAEwB,eAEpDyjB,OAAQ,CACJthC,QAAQ,EACR1L,SAAU,UAEdspB,MAAO,UACPuW,QAAS,CACL,QACA,WACA,OACA,SACA,SACA,OACA,IACA,OACA,eACA,QACA,UACA,SACA,IACA,QACA,OACA,OACA,cACA,gBACA,eACA,IACA,SACA,SACA,QACA,IACA,OACA,OACA,IACA,aACA,YACA,CACIl2B,KAAM,OACNk2B,QAAS,CACL,OACA,aACA,gBACA,SACA,UACA,UACA,WACA,OACA,UAIZF,cAAe,CACX6oB,MAAM,EACN5oB,KAAK,GAET+X,gBAAgB,EAChByB,UAAW,IACXzC,OAAQ,CACJ4T,UAAW,GACXK,UAAW,SACXzB,SAAU,SAAUx/C,GAAQ,OAAOA,EAAKpK,QAAQ,MAAO,KACvDixD,aAAc,GACdntD,IAAK,SACLmnD,UAAU,EACV94B,IAAK,GACLo5B,iBAAiB,GAErB9lD,MAAO,GACP44B,MAAO,QAEXt7B,KAAKkmB,QAAUA,EAwRnB,OAtRA43C,EAAQn+D,UAAUqhB,MAAQ,WACtB,IAAImI,EAAI4E,EAAIzoB,EACRtF,KAAKkmB,UACDlmB,KAAKkmB,QAAQqX,QACbv9B,KAAKkmB,QAAQqX,QAAUv9B,KAAK+9D,aAAa/9D,KAAKkmB,QAAQqX,SAGtDv9B,KAAKkmB,QAAQqX,QAAUv9B,KAAK+9D,aAAa/9D,KAAKsxB,eAAeiM,UAEwB,QAApFxP,EAAqC,QAA/B5E,EAAKnpB,KAAKkmB,QAAQjgB,eAA4B,IAAPkjB,OAAgB,EAASA,EAAGnC,aAA0B,IAAP+G,OAAgB,EAASA,EAAGpC,QACzH3rB,KAAKsxB,eAAerrB,QAAQ+gB,MAAM2E,KAAO3rB,KAAKkmB,QAAQjgB,QAAQ+gB,MAAM2E,OAEvC,QAA5BrmB,EAAKtF,KAAKkmB,QAAQulB,YAAyB,IAAPnmC,OAAgB,EAASA,EAAGkmC,SACjExrC,KAAKsxB,eAAema,KAAKD,MAAQxrC,KAAKkmB,QAAQulB,KAAKD,OAEnDxrC,KAAKkmB,QAAQq9B,UACbvjD,KAAKsxB,eAAeiyB,QAAUvjD,KAAKkmB,QAAQq9B,UAGnD,IAAIl8B,GAAgB,EAAGrG,GAAiBkG,GAAGlnB,KAAKsxB,eAAgBtxB,KAAKkmB,SACrE,GAAImB,EAAc7d,MAAMJ,SAAWie,EAAc7d,MAAM6B,GACnD,MAAM,IAAIkD,MAAM,8EAEpB,OAAO8Y,GAEXy2C,EAAQn+D,UAAUo+D,aAAe,SAAUxgC,GACvC,IAAImM,EAAQ1pC,KACRg+D,EAAc,CACd,CACI/0D,KAAM,0DACN5B,KAAM,SACN25C,YAAa,MAEjB,CACI1e,OAAQ,KACRr5B,KAAM,yDACN5B,KAAM,QACN25C,YAAa,MAEjB,CACI1e,OAAQ,KACRr5B,KAAM,4DACN5B,KAAM,WACN25C,YAAa,MAEjB,CACI1e,OAAQ,KACRr5B,KAAM,wDACN5B,KAAM,OACN6T,OAAQ,KACRC,OAAQ,KACR6lC,YAAa,MAEjB,CACI1e,OAAQ,KACRr5B,KAAM,0DACN5B,KAAM,SACN6T,OAAQ,IACRC,OAAQ,IACR6lC,YAAa,MAEjB,CACI1e,OAAQ,KACRr5B,KAAM,0DACN5B,KAAM,SACN6T,OAAQ,KACRC,OAAQ,KACR6lC,YAAa,MAEjB,CACI1e,OAAQ,KACRr5B,KAAM,wDACN5B,KAAM,OACN6T,OAAQ,IACRC,OAAQ,cACR6lC,YAAa,KAEjB,CACI35C,KAAM,KAEV,CACIi7B,OAAQ,KACRr5B,KAAM,wDACN5B,KAAM,OACN6T,OAAQ,KACR8lC,YAAa,KAEjB,CACI1e,OAAQ,KACRr5B,KAAM,gEACN5B,KAAM,eACN6T,OAAQ,MACR8lC,YAAa,KAEjB,CACI1e,OAAQ,KACRr5B,KAAM,yDACN5B,KAAM,QACN6T,OAAQ,SACR8lC,YAAa,KAEjB,CACI1e,OAAQ,MACRr5B,KAAM,2DACN5B,KAAM,UACN25C,YAAa,KAEjB,CACI1e,OAAQ,MACRr5B,KAAM,0DACN5B,KAAM,SACN25C,YAAa,KAEjB,CACI35C,KAAM,KAEV,CACIi7B,OAAQ,KACRr5B,KAAM,yDACN5B,KAAM,QACN6T,OAAQ,KACR8lC,YAAa,KAEjB,CACI1e,OAAQ,MACRr5B,KAAM,wDACN5B,KAAM,OACN6T,OAAQ,MACR8lC,YAAa,KAEjB,CACI1e,OAAQ,KACRr5B,KAAM,wDACN5B,KAAM,OACN6T,OAAQ,MACRC,OAAQ,QACR6lC,YAAa,KAEjB,CACI1e,OAAQ,KACRr5B,KAAM,+DACN5B,KAAM,cACN6T,OAAQ,IACRC,OAAQ,IACR6lC,YAAa,KAEjB,CACI1e,OAAQ,MACRr5B,KAAM,0DACN5B,KAAM,gBACN25C,YAAa,KAEjB,CACI1e,OAAQ,MACRr5B,KAAM,yDACN5B,KAAM,eACN25C,YAAa,KAEjB,CACI35C,KAAM,KAEV,CACI4B,KAAM,0DACN5B,KAAM,SACN25C,YAAa,KAEjB,CACI/3C,KAAM,0DACN5B,KAAM,SACN25C,YAAa,KAEjB,CACI1e,OAAQ,KACRr5B,KAAM,yDACN5B,KAAM,QACN6T,OAAQ,SACRC,OAAQ,gEACR6lC,YAAa,KAEjB,CACI35C,KAAM,KAEV,CACIi7B,OAAQ,KACRr5B,KAAM,wDACN5B,KAAM,OACN25C,YAAa,MAEjB,CACI1e,OAAQ,KACRr5B,KAAM,wDACN5B,KAAM,OACN25C,YAAa,MAEjB,CACI35C,KAAM,KAEV,CACI4B,KAAM,wDACN5B,KAAM,OACN25C,YAAa,KAEjB,CACI1e,OAAQ,KACRr5B,KAAM,8DACN5B,KAAM,aACN25C,YAAa,MAEjB,CACI/3C,KAAM,wDACN5B,KAAM,YACN25C,YAAa,MAEjB,CACI1e,OAAQ,KACRr5B,KAAM,wDACN5B,KAAM,OACN25C,YAAa,MAEjB,CACI/3C,KAAM,2DACN5B,KAAM,UACN25C,YAAa,MAEjB,CACI/3C,KAAM,gEACN5B,KAAM,UACN25C,YAAa,MAEjB,CACI/3C,KAAM,yDACN5B,KAAM,gBACN25C,YAAa,MAEjB,CACI/3C,KAAM,8DACN5B,KAAM,aACN25C,YAAa,MAEjB,CACI/3C,KAAM,uDACN5B,KAAM,WACN25C,YAAa,MAEjB,CACI/3C,KAAM,wDACN5B,KAAM,OACN25C,YAAa,MAEjB,CACI/3C,KAAM,wDACN5B,KAAM,OACN25C,YAAa,MAEjB,CACI35C,KAAM,OAGV42D,EAAgB,GAkBpB,OAjBA1gC,EAAQl+B,SAAQ,SAAUyhD,GACtB,IAAIod,EAAkBpd,EACtBkd,EAAY3+D,SAAQ,SAAU8+D,GACF,kBAAbrd,GACPqd,EAAgB92D,OAASy5C,IACzBod,EAAkBC,GAEE,kBAAbrd,GACPqd,EAAgB92D,OAASy5C,EAASz5C,OAClC62D,EAAkB3sC,OAAOC,OAAO,GAAI2sC,EAAiBrd,OAGzDA,EAASvjB,UACT2gC,EAAgB3gC,QAAUmM,EAAMq0B,aAAajd,EAASvjB,UAE1D0gC,EAAc/8D,KAAKg9D,MAEhBD,GAEJH,EAtZiB,GAyaxBM,GAAyB,WACzB,SAASA,EAAQjiC,GACb,IAAIuN,EAAQ1pC,KACZA,KAAKmwC,eAAgB,EACrBnwC,KAAKq+D,WAAa,GAClB,IAAIhwC,EAAaxP,SAASG,cAAc,OACxCqP,EAAW7L,UAAY,iBACvB6L,EAAW9K,UAAY,0CAA+C4Y,EAAOjW,QAAQ+qC,YAAc,mMAAiNzxC,OAAOkK,WAAW65B,QAAU,yJAChVvjD,KAAK4e,QAAUyP,EAAW2O,kBAC1Bh9B,KAAK0rC,QAAUrd,EAAW2O,kBAAkBC,mBAC5Cj9B,KAAK4iD,cAAgBv0B,EAAW+Z,iBAChCpoC,KAAKkxD,UAAU/0B,GACfqmB,GAAWrmB,EAAQn8B,KAAK4e,SACxB6jC,GAActmB,EAAQn8B,KAAK4e,SAC3B8jC,GAAUvmB,EAAQn8B,KAAK4e,SACvBglC,GAAYznB,EAAQn8B,KAAK4e,SACzB0lC,GAAYnoB,EAAQn8B,KAAK4e,SACzBmkC,GAAU5mB,EAAQn8B,KAAK4e,SACvBykC,GAAUlnB,EAAQn8B,KAAK4e,QAAS5e,KAAKsuB,MACrCg1B,GAASnnB,EAAQn8B,KAAK4e,QAAS5e,KAAKsuB,MAChC6N,EAAOjW,QAAQq9B,QAAQn6C,SACvBpJ,KAAK4iD,cAActjC,cAAc,UAAU+B,QAAU,WACjD,IAIIi9C,EACAC,EALAlzD,EAAKwxB,KAAK2hC,YACV55B,EAAQ7gB,eAAeI,WAAW,GAClCs6C,EAAa75B,EAAMxgB,aACnBs6C,EAAW95B,EAAMqP,kBAGjB0qB,GAAc,EACdC,GAAY,EAChBF,EAAS/4B,WAAWtmC,SAAQ,SAAU2jB,EAAM5f,GACxC,IAAIy7D,GAAO,EAUX,GATsB,IAAlB77C,EAAKygB,SACLo7B,GAAO,EAED77C,EAAK7B,UAAUiL,SAAS,kBAGzBpJ,EAAK7B,UAAUiL,SAAS,mBAC7BpJ,EAAKyB,aAAa,cAAezB,EAAK9D,aAAa,eAAiB,IAAM7T,GAH1EwzD,GAAO,EAKPA,EACA,GAAsB,IAAlB77C,EAAKygB,UAAsD,MAApCzgB,EAAK9D,aAAa,eAC5B,IAAV9b,GAAeq7D,EAAW/4B,YAAc,EAC3C1iB,EAAKO,UACD,6CAAkDlY,EAAK,KAAQ2X,EAAKO,UAAY,UACpF+6C,EAAoBt7C,OAEnB,GAAsB,IAAlBA,EAAKygB,UAAsD,MAApCzgB,EAAK9D,aAAa,eAC3C9b,IAAUs7D,EAAS/4B,WAAW5nC,OAAS,GACvC0gE,EAAW14B,UAAY04B,EAAW34B,aAAajZ,YAAY9uB,OAC9DilB,EAAKO,UACD,6CAAkDlY,EAAK,KAAQ2X,EAAKO,UAAY,UACpFg7C,EAAkBv7C,OAEjB,GAAsB,IAAlBA,EAAKygB,UAAsD,MAApCzgB,EAAK9D,aAAa,cAChC,IAAV9b,EACAu7D,GAAc,EAETv7D,IAAUs7D,EAAS/4B,WAAW5nC,OAAS,IAC5C6gE,GAAY,GAEhB57C,EAAKO,UACD,6CAAkDlY,EAAK,KAAQ2X,EAAKO,UAAY,cAEnF,CACD,IAAI81B,EAAiBx6B,SAASG,cAAc,QAC5Cq6B,EAAel4B,UAAUC,IAAI,kBAC7Bi4B,EAAe50B,aAAa,cAAepZ,GAC3C2X,EAAK60B,WAAWC,aAAauB,EAAgBr2B,GAC7Cq2B,EAAexY,YAAY7d,OAIvC,IAAI87C,GAAe,EAAG/9C,EAAgCsnB,IAAIo2B,EAAW35B,gBACjEg6B,IACIR,GACAQ,EAAa9tC,mBAAmB,YAAastC,EAAkB/6C,WAC/D+6C,EAAkBnwC,UAEyE,KAAtF2wC,EAAajyC,YAAY7I,OAAO/mB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,KAAc0zC,GACjGG,EAAa3wC,UAGrB,IAAI4wC,GAAa,EAAGh+C,EAAgCsnB,IAAIo2B,EAAW34B,cAC/Di5B,IACIR,GACAQ,EAAW/tC,mBAAmB,aAAcutC,EAAgBh7C,WAC5Dg7C,EAAgBpwC,UAEyE,KAApF4wC,EAAWlyC,YAAY7I,OAAO/mB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,KAAc2zC,GAC/FG,EAAW5wC,UAGnByW,EAAMiD,WAAW62B,GACjBviC,EAAOjW,QAAQq9B,QAAQniC,IAAI/V,EAAIu5B,EAAMrkC,WAAYmpC,EAAM8Z,YAAYrnB,GAAQ,IAC3Eua,GAAiBva,EAAQ,CACrByS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjBpF,EAAMoZ,gBAyXlB,OArXAsb,EAAQz+D,UAAU6jD,YAAc,SAAUrnB,EAAQ8mB,GAC9C,IAAIvZ,EAAQ1pC,KAEZ,QADgB,IAAZijD,IAAsBA,GAAU,GACT,YAAvB9mB,EAAOM,cAA6BN,EAAOjW,QAAQq9B,QAAQn6C,OAmB3D,MAAO,GAlBPpJ,KAAKq+D,WAAa,GAClBr+D,KAAK4e,QAAQgB,iBAAiB,mBAAmBvgB,SAAQ,SAAU2jB,GAC/D0mB,EAAM20B,WACF30B,EAAM20B,WAAWp9D,OAAO+hB,EAAK9D,aAAa,eAAe/F,MAAM,SAEvEnZ,KAAKq+D,WAAahtD,MAAM3M,KAAK,IAAIs6D,IAAIh/D,KAAKq+D,aAC1C,IAAIY,EAAa,GACjB,OAAIhc,GACAjjD,KAAKq+D,WAAWh/D,SAAQ,SAAUgM,GAC9B4zD,EAAW/9D,KAAK,CACZmK,GAAIA,EACJkW,IAAKmoB,EAAM9qB,QAAQU,cAAc,gCAAmCjU,EAAK,MAAOoW,eAGjFw9C,QAPX,GAcRb,EAAQz+D,UAAUgqD,qBAAuB,SAAUxtB,GAC/C,IAAI+iC,EAAa,SAAUr9D,EAAGw/C,GAC1B,IAAI1nC,EAAI,IAAIqlD,IAAI3d,GAChB,OAAOx/C,EAAEs9D,QAAO,SAAU5tD,GAAK,OAAQoI,EAAEylD,IAAI7tD,OAEjD,GAA2B,YAAvB4qB,EAAOM,aAA6BN,EAAOjW,QAAQq9B,QAAQn6C,QAAU+yB,EAAOkN,QAAQg1B,WAAWtgE,OAAS,EAAG,CAC3G,IAAIshE,EAAS7xC,KAAKC,MAAMD,KAAKihC,UAAUzuD,KAAKq+D,aAC5Cr+D,KAAKwjD,YAAYrnB,GACjB,IAAImjC,EAAaJ,EAAWG,EAAQr/D,KAAKq+D,YACrCiB,EAAWvhE,OAAS,GACpBo+B,EAAOjW,QAAQq9B,QAAQp1B,OAAOmxC,KAI1ClB,EAAQz+D,UAAU8kD,YAAc,WAC5B,IAAI/mD,GAAW,EAAGskB,EAAiC2hC,IAAI3jD,KAAK4e,SAC5D5e,KAAK4iD,cAAcn+B,aAAa,QAAS,QAAU/mB,EAAS6mB,KAAO,wBAA0BxnB,KAAKgE,KAAK,EAAGrD,EAAS6jB,IAAM,IAAM,OAEnI68C,EAAQz+D,UAAUmjD,YAAc,WAC5B9iD,KAAK4iD,cAAcn+B,aAAa,QAAS,iBAE7C25C,EAAQz+D,UAAU4/D,eAAiB,WAC/B//C,OAAOg2B,oBAAoB,SAAUx1C,KAAKw/D,iBAE9CpB,EAAQz+D,UAAU2uB,KAAO,SAAUpK,EAAOiY,GACtC,IAAIyI,EAAQ7gB,eAAeI,WAAW,GACtC,GAAyB,KAArBygB,EAAMrkC,WAAV,CAGA2jB,EAAM6N,kBACN7N,EAAM8N,iBACN,IAAI9D,GAAc,EAAGnN,EAAqCqJ,IAAIwa,EAAME,eAAgB,QAChF26B,GAAiB,EAAG1+C,EAAqCqJ,IAAIwa,EAAMkB,aAAc,QACrF,GAAI5X,GAAeuxC,GAAkBA,EAAe/3B,WAAWxZ,GAAc,CACzE,IAAID,EAAW,GASf,OAPIA,EADsC,QAAtCC,EAAY/B,cAAcyF,QACfgT,EAAMrkC,WAGN,IAAMqkC,EAAMrkC,WAAa,IAExC2jB,EAAMkO,cAAcC,QAAQ,aAAcpE,QAC1C/J,EAAMkO,cAAcC,QAAQ,YAAa,IAG7C,IAAIsC,GAAW,EAAG5T,EAAqCqJ,IAAIwa,EAAME,eAAgB,KAC7E46B,GAAc,EAAG3+C,EAAqCqJ,IAAIwa,EAAMkB,aAAc,KAClF,GAAInR,GAAY+qC,GAAeA,EAAYh4B,WAAW/S,GAAW,CAC7D,IAAIgrC,EAAShrC,EAASzV,aAAa,UAAY,GAM/C,OALIygD,IACAA,EAAS,KAAQA,EAAS,KAE9Bz7C,EAAMkO,cAAcC,QAAQ,aAAc,IAAMuS,EAAMrkC,WAAa,KAAOo0B,EAASzV,aAAa,QAAUygD,EAAS,UACnHz7C,EAAMkO,cAAcC,QAAQ,YAAa,IAG7C,IAAIkK,EAAc1d,SAASG,cAAc,OACzCud,EAAYsE,YAAY+D,EAAMgmB,iBAC9B1mC,EAAMkO,cAAcC,QAAQ,aAAc8J,EAAO5U,KAAK6hB,aAAa7M,EAAYhZ,WAAWS,QAC1FE,EAAMkO,cAAcC,QAAQ,YAAa,MAE7C+rC,EAAQz+D,UAAUuxD,UAAY,SAAU/0B,GACpC,IAAIuN,EAAQ1pC,KACZA,KAAKu/D,iBACL//C,OAAOL,iBAAiB,SAAUnf,KAAKw/D,eAAiB,WAEpD,GADAp0B,EAAUjP,EAAQ,CAAC,SACiB,UAAhCuN,EAAMgC,QAAQhsB,MAAMuE,SAA6D,UAAtCylB,EAAMkZ,cAAcljC,MAAMuE,QAAzE,CAGA,IAAI1C,EAAMhI,SAASmwB,EAAMgC,QAAQxsB,aAAa,YAAa,IAC3D,GAA8B,SAA1Bid,EAAOjW,QAAQld,QAYd,GAAKmzB,EAAOjW,QAAQmX,cAAcC,IAAlC,CAGL,IAAIsiC,EAAc7iE,KAAKgE,IAAIwgB,EAAM/B,OAAOie,QAAUtB,EAAOvd,QAAQ6C,UAAY,GAAM,KAC/C,UAAhCioB,EAAMgC,QAAQhsB,MAAMuE,UACpBylB,EAAMgC,QAAQhsB,MAAM6B,IAAMq+C,GAEY,UAAtCl2B,EAAMkZ,cAAcljC,MAAMuE,UAC1BylB,EAAMkZ,cAAcljC,MAAM6B,IAAMq+C,SAnBhC,GAAIzjC,EAAOjW,QAAQmX,cAAcC,KAA8D,IAAvDnB,EAAOoB,QAAQ3e,QAAQ0F,wBAAwB/C,IAAW,CAC9F,IAAIs+C,EAAa9iE,KAAKgE,IAAIye,OAAOie,QAAUtB,EAAOvd,QAAQ6C,UAAY,EAAG1kB,KAAKiE,IAAIugB,EAAM4a,EAAOkN,QAAQzqB,QAAQ8C,UAAWgoB,EAAM9qB,QAAQ8gB,aAAe,KAAO,KAC1H,UAAhCgK,EAAMgC,QAAQhsB,MAAMuE,UACpBylB,EAAMgC,QAAQhsB,MAAM6B,IAAMs+C,GAEY,UAAtCn2B,EAAMkZ,cAAcljC,MAAMuE,UAC1BylB,EAAMkZ,cAAcljC,MAAM6B,IAAMs+C,OAgBhD7/D,KAAK4e,QAAQO,iBAAiB,UAAU,WAKpC,GAJAisB,EAAUjP,EAAQ,CAAC,SACfA,EAAOjW,QAAQq9B,SAAWpnB,EAAOjW,QAAQq9B,QAAQn6C,QAAU+yB,EAAOjW,QAAQq9B,QAAQuc,QAClF3jC,EAAOjW,QAAQq9B,QAAQuc,OAAO3jC,EAAOkN,QAAQzqB,QAAQ8C,WAErB,UAAhCgoB,EAAMgC,QAAQhsB,MAAMuE,QAAxB,CAGA,IAAI1C,EAAMhI,SAASmwB,EAAMgC,QAAQxsB,aAAa,YAAa,IAAMid,EAAOkN,QAAQzqB,QAAQ8C,UACpF3gB,GAAO,EACPo7B,EAAOjW,QAAQmX,cAAcC,KAA8D,IAAvDnB,EAAOoB,QAAQ3e,QAAQ0F,wBAAwB/C,MACnFxgB,EAAMye,OAAOie,QAAUtB,EAAOvd,QAAQ6C,UAAY1gB,GAEtD,IAAIg/D,EAAQhjE,KAAKgE,IAAIA,EAAKhE,KAAKiE,IAAIugB,EAAKmoB,EAAM9qB,QAAQ8gB,aAAe,KAAO,KAC5EgK,EAAMgC,QAAQhsB,MAAM6B,IAAMw+C,EAC1Br2B,EAAMkZ,cAAcljC,MAAM6B,IAAMw+C,MAEpC//D,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GAC7Ci/B,GAAMhnB,EAAQjY,EAAO,CACjBk/B,UAAW,SAAUn0B,GACjB,IAAI2V,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAC7C7I,EAAOzU,SAASG,cAAc,YAClCsU,EAAK/P,UAAY0L,EACjB2V,EAAMiD,WAAWvU,EAAKiV,QAAQC,WAAU,IACxC,IAAI5E,GAAe,EAAG7iB,EAAsC6sB,IAAIhJ,EAAME,eAAgB,aAAc,KAChGlB,EACAA,EAAa/T,UAAYsM,EAAO5U,KAAKqV,cAAcgH,EAAa/T,WAGhEsM,EAAOkN,QAAQzqB,QAAQ2E,UAAY4Y,EAAO5U,KAAKqV,cAAcT,EAAOkN,QAAQzqB,QAAQ2E,YAExF,EAAGvB,EAA6B0sB,IAAIvS,EAAOkN,QAAQzqB,QAASgmB,SAKxE5kC,KAAK4e,QAAQO,iBAAiB,oBAAoB,WAC9CuqB,EAAMyG,eAAgB,KAE1BnwC,KAAK4e,QAAQO,iBAAiB,kBAAkB,SAAU+E,GACtD,IAAIoG,GAAiB,EAAG4Z,EAA+C5H,GAAGvY,eAAeI,WAAW,GAAG2gB,gBACnGxa,GAAiD,KAA/BA,EAAeuC,YAEjC2f,EAAUrQ,KAGT,EAAGwO,EAA6B4E,OACjC6Z,GAAYjtB,EAAQpY,eAAeI,WAAW,GAAGC,aAAcF,GAEnEwlB,EAAMyG,eAAgB,MAE1BnwC,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GAC7C,GAAwB,iBAApBA,EAAM+pB,WAAoD,mBAApB/pB,EAAM+pB,UAIhD,GAAIvE,EAAMxB,aACNwB,EAAMxB,cAAe,OAGzB,IAAIwB,EAAMyG,eAAgC,MAAfjsB,EAAM7b,MAA+B,MAAf6b,EAAM7b,MAA+B,MAAf6b,EAAM7b,KAA7E,CAGA,IAAIu8B,EAAQ7gB,eAAeI,WAAW,GAClCyf,GAAe,EAAG7iB,EAAgCsnB,IAAIzD,EAAME,gBAMhE,GALKlB,IAED8T,GAAUvb,EAAQyI,GAClBhB,GAAe,EAAG7iB,EAAgCsnB,IAAIzD,EAAME,iBAE3DlB,EAAL,CAOA,IAHA,IAAI8B,GAAc,EAAG1jB,EAAiC2qB,IAAI/I,EAAczH,EAAOkN,QAAQzqB,QAASgmB,GAAOxgC,MAEnGgpC,GAAa,EACRjqC,EAAIuiC,EAAc,EAAGviC,EAAIygC,EAAa/W,YAAYvL,OAAO,EAAGokB,GAAatrB,YAAY,MAAOjX,IACjG,GAA2C,MAAvCygC,EAAa/W,YAAY7vB,OAAOmG,IAEO,OAAvCygC,EAAa/W,YAAY7vB,OAAOmG,GAAa,CAC7CiqC,GAAa,EACb,MAGY,IAAhB1H,IACA0H,GAAa,GAGjB,IAAIC,GAAW,EACf,IAASlqC,EAAIuiC,EAAc,EAAGviC,EAAIygC,EAAa/W,YAAY9uB,OAAQoF,IAC/D,GAA2C,MAAvCygC,EAAa/W,YAAY7vB,OAAOmG,IAAqD,OAAvCygC,EAAa/W,YAAY7vB,OAAOmG,GAAa,CAC3FkqC,GAAW,EACX,MAGR,IAAI/iB,GAAiB,EAAG4Z,EAA+C5H,GAAGvY,eAAeI,WAAW,GAAG2gB,gBACnGxa,GAAiD,KAA/BA,EAAeuC,cAEjC2f,EAAUrQ,GACV7R,EAAe6D,UAEdif,GAAyD,eAA3CxJ,EAAa1kB,aAAa,cACtCmuB,GAAYF,GAAYvJ,EAAargB,YACvC2pB,GAAOtJ,EAAargB,YAAcqgB,EAAa6D,wBAGpD2hB,GAAYjtB,EAAQyI,EAAO1gB,QAE/BlkB,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GAC7C,GAA6B,UAAzBA,EAAMlgB,OAAO4tB,QAAqB,CAClC,IAAIouC,EAAe97C,EAAMlgB,OASzB,OARIg8D,EAAapT,QACboT,EAAav7C,aAAa,UAAW,WAGrCu7C,EAAargD,gBAAgB,WAEjC+pB,EAAMxB,cAAe,OACrBwO,GAAiBva,GAGrB,GAA6B,QAAzBjY,EAAMlgB,OAAO4tB,SAEZ1N,EAAMlgB,OAAOmoB,cAAchL,UAAUiL,SAAS,2BAFnD,CAY6B,MAAzBlI,EAAMlgB,OAAO4tB,SACbpS,OAAOghB,KAAKtc,EAAMlgB,OAAOkb,aAAa,SAE1C,IAAI0lB,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GACjD,GAAIjY,EAAMlgB,OAAOk5B,YAAYwM,EAAM9qB,UAAY8qB,EAAM9qB,QAAQwpB,kBAAoBxD,EAAMqL,UAAW,CAC9F,IAAImhB,EAAW1nB,EAAM9qB,QAAQwpB,iBAAiB9jB,wBAC1CJ,EAAM1R,EAAI4+C,EAAS7vC,IAAM6vC,EAASpoD,SACa,MAA3C0gC,EAAM9qB,QAAQwpB,iBAAiBxW,SACyE,KAAxG8X,EAAM9qB,QAAQwpB,iBAAiBvb,YAAY7I,OAAO/mB,QAAQ2jB,EAA8B6E,EAAEwF,KAAM,KAChG2Z,EAAM+B,mBAAmB+C,EAAM9qB,QAAQwpB,kBACvCxD,EAAMO,UAAS,KAGfuE,EAAM9qB,QAAQoS,mBAAmB,YAAa,qBAAyBpQ,EAA8B6E,EAAEwF,KAAO,cAC9G,EAAGjJ,EAA6B0sB,IAAIhF,EAAM9qB,QAASgmB,KAI/DqU,GAAwB9c,GAExB,IAAInT,GAAiB,EAAGjI,EAAsCsJ,IAAInG,EAAMlgB,OAAQ,2BAC3EglB,IACDA,GACI,EAAGjI,EAAsCsJ,KAAI,EAAGrI,EAA8BuuB,IAAIpU,GAAQ2I,eAAgB,4BAE9G9b,GACAivB,GAASjvB,EAAgBmT,GAE7BsQ,EAASvoB,EAAOiY,OArCmC,aAA3CjY,EAAMlgB,OAAOkb,aAAa,aAC1Bq9B,GAAkBpgB,EAAQjY,EAAMlgB,QAGhCw6C,GAAgBt6B,EAAOiY,MAmCnCn8B,KAAK4e,QAAQO,iBAAiB,SAAS,SAAU+E,GAC7C,IAAIA,EAAMksB,eAAe,EAAGzF,EAA0BsE,IAAI/qB,GAA1D,CAKkB,UAAdA,EAAMrd,KACNosC,GAAa9W,GAEE,cAAdjY,EAAMrd,KAAqC,WAAdqd,EAAMrd,KACC,KAArCs1B,EAAOkN,QAAQzqB,QAAQ2E,WAAiE,IAA7C4Y,EAAOkN,QAAQzqB,QAAQ+mB,WAAW5nC,SAC7Eo+B,EAAOkN,QAAQzqB,QAAQoe,mBAA0E,MAArDb,EAAOkN,QAAQzqB,QAAQoe,kBAAkBpL,SACnB,IAA/DuK,EAAOkN,QAAQzqB,QAAQoe,kBAAkBmP,mBACD,KAAvChQ,EAAOkN,QAAQzqB,QAAQiO,aAA6D,OAAvCsP,EAAOkN,QAAQzqB,QAAQiO,cAExEsP,EAAOkN,QAAQzqB,QAAQ2E,UAAY,IAEvC,IAAIqhB,GAAQ,EAAG5iB,EAA8BuuB,IAAIpU,GAUjD,GATkB,cAAdjY,EAAMrd,MAEF,EAAG8jC,EAA6B4E,OAA8C,OAArC3K,EAAME,eAAejY,aAA8C,IAAtB+X,EAAMc,cAC5Fd,EAAME,eAAejY,YAAc,IAI3C6qB,GAAUvb,EAAQyI,GAClBqU,GAAwB9c,GACN,cAAdjY,EAAMrd,KAAqC,eAAdqd,EAAMrd,KAAsC,cAAdqd,EAAMrd,KAChD,cAAdqd,EAAMrd,KAAqC,YAAdqd,EAAMrd,IAD1C,CAIkB,cAAdqd,EAAMrd,KAAqC,eAAdqd,EAAMrd,KACnCs1B,EAAOsP,KAAKvmC,OAAOi3B,GAGvB,IAAInT,GAAiB,EAAGjI,EAAsCsJ,IAAIua,EAAME,eAAgB,2BACxF,IAAK9b,GAAoD,IAAlC4b,EAAME,eAAerB,UAAkBmB,EAAMc,YAAc,EAAG,CAEjF,IAAIiX,EAAqB/X,EAAME,eAC3B6X,EAAmBx7B,UAAUiL,SAAS,2BACtCpD,EAAiB2zB,EAAmBvU,kBAG5C,GAAKpf,EAAL,CAGA,IAAImvB,EAAkBnvB,EAAeye,uBACrC,GAAsC,SAAlC0Q,EAAgBz4B,MAAMuE,QAA1B,CASA,IAAIiK,EAAclF,EAAeye,uBAIjC,GAH4B,QAAxBvZ,EAAY0D,UACZ1D,EAAcA,EAAY8O,mBAEZ,cAAd9Y,EAAMrd,KAAqC,eAAdqd,EAAMrd,IAAsB,CACrD81C,EAAqB3zB,EAAemD,cAAxC,IACIujB,EAAWyH,GAAyBwF,GACxC,GAAIjN,GAAkC,IAAtBA,EAASjM,SAAgB,CAErC,IAAIw8B,EAAoBvwB,EAASpwB,cAAc,4BAC/C,GAAI2gD,EAEA,YADAhoB,GAASgoB,EAAmB9jC,GAKpC,GAA0B,IAAtBuT,EAASjM,SAAgB,CAEzB,MAAuC,IAAhCiM,EAAS7iB,YAAY9uB,QAAgB2xC,EAASxI,YAEjDwI,EAAWA,EAASxI,YAExBtC,EAAMM,SAASwK,EAAU,QAIzB9K,EAAMM,SAASwK,EAAS0B,WAAY,QAIxCxM,EAAM+B,mBAAmBzY,GACzB0W,EAAMO,UAAS,OAvCG,cAAdjhB,EAAMrd,KAAqC,eAAdqd,EAAMrd,IACnCoxC,GAASjvB,EAAgBmT,GAGzB8b,GAASjvB,EAAgBmT,GAAQ,UAuC1CiiC,EA9diB,GAmexB8B,GAAoD,WACpD,IAAI9e,EAAgB,SAAUtvC,EAAGuvC,GAI7B,OAHAD,EAAgB7vB,OAAO+vB,gBAClB,CAAEC,UAAW,cAAgBlwC,OAAS,SAAUS,EAAGuvC,GAAKvvC,EAAEyvC,UAAYF,IACvE,SAAUvvC,EAAGuvC,GAAK,IAAK,IAAIt3B,KAAKs3B,EAAOA,EAAEhuC,eAAe0W,KAAIjY,EAAEiY,GAAKs3B,EAAEt3B,KAClEq3B,EAActvC,EAAGuvC,IAE5B,OAAO,SAAUvvC,EAAGuvC,GAEhB,SAASG,IAAOxhD,KAAKkM,YAAc4F,EADnCsvC,EAActvC,EAAGuvC,GAEjBvvC,EAAEnS,UAAkB,OAAN0hD,EAAa9vB,OAAOkwB,OAAOJ,IAAMG,EAAG7hD,UAAY0hD,EAAE1hD,UAAW,IAAI6hD,IAV/B,GAkDpD72B,GAAwB,SAAUw3B,GAMlC,SAASx3B,EAAOtf,EAAI6a,GAChB,IAAIwjB,EAAQyY,EAAO1jD,KAAKuB,OAASA,KACjC0pC,EAAMy2B,QAAUv/C,EAA8BkJ,EAC5B,kBAAPze,IACF6a,EAOKA,EAAQ1c,MAGR0c,EAAQ1c,MAAM6B,KACpB6a,EAAQ1c,MAAM6B,GAAK,SAAWA,GAH9B6a,EAAQ1c,MAAQ,CAAE6B,GAAI,SAAWA,GAPjC6a,EAAU,CACN1c,MAAO,CACH6B,GAAI,SAAWA,IAU3BA,EAAKwT,SAAS2C,eAAenW,IAEjC,IAAI+0D,EAAa,IAAItC,GAAQ53C,GACzBmB,EAAgB+4C,EAAWp/C,QAE/B,GAAKqG,EAAcgC,KAkBf7J,OAAOkK,WAAarC,EAAcgC,KAClCqgB,EAAM/b,KAAKtiB,EAAIgc,OAnBM,CACrB,IAAK,CAAC,QAAS,QAAS,QAAS,QAAS,QAAS,SAASiC,SAASjC,EAAcnF,MAC/E,MAAM,IAAI3T,MAAM,2EAGhB,IAAI0a,EAAmB,mBACnBC,EAAiBD,EAAmB5B,EAAcnF,KACtDrD,SAASe,iBAAiB,oBAAuBqJ,EAAmB,MAAO5pB,SAAQ,SAAUkqB,GACrFA,EAAGle,KAAO6d,GACVrK,SAAS2K,KAAKC,YAAYF,OAGlC,EAAGzI,EAAyBwG,GAAGD,EAAcjB,IAAM,iBAAmBiB,EAAcnF,KAAO,MAAOgH,GAAgB/d,MAAK,WACnHu+B,EAAM/b,KAAKtiB,EAAIgc,MAQ3B,OAAOqiB,EAuXX,OAvaAw2B,GAAYv1C,EAAQw3B,GAmDpBx3B,EAAOhrB,UAAUkK,SAAW,SAAUmd,EAAOiZ,EAAcH,EAAWugC,GAClErgE,KAAKm8B,OAAOjW,QAAQc,MAAQA,EAC5Bnd,EAAS7J,KAAKm8B,QACV8D,IACAjgC,KAAKm8B,OAAOjW,QAAQjgB,QAAQ+gB,MAAM4C,QAAUqW,GAC5C,EAAGpf,EAAqC8I,GAAGsW,EAAcogC,GAAoBrgE,KAAKm8B,OAAOjW,QAAQjgB,QAAQ+gB,MAAM6C,OAE/GiW,IACA9/B,KAAKm8B,OAAOjW,QAAQjgB,QAAQugB,KAAK9G,MAAQogB,GACzC,EAAGpV,GAA+BR,GAAG4V,EAAW9/B,KAAKm8B,OAAOjW,QAAQE,OAI5EuE,EAAOhrB,UAAU2gE,SAAW,WACxB,OAAOp3B,EAAYlpC,KAAKm8B,SAG5BxR,EAAOhrB,UAAU4gE,eAAiB,WAC9B,OAAOvgE,KAAKm8B,OAAOM,aAGvB9R,EAAOhrB,UAAUolC,MAAQ,WACW,OAA5B/kC,KAAKm8B,OAAOM,YACZz8B,KAAKm8B,OAAOgN,GAAGvqB,QAAQmmB,QAEU,YAA5B/kC,KAAKm8B,OAAOM,YACjBz8B,KAAKm8B,OAAOkN,QAAQzqB,QAAQmmB,QAEK,OAA5B/kC,KAAKm8B,OAAOM,aACjBz8B,KAAKm8B,OAAOoN,GAAG3qB,QAAQmmB,SAI/Bpa,EAAOhrB,UAAU04C,KAAO,WACY,OAA5Br4C,KAAKm8B,OAAOM,YACZz8B,KAAKm8B,OAAOgN,GAAGvqB,QAAQy5B,OAEU,YAA5Br4C,KAAKm8B,OAAOM,YACjBz8B,KAAKm8B,OAAOkN,QAAQzqB,QAAQy5B,OAEK,OAA5Br4C,KAAKm8B,OAAOM,aACjBz8B,KAAKm8B,OAAOoN,GAAG3qB,QAAQy5B,QAI/B1tB,EAAOhrB,UAAU6gE,SAAW,WACxBp1B,EAAUprC,KAAKm8B,OAAQ,CAAC,aAAc,OAAQ,YAC9C8O,EAAejrC,KAAKm8B,OAAOoB,QAAQgO,SAAU3qB,EAA8C6E,EAAE4F,cAAcpqB,OAAO,CAAC,OAAQ,OAAQ,aAAc,eACjJjB,KAAKm8B,OAAOn8B,KAAKm8B,OAAOM,aAAa7d,QAAQ6F,aAAa,kBAAmB,UAGjFkG,EAAOhrB,UAAUyJ,OAAS,WACtB4hC,EAAchrC,KAAKm8B,OAAOoB,QAAQgO,SAAU3qB,EAA8C6E,EAAE4F,cAAcpqB,OAAO,CAAC,OAAQ,OAAQ,aAAc,eAChJjB,KAAKm8B,OAAOkU,KAAK2R,UAAUhiD,KAAKm8B,QAChCn8B,KAAKm8B,OAAOn8B,KAAKm8B,OAAOM,aAAa7d,QAAQ6F,aAAa,kBAAmB,SAGjFkG,EAAOhrB,UAAUokB,aAAe,WAC5B,MAAgC,YAA5B/jB,KAAKm8B,OAAOM,YACL8lB,GAAcviD,KAAKm8B,OAAOkN,QAAQzqB,SAER,OAA5B5e,KAAKm8B,OAAOM,YACV8lB,GAAcviD,KAAKm8B,OAAOgN,GAAGvqB,SAEH,OAA5B5e,KAAKm8B,OAAOM,YACV8lB,GAAcviD,KAAKm8B,OAAOoN,GAAG3qB,cADnC,GAKT+L,EAAOhrB,UAAU8gE,cAAgB,SAAU/9D,GACvC1C,KAAKm8B,OAAOl2B,QAAQf,OAAOlF,KAAKm8B,OAAQz5B,IAG5CioB,EAAOhrB,UAAUylC,kBAAoB,WACjC,OAAO,EAAGpjB,EAAiC2hC,IAAI3jD,KAAKm8B,OAAOn8B,KAAKm8B,OAAOM,aAAa7d,UAGxF+L,EAAOhrB,UAAUomD,YAAc,WAC3B,OAAO/lD,KAAKm8B,OAAOkY,OAAO0R,aAG9Bp7B,EAAOhrB,UAAU+gE,WAAa,WAC1B5+B,aAAa6+B,WAAW3gE,KAAKm8B,OAAOjW,QAAQ1c,MAAM6B,KAGtDsf,EAAOhrB,UAAUihE,cAAgB,WAC7B5gE,KAAKm8B,OAAOjW,QAAQ1c,MAAMJ,QAAS,GAGvCuhB,EAAOhrB,UAAUkhE,YAAc,WAC3B,IAAK7gE,KAAKm8B,OAAOjW,QAAQ1c,MAAM6B,GAC3B,MAAM,IAAIkD,MAAM,8EAEpBvO,KAAKm8B,OAAOjW,QAAQ1c,MAAMJ,QAAS,GAGvCuhB,EAAOhrB,UAAUmhE,QAAU,SAAUp+D,GACjC,OAAO1C,KAAKm8B,OAAO5U,KAAKuuB,QAAQpzC,IAGpCioB,EAAOhrB,UAAUohE,WAAa,SAAUr+D,GACpC,OAAO1C,KAAKm8B,OAAO5U,KAAKy5C,WAAWt+D,IAGvCioB,EAAOhrB,UAAU0xD,QAAU,WACvB,OAAOA,GAAQrxD,KAAKm8B,SAGxBxR,EAAOhrB,UAAU20C,IAAM,SAAU1mC,EAAM4kD,GACnCxyD,KAAKm8B,OAAOmY,IAAI/J,KAAK38B,EAAM4kD,IAG/B7nC,EAAOhrB,UAAUk0D,eAAiB,SAAU/sC,GACxC+sC,GAAe/sC,EAAM9mB,KAAKm8B,SAG9BxR,EAAOhrB,UAAUshE,YAAc,WACvBzhD,OAAOuE,eAAem9C,aAG1BriD,SAASspB,YAAY,UAAU,IAGnCxd,EAAOhrB,UAAUwhE,YAAc,SAAUz+D,GACrCmc,SAASspB,YAAY,cAAc,EAAOzlC,IAG9CioB,EAAOhrB,UAAUyhE,YAAc,SAAU1+D,EAAOwC,QAC7B,IAAXA,IAAqBA,GAAS,GAClC,IAAI0/B,GAAQ,EAAG5iB,EAA8BuuB,IAAIvwC,KAAKm8B,QACtDyI,EAAMO,UAAS,GACf,IAAIk8B,EAAaxiD,SAASG,cAAc,YACxCqiD,EAAW99C,UAAY7gB,EACvBkiC,EAAMiD,WAAWw5B,EAAW94B,QAAQC,WAAU,IACd,OAA5BxoC,KAAKm8B,OAAOM,aACZz8B,KAAKm8B,OAAOgN,GAAGjB,cAAe,EAC1BhjC,GACAqtC,EAAWvyC,KAAKm8B,SAGa,YAA5Bn8B,KAAKm8B,OAAOM,aACjBz8B,KAAKm8B,OAAOkN,QAAQnB,cAAe,EAC/BhjC,GACAkkD,GAAYppD,KAAKm8B,OAAQpY,eAAeI,WAAW,KAGtB,OAA5BnkB,KAAKm8B,OAAOM,cACjBz8B,KAAKm8B,OAAOoN,GAAGrB,cAAe,EAC1BhjC,GACAgE,EAAMlJ,KAAKm8B,OAAQpY,eAAeI,WAAW,IAAI,KAK7DwG,EAAOhrB,UAAU2hE,SAAW,SAAU56C,EAAUq2C,GAC5C,IAAIrzB,EAAQ1pC,UACO,IAAf+8D,IAAyBA,GAAa,GACV,OAA5B/8D,KAAKm8B,OAAOM,aACZz8B,KAAKm8B,OAAOgN,GAAGvqB,QAAQ2E,UAAYvjB,KAAKm8B,OAAO5U,KAAKw9B,gBAAgBr+B,GACpE8rB,GAAmBxyC,KAAKm8B,OAAQ,CAC5ByS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAGgB,YAA5B9uC,KAAKm8B,OAAOM,YACjBwiB,GAAcj/C,KAAKm8B,OAAQzV,EAAU,CACjCkoB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAIjB9uC,KAAKm8B,OAAOoN,GAAG3qB,QAAQ2E,UAAYvjB,KAAKm8B,OAAO5U,KAAKu6B,eAAep7B,GACnE1mB,KAAKm8B,OAAOoN,GAAG3qB,QACVgB,iBAAiB,wCACjBvgB,SAAQ,SAAU2jB,GACnBqpB,EAAkBrpB,EAAM0mB,EAAMvN,WAElCwS,GAA2B3uC,KAAKm8B,OAAQ,CACpCyS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAGrB9uC,KAAKm8B,OAAO5yB,QAAQrE,OAAOlF,KAAKm8B,QAC3BzV,IACD0kB,EAAUprC,KAAKm8B,OAAQ,CAAC,QAAS,WAAY,UAAW,SACpDn8B,KAAKm8B,OAAOkN,QAAQqC,UACpB1rC,KAAKm8B,OAAOkN,QAAQqC,QAAQhsB,MAAMuE,QAAU,QAEhDjkB,KAAK0gE,cAEL3D,GACA/8D,KAAK+8D,cAIbpyC,EAAOhrB,UAAUo9D,WAAa,WAC1B/8D,KAAKm8B,OAAOkU,KAAK0sB,WAAW/8D,KAAKm8B,QACjCn8B,KAAKm8B,OAAOkU,KAAKwG,eAAe72C,KAAKm8B,SAGzCxR,EAAOhrB,UAAU4hE,QAAU,WACvBvhE,KAAKm8B,OAAOvd,QAAQ2E,UAAYvjB,KAAKm8B,OAAO0Z,kBAC5C71C,KAAKm8B,OAAOvd,QAAQuC,UAAUgN,OAAO,UACrCnuB,KAAKm8B,OAAOvd,QAAQe,gBAAgB,SACpCd,SAAS2C,eAAe,oBAAoB2M,SAC5CnuB,KAAK0gE,aACLnrB,IACAv1C,KAAKm8B,OAAOkN,QAAQk2B,kBAGxB50C,EAAOhrB,UAAU6hE,cAAgB,WAC7B,MAAgC,YAA5BxhE,KAAKm8B,OAAOM,YACL,GAEJz8B,KAAKm8B,OAAOkN,QAAQma,YAAYxjD,KAAKm8B,QAAQ,IAGxDxR,EAAOhrB,UAAU8hE,aAAe,SAAUplC,GACtC,GAAgC,YAA5Br8B,KAAKm8B,OAAOM,YAAhB,CAGA,IAAIilC,EAAS,SAAU1+C,GACnBA,EAAK7B,UAAUgN,OAAO,yBACtBkO,EAAIh9B,SAAQ,SAAUgM,GACd2X,EAAK9D,aAAa,eAAe9d,QAAQiK,IAAO,GAChD2X,EAAK7B,UAAUC,IAAI,6BAI/BphB,KAAKm8B,OAAOkN,QAAQzqB,QACfgB,iBAAiB,mBACjBvgB,SAAQ,SAAU2jB,GACnB0+C,EAAO1+C,MAEuC,SAA9ChjB,KAAKm8B,OAAOl2B,QAAQ2Y,QAAQc,MAAMuE,SAClCjkB,KAAKm8B,OAAOl2B,QAAQ2Y,QACfgB,iBAAiB,mBACjBvgB,SAAQ,SAAU2jB,GACnB0+C,EAAO1+C,QAKnB2H,EAAOhrB,UAAUgiE,eAAiB,SAAUtlC,GACxC,GAAgC,YAA5Br8B,KAAKm8B,OAAOM,YAAhB,CAGA,IAAImlC,EAAW,SAAU5+C,GACrBqZ,EAAIh9B,SAAQ,SAAUgM,GACd2X,EAAK9D,aAAa,eAAe9d,QAAQiK,IAAO,GAChD2X,EAAK7B,UAAUgN,OAAO,6BAIlCnuB,KAAKm8B,OAAOkN,QAAQzqB,QACfgB,iBAAiB,mBACjBvgB,SAAQ,SAAU2jB,GACnB4+C,EAAS5+C,MAEqC,SAA9ChjB,KAAKm8B,OAAOl2B,QAAQ2Y,QAAQc,MAAMuE,SAClCjkB,KAAKm8B,OAAOl2B,QAAQ2Y,QACfgB,iBAAiB,mBACjBvgB,SAAQ,SAAU2jB,GACnB4+C,EAAS5+C,QAKrB2H,EAAOhrB,UAAUkiE,iBAAmB,SAAUC,GAC1C,IAAIp4B,EAAQ1pC,KACZ,GAAgC,YAA5BA,KAAKm8B,OAAOM,YAAhB,CAGA,IAAIkkC,EAAa,SAAU39C,EAAM++C,GAC7B,IAAI1lC,EAAMrZ,EAAK9D,aAAa,eAAe/F,MAAM,KACjDkjB,EAAIsb,MAAK,SAAUtsC,EAAIjI,GACnB,GAAIiI,IAAO02D,EAEP,OADA1lC,EAAIl4B,OAAOf,EAAO,IACX,KAGI,IAAfi5B,EAAIt+B,QACJilB,EAAK6M,UAAY7M,EAAKO,WACtB,EAAGvB,EAA8BuuB,IAAI7G,EAAMvN,QAAQgJ,UAAS,IAG5DniB,EAAKyB,aAAa,cAAe4X,EAAI5oB,KAAK,OAGlDquD,EAAUziE,SAAQ,SAAU0iE,GACxBr4B,EAAMvN,OAAOkN,QAAQzqB,QAChBgB,iBAAiB,mBACjBvgB,SAAQ,SAAU2jB,GACnB29C,EAAW39C,EAAM++C,MAE8B,SAA/Cr4B,EAAMvN,OAAOl2B,QAAQ2Y,QAAQc,MAAMuE,SACnCylB,EAAMvN,OAAOl2B,QAAQ2Y,QAChBgB,iBAAiB,mBACjBvgB,SAAQ,SAAU2jB,GACnB29C,EAAW39C,EAAM++C,SAI7BrrB,GAAiB12C,KAAKm8B,OAAQ,CAC1ByS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,MAGrBnkB,EAAOhrB,UAAUguB,KAAO,SAAUtiB,EAAIgc,GAClC,IAAIqiB,EAAQ1pC,KACZA,KAAKm8B,OAAS,CACVM,YAAapV,EAAcP,KAC3BlI,QAASvT,EACTogC,KAAM,IAAI8jB,GAAKloC,EAAcokB,KAAKoY,QAClCt8B,UAAMrpB,EACNgoB,QAASmB,EACTwuB,kBAAmBxqC,EAAGkY,UACtBha,QAAS,IAAIioD,GAAQhyC,OAAOkK,WAAWngB,SACvC+qC,IAAK,IAAIsf,IAEb5zD,KAAKm8B,OAAOgN,GAAK,IAAIoqB,GAAOvzD,KAAKm8B,QACjCn8B,KAAKm8B,OAAOkU,KAAO,IAAIusB,GACvB58D,KAAKm8B,OAAOkN,QAAU,IAAI+0B,GAAQp+D,KAAKm8B,QACvCn8B,KAAKm8B,OAAOoN,GAAK,IAAIynB,GAAGhxD,KAAKm8B,QAC7Bn8B,KAAKm8B,OAAOoB,QAAU,IAAIg/B,GAAQv8D,KAAKm8B,QACnC9U,EAAcqjB,OAAOthC,SACrBpJ,KAAKm8B,OAAOuO,OAAS,IAAImoB,GAAO7yD,KAAKm8B,SAErCn8B,KAAKm8B,OAAOoB,QAAQgO,SAAS5B,WAC7B3pC,KAAKm8B,OAAOwN,SAAW,IAAIH,IAE3BniB,EAAcgtB,OAAOjlB,KAAO/H,EAAcgtB,OAAO1qC,WACjD3J,KAAKm8B,OAAOkY,OAAS,IAAIyR,KAE7B,EAAGhlC,EAAyBwG,GAAGD,EAAc26C,WACzC36C,EAAcjB,IAAM,4BAA6B,oBAAoBjb,MAAK,WAC1Eu+B,EAAMvN,OAAO5U,MAAO,EAAGxF,GAAqByF,GAAG,CAC3CC,UAAWiiB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAASe,UACjDC,iBAAkBgiB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAC1CgB,iBACLC,UAAW+hB,EAAMvN,OAAOjW,QAAQulB,KAAKllB,UACrCqB,OAAQ8hB,EAAMvN,OAAOjW,QAAQulB,KAAKD,MAClC3jB,YAAa6hB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAASmB,YACnDC,UAAW4hB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAASoB,UACjDC,eAAe,EACfC,gBAAiB0hB,EAAMvN,OAAOjW,QAAQjgB,QAAQ2gB,KAAKqB,YACnDE,SAAUuhB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAASyB,SAChDC,WAAYshB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAAS0B,WAClDC,UAAWqhB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAAS2B,UACjDC,KAAMohB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAAS4B,KAC5CC,iBAAkBmhB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAC1C6B,iBACLC,wBAAyBkhB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SACjD8B,wBACLC,SAAUihB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAAS+B,SAChDC,IAAKghB,EAAMvN,OAAOjW,QAAQjgB,QAAQygB,SAASgC,MAE/CghB,EAAMvN,OAAOl2B,QAAU,IAAIyrD,GAAQhoB,EAAMvN,QACzCgY,EAAOzK,EAAMvN,QACT9U,EAAche,OACdge,EAAche,QAEdge,EAAcpe,OAEd,EAAG6X,EAA6BmS,GAAG5L,EAAcjB,IAAM,kBAAoBiB,EAAcpe,KAAO,MAAO,wBAI5G0hB,EAxagB,CAyazB1lB,EAAO,YACoB,MAAMga,GAAM,IA32UzC,GA+2UAf,EAAsBA,EAAoB,WACzBA,GArkeD","file":"js/chunk-65d2a4ef.135978ca.js","sourcesContent":["var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar floor = Math.floor;\nvar charAt = uncurryThis(''.charAt);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d{1,2}|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d{1,2})/g;\n\n// `GetSubstitution` abstract operation\n// https://tc39.es/ecma262/#sec-getsubstitution\nmodule.exports = function (matched, str, position, captures, namedCaptures, replacement) {\n  var tailPos = position + matched.length;\n  var m = captures.length;\n  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n  if (namedCaptures !== undefined) {\n    namedCaptures = toObject(namedCaptures);\n    symbols = SUBSTITUTION_SYMBOLS;\n  }\n  return replace(replacement, symbols, function (match, ch) {\n    var capture;\n    switch (charAt(ch, 0)) {\n      case '$': return '$';\n      case '&': return matched;\n      case '`': return stringSlice(str, 0, position);\n      case \"'\": return stringSlice(str, tailPos);\n      case '<':\n        capture = namedCaptures[stringSlice(ch, 1, -1)];\n        break;\n      default: // \\d\\d?\n        var n = +ch;\n        if (n === 0) return match;\n        if (n > m) {\n          var f = floor(n / 10);\n          if (f === 0) return match;\n          if (f <= m) return captures[f - 1] === undefined ? charAt(ch, 1) : captures[f - 1] + charAt(ch, 1);\n          return match;\n        }\n        capture = captures[n - 1];\n    }\n    return capture === undefined ? '' : capture;\n  });\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof-raw');\nvar regexpExec = require('../internals/regexp-exec');\n\nvar TypeError = global.TypeError;\n\n// `RegExpExec` abstract operation\n// https://tc39.es/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (isCallable(exec)) {\n    var result = call(exec, R, S);\n    if (result !== null) anObject(result);\n    return result;\n  }\n  if (classof(R) === 'RegExp') return call(regexpExec, R, S);\n  throw TypeError('RegExp#exec called on incompatible receiver');\n};\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar DOMTokenListPrototype = require('../internals/dom-token-list-prototype');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar handlePrototype = function (CollectionPrototype) {\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  if (DOMIterables[COLLECTION_NAME]) {\n    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);\n  }\n}\n\nhandlePrototype(DOMTokenListPrototype);\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleEdit.vue?vue&type=style&index=0&id=1537a3db&lang=less&scoped=true&\"","'use strict';\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar fails = require('../internals/fails');\nvar anObject = require('../internals/an-object');\nvar isCallable = require('../internals/is-callable');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar getMethod = require('../internals/get-method');\nvar getSubstitution = require('../internals/get-substitution');\nvar regExpExec = require('../internals/regexp-exec-abstract');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar REPLACE = wellKnownSymbol('replace');\nvar max = Math.max;\nvar min = Math.min;\nvar concat = uncurryThis([].concat);\nvar push = uncurryThis([].push);\nvar stringIndexOf = uncurryThis(''.indexOf);\nvar stringSlice = uncurryThis(''.slice);\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// IE <= 11 replaces $0 with the whole match, as if it was $&\n// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0\nvar REPLACE_KEEPS_$0 = (function () {\n  // eslint-disable-next-line regexp/prefer-escape-replacement-dollar-char -- required for testing\n  return 'a'.replace(/./, '$0') === '$0';\n})();\n\n// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string\nvar REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {\n  if (/./[REPLACE]) {\n    return /./[REPLACE]('a', '$0') === '';\n  }\n  return false;\n})();\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  // eslint-disable-next-line regexp/no-useless-dollar-replacements -- false positive\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', function (_, nativeReplace, maybeCallNative) {\n  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';\n\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.es/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = searchValue == undefined ? undefined : getMethod(searchValue, REPLACE);\n      return replacer\n        ? call(replacer, searchValue, O, replaceValue)\n        : call(nativeReplace, toString(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace\n    function (string, replaceValue) {\n      var rx = anObject(this);\n      var S = toString(string);\n\n      if (\n        typeof replaceValue == 'string' &&\n        stringIndexOf(replaceValue, UNSAFE_SUBSTITUTE) === -1 &&\n        stringIndexOf(replaceValue, '$<') === -1\n      ) {\n        var res = maybeCallNative(nativeReplace, rx, S, replaceValue);\n        if (res.done) return res.value;\n      }\n\n      var functionalReplace = isCallable(replaceValue);\n      if (!functionalReplace) replaceValue = toString(replaceValue);\n\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n\n        push(results, result);\n        if (!global) break;\n\n        var matchStr = toString(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = toString(result[0]);\n        var position = max(min(toIntegerOrInfinity(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) push(captures, maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = concat([matched], captures, position, S);\n          if (namedCaptures !== undefined) push(replacerArgs, namedCaptures);\n          var replacement = toString(apply(replaceValue, undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += stringSlice(S, nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + stringSlice(S, nextSourcePosition);\n    }\n  ];\n}, !REPLACE_SUPPORTS_NAMED_GROUPS || !REPLACE_KEEPS_$0 || REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\n\n// `AdvanceStringIndex` abstract operation\n// https://tc39.es/ecma262/#sec-advancestringindex\nmodule.exports = function (S, index, unicode) {\n  return index + (unicode ? charAt(S, index).length : 1);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-edit-container\"},[_c('div',{staticClass:\"article-edit-bar\"},[_c('span',{staticClass:\"article-edit-bar-title\"},[_vm._v(_vm._s(_vm.article.title === \"\" ? \"新文章\" : _vm.article.title))]),_c('span',{staticClass:\"article-edit-bar-operator\"},[_c('span',{staticClass:\"article-edit-bar-operator-item\"},[_c('t-button',{attrs:{\"theme\":\"warning\",\"variant\":\"dashed\"},on:{\"click\":_vm.openDrawer}},[_vm._v(\"附件\")])],1),_c('span',{staticClass:\"article-edit-bar-operator-item\"},[_c('t-button',{attrs:{\"theme\":\"danger\",\"variant\":\"base\"},on:{\"click\":_vm.saveDraft}},[_vm._v(\"保存草稿\")])],1),_c('span',{staticClass:\"article-edit-bar-operator-item\"},[_c('t-button',{attrs:{\"theme\":\"primary\",\"variant\":\"base\"},on:{\"click\":_vm.preview}},[_vm._v(\"预览\")])],1),_c('span',{staticClass:\"article-edit-bar-operator-item\"},[_c('t-button',{attrs:{\"theme\":\"primary\",\"variant\":\"base\"},on:{\"click\":_vm.handlePublish}},[_vm._v(\"发布\")])],1)])]),_c('div',{staticClass:\"article-edit-title\"},[_c('t-input',{attrs:{\"size\":\"large\",\"placeholder\":\"请输入标题\"},model:{value:(_vm.article.title),callback:function ($$v) {_vm.$set(_vm.article, \"title\", $$v)},expression:\"article.title\"}})],1),_c('div',{staticClass:\"vditor-container\"},[_c('Vditor',{attrs:{\"originalContent\":_vm.article.originalContent},on:{\"contentChange\":_vm.onContentChange,\"countWord\":_vm.countWord}})],1),_c('t-tabs',{attrs:{\"defaultValue\":\"basic\"}},[_c('t-tab-panel',{attrs:{\"value\":\"basic\"},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_c('icon',{staticStyle:{\"margin-right\":\"4px\"},attrs:{\"name\":\"setting\"}}),_vm._v(\" 基本设置 \")]},proxy:true}])},[_c('div',{staticClass:\"basic-setting-form-container\"},[_c('t-form',{ref:\"form\",attrs:{\"labelAlign\":\"top\",\"colon\":true}},[_c('t-form-item',{attrs:{\"label\":\"文章别名\",\"name\":\"slug\",\"help\":'http://alkaidchen.com/article/' +\n              (_vm.article.slug === '' ? '{slug}' : _vm.article.slug)}},[_c('t-input',{attrs:{\"placeholder\":\"不填写则会默认使用标题拼音或文章id\"},model:{value:(_vm.article.slug),callback:function ($$v) {_vm.$set(_vm.article, \"slug\", $$v)},expression:\"article.slug\"}})],1),_c('t-form-item',{attrs:{\"label\":\"开启评论\",\"name\":\"allowedComment\"}},[_c('t-switch',{model:{value:(_vm.article.allowedComment),callback:function ($$v) {_vm.$set(_vm.article, \"allowedComment\", $$v)},expression:\"article.allowedComment\"}})],1),_c('t-form-item',{attrs:{\"label\":\"是否置顶\",\"name\":\"isTop\"}},[_c('t-switch',{model:{value:(_vm.article.isTop),callback:function ($$v) {_vm.$set(_vm.article, \"isTop\", $$v)},expression:\"article.isTop\"}})],1),_c('t-divider'),_c('t-form-item',{attrs:{\"label\":\"分类\",\"name\":\"category\"}},[_c('div',{staticClass:\"category-container\"},[_c('t-checkbox-group',{attrs:{\"options\":_vm.categoryOptions},model:{value:(_vm.article.categories),callback:function ($$v) {_vm.$set(_vm.article, \"categories\", $$v)},expression:\"article.categories\"}}),_c('div',{staticClass:\"create-category-container\"},[_c('div',{staticClass:\"create-category-button-container\"},[_c('t-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showAddCategoryForm),expression:\"!showAddCategoryForm\"}],attrs:{\"theme\":\"primary\"},on:{\"click\":function($event){_vm.showAddCategoryForm = true}}},[_c('add-icon',{attrs:{\"slot\":\"icon\",\"size\":\"200px\"},slot:\"icon\"}),_vm._v(\" 新建 \")],1)],1),_c('div',{staticClass:\"create-category-form-container\"},[_c('t-form',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAddCategoryForm),expression:\"showAddCategoryForm\"}],ref:\"form\",attrs:{\"data\":_vm.newCategory,\"scrollToFirstError\":\"smooth\",\"labelWidth\":\"0\"}},[_c('div',{staticClass:\"create-category-form-item\"},[_c('t-form-item',{attrs:{\"name\":\"name\"}},[_c('t-input',{attrs:{\"placeholder\":\"分类名称\"},model:{value:(_vm.newCategory.name),callback:function ($$v) {_vm.$set(_vm.newCategory, \"name\", $$v)},expression:\"newCategory.name\"}})],1)],1),_c('div',{staticClass:\"create-category-form-item\"},[_c('t-form-item',{attrs:{\"name\":\"slug\",\"help\":'http://alkaidchen.com/category/' +\n                          (_vm.newCategory.slug === ''\n                            ? '{slug}'\n                            : _vm.newCategory.slug)}},[_c('t-input',{attrs:{\"placeholder\":\"分类别名\"},model:{value:(_vm.newCategory.slug),callback:function ($$v) {_vm.$set(_vm.newCategory, \"slug\", $$v)},expression:\"newCategory.slug\"}})],1)],1),_c('div',{staticClass:\"create-category-form-item\"},[_c('t-form-item',[_c('t-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"theme\":\"primary\"},on:{\"click\":_vm.handleCreateCategory}},[_vm._v(\"保存\")]),_c('t-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"theme\":\"default\",\"variant\":\"base\"},on:{\"click\":_vm.cancelCreateCategory}},[_vm._v(\"取消\")])],1)],1)])],1)])],1)]),_c('t-divider'),_c('t-form-item',{attrs:{\"label\":\"标签\",\"name\":\"tags\"}},[_c('t-select',{attrs:{\"creatable\":\"\",\"filterable\":\"\",\"multiple\":\"\",\"minCollapsedNum\":3,\"options\":_vm.tagOptions},on:{\"create\":_vm.handleCreateTag},model:{value:(_vm.article.tags),callback:function ($$v) {_vm.$set(_vm.article, \"tags\", $$v)},expression:\"article.tags\"}})],1),_c('t-form-item',{attrs:{\"label\":\"摘要\",\"name\":\"summary\"}},[_c('t-textarea',{attrs:{\"placeholder\":\"若不填写，将会从文章中自动截取\",\"name\":\"summary\",\"autosize\":{ minRows: 6 }},model:{value:(_vm.article.summary),callback:function ($$v) {_vm.$set(_vm.article, \"summary\", $$v)},expression:\"article.summary\"}})],1),_c('t-form-item',{attrs:{\"label\":\"封面图\",\"name\":\"cover\"}},[_c('div',{staticClass:\"article-cover-setting\"},[_c('div',{staticClass:\"article-cover-preview\"},[_c('img',{attrs:{\"src\":_vm.article.cover === ''\n                      ? 'http://119.91.26.252:8090/images/placeholder.jpg'\n                      : _vm.article.cover}})]),_c('div',{staticClass:\"article-cover-input\"},[_c('t-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"点击封面选择图片，或者输入外部链接\"},model:{value:(_vm.article.cover),callback:function ($$v) {_vm.$set(_vm.article, \"cover\", $$v)},expression:\"article.cover\"}})],1)])])],1)],1)]),_c('t-tab-panel',{attrs:{\"value\":\"advanced\"},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_c('icon',{staticStyle:{\"margin-right\":\"4px\"},attrs:{\"name\":\"internet\"}}),_vm._v(\" 高级设置 \")]},proxy:true}])},[_c('div',{staticClass:\"advanced-setting-form-container\"},[_c('t-form',{ref:\"form\",attrs:{\"labelAlign\":\"top\",\"colon\":true}},[_c('t-form-item',{attrs:{\"label\":\"访问密码\",\"name\":\"password\"}},[_c('t-input',{attrs:{\"type\":\"password\",\"placeholder\":\"\"},model:{value:(_vm.article.password),callback:function ($$v) {_vm.$set(_vm.article, \"password\", $$v)},expression:\"article.password\"}})],1),_c('t-form-item',{attrs:{\"label\":\"SEO 关键字\",\"name\":\"keywords\"}},[_c('t-select',{attrs:{\"creatable\":\"\",\"filterable\":\"\",\"multiple\":\"\",\"placeholder\":\"若不填写，将使用标签作为关键字\",\"options\":_vm.seoKeywordOptions,\"minCollapsedNum\":3},on:{\"create\":_vm.createSEOKeyword},model:{value:(_vm.article.seoKeywords),callback:function ($$v) {_vm.$set(_vm.article, \"seoKeywords\", $$v)},expression:\"article.seoKeywords\"}})],1),_c('t-form-item',{attrs:{\"label\":\"SEO 描述\",\"name\":\"description\"}},[_c('t-textarea',{attrs:{\"placeholder\":\"若不填写，将使用摘要作为描述\",\"name\":\"seoDescription\",\"autosize\":{ minRows: 6 }},model:{value:(_vm.article.seoDescription),callback:function ($$v) {_vm.$set(_vm.article, \"seoDescription\", $$v)},expression:\"article.seoDescription\"}})],1)],1)],1)])],1),_c('t-drawer',{attrs:{\"header\":\"基本设置\",\"visible\":_vm.attachDrawerVisible,\"size\":\"480px\",\"onOverlayClick\":function () { return (_vm.attachDrawerVisible = false); },\"onConfirm\":function () { return (_vm.attachDrawerVisible = false); },\"placement\":\"right\"},on:{\"cancel\":function($event){_vm.attachDrawerVisible = false}}},[_c('p',[_vm._v(\"抽屉的内容\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"vditor\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"vditor\"></div>\n</template>\n\n<script>\nimport Vditor from \"vditor\";\nimport \"vditor/dist/index.css\";\n\nexport default {\n  data() {\n    return {\n      contentEditor: null,\n    };\n  },\n  props: {\n    origionContent: {\n      type: String,\n      required: false,\n      default: \"\",\n    },\n  },\n  methods: {\n    contentChange() {\n      this.$emit(\n        \"contentChange\",\n        this.contentEditor.getValue(),\n        this.contentEditor.getHTML()\n      );\n    },\n    countWord(length) {\n      this.$emit(\n        \"countWord\",\n        length\n      )\n    }\n  },\n  mounted() {\n    this.contentEditor = new Vditor(\"vditor\", {\n      height: 800,\n      icon: \"material\",\n      input: this.contentChange,\n      counter: {\n        enable: true,\n        type: \"text\",\n        after: (length) => {\n          this.countWord(length)\n        }\n      },\n      preview: {\n        delay: 50,\n      },\n      outline: {\n        enable: true,\n      },\n      cache: {\n        enable: false,\n      },\n      after: () => {\n        if (this.$store.state.app.isDark) {\n          this.contentEditor.setTheme(\"dark\", \"dark\");\n        } else {\n          this.contentEditor.setTheme(\"classic\", \"light\");\n        }\n        this.contentEditor.insertValue(this.origionContent);\n      },\n    });\n  },\n  watch: {\n    // 监听 store里面的数据\n    \"$store.state.app.isDark\": {\n      deep: true,\n      handler: function (newValue) {\n        // result为true，则表示是全部选中\n        if (newValue) {\n          this.contentEditor.setTheme(\"dark\", \"dark\");\n        } else {\n          this.contentEditor.setTheme(\"classic\", \"light\");\n        }\n      },\n    },\n  },\n};\n</script>\n\n<style></style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Vditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Vditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Vditor.vue?vue&type=template&id=cc1da86c&\"\nimport script from \"./Vditor.vue?vue&type=script&lang=js&\"\nexport * from \"./Vditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"article-edit-container\">\n    <div class=\"article-edit-bar\">\n      <span class=\"article-edit-bar-title\">{{\n        article.title === \"\" ? \"新文章\" : article.title\n      }}</span>\n      <span class=\"article-edit-bar-operator\">\n        <span class=\"article-edit-bar-operator-item\">\n          <t-button theme=\"warning\" variant=\"dashed\" @click=\"openDrawer\"\n            >附件</t-button\n          >\n        </span>\n        <span class=\"article-edit-bar-operator-item\">\n          <t-button theme=\"danger\" variant=\"base\" @click=\"saveDraft\"\n            >保存草稿</t-button\n          >\n        </span>\n        <span class=\"article-edit-bar-operator-item\">\n          <t-button theme=\"primary\" variant=\"base\" @click=\"preview\"\n            >预览</t-button\n          >\n        </span>\n        <span class=\"article-edit-bar-operator-item\">\n          <t-button theme=\"primary\" variant=\"base\" @click=\"handlePublish\"\n            >发布</t-button\n          >\n        </span>\n      </span>\n    </div>\n    <div class=\"article-edit-title\">\n      <t-input size=\"large\" placeholder=\"请输入标题\" v-model=\"article.title\" />\n    </div>\n    <div class=\"vditor-container\">\n      <Vditor\n        :originalContent=\"article.originalContent\"\n        @contentChange=\"onContentChange\"\n        @countWord=\"countWord\"\n      ></Vditor>\n    </div>\n    <t-tabs defaultValue=\"basic\">\n      <t-tab-panel value=\"basic\">\n        <template #label>\n          <icon name=\"setting\" style=\"margin-right: 4px\" /> 基本设置\n        </template>\n        <div class=\"basic-setting-form-container\">\n          <t-form ref=\"form\" labelAlign=\"top\" :colon=\"true\">\n            <t-form-item\n              label=\"文章别名\"\n              name=\"slug\"\n              :help=\"\n                'http://alkaidchen.com/article/' +\n                (article.slug === '' ? '{slug}' : article.slug)\n              \"\n            >\n              <t-input\n                v-model=\"article.slug\"\n                placeholder=\"不填写则会默认使用标题拼音或文章id\"\n              ></t-input>\n            </t-form-item>\n            <t-form-item label=\"开启评论\" name=\"allowedComment\">\n              <t-switch v-model=\"article.allowedComment\"></t-switch>\n            </t-form-item>\n            <t-form-item label=\"是否置顶\" name=\"isTop\">\n              <t-switch v-model=\"article.isTop\"></t-switch>\n            </t-form-item>\n            <t-divider></t-divider>\n            <t-form-item label=\"分类\" name=\"category\">\n              <div class=\"category-container\">\n                <t-checkbox-group\n                  v-model=\"article.categories\"\n                  :options=\"categoryOptions\"\n                ></t-checkbox-group>\n                <div class=\"create-category-container\">\n                  <div class=\"create-category-button-container\">\n                    <t-button\n                      theme=\"primary\"\n                      @click=\"showAddCategoryForm = true\"\n                      v-show=\"!showAddCategoryForm\"\n                    >\n                      <add-icon slot=\"icon\" size=\"200px\" />\n                      新建\n                    </t-button>\n                  </div>\n                  <div class=\"create-category-form-container\">\n                    <t-form\n                      :data=\"newCategory\"\n                      ref=\"form\"\n                      v-show=\"showAddCategoryForm\"\n                      scrollToFirstError=\"smooth\"\n                      labelWidth=\"0\"\n                    >\n                      <div class=\"create-category-form-item\">\n                        <t-form-item name=\"name\">\n                          <t-input\n                            v-model=\"newCategory.name\"\n                            placeholder=\"分类名称\"\n                          ></t-input>\n                        </t-form-item>\n                      </div>\n                      <div class=\"create-category-form-item\">\n                        <t-form-item\n                          name=\"slug\"\n                          :help=\"\n                            'http://alkaidchen.com/category/' +\n                            (newCategory.slug === ''\n                              ? '{slug}'\n                              : newCategory.slug)\n                          \"\n                        >\n                          <t-input\n                            v-model=\"newCategory.slug\"\n                            placeholder=\"分类别名\"\n                          ></t-input>\n                        </t-form-item>\n                      </div>\n                      <div class=\"create-category-form-item\">\n                        <t-form-item>\n                          <t-button\n                            theme=\"primary\"\n                            style=\"margin-right: 10px\"\n                            @click=\"handleCreateCategory\"\n                            >保存</t-button\n                          >\n                          <t-button\n                            theme=\"default\"\n                            variant=\"base\"\n                            style=\"margin-right: 10px\"\n                            @click=\"cancelCreateCategory\"\n                            >取消</t-button\n                          >\n                        </t-form-item>\n                      </div>\n                    </t-form>\n                  </div>\n                </div>\n              </div>\n            </t-form-item>\n            <t-divider></t-divider>\n            <t-form-item label=\"标签\" name=\"tags\">\n              <t-select\n                v-model=\"article.tags\"\n                creatable\n                filterable\n                multiple\n                :minCollapsedNum=\"3\"\n                :options=\"tagOptions\"\n                @create=\"handleCreateTag\"\n              />\n            </t-form-item>\n            <t-form-item label=\"摘要\" name=\"summary\">\n              <t-textarea\n                v-model=\"article.summary\"\n                placeholder=\"若不填写，将会从文章中自动截取\"\n                name=\"summary\"\n                :autosize=\"{ minRows: 6 }\"\n              />\n            </t-form-item>\n            <t-form-item label=\"封面图\" name=\"cover\">\n              <div class=\"article-cover-setting\">\n                <div class=\"article-cover-preview\">\n                  <img\n                    :src=\"\n                      article.cover === ''\n                        ? 'http://119.91.26.252:8090/images/placeholder.jpg'\n                        : article.cover\n                    \"\n                  />\n                </div>\n                <div class=\"article-cover-input\">\n                  <t-input\n                    clearable\n                    v-model=\"article.cover\"\n                    placeholder=\"点击封面选择图片，或者输入外部链接\"\n                  ></t-input>\n                </div>\n              </div>\n            </t-form-item>\n          </t-form>\n        </div>\n      </t-tab-panel>\n      <t-tab-panel value=\"advanced\">\n        <template #label>\n          <icon name=\"internet\" style=\"margin-right: 4px\" /> 高级设置\n        </template>\n        <div class=\"advanced-setting-form-container\">\n          <t-form ref=\"form\" labelAlign=\"top\" :colon=\"true\">\n            <t-form-item label=\"访问密码\" name=\"password\">\n              <t-input\n                type=\"password\"\n                v-model=\"article.password\"\n                placeholder=\"\"\n              >\n              </t-input>\n            </t-form-item>\n            <t-form-item label=\"SEO 关键字\" name=\"keywords\">\n              <t-select\n                v-model=\"article.seoKeywords\"\n                creatable\n                filterable\n                multiple\n                placeholder=\"若不填写，将使用标签作为关键字\"\n                :options=\"seoKeywordOptions\"\n                :minCollapsedNum=\"3\"\n                @create=\"createSEOKeyword\"\n              />\n            </t-form-item>\n            <t-form-item label=\"SEO 描述\" name=\"description\">\n              <t-textarea\n                v-model=\"article.seoDescription\"\n                placeholder=\"若不填写，将使用摘要作为描述\"\n                name=\"seoDescription\"\n                :autosize=\"{ minRows: 6 }\"\n              />\n            </t-form-item>\n          </t-form>\n        </div>\n      </t-tab-panel>\n    </t-tabs>\n    <t-drawer\n      header=\"基本设置\"\n      :visible=\"attachDrawerVisible\"\n      size=\"480px\"\n      @cancel=\"attachDrawerVisible = false\"\n      :onOverlayClick=\"() => (attachDrawerVisible = false)\"\n      :onConfirm=\"() => (attachDrawerVisible = false)\"\n      placement=\"right\"\n    >\n      <p>抽屉的内容</p>\n    </t-drawer>\n  </div>\n</template>\n\n<script>\nimport Vditor from \"@/components/vditor/Vditor.vue\";\nimport { Icon, AddIcon } from \"tdesign-icons-vue\";\n\nexport default {\n  name: \"ArticleEdit\",\n  data() {\n    return {\n      attachDrawerVisible: false,\n      article: {\n        title: \"\",\n        originalContent: \"\",\n        formatContent: \"\",\n        slug: \"\",\n        allowedComment: true,\n        isTop: false,\n        categories: [],\n        tags: [],\n        summary: \"\",\n        cover: \"\",\n        password: \"\",\n        wordCount: 0,\n        seoKeywords: [],\n        seoDescription: \"\",\n        status: 0,\n      },\n      categoryOptions: [],\n      tagOptions: [],\n      seoKeywordOptions: [],\n      showAddCategoryForm: false,\n      newCategory: {\n        name: \"\",\n        slug: \"\",\n      },\n    };\n  },\n  methods: {\n    // get content from sub component Vditor\n    onContentChange(originalContent, formatContent) {\n      this.article.originalContent = originalContent;\n      this.article.formatContent = formatContent;\n    },\n    // get word count from sub component Vditor\n    countWord(length) {\n      this.article.wordCount = length;\n    },\n    saveDraft() {\n      console.log(\"保存草稿\");\n    },\n    preview() {\n      console.log(\"预览\");\n    },\n    openDrawer() {\n      this.attachDrawerVisible = true;\n    },\n    handlePublish() {\n      //validate\n      if (this.article.title === \"\") {\n        this.$message.warning(\"文章标题不能为空\");\n        return;\n      }\n      this.$request\n        .post(\"article\", this.article)\n        .then((res) => {\n          if (res.status === 0) {\n            this.$message.success(\"发布成功\");\n            this.$router.push({ name: \"ArticleList\" });\n          }\n        })\n        .catch(() => {\n          this.$message.warning(\"发布失败\");\n          // TODO: 换成修改按钮状态\n        });\n    },\n    handleCreateCategory() {\n      // remove whitespace\n      this.newCategory.name = this.newCategory.name.replace(/\\s*/g, \"\");\n      this.newCategory.slug = this.newCategory.slug.replace(/\\s*/g, \"\");\n      if (this.newCategory.name === \"\") {\n        this.$message.warning(\"分类名称不能为空\");\n        return;\n      }\n      if (this.newCategory.slug === \"\") {\n        this.$message.warning(\"分类别名不能为空\");\n        return;\n      }\n      this.$request\n        .post(\"category\", this.newCategory)\n        .then((res) => {\n          if (res.status === 0) {\n            this.$message.success(\"创建分类成功\");\n            this.categoryOptions.push({\n              value: res.data.id,\n              label: res.data.name,\n            });\n            this.cancelCreateCategory();\n          }\n        })\n        .catch(() => {\n          this.$message.warning(\"创建分类失败\");\n          // TODO: 换成修改按钮状态\n        });\n    },\n    cancelCreateCategory() {\n      this.newCategory.name = \"\";\n      this.newCategory.slug = \"\";\n      this.showAddCategoryForm = false;\n    },\n    handleCreateTag(value) {\n      value = value.replace(/\\s*/g, \"\");\n      if (value === \"\") {\n        this.$message.warning(\"标签不能为空\");\n        return;\n      }\n      var newTag = {\n        name: value,\n        slug: value,\n      };\n      this.$request\n        .post(\"tag\", newTag)\n        .then((res) => {\n          this.$message.success(\"创建标签成功\");\n          this.tagOptions.push({\n            value: res.data.id,\n            label: res.data.name,\n          });\n          this.article.tags.splice(this.article.tags.indexOf(value), 1);\n          this.article.tags.push(res.data.id);\n        })\n        .catch(() => {\n          this.article.tags.splice(this.article.tags.indexOf(value), 1);\n          this.$message.error(\"创建标签失败\");\n          // TODO: 换成修改按钮状态\n        });\n    },\n    createSEOKeyword(value) {\n      this.seoKeywordOptions.push({\n        value,\n        label: value,\n      });\n    },\n  },\n  components: { Vditor, Icon, AddIcon },\n  mounted() {\n    // list categories\n    this.$request.get(\"categories\").then((res) => {\n      res.data.forEach((category) => {\n        this.categoryOptions.push({\n          value: category.id,\n          label: category.name,\n        });\n      });\n    });\n\n    // list tags\n    this.$request.get(\"tags\").then((res) => {\n      res.data.forEach((tag) => {\n        this.tagOptions.push({\n          value: tag.id,\n          label: tag.name,\n        });\n      });\n    });\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import \"@/style/variables\";\n\n.article-edit-container {\n  margin-top: 10px;\n  .article-edit-bar {\n    height: 35px;\n    margin-top: 20px;\n    margin-bottom: 20px;\n    .article-edit-bar-title {\n      font-size: 30px;\n      font-weight: 1000;\n      text-align: center;\n      // color: @brand-color-1;\n    }\n    .article-edit-bar-operator {\n      float: right;\n      .article-edit-bar-operator-item {\n        margin-left: 15px;\n      }\n    }\n  }\n\n  .article-edit-title {\n    margin-top: 20px;\n    margin-bottom: 20px;\n  }\n\n  .vditor-container {\n    margin-bottom: 20px;\n  }\n  .basic-setting-form-container {\n    padding: 30px 30px;\n    max-width: 600px;\n    .category-container {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      .create-category-container {\n        display: flex;\n        flex-direction: row;\n        width: 100%;\n        .create-category-button-container {\n          margin: 15px 0;\n        }\n        .create-category-form-container {\n          width: 100%;\n          margin: 15px 0;\n          .create-category-form-item {\n            width: 100%;\n            margin: 15px 0;\n          }\n        }\n      }\n    }\n\n    .article-cover-setting {\n      width: 100%;\n      display: flex;\n      flex-direction: column;\n      .article-cover-preview {\n        width: 100%;\n        cursor: pointer;\n        border-radius: 4px;\n        img {\n          vertical-align: middle;\n          width: 100%;\n          border-style: none;\n        }\n      }\n      .article-cover-input {\n        margin-top: 10px;\n      }\n    }\n  }\n  .advanced-setting-form-container {\n    padding: 30px 30px;\n    max-width: 600px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleEdit.vue?vue&type=template&id=1537a3db&scoped=true&\"\nimport script from \"./ArticleEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArticleEdit.vue?vue&type=style&index=0&id=1537a3db&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1537a3db\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar redefine = require('../internals/redefine');\nvar regexpExec = require('../internals/regexp-exec');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar SPECIES = wellKnownSymbol('species');\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (KEY, exec, FORCED, SHAM) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegEp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n\n    if (KEY === 'split') {\n      // We can't use real regex here since it causes deoptimization\n      // and serious performance degradation in V8\n      // https://github.com/zloirock/core-js/issues/306\n      re = {};\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n      re.flags = '';\n      re[SYMBOL] = /./[SYMBOL];\n    }\n\n    re.exec = function () { execCalled = true; return null; };\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    FORCED\n  ) {\n    var uncurriedNativeRegExpMethod = uncurryThis(/./[SYMBOL]);\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      var uncurriedNativeMethod = uncurryThis(nativeMethod);\n      var $exec = regexp.exec;\n      if ($exec === regexpExec || $exec === RegExpPrototype.exec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: uncurriedNativeRegExpMethod(regexp, str, arg2) };\n        }\n        return { done: true, value: uncurriedNativeMethod(str, regexp, arg2) };\n      }\n      return { done: false };\n    });\n\n    redefine(String.prototype, KEY, methods[0]);\n    redefine(RegExpPrototype, SYMBOL, methods[1]);\n  }\n\n  if (SHAM) createNonEnumerableProperty(RegExpPrototype[SYMBOL], 'sham', true);\n};\n","/*!\n * Vditor v3.8.10 - A markdown editor written in TypeScript.\n *\n * MIT License\n *\n * Copyright (c) 2018-present B3log 开源, b3log.org\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vditor\"] = factory();\n\telse\n\t\troot[\"Vditor\"] = factory();\n})(this, function() {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 694:\n/***/ ((module) => {\n\n/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nvar diff_match_patch = function () {\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0; // Cost of an empty edit operation in terms of edit characters.\n\n  this.Diff_EditCost = 4; // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n\n  this.Match_Threshold = 0.5; // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n\n  this.Match_Distance = 1000; // When deleting a large block of text (over ~64 characters), how close do\n  // the contents have to be to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n\n  this.Patch_DeleteThreshold = 0.5; // Chunk size for context length.\n\n  this.Patch_Margin = 4; // The number of bits in an int.\n\n  this.Match_MaxBits = 32;\n}; //  DIFF FUNCTIONS\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\n\n\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n/**\n * Class representing one diff tuple.\n * ~Attempts to look like a two-element array (which is what this used to be).~\n * Constructor returns an actual two-element array, to allow destructing @JackuB\n * See https://github.com/JackuB/diff-match-patch/issues/14 for details\n * @param {number} op Operation, one of: DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL.\n * @param {string} text Text to be deleted, inserted, or retained.\n * @constructor\n */\n\ndiff_match_patch.Diff = function (op, text) {\n  return [op, text];\n};\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff.\n * @param {number=} opt_deadline Optional time when the diff should be complete\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\n *     instead.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_main = function (text1, text2, opt_checklines, opt_deadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof opt_deadline == 'undefined') {\n    if (this.Diff_Timeout <= 0) {\n      opt_deadline = Number.MAX_VALUE;\n    } else {\n      opt_deadline = new Date().getTime() + this.Diff_Timeout * 1000;\n    }\n  }\n\n  var deadline = opt_deadline; // Check for null inputs.\n\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  } // Check for equality (speedup).\n\n\n  if (text1 == text2) {\n    if (text1) {\n      return [new diff_match_patch.Diff(DIFF_EQUAL, text1)];\n    }\n\n    return [];\n  }\n\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n\n  var checklines = opt_checklines; // Trim off common prefix (speedup).\n\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength); // Trim off common suffix (speedup).\n\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength); // Compute the diff on the middle block.\n\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline); // Restore the prefix and suffix.\n\n  if (commonprefix) {\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, commonprefix));\n  }\n\n  if (commonsuffix) {\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, commonsuffix));\n  }\n\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_compute_ = function (text1, text2, checklines, deadline) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1)];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(0, i)), new diff_match_patch.Diff(DIFF_EQUAL, shorttext), new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(i + shorttext.length))]; // Swap insertions for deletions if diff is reversed.\n\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  } // Check to see if the problem can be split in two.\n\n\n  var hm = this.diff_halfMatch_(text1, text2);\n\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4]; // Send both pairs off for separate processing.\n\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline); // Merge the results.\n\n    return diffs_a.concat([new diff_match_patch.Diff(DIFF_EQUAL, mid_common)], diffs_b);\n  }\n\n  if (checklines && text1.length > 100 && text2.length > 100) {\n    return this.diff_lineMode_(text1, text2, deadline);\n  }\n\n  return this.diff_bisect_(text1, text2, deadline);\n};\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_lineMode_ = function (text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  var a = this.diff_linesToChars_(text1, text2);\n  text1 = a.chars1;\n  text2 = a.chars2;\n  var linearray = a.lineArray;\n  var diffs = this.diff_main(text1, text2, false, deadline); // Convert the diff back to original text.\n\n  this.diff_charsToLines_(diffs, linearray); // Eliminate freak matches (e.g. blank lines)\n\n  this.diff_cleanupSemantic(diffs); // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        break;\n\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        break;\n\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete >= 1 && count_insert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - count_delete - count_insert, count_delete + count_insert);\n          pointer = pointer - count_delete - count_insert;\n          var subDiff = this.diff_main(text_delete, text_insert, false, deadline);\n\n          for (var j = subDiff.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, subDiff[j]);\n          }\n\n          pointer = pointer + subDiff.length;\n        }\n\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n\n    pointer++;\n  }\n\n  diffs.pop(); // Remove the dummy entry at the end.\n\n  return diffs;\n};\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_bisect_ = function (text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length); // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length; // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n\n  var front = delta % 2 != 0; // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if deadline is reached.\n    if (new Date().getTime() > deadline) {\n      break;\n    } // Walk the front path one step.\n\n\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n\n      if (k1 == -d || k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1]) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n\n      var y1 = x1 - k1;\n\n      while (x1 < text1_length && y1 < text2_length && text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n\n      v1[k1_offset] = x1;\n\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    } // Walk the reverse path one step.\n\n\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n\n      if (k2 == -d || k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1]) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n\n      var y2 = x2 - k2;\n\n      while (x2 < text1_length && y2 < text2_length && text1.charAt(text1_length - x2 - 1) == text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n\n      v2[k2_offset] = x2;\n\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset; // Mirror x2 onto top-left coordinate system.\n\n          x2 = text1_length - x2;\n\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n  } // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n\n\n  return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n};\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_bisectSplit_ = function (text1, text2, x, y, deadline) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y); // Compute both diffs serially.\n\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\n  return diffs.concat(diffsb);\n};\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\n *     An object containing the encoded text1, the encoded text2 and\n *     the array of unique strings.\n *     The zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_linesToChars_ = function (text1, text2) {\n  var lineArray = []; // e.g. lineArray[4] == 'Hello\\n'\n\n  var lineHash = {}; // e.g. lineHash['Hello\\n'] == 4\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n\n  lineArray[0] = '';\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n\n  function diff_linesToCharsMunge_(text) {\n    var chars = ''; // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n\n    var lineStart = 0;\n    var lineEnd = -1; // Keeping our own length variable is faster than looking it up.\n\n    var lineArrayLength = lineArray.length;\n\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n\n      var line = text.substring(lineStart, lineEnd + 1);\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) : lineHash[line] !== undefined) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        if (lineArrayLength == maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.substring(lineStart);\n          lineEnd = text.length;\n        }\n\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n\n      lineStart = lineEnd + 1;\n    }\n\n    return chars;\n  } // Allocate 2/3rds of the space for text1, the rest for text2.\n\n\n  var maxLines = 40000;\n  var chars1 = diff_linesToCharsMunge_(text1);\n  maxLines = 65535;\n  var chars2 = diff_linesToCharsMunge_(text2);\n  return {\n    chars1: chars1,\n    chars2: chars2,\n    lineArray: lineArray\n  };\n};\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {!Array.<string>} lineArray Array of unique strings.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_charsToLines_ = function (diffs, lineArray) {\n  for (var i = 0; i < diffs.length; i++) {\n    var chars = diffs[i][1];\n    var text = [];\n\n    for (var j = 0; j < chars.length; j++) {\n      text[j] = lineArray[chars.charCodeAt(j)];\n    }\n\n    diffs[i][1] = text.join('');\n  }\n};\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\n\n\ndiff_match_patch.prototype.diff_commonPrefix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  } // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n\n\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) == text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  return pointermid;\n};\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\n\n\ndiff_match_patch.prototype.diff_commonSuffix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  } // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n\n\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) == text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  return pointermid;\n};\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_commonOverlap_ = function (text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length; // Eliminate the null case.\n\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  } // Truncate the longer string.\n\n\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n\n  var text_length = Math.min(text1_length, text2_length); // Quick check for the worst case.\n\n  if (text1 == text2) {\n    return text_length;\n  } // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n\n\n  var best = 0;\n  var length = 1;\n\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n\n    if (found == -1) {\n      return best;\n    }\n\n    length += found;\n\n    if (found == 0 || text1.substring(text_length - length) == text2.substring(0, length)) {\n      best = length;\n      length++;\n    }\n  }\n};\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_halfMatch_ = function (text1, text2) {\n  if (this.Diff_Timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null;\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i), shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i), shorttext.substring(0, j));\n\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) + shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  } // First check if the second quarter is the seed for a half-match.\n\n\n  var hm1 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4)); // Check again based on the third quarter.\n\n  var hm2 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n  var hm;\n\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  } // A half-match was found, sort out the return data.\n\n\n  var text1_a, text1_b, text2_a, text2_b;\n\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupSemantic = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n\n  /** @type {?string} */\n\n  var lastEquality = null; // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n\n  var length_insertions1 = 0;\n  var length_deletions1 = 0; // Number of characters that changed after the equality.\n\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastEquality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      } // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n\n\n      if (lastEquality && lastEquality.length <= Math.max(length_insertions1, length_deletions1) && lastEquality.length <= Math.max(length_insertions2, length_deletions2)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality)); // Change second copy to insert.\n\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT; // Throw away the equality we just deleted.\n\n        equalitiesLength--; // Throw away the previous equality (it needs to be reevaluated).\n\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastEquality = null;\n        changes = true;\n      }\n    }\n\n    pointer++;\n  } // Normalize the diff.\n\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n\n  this.diff_cleanupSemanticLossless(diffs); // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n\n  pointer = 1;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] == DIFF_DELETE && diffs[pointer][0] == DIFF_INSERT) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\n\n      if (overlap_length1 >= overlap_length2) {\n        if (overlap_length1 >= deletion.length / 2 || overlap_length1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, insertion.substring(0, overlap_length1)));\n          diffs[pointer - 1][1] = deletion.substring(0, deletion.length - overlap_length1);\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (overlap_length2 >= deletion.length / 2 || overlap_length2 >= insertion.length / 2) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, deletion.substring(0, overlap_length2)));\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(0, insertion.length - overlap_length2);\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n\n      pointer++;\n    }\n\n    pointer++;\n  }\n};\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function (diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    } // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n\n\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(diff_match_patch.whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(diff_match_patch.whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(diff_match_patch.linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(diff_match_patch.linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(diff_match_patch.blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(diff_match_patch.blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n\n    return 0;\n  }\n\n  var pointer = 1; // Intentionally ignore the first and last element (don't need checking).\n\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1]; // First, shift the edit as far left as possible.\n\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      } // Second, step character by character right, looking for the best fit.\n\n\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2);\n\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2); // The >= encourages trailing rather than leading whitespace on edits.\n\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n\n        diffs[pointer][1] = bestEdit;\n\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n\n    pointer++;\n  }\n}; // Define some regex patterns for matching boundaries.\n\n\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\ndiff_match_patch.whitespaceRegex_ = /\\s/;\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\ndiff_match_patch.prototype.diff_cleanupEfficiency = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n\n  /** @type {?string} */\n\n  var lastEquality = null; // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n\n  var pointer = 0; // Index of current position.\n  // Is there an insertion operation before the last equality.\n\n  var pre_ins = false; // Is there a deletion operation before the last equality.\n\n  var pre_del = false; // Is there an insertion operation after the last equality.\n\n  var post_ins = false; // Is there a deletion operation after the last equality.\n\n  var post_del = false;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      if (diffs[pointer][1].length < this.Diff_EditCost && (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastEquality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastEquality = null;\n      }\n\n      post_ins = post_del = false;\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n\n\n      if (lastEquality && (pre_ins && pre_del && post_ins && post_del || lastEquality.length < this.Diff_EditCost / 2 && pre_ins + pre_del + post_ins + post_del == 3)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality)); // Change second copy to insert.\n\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--; // Throw away the equality we just deleted;\n\n        lastEquality = null;\n\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--; // Throw away the previous equality.\n\n          pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n\n        changes = true;\n      }\n    }\n\n    pointer++;\n  }\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupMerge = function (diffs) {\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n\n            if (commonlength !== 0) {\n              if (pointer - count_delete - count_insert > 0 && diffs[pointer - count_delete - count_insert - 1][0] == DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] += text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, new diff_match_patch.Diff(DIFF_EQUAL, text_insert.substring(0, commonlength)));\n                pointer++;\n              }\n\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            } // Factor out any common suffixies.\n\n\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length - commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length - commonlength);\n              text_delete = text_delete.substring(0, text_delete.length - commonlength);\n            }\n          } // Delete the offending records and add the merged ones.\n\n\n          pointer -= count_delete + count_insert;\n          diffs.splice(pointer, count_delete + count_insert);\n\n          if (text_delete.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_DELETE, text_delete));\n            pointer++;\n          }\n\n          if (text_insert.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_INSERT, text_insert));\n            pointer++;\n          }\n\n          pointer++;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop(); // Remove the dummy entry at the end.\n  } // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n\n\n  var changes = false;\n  pointer = 1; // Intentionally ignore the first and last element (don't need checking).\n\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length - diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] + diffs[pointer][1].substring(0, diffs[pointer][1].length - diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) == diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] = diffs[pointer][1].substring(diffs[pointer + 1][1].length) + diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n\n    pointer++;\n  } // If shifts were made, the diff needs reordering and another shift sweep.\n\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\n\n\ndiff_match_patch.prototype.diff_xIndex = function (diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n\n    if (diffs[x][0] !== DIFF_DELETE) {\n      // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n\n    if (chars1 > loc) {\n      // Overshot the location.\n      break;\n    }\n\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  } // Was the location was deleted?\n\n\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  } // Add the remaining character length.\n\n\n  return last_chars2 + (loc - last_chars1);\n};\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\n\n\ndiff_match_patch.prototype.diff_prettyHtml = function (diffs) {\n  var html = [];\n  var pattern_amp = /&/g;\n  var pattern_lt = /</g;\n  var pattern_gt = />/g;\n  var pattern_para = /\\n/g;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0]; // Operation (insert, delete, equal)\n\n    var data = diffs[x][1]; // Text of change.\n\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;').replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\n\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\n        break;\n\n      case DIFF_DELETE:\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\n        break;\n\n      case DIFF_EQUAL:\n        html[x] = '<span>' + text + '</span>';\n        break;\n    }\n  }\n\n  return html.join('');\n};\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\n\n\ndiff_match_patch.prototype.diff_text1 = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n\n  return text.join('');\n};\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\n\n\ndiff_match_patch.prototype.diff_text2 = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n\n  return text.join('');\n};\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\n\n\ndiff_match_patch.prototype.diff_levenshtein = function (diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\n\n\ndiff_match_patch.prototype.diff_toDelta = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n\n  return text.join('\\t').replace(/%20/g, ' ');\n};\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @throws {!Error} If invalid input.\n */\n\n\ndiff_match_patch.prototype.diff_fromDelta = function (text1, delta) {\n  var diffs = [];\n  var diffsLength = 0; // Keeping our own length var is faster in JS.\n\n  var pointer = 0; // Cursor in text1\n\n  var tokens = delta.split(/\\t/g);\n\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_INSERT, decodeURI(param));\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n\n        break;\n\n      case '-': // Fall through.\n\n      case '=':\n        var n = parseInt(param, 10);\n\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n\n        var text = text1.substring(pointer, pointer += n);\n\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_EQUAL, text);\n        } else {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_DELETE, text);\n        }\n\n        break;\n\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' + tokens[x]);\n        }\n\n    }\n  }\n\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer + ') does not equal source text length (' + text1.length + ').');\n  }\n\n  return diffs;\n}; //  MATCH FUNCTIONS\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\n\n\ndiff_match_patch.prototype.match_main = function (text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n\n  loc = Math.max(0, Math.min(loc, text.length));\n\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap_(text, pattern, loc);\n  }\n};\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\n\n\ndiff_match_patch.prototype.match_bitap_ = function (text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  } // Initialise the alphabet.\n\n\n  var s = this.match_alphabet_(pattern);\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n\n    return accuracy + proximity / dmp.Match_Distance;\n  } // Highest score beyond which we give up.\n\n\n  var score_threshold = this.Match_Threshold; // Is there a nearby exact match? (speedup)\n\n  var best_loc = text.indexOf(pattern, loc);\n\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold); // What about in the other direction? (speedup)\n\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n\n    if (best_loc != -1) {\n      score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    }\n  } // Initialise the bit arrays.\n\n\n  var matchmask = 1 << pattern.length - 1;\n  best_loc = -1;\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    } // Use the result from this iteration as the maximum for the next.\n\n\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n\n      if (d === 0) {\n        // First pass: exact match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch;\n      } else {\n        // Subsequent passes: fuzzy match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch | ((last_rd[j + 1] | last_rd[j]) << 1 | 1) | last_rd[j + 1];\n      }\n\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1); // This match will almost certainly be better than any existing match.\n        // But check anyway.\n\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    } // No hope for a (better) match at greater error levels.\n\n\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break;\n    }\n\n    last_rd = rd;\n  }\n\n  return best_loc;\n};\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {!Object} Hash of character locations.\n * @private\n */\n\n\ndiff_match_patch.prototype.match_alphabet_ = function (pattern) {\n  var s = {};\n\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << pattern.length - i - 1;\n  }\n\n  return s;\n}; //  PATCH FUNCTIONS\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\n\n\ndiff_match_patch.prototype.patch_addContext_ = function (patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n\n  if (patch.start2 === null) {\n    throw Error('patch not initialized');\n  }\n\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0; // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) && pattern.length < this.Match_MaxBits - this.Patch_Margin - this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding, patch.start2 + patch.length1 + padding);\n  } // Add one chunk for good luck.\n\n\n  padding += this.Patch_Margin; // Add the prefix.\n\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n\n  if (prefix) {\n    patch.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, prefix));\n  } // Add the suffix.\n\n\n  var suffix = text.substring(patch.start2 + patch.length1, patch.start2 + patch.length1 + padding);\n\n  if (suffix) {\n    patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, suffix));\n  } // Roll back the start points.\n\n\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length; // Extend the lengths.\n\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_c Array of diff tuples\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_make = function (a, opt_b, opt_c) {\n  var text1, diffs;\n\n  if (typeof a == 'string' && typeof opt_b == 'string' && typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 = a;\n    diffs = this.diff_main(text1, opt_b, true);\n\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' && typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs = a;\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' && typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 = a;\n    diffs = opt_b;\n  } else if (typeof a == 'string' && typeof opt_b == 'string' && opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 = a;\n    diffs = opt_c;\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n\n  if (diffs.length === 0) {\n    return []; // Get rid of the null case.\n  }\n\n  var patches = [];\n  var patch = new diff_match_patch.patch_obj();\n  var patchDiffLength = 0; // Keeping our own length var is faster in JS.\n\n  var char_count1 = 0; // Number of characters into the text1 string.\n\n  var char_count2 = 0; // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text + postpatch_text.substring(char_count2);\n        break;\n\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) + postpatch_text.substring(char_count2 + diff_text.length);\n        break;\n\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin && patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatch_text);\n            patches.push(patch);\n            patch = new diff_match_patch.patch_obj();\n            patchDiffLength = 0; // Unlike Unidiff, our patch lists have a rolling context.\n            // https://github.com/google/diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n\n        break;\n    } // Update the current character count.\n\n\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  } // Pick up the leftover patch if not empty.\n\n\n  if (patchDiffLength) {\n    this.patch_addContext_(patch, prepatch_text);\n    patches.push(patch);\n  }\n\n  return patches;\n};\n/**\n * Given an array of patches, return another array that is identical.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_deepCopy = function (patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new diff_match_patch.patch_obj();\n    patchCopy.diffs = [];\n\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] = new diff_match_patch.Diff(patch.diffs[y][0], patch.diffs[y][1]);\n    }\n\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n\n  return patchesCopy;\n};\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @param {string} text Old text.\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\n\n\ndiff_match_patch.prototype.patch_apply = function (patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  } // Deep copy the patches so that no changes are made to originals.\n\n\n  patches = this.patch_deepCopy(patches);\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n  this.patch_splitMax(patches); // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n\n  var delta = 0;\n  var results = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits), expected_loc);\n\n      if (start_loc != -1) {\n        end_loc = this.match_main(text, text1.substring(text1.length - this.Match_MaxBits), expected_loc + text1.length - this.Match_MaxBits);\n\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false; // Subtract the delta for this failed patch from subsequent patches.\n\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) + this.diff_text2(patches[x].diffs) + text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n\n        if (text1.length > this.Match_MaxBits && this.diff_levenshtein(diffs) / text1.length > this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n\n            if (mod[0] === DIFF_INSERT) {\n              // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] + text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {\n              // Deletion\n              text = text.substring(0, start_loc + index2) + text.substring(start_loc + this.diff_xIndex(diffs, index1 + mod[1].length));\n            }\n\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  } // Strip the padding off.\n\n\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} The padding string added to each side.\n */\n\n\ndiff_match_patch.prototype.patch_addPadding = function (patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  } // Bump all the patches forward.\n\n\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  } // Add some padding on start of first diff.\n\n\n  var patch = patches[0];\n  var diffs = patch.diffs;\n\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.start1 -= paddingLength; // Should be 0.\n\n    patch.start2 -= paddingLength; // Should be 0.\n\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  } // Add some padding on end of last diff.\n\n\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  return nullPadding;\n};\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_splitMax = function (patches) {\n  var patch_size = this.Match_MaxBits;\n\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patch_size) {\n      continue;\n    }\n\n    var bigpatch = patches[x]; // Remove the big old patch.\n\n    patches.splice(x--, 1);\n    var start1 = bigpatch.start1;\n    var start2 = bigpatch.start2;\n    var precontext = '';\n\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      var patch = new diff_match_patch.patch_obj();\n      var empty = true;\n      patch.start1 = start1 - precontext.length;\n      patch.start2 = start2 - precontext.length;\n\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length;\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, precontext));\n      }\n\n      while (bigpatch.diffs.length !== 0 && patch.length1 < patch_size - this.Patch_Margin) {\n        var diff_type = bigpatch.diffs[0][0];\n        var diff_text = bigpatch.diffs[0][1];\n\n        if (diff_type === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diff_text.length;\n          start2 += diff_text.length;\n          patch.diffs.push(bigpatch.diffs.shift());\n          empty = false;\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 && patch.diffs[0][0] == DIFF_EQUAL && diff_text.length > 2 * patch_size) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          empty = false;\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          bigpatch.diffs.shift();\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diff_text = diff_text.substring(0, patch_size - patch.length1 - this.Patch_Margin);\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n\n          if (diff_type === DIFF_EQUAL) {\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n          } else {\n            empty = false;\n          }\n\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n\n          if (diff_text == bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift();\n          } else {\n            bigpatch.diffs[0][1] = bigpatch.diffs[0][1].substring(diff_text.length);\n          }\n        }\n      } // Compute the head context for the next patch.\n\n\n      precontext = this.diff_text2(patch.diffs);\n      precontext = precontext.substring(precontext.length - this.Patch_Margin); // Append the end context for this patch.\n\n      var postcontext = this.diff_text1(bigpatch.diffs).substring(0, this.Patch_Margin);\n\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length;\n        patch.length2 += postcontext.length;\n\n        if (patch.diffs.length !== 0 && patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\n        } else {\n          patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, postcontext));\n        }\n      }\n\n      if (!empty) {\n        patches.splice(++x, 0, patch);\n      }\n    }\n  }\n};\n/**\n * Take a list of patches and return a textual representation.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} Text representation of patches.\n */\n\n\ndiff_match_patch.prototype.patch_toText = function (patches) {\n  var text = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n\n  return text.join('');\n};\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n * @param {string} textline Text representation of patches.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n * @throws {!Error} If invalid input.\n */\n\n\ndiff_match_patch.prototype.patch_fromText = function (textline) {\n  var patches = [];\n\n  if (!textline) {\n    return patches;\n  }\n\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(patchHeader);\n\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n\n    var patch = new diff_match_patch.patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n\n    patch.start2 = parseInt(m[3], 10);\n\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n\n    textPointer++;\n\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_DELETE, line));\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_INSERT, line));\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, line));\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {// Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n\n      textPointer++;\n    }\n  }\n\n  return patches;\n};\n/**\n * Class representing one patch operation.\n * @constructor\n */\n\n\ndiff_match_patch.patch_obj = function () {\n  /** @type {!Array.<!diff_match_patch.Diff>} */\n  this.diffs = [];\n  /** @type {?number} */\n\n  this.start1 = null;\n  /** @type {?number} */\n\n  this.start2 = null;\n  /** @type {number} */\n\n  this.length1 = 0;\n  /** @type {number} */\n\n  this.length2 = 0;\n};\n/**\n * Emulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indices are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\n\n\ndiff_match_patch.patch_obj.prototype.toString = function () {\n  var coords1, coords2;\n\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = this.start1 + 1 + ',' + this.length1;\n  }\n\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = this.start2 + 1 + ',' + this.length2;\n  }\n\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op; // Escape the body of the patch with %xx notation.\n\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n\n      case DIFF_DELETE:\n        op = '-';\n        break;\n\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n\n  return text.join('').replace(/%20/g, ' ');\n}; // The following export code was added by @ForbesLindesay\n\n\nmodule.exports = diff_match_patch;\nmodule.exports.diff_match_patch = diff_match_patch;\nmodule.exports.DIFF_DELETE = DIFF_DELETE;\nmodule.exports.DIFF_INSERT = DIFF_INSERT;\nmodule.exports.DIFF_EQUAL = DIFF_EQUAL;\n\n/***/ }),\n\n/***/ 157:\n/***/ (() => {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 857:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ method)\n});\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(369);\n// EXTERNAL MODULE: ./src/ts/markdown/adapterRender.ts\nvar adapterRender = __webpack_require__(46);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(726);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(23);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(383);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(890);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(93);\n;// CONCATENATED MODULE: ./src/ts/markdown/lazyLoadImageRender.ts\nvar lazyLoadImageRender = function (element) {\n    if (element === void 0) { element = document; }\n    var loadImg = function (it) {\n        var testImage = document.createElement(\"img\");\n        testImage.src = it.getAttribute(\"data-src\");\n        testImage.addEventListener(\"load\", function () {\n            if (!it.getAttribute(\"style\") && !it.getAttribute(\"class\") &&\n                !it.getAttribute(\"width\") && !it.getAttribute(\"height\")) {\n                if (testImage.naturalHeight > testImage.naturalWidth &&\n                    testImage.naturalWidth / testImage.naturalHeight <\n                        document.querySelector(\".vditor-reset\").clientWidth / (window.innerHeight - 40) &&\n                    testImage.naturalHeight > (window.innerHeight - 40)) {\n                    it.style.height = (window.innerHeight - 40) + \"px\";\n                }\n            }\n            it.src = testImage.src;\n        });\n        it.removeAttribute(\"data-src\");\n    };\n    if (!(\"IntersectionObserver\" in window)) {\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            if (imgElement.getAttribute(\"data-src\")) {\n                loadImg(imgElement);\n            }\n        });\n        return false;\n    }\n    if (window.vditorImageIntersectionObserver) {\n        window.vditorImageIntersectionObserver.disconnect();\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n    else {\n        window.vditorImageIntersectionObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entrie) {\n                if ((typeof entrie.isIntersecting === \"undefined\"\n                    ? entrie.intersectionRatio !== 0\n                    : entrie.isIntersecting)\n                    && entrie.target.getAttribute(\"data-src\")) {\n                    loadImg(entrie.target);\n                }\n            });\n        });\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(323);\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(207);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(765);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(894);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(198);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(583);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(260);\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(958);\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(228);\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(713);\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(224);\n;// CONCATENATED MODULE: ./src/ts/markdown/anchorRender.ts\nvar anchorRender = function (type) {\n    document.querySelectorAll(\".vditor-anchor\").forEach(function (anchor) {\n        if (type === 1) {\n            anchor.classList.add(\"vditor-anchor--left\");\n        }\n        anchor.onclick = function () {\n            var id = anchor.getAttribute(\"href\").substr(1);\n            var top = document.getElementById(\"vditorAnchor-\" + id).offsetTop;\n            document.querySelector(\"html\").scrollTop = top;\n        };\n    });\n    window.onhashchange = function () {\n        var element = document.getElementById(\"vditorAnchor-\" + decodeURIComponent(window.location.hash.substr(1)));\n        if (element) {\n            document.querySelector(\"html\").scrollTop = element.offsetTop;\n        }\n    };\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(792);\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(187);\n;// CONCATENATED MODULE: ./src/ts/markdown/speechRender.ts\n\nvar speechRender = function (element, lang) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (typeof speechSynthesis === \"undefined\" || typeof SpeechSynthesisUtterance === \"undefined\") {\n        return;\n    }\n    var playSVG = '<svg><use xlink:href=\"#vditor-icon-play\"></use></svg>';\n    var pauseSVG = '<svg><use xlink:href=\"#vditor-icon-pause\"></use></svg>';\n    if (!document.getElementById(\"vditorIconScript\")) {\n        playSVG = '<svg viewBox=\"0 0 32 32\"><path d=\"M3.436 0l25.128 16-25.128 16v-32z\"></path></svg>';\n        pauseSVG = '<svg viewBox=\"0 0 32 32\"><path d=\"M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z\"></path></svg>';\n    }\n    var speechDom = document.querySelector(\".vditor-speech\");\n    if (!speechDom) {\n        speechDom = document.createElement(\"div\");\n        speechDom.className = \"vditor-speech\";\n        document.body.insertAdjacentElement(\"beforeend\", speechDom);\n        var getVoice = function () {\n            var voices = speechSynthesis.getVoices();\n            var currentVoice;\n            var defaultVoice;\n            voices.forEach(function (item) {\n                if (item.lang === lang.replace(\"_\", \"-\")) {\n                    currentVoice = item;\n                }\n                if (item.default) {\n                    defaultVoice = item;\n                }\n            });\n            if (!currentVoice) {\n                currentVoice = defaultVoice;\n            }\n            return currentVoice;\n        };\n        if (speechSynthesis.onvoiceschanged !== undefined) {\n            speechSynthesis.onvoiceschanged = getVoice;\n        }\n        var voice_1 = getVoice();\n        speechDom.onclick = function () {\n            if (speechDom.className === \"vditor-speech\") {\n                var utterThis = new SpeechSynthesisUtterance(speechDom.getAttribute(\"data-text\"));\n                utterThis.voice = voice_1;\n                utterThis.onend = function () {\n                    speechDom.className = \"vditor-speech\";\n                    speechSynthesis.cancel();\n                    speechDom.innerHTML = playSVG;\n                };\n                speechSynthesis.speak(utterThis);\n                speechDom.className = \"vditor-speech vditor-speech--current\";\n                speechDom.innerHTML = pauseSVG;\n            }\n            else {\n                if (speechSynthesis.speaking) {\n                    if (speechSynthesis.paused) {\n                        speechSynthesis.resume();\n                        speechDom.innerHTML = pauseSVG;\n                    }\n                    else {\n                        speechSynthesis.pause();\n                        speechDom.innerHTML = playSVG;\n                    }\n                }\n            }\n            (0,selection/* setSelectionFocus */.Hc)(window.vditorSpeechRange);\n        };\n        document.body.addEventListener(\"click\", function () {\n            if (getSelection().toString().trim() === \"\" && speechDom.style.display === \"block\") {\n                speechDom.className = \"vditor-speech\";\n                speechSynthesis.cancel();\n                speechDom.style.display = \"none\";\n            }\n        });\n    }\n    element.addEventListener(\"mouseup\", function (event) {\n        var text = getSelection().toString().trim();\n        speechSynthesis.cancel();\n        if (getSelection().toString().trim() === \"\") {\n            if (speechDom.style.display === \"block\") {\n                speechDom.className = \"vditor-speech\";\n                speechDom.style.display = \"none\";\n            }\n            return;\n        }\n        window.vditorSpeechRange = getSelection().getRangeAt(0).cloneRange();\n        var rect = getSelection().getRangeAt(0).getBoundingClientRect();\n        speechDom.innerHTML = playSVG;\n        speechDom.style.display = \"block\";\n        speechDom.style.top = (rect.top + rect.height + document.querySelector(\"html\").scrollTop - 20) + \"px\";\n        speechDom.style.left = (event.screenX + 2) + \"px\";\n        speechDom.setAttribute(\"data-text\", text);\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/markdown/previewRender.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar mergeOptions = function (options) {\n    var defaultOption = {\n        anchor: 0,\n        cdn: constants/* Constants.CDN */.g.CDN,\n        customEmoji: {},\n        emojiPath: ((options && options.emojiPath) || constants/* Constants.CDN */.g.CDN) + \"/dist/images/emoji\",\n        hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n        icon: \"ant\",\n        lang: \"zh_CN\",\n        markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n        math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n        mode: \"light\",\n        speech: {\n            enable: false,\n        },\n        theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n    };\n    return (0,merge/* merge */.T)(defaultOption, options);\n};\nvar md2html = function (mdText, options) {\n    var mergedOptions = mergeOptions(options);\n    return (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/lute/lute.min.js\", \"vditorLuteScript\").then(function () {\n        var lute = (0,setLute/* setLute */.X)({\n            autoSpace: mergedOptions.markdown.autoSpace,\n            codeBlockPreview: mergedOptions.markdown.codeBlockPreview,\n            emojiSite: mergedOptions.emojiPath,\n            emojis: mergedOptions.customEmoji,\n            fixTermTypo: mergedOptions.markdown.fixTermTypo,\n            footnotes: mergedOptions.markdown.footnotes,\n            headingAnchor: mergedOptions.anchor !== 0,\n            inlineMathDigit: mergedOptions.math.inlineDigit,\n            lazyLoadImage: mergedOptions.lazyLoadImage,\n            linkBase: mergedOptions.markdown.linkBase,\n            linkPrefix: mergedOptions.markdown.linkPrefix,\n            listStyle: mergedOptions.markdown.listStyle,\n            mark: mergedOptions.markdown.mark,\n            mathBlockPreview: mergedOptions.markdown.mathBlockPreview,\n            paragraphBeginningSpace: mergedOptions.markdown.paragraphBeginningSpace,\n            sanitize: mergedOptions.markdown.sanitize,\n            toc: mergedOptions.markdown.toc,\n        });\n        if (options === null || options === void 0 ? void 0 : options.renderers) {\n            lute.SetJSRenderers({\n                renderers: {\n                    Md2HTML: options.renderers,\n                },\n            });\n        }\n        lute.SetHeadingID(true);\n        return lute.Md2HTML(mdText);\n    });\n};\nvar previewRender = function (previewElement, markdown, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var mergedOptions, html, i18nScriptPrefix, i18nScriptID_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                mergedOptions = mergeOptions(options);\n                return [4 /*yield*/, md2html(markdown, mergedOptions)];\n            case 1:\n                html = _a.sent();\n                if (mergedOptions.transform) {\n                    html = mergedOptions.transform(html);\n                }\n                previewElement.innerHTML = html;\n                previewElement.classList.add(\"vditor-reset\");\n                if (!!mergedOptions.i18n) return [3 /*break*/, 5];\n                if (!![\"en_US\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) return [3 /*break*/, 2];\n                throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n            case 2:\n                i18nScriptPrefix = \"vditorI18nScript\";\n                i18nScriptID_1 = i18nScriptPrefix + mergedOptions.lang;\n                document.querySelectorAll(\"head script[id^=\\\"\" + i18nScriptPrefix + \"\\\"]\").forEach(function (el) {\n                    if (el.id !== i18nScriptID_1) {\n                        document.head.removeChild(el);\n                    }\n                });\n                return [4 /*yield*/, (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/i18n/\" + mergedOptions.lang + \".js\", i18nScriptID_1)];\n            case 3:\n                _a.sent();\n                _a.label = 4;\n            case 4: return [3 /*break*/, 6];\n            case 5:\n                window.VditorI18n = mergedOptions.i18n;\n                _a.label = 6;\n            case 6:\n                if (!mergedOptions.icon) return [3 /*break*/, 8];\n                return [4 /*yield*/, (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/icons/\" + mergedOptions.icon + \".js\", \"vditorIconScript\")];\n            case 7:\n                _a.sent();\n                _a.label = 8;\n            case 8:\n                (0,setContentTheme/* setContentTheme */.Z)(mergedOptions.theme.current, mergedOptions.theme.path);\n                if (mergedOptions.anchor === 1) {\n                    previewElement.classList.add(\"vditor-reset--anchor\");\n                }\n                (0,codeRender/* codeRender */.O)(previewElement);\n                (0,highlightRender/* highlightRender */.s)(mergedOptions.hljs, previewElement, mergedOptions.cdn);\n                (0,mathRender/* mathRender */.H)(previewElement, {\n                    cdn: mergedOptions.cdn,\n                    math: mergedOptions.math,\n                });\n                (0,mermaidRender/* mermaidRender */.i)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,flowchartRender/* flowchartRender */.P)(previewElement, mergedOptions.cdn);\n                (0,graphvizRender/* graphvizRender */.v)(previewElement, mergedOptions.cdn);\n                (0,chartRender/* chartRender */.p)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,mindmapRender/* mindmapRender */.P)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,plantumlRender/* plantumlRender */.B)(previewElement, mergedOptions.cdn);\n                (0,abcRender/* abcRender */.Q)(previewElement, mergedOptions.cdn);\n                (0,mediaRender/* mediaRender */.Y)(previewElement);\n                if (mergedOptions.speech.enable) {\n                    speechRender(previewElement);\n                }\n                if (mergedOptions.anchor !== 0) {\n                    anchorRender(mergedOptions.anchor);\n                }\n                if (mergedOptions.after) {\n                    mergedOptions.after();\n                }\n                if (mergedOptions.lazyLoadImage) {\n                    lazyLoadImageRender(previewElement);\n                }\n                previewElement.addEventListener(\"click\", function (event) {\n                    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n                    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                        var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                        if (headingElement) {\n                            window.scrollTo(window.scrollX, headingElement.offsetTop);\n                        }\n                        return;\n                    }\n                });\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(264);\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(968);\n;// CONCATENATED MODULE: ./src/method.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function () {\n    function Vditor() {\n    }\n    /** 点击图片放大 */\n    Vditor.adapterRender = adapterRender;\n    /** 点击图片放大 */\n    Vditor.previewImage = preview_image/* previewImage */.E;\n    /** 为 element 中的代码块添加复制按钮 */\n    Vditor.codeRender = codeRender/* codeRender */.O;\n    /** 对 graphviz 进行渲染 */\n    Vditor.graphvizRender = graphvizRender/* graphvizRender */.v;\n    /** 为 element 中的代码块进行高亮渲染 */\n    Vditor.highlightRender = highlightRender/* highlightRender */.s;\n    /** 对数学公式进行渲染 */\n    Vditor.mathRender = mathRender/* mathRender */.H;\n    /** 流程图/时序图/甘特图渲染 */\n    Vditor.mermaidRender = mermaidRender/* mermaidRender */.i;\n    /** flowchart.js 渲染 */\n    Vditor.flowchartRender = flowchartRender/* flowchartRender */.P;\n    /** 图表渲染 */\n    Vditor.chartRender = chartRender/* chartRender */.p;\n    /** 五线谱渲染 */\n    Vditor.abcRender = abcRender/* abcRender */.Q;\n    /** 脑图渲染 */\n    Vditor.mindmapRender = mindmapRender/* mindmapRender */.P;\n    /** plantuml渲染 */\n    Vditor.plantumlRender = plantumlRender/* plantumlRender */.B;\n    /** 大纲渲染 */\n    Vditor.outlineRender = outlineRender/* outlineRender */.k;\n    /** 为[特定链接](https://github.com/Vanessa219/vditor/issues/7)分别渲染为视频、音频、嵌入的 iframe */\n    Vditor.mediaRender = mediaRender/* mediaRender */.Y;\n    /** 对选中的文字进行阅读 */\n    Vditor.speechRender = speechRender;\n    /** 对图片进行懒加载 */\n    Vditor.lazyLoadImageRender = lazyLoadImageRender;\n    /** Markdown 文本转换为 HTML，该方法需使用[异步编程](https://ld246.com/article/1546828434083?r=Vaness) */\n    Vditor.md2html = md2html;\n    /** 页面 Markdown 文章渲染 */\n    Vditor.preview = previewRender;\n    /** 设置代码主题 */\n    Vditor.setCodeTheme = setCodeTheme/* setCodeTheme */.Y;\n    /** 设置内容主题 */\n    Vditor.setContentTheme = setContentTheme/* setContentTheme */.Z;\n    return Vditor;\n}());\n/* harmony default export */ const method = (Vditor);\n\n\n/***/ }),\n\n/***/ 260:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ _VDITOR_VERSION),\n/* harmony export */   \"g\": () => (/* binding */ Constants)\n/* harmony export */ });\nvar _VDITOR_VERSION = \"3.8.10\";\n\nvar Constants = /** @class */ (function () {\n    function Constants() {\n    }\n    Constants.ZWSP = \"\\u200b\";\n    Constants.DROP_EDITOR = \"application/editor\";\n    Constants.MOBILE_WIDTH = 520;\n    Constants.CLASS_MENU_DISABLED = \"vditor-menu--disabled\";\n    Constants.EDIT_TOOLBARS = [\"emoji\", \"headings\", \"bold\", \"italic\", \"strike\", \"link\", \"list\",\n        \"ordered-list\", \"outdent\", \"indent\", \"check\", \"line\", \"quote\", \"code\", \"inline-code\", \"insert-after\",\n        \"insert-before\", \"upload\", \"record\", \"table\"];\n    Constants.CODE_THEME = [\"abap\", \"algol\", \"algol_nu\", \"arduino\", \"autumn\", \"borland\", \"bw\",\n        \"colorful\", \"dracula\", \"emacs\", \"friendly\", \"fruity\", \"github\", \"igor\", \"lovelace\", \"manni\", \"monokai\",\n        \"monokailight\", \"murphy\", \"native\", \"paraiso-dark\", \"paraiso-light\", \"pastie\", \"perldoc\", \"pygments\",\n        \"rainbow_dash\", \"rrt\", \"solarized-dark\", \"solarized-dark256\", \"solarized-light\", \"swapoff\", \"tango\", \"trac\",\n        \"vim\", \"vs\", \"xcode\", \"ant-design\"];\n    Constants.CODE_LANGUAGES = [\"mermaid\", \"echarts\", \"mindmap\", \"plantuml\", \"abc\", \"graphviz\", \"flowchart\", \"apache\",\n        \"js\", \"ts\", \"html\",\n        // common\n        \"properties\", \"apache\", \"bash\", \"c\", \"csharp\", \"cpp\", \"css\", \"coffeescript\", \"diff\", \"go\", \"xml\", \"http\",\n        \"json\", \"java\", \"javascript\", \"kotlin\", \"less\", \"lua\", \"makefile\", \"markdown\", \"nginx\", \"objectivec\", \"php\",\n        \"php-template\", \"perl\", \"plaintext\", \"python\", \"python-repl\", \"r\", \"ruby\", \"rust\", \"scss\", \"sql\", \"shell\",\n        \"swift\", \"ini\", \"typescript\", \"vbnet\", \"yaml\",\n        \"ada\", \"clojure\", \"dart\", \"erb\", \"fortran\", \"gradle\", \"haskell\", \"julia\", \"julia-repl\", \"lisp\", \"matlab\",\n        \"pgsql\", \"powershell\", \"sql_more\", \"stata\", \"cmake\", \"mathematica\"];\n    Constants.CDN = \"https://cdn.jsdelivr.net/npm/vditor@\" + \"3.8.10\";\n    Constants.MARKDOWN_OPTIONS = {\n        autoSpace: false,\n        codeBlockPreview: true,\n        fixTermTypo: false,\n        footnotes: true,\n        linkBase: \"\",\n        linkPrefix: \"\",\n        listStyle: false,\n        mark: false,\n        mathBlockPreview: true,\n        paragraphBeginningSpace: false,\n        sanitize: true,\n        toc: false,\n    };\n    Constants.HLJS_OPTIONS = {\n        enable: true,\n        lineNumber: false,\n        style: \"github\",\n    };\n    Constants.MATH_OPTIONS = {\n        engine: \"KaTeX\",\n        inlineDigit: false,\n        macros: {},\n    };\n    Constants.THEME_OPTIONS = {\n        current: \"light\",\n        list: {\n            \"ant-design\": \"Ant Design\",\n            \"dark\": \"Dark\",\n            \"light\": \"Light\",\n            \"wechat\": \"WeChat\",\n        },\n        path: Constants.CDN + \"/dist/css/content-theme\",\n    };\n    return Constants;\n}());\n\n\n\n/***/ }),\n\n/***/ 369:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Q\": () => (/* binding */ abcRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar abcRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var abcElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.abcRenderAdapter.getElements(element);\n    if (abcElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/abcjs/abcjs_basic.min.js\", \"vditorAbcjsScript\").then(function () {\n            abcElements.forEach(function (item) {\n                if (item.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    item.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (item.getAttribute(\"data-processed\") === \"true\") {\n                    return;\n                }\n                ABCJS.renderAbc(item, _adapterRender__WEBPACK_IMPORTED_MODULE_1__.abcRenderAdapter.getCode(item).trim());\n                item.style.overflowX = \"auto\";\n                item.setAttribute(\"data-processed\", \"true\");\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 46:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"mathRenderAdapter\": () => (/* binding */ mathRenderAdapter),\n/* harmony export */   \"mermaidRenderAdapter\": () => (/* binding */ mermaidRenderAdapter),\n/* harmony export */   \"mindmapRenderAdapter\": () => (/* binding */ mindmapRenderAdapter),\n/* harmony export */   \"chartRenderAdapter\": () => (/* binding */ chartRenderAdapter),\n/* harmony export */   \"abcRenderAdapter\": () => (/* binding */ abcRenderAdapter),\n/* harmony export */   \"graphvizRenderAdapter\": () => (/* binding */ graphvizRenderAdapter),\n/* harmony export */   \"flowchartRenderAdapter\": () => (/* binding */ flowchartRenderAdapter),\n/* harmony export */   \"plantumlRenderAdapter\": () => (/* binding */ plantumlRenderAdapter)\n/* harmony export */ });\nvar mathRenderAdapter = {\n    getCode: function (mathElement) { return mathElement.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-math\"); },\n};\nvar mermaidRenderAdapter = {\n    /** 不仅要返回code，并且需要将 code 设置为 el 的 innerHTML */\n    getCode: function (el) { return el.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-mermaid\"); },\n};\nvar mindmapRenderAdapter = {\n    getCode: function (el) { return el.getAttribute(\"data-code\"); },\n    getElements: function (el) { return el.querySelectorAll(\".language-mindmap\"); },\n};\nvar chartRenderAdapter = {\n    getCode: function (el) { return el.innerText; },\n    getElements: function (el) { return el.querySelectorAll(\".language-echarts\"); },\n};\nvar abcRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-abc\"); },\n};\nvar graphvizRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-graphviz\"); },\n};\nvar flowchartRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-flowchart\"); },\n};\nvar plantumlRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-plantuml\"); },\n};\n\n\n/***/ }),\n\n/***/ 726:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"p\": () => (/* binding */ chartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar chartRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var echartsElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.chartRenderAdapter.getElements(element);\n    if (echartsElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            echartsElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.chartRenderAdapter.getCode(e).trim();\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    var option = JSON.parse(text);\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption(option);\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"echarts render error: <br>\" + error;\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 23:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"O\": () => (/* binding */ codeRender)\n/* harmony export */ });\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(769);\n\nvar codeRender = function (element) {\n    element.querySelectorAll(\"pre > code\").forEach(function (e, index) {\n        var _a, _b, _c;\n        if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n            e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n            return;\n        }\n        if (e.classList.contains(\"language-mermaid\") || e.classList.contains(\"language-flowchart\") ||\n            e.classList.contains(\"language-echarts\") || e.classList.contains(\"language-mindmap\") ||\n            e.classList.contains(\"language-plantuml\") ||\n            e.classList.contains(\"language-abc\") || e.classList.contains(\"language-graphviz\") ||\n            e.classList.contains(\"language-math\")) {\n            return;\n        }\n        if (e.style.maxHeight.indexOf(\"px\") > -1) {\n            return;\n        }\n        // 避免预览区在渲染后由于代码块过多产生性能问题 https://github.com/b3log/vditor/issues/67\n        if (element.classList.contains(\"vditor-preview\") && index > 5) {\n            return;\n        }\n        var codeText = e.innerText;\n        if (e.classList.contains(\"highlight-chroma\")) {\n            var codeElement = document.createElement(\"code\");\n            codeElement.innerHTML = e.innerHTML;\n            codeElement.querySelectorAll(\".highlight-ln\").forEach(function (item) {\n                item.remove();\n            });\n            codeText = codeElement.innerText;\n        }\n        var iconHTML = '<svg><use xlink:href=\"#vditor-icon-copy\"></use></svg>';\n        if (!document.getElementById(\"vditorIconScript\")) {\n            iconHTML = '<svg viewBox=\"0 0 32 32\"><path d=\"M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z\"></path></svg>';\n        }\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-copy\";\n        divElement.innerHTML = \"<span aria-label=\\\"\" + (((_a = window.VditorI18n) === null || _a === void 0 ? void 0 : _a.copy) || \"复制\") + \"\\\"\\nonmouseover=\\\"this.setAttribute('aria-label', '\" + (((_b = window.VditorI18n) === null || _b === void 0 ? void 0 : _b.copy) || \"复制\") + \"')\\\"\\nclass=\\\"vditor-tooltipped vditor-tooltipped__w\\\"\\nonclick=\\\"this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '\" + (((_c = window.VditorI18n) === null || _c === void 0 ? void 0 : _c.copy) || \"已复制\") + \"')\\\">\" + iconHTML + \"</span>\";\n        var textarea = document.createElement(\"textarea\");\n        textarea.value = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_0__/* .code160to32 */ .X)(codeText);\n        divElement.insertAdjacentElement(\"afterbegin\", textarea);\n        e.before(divElement);\n        e.style.maxHeight = (window.outerHeight - 40) + \"px\";\n    });\n};\n\n\n/***/ }),\n\n/***/ 383:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ flowchartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar flowchartRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var flowchartElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.flowchartRenderAdapter.getElements(element);\n    if (flowchartElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/flowchart.js/flowchart.min.js\", \"vditorFlowchartScript\").then(function () {\n        flowchartElements.forEach(function (item) {\n            if (item.getAttribute(\"data-processed\") === \"true\") {\n                return;\n            }\n            var flowchartObj = flowchart.parse(_adapterRender__WEBPACK_IMPORTED_MODULE_1__.flowchartRenderAdapter.getCode(item));\n            item.innerHTML = \"\";\n            flowchartObj.drawSVG(item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 890:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"v\": () => (/* binding */ graphvizRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar graphvizRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var graphvizElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.graphvizRenderAdapter.getElements(element);\n    if (graphvizElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/graphviz/viz.js\", \"vditorGraphVizScript\").then(function () {\n        graphvizElements.forEach(function (e) {\n            var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.graphvizRenderAdapter.getCode(e);\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            if (e.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                return;\n            }\n            try {\n                var blob = new Blob([\"importScripts('\" + document.getElementById(\"vditorGraphVizScript\").src.replace(\"viz.js\", \"full.render.js\") + \"');\"], { type: \"application/javascript\" });\n                var url = window.URL || window.webkitURL;\n                var blobUrl = url.createObjectURL(blob);\n                var worker = new Worker(blobUrl);\n                new Viz({ worker: worker })\n                    .renderSVGElement(code).then(function (result) {\n                    e.innerHTML = result.outerHTML;\n                }).catch(function (error) {\n                    e.innerHTML = \"graphviz render error: <br>\" + error;\n                    e.className = \"vditor-reset--error\";\n                });\n            }\n            catch (e) {\n                console.error(\"graphviz error\", e);\n            }\n            e.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 93:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"s\": () => (/* binding */ highlightRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n\n\n\nvar highlightRender = function (hljsOption, element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var style = hljsOption.style;\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(style)) {\n        style = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = cdn + \"/dist/js/highlight.js/styles/\" + style + \".css\";\n    if (vditorHljsStyle && vditorHljsStyle.href !== href) {\n        vditorHljsStyle.remove();\n    }\n    (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(cdn + \"/dist/js/highlight.js/styles/\" + style + \".css\", \"vditorHljsStyle\");\n    if (hljsOption.enable === false) {\n        return;\n    }\n    var codes = element.querySelectorAll(\"pre > code\");\n    if (codes.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/highlight.js/highlight.pack.js\", \"vditorHljsScript\").then(function () {\n        element.querySelectorAll(\"pre > code\").forEach(function (block) {\n            // ir & wysiwyg 区域不渲染\n            if (block.parentElement.classList.contains(\"vditor-ir__marker--pre\") ||\n                block.parentElement.classList.contains(\"vditor-wysiwyg__pre\")) {\n                return;\n            }\n            if (block.classList.contains(\"language-mermaid\") || block.classList.contains(\"language-flowchart\") ||\n                block.classList.contains(\"language-echarts\") || block.classList.contains(\"language-mindmap\") ||\n                block.classList.contains(\"language-plantuml\") ||\n                block.classList.contains(\"language-abc\") || block.classList.contains(\"language-graphviz\") ||\n                block.classList.contains(\"language-math\")) {\n                return;\n            }\n            hljs.highlightElement(block);\n            if (!hljsOption.lineNumber) {\n                return;\n            }\n            block.classList.add(\"vditor-linenumber\");\n            var linenNumberTemp = block.querySelector(\".vditor-linenumber__temp\");\n            if (!linenNumberTemp) {\n                linenNumberTemp = document.createElement(\"div\");\n                linenNumberTemp.className = \"vditor-linenumber__temp\";\n                block.insertAdjacentElement(\"beforeend\", linenNumberTemp);\n            }\n            var whiteSpace = getComputedStyle(block).whiteSpace;\n            var isSoftWrap = false;\n            if (whiteSpace === \"pre-wrap\" || whiteSpace === \"pre-line\") {\n                isSoftWrap = true;\n            }\n            var lineNumberHTML = \"\";\n            var lineList = block.textContent.split(/\\r\\n|\\r|\\n/g);\n            lineList.pop();\n            lineList.map(function (line) {\n                var lineHeight = \"\";\n                if (isSoftWrap) {\n                    linenNumberTemp.textContent = line || \"\\n\";\n                    lineHeight = \" style=\\\"height:\" + linenNumberTemp.getBoundingClientRect().height + \"px\\\"\";\n                }\n                lineNumberHTML += \"<span\" + lineHeight + \"></span>\";\n            });\n            linenNumberTemp.style.display = \"none\";\n            lineNumberHTML = \"<span class=\\\"vditor-linenumber__rows\\\">\" + lineNumberHTML + \"</span>\";\n            block.insertAdjacentHTML(\"beforeend\", lineNumberHTML);\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 323:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ mathRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(228);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(946);\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(769);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\n\n\nvar mathRender = function (element, options) {\n    var mathElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mathRenderAdapter.getElements(element);\n    if (mathElements.length === 0) {\n        return;\n    }\n    var defaultOptions = {\n        cdn: _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN,\n        math: {\n            engine: \"KaTeX\",\n            inlineDigit: false,\n            macros: {},\n        },\n    };\n    if (options && options.math) {\n        options.math =\n            Object.assign({}, defaultOptions.math, options.math);\n    }\n    options = Object.assign({}, defaultOptions, options);\n    if (options.math.engine === \"KaTeX\") {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_2__/* .addStyle */ .c)(options.cdn + \"/dist/js/katex/katex.min.css\", \"vditorKatexStyle\");\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScript */ .G)(options.cdn + \"/dist/js/katex/katex.min.js\", \"vditorKatexScript\").then(function () {\n            mathElements.forEach(function (mathElement) {\n                if (mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (mathElement.getAttribute(\"data-math\")) {\n                    return;\n                }\n                var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(_adapterRender__WEBPACK_IMPORTED_MODULE_1__.mathRenderAdapter.getCode(mathElement));\n                mathElement.setAttribute(\"data-math\", math);\n                try {\n                    mathElement.innerHTML = katex.renderToString(math, {\n                        displayMode: mathElement.tagName === \"DIV\",\n                        output: \"html\",\n                    });\n                }\n                catch (e) {\n                    mathElement.innerHTML = e.message;\n                    mathElement.className = \"language-math vditor-reset--error\";\n                }\n                mathElement.addEventListener(\"copy\", function (event) {\n                    event.stopPropagation();\n                    event.preventDefault();\n                    var vditorMathElement = event.currentTarget.closest(\".language-math\");\n                    event.clipboardData.setData(\"text/html\", vditorMathElement.innerHTML);\n                    event.clipboardData.setData(\"text/plain\", vditorMathElement.getAttribute(\"data-math\"));\n                });\n            });\n        });\n    }\n    else if (options.math.engine === \"MathJax\") {\n        var chainAsync_1 = function (fns) {\n            if (fns.length === 0) {\n                return;\n            }\n            var curr = 0;\n            var last = fns[fns.length - 1];\n            var next = function () {\n                var fn = fns[curr++];\n                fn === last ? fn() : fn(next);\n            };\n            next();\n        };\n        if (!window.MathJax) {\n            window.MathJax = {\n                loader: {\n                    paths: { mathjax: options.cdn + \"/dist/js/mathjax\" },\n                },\n                startup: {\n                    typeset: false,\n                },\n                tex: {\n                    macros: options.math.macros,\n                },\n            };\n        }\n        // 循环加载会抛异常\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScriptSync */ .J)(options.cdn + \"/dist/js/mathjax/tex-svg-full.js\", \"protyleMathJaxScript\");\n        var renderMath_1 = function (mathElement, next) {\n            var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(mathElement.textContent).trim();\n            var mathOptions = window.MathJax.getMetricsFor(mathElement);\n            mathOptions.display = mathElement.tagName === \"DIV\";\n            window.MathJax.tex2svgPromise(math, mathOptions).then(function (node) {\n                mathElement.innerHTML = \"\";\n                mathElement.setAttribute(\"data-math\", math);\n                mathElement.append(node);\n                window.MathJax.startup.document.clear();\n                window.MathJax.startup.document.updateDocument();\n                var errorTextElement = node.querySelector('[data-mml-node=\"merror\"]');\n                if (errorTextElement && errorTextElement.textContent.trim() !== \"\") {\n                    mathElement.innerHTML = errorTextElement.textContent.trim();\n                    mathElement.className = \"vditor-reset--error\";\n                }\n                if (next) {\n                    next();\n                }\n            });\n        };\n        window.MathJax.startup.promise.then(function () {\n            var chains = [];\n            var _loop_1 = function (i) {\n                var mathElement = mathElements[i];\n                if (!mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") &&\n                    !mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\") &&\n                    !mathElement.getAttribute(\"data-math\") && (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(mathElement.textContent).trim()) {\n                    chains.push(function (next) {\n                        if (i === mathElements.length - 1) {\n                            renderMath_1(mathElement);\n                        }\n                        else {\n                            renderMath_1(mathElement, next);\n                        }\n                    });\n                }\n            };\n            for (var i = 0; i < mathElements.length; i++) {\n                _loop_1(i);\n            }\n            chainAsync_1(chains);\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 207:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ mediaRender)\n/* harmony export */ });\nvar videoRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<video controls=\\\"controls\\\" src=\\\"\" + url + \"\\\"></video>\");\n    element.remove();\n};\nvar audioRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<audio controls=\\\"controls\\\" src=\\\"\" + url + \"\\\"></audio>\");\n    element.remove();\n};\nvar iframeRender = function (element, url) {\n    var youtubeMatch = url.match(/\\/\\/(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))([\\w|-]{11})(?:(?:[\\?&]t=)(\\S+))?/);\n    var youkuMatch = url.match(/\\/\\/v\\.youku\\.com\\/v_show\\/id_(\\w+)=*\\.html/);\n    var qqMatch = url.match(/\\/\\/v\\.qq\\.com\\/x\\/cover\\/.*\\/([^\\/]+)\\.html\\??.*/);\n    var coubMatch = url.match(/(?:www\\.|\\/\\/)coub\\.com\\/view\\/(\\w+)/);\n    var facebookMatch = url.match(/(?:www\\.|\\/\\/)facebook\\.com\\/([^\\/]+)\\/videos\\/([0-9]+)/);\n    var dailymotionMatch = url.match(/.+dailymotion.com\\/(video|hub)\\/(\\w+)\\?/);\n    var bilibiliMatch = url.match(/(?:www\\.|\\/\\/)bilibili\\.com\\/video\\/(\\w+)/);\n    var tedMatch = url.match(/(?:www\\.|\\/\\/)ted\\.com\\/talks\\/(\\w+)/);\n    if (youtubeMatch && youtubeMatch[1].length === 11) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//www.youtube.com/embed/\" + (youtubeMatch[1] +\n            (youtubeMatch[2] ? \"?start=\" + youtubeMatch[2] : \"\")) + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (youkuMatch && youkuMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//player.youku.com/embed/\" + youkuMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (qqMatch && qqMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"https://v.qq.com/txp/iframe/player.html?vid=\" + qqMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (coubMatch && coubMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//coub.com/embed/\" + coubMatch[1] + \"?muted=false&autostart=false&originalSize=true&startWithHD=true\\\"></iframe>\");\n        element.remove();\n    }\n    else if (facebookMatch && facebookMatch[0]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.facebook.com/plugins/video.php?href=\" + encodeURIComponent(facebookMatch[0]) + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (dailymotionMatch && dailymotionMatch[2]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.dailymotion.com/embed/video/\" + dailymotionMatch[2] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (bilibiliMatch && bilibiliMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//player.bilibili.com/player.html?bvid=\" + bilibiliMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (tedMatch && tedMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//embed.ted.com/talks/\" + tedMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n};\nvar mediaRender = function (element) {\n    if (!element) {\n        return;\n    }\n    element.querySelectorAll(\"a\").forEach(function (aElement) {\n        var url = aElement.getAttribute(\"href\");\n        if (!url) {\n            return;\n        }\n        if (url.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)) {\n            videoRender(aElement, url);\n        }\n        else if (url.match(/^.+.(mp3|wav|flac)$/)) {\n            audioRender(aElement, url);\n        }\n        else {\n            iframeRender(aElement, url);\n        }\n    });\n};\n\n\n/***/ }),\n\n/***/ 765:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"i\": () => (/* binding */ mermaidRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar mermaidRender = function (element, cdn, theme) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mermaidElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mermaidRenderAdapter.getElements(element);\n    if (mermaidElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/mermaid/mermaid.min.js\", \"vditorMermaidScript\").then(function () {\n        var config = {\n            altFontFamily: \"sans-serif\",\n            flowchart: {\n                htmlLabels: true,\n                useMaxWidth: true,\n            },\n            fontFamily: \"sans-serif\",\n            gantt: {\n                leftPadding: 75,\n                rightPadding: 20,\n            },\n            securityLevel: \"loose\",\n            sequence: {\n                boxMargin: 8,\n                diagramMarginX: 8,\n                diagramMarginY: 8,\n                useMaxWidth: true,\n            },\n            startOnLoad: false,\n        };\n        if (theme === \"dark\") {\n            config.theme = \"dark\";\n            config.themeVariables = {\n                activationBkgColor: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                activationBorderColor: \"#81B1DB\",\n                activeTaskBkgColor: \"#81B1DB\",\n                activeTaskBorderColor: \"#ffffff\",\n                actorBkg: \"#1f2020\",\n                actorBorder: \"#81B1DB\",\n                actorLineColor: \"lightgrey\",\n                actorTextColor: \"lightgrey\",\n                altBackground: \"hsl(0, 0%, 40%)\",\n                altSectionBkgColor: \"#333\",\n                arrowheadColor: \"lightgrey\",\n                background: \"#333\",\n                border1: \"#81B1DB\",\n                border2: \"rgba(255, 255, 255, 0.25)\",\n                classText: \"#e0dfdf\",\n                clusterBkg: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                clusterBorder: \"rgba(255, 255, 255, 0.25)\",\n                critBkgColor: \"#E83737\",\n                critBorderColor: \"#E83737\",\n                darkTextColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                defaultLinkColor: \"lightgrey\",\n                doneTaskBkgColor: \"lightgrey\",\n                doneTaskBorderColor: \"grey\",\n                edgeLabelBackground: \"hsl(0, 0%, 34.4117647059%)\",\n                errorBkgColor: \"#a44141\",\n                errorTextColor: \"#ddd\",\n                fillType0: \"#1f2020\",\n                fillType1: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                fillType2: \"hsl(244, 1.5873015873%, 12.3529411765%)\",\n                fillType3: \"hsl(244, 1.5873015873%, 28.3529411765%)\",\n                fillType4: \"hsl(116, 1.5873015873%, 12.3529411765%)\",\n                fillType5: \"hsl(116, 1.5873015873%, 28.3529411765%)\",\n                fillType6: \"hsl(308, 1.5873015873%, 12.3529411765%)\",\n                fillType7: \"hsl(308, 1.5873015873%, 28.3529411765%)\",\n                fontFamily: \"\\\"trebuchet ms\\\", verdana, arial\",\n                fontSize: \"16px\",\n                gridColor: \"lightgrey\",\n                labelBackground: \"#181818\",\n                labelBoxBkgColor: \"#1f2020\",\n                labelBoxBorderColor: \"#81B1DB\",\n                labelColor: \"#ccc\",\n                labelTextColor: \"lightgrey\",\n                lineColor: \"lightgrey\",\n                loopTextColor: \"lightgrey\",\n                mainBkg: \"#1f2020\",\n                mainContrastColor: \"lightgrey\",\n                nodeBkg: \"#1f2020\",\n                nodeBorder: \"#81B1DB\",\n                noteBkgColor: \"#fff5ad\",\n                noteBorderColor: \"rgba(255, 255, 255, 0.25)\",\n                noteTextColor: \"#1f2020\",\n                primaryBorderColor: \"hsl(180, 0%, 2.3529411765%)\",\n                primaryColor: \"#1f2020\",\n                primaryTextColor: \"#e0dfdf\",\n                secondBkg: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                secondaryBorderColor: \"hsl(180, 0%, 18.3529411765%)\",\n                secondaryColor: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                secondaryTextColor: \"rgb(183.8476190475, 181.5523809523, 181.5523809523)\",\n                sectionBkgColor: \"hsl(52.9411764706, 28.813559322%, 58.431372549%)\",\n                sectionBkgColor2: \"#EAE8D9\",\n                sequenceNumberColor: \"black\",\n                signalColor: \"lightgrey\",\n                signalTextColor: \"lightgrey\",\n                taskBkgColor: \"hsl(180, 1.5873015873%, 35.3529411765%)\",\n                taskBorderColor: \"#ffffff\",\n                taskTextClickableColor: \"#003163\",\n                taskTextColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                taskTextDarkColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                taskTextLightColor: \"lightgrey\",\n                taskTextOutsideColor: \"lightgrey\",\n                tertiaryBorderColor: \"hsl(20, 0%, 2.3529411765%)\",\n                tertiaryColor: \"hsl(20, 1.5873015873%, 12.3529411765%)\",\n                tertiaryTextColor: \"rgb(222.9999999999, 223.6666666666, 223.9999999999)\",\n                textColor: \"#ccc\",\n                titleColor: \"#F9FFFE\",\n                todayLineColor: \"#DB5757\",\n            };\n        }\n        mermaid.initialize(config);\n        mermaidElements.forEach(function (item) {\n            var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mermaidRenderAdapter.getCode(item);\n            if (item.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                return;\n            }\n            mermaid.init(undefined, item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 894:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ mindmapRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar mindmapRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mindmapElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mindmapRenderAdapter.getElements(element);\n    if (mindmapElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            mindmapElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mindmapRenderAdapter.getCode(e);\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption({\n                        series: [\n                            {\n                                data: [JSON.parse(decodeURIComponent(text))],\n                                initialTreeDepth: -1,\n                                itemStyle: {\n                                    borderWidth: 0,\n                                    color: \"#4285f4\",\n                                },\n                                label: {\n                                    backgroundColor: \"#f6f8fa\",\n                                    borderColor: \"#d1d5da\",\n                                    borderRadius: 5,\n                                    borderWidth: 0.5,\n                                    color: \"#586069\",\n                                    lineHeight: 20,\n                                    offset: [-5, 0],\n                                    padding: [0, 5],\n                                    position: \"insideRight\",\n                                },\n                                lineStyle: {\n                                    color: \"#d1d5da\",\n                                    width: 1,\n                                },\n                                roam: true,\n                                symbol: function (value, params) {\n                                    var _a;\n                                    if ((_a = params === null || params === void 0 ? void 0 : params.data) === null || _a === void 0 ? void 0 : _a.children) {\n                                        return \"circle\";\n                                    }\n                                    else {\n                                        return \"path://\";\n                                    }\n                                },\n                                type: \"tree\",\n                            },\n                        ],\n                        tooltip: {\n                            trigger: \"item\",\n                            triggerOn: \"mousemove\",\n                        },\n                    });\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"mindmap render error: <br>\" + error;\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 198:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"k\": () => (/* binding */ outlineRender)\n/* harmony export */ });\n/* harmony import */ var _util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(615);\n/* harmony import */ var _mathRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(323);\n\n\nvar outlineRender = function (contentElement, targetElement, vditor) {\n    var tocHTML = \"\";\n    var ids = [];\n    Array.from(contentElement.children).forEach(function (item, index) {\n        if ((0,_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByHeadings */ .W)(item)) {\n            if (vditor) {\n                var lastIndex = item.id.lastIndexOf(\"_\");\n                item.id = item.id.substring(0, lastIndex === -1 ? undefined : lastIndex) + \"_\" + index;\n            }\n            ids.push(item.id);\n            tocHTML += item.outerHTML.replace(\"<wbr>\", \"\");\n        }\n    });\n    if (tocHTML === \"\") {\n        targetElement.innerHTML = \"\";\n        return \"\";\n    }\n    var tempElement = document.createElement(\"div\");\n    if (vditor) {\n        vditor.lute.SetToC(true);\n        if (vditor.currentMode === \"wysiwyg\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else if (vditor.currentMode === \"ir\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else {\n            tempElement.innerHTML = vditor.lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        vditor.lute.SetToC(vditor.options.preview.markdown.toc);\n    }\n    else {\n        targetElement.classList.add(\"vditor-outline\");\n        var lute = Lute.New();\n        lute.SetToC(true);\n        tempElement.innerHTML = lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n    }\n    var headingsElement = tempElement.firstElementChild.querySelectorAll(\"li > span[data-target-id]\");\n    headingsElement.forEach(function (item, index) {\n        if (item.nextElementSibling && item.nextElementSibling.tagName === \"UL\") {\n            var iconHTML = \"<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>\";\n            if (!document.getElementById(\"vditorIconScript\")) {\n                iconHTML = '<svg class=\"vditor-outline__action\" viewBox=\"0 0 32 32\"><path d=\"M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z\"></path></svg>';\n            }\n            item.innerHTML = iconHTML + \"<span>\" + item.innerHTML + \"</span>\";\n        }\n        else {\n            item.innerHTML = \"<svg></svg><span>\" + item.innerHTML + \"</span>\";\n        }\n        item.setAttribute(\"data-target-id\", ids[index]);\n    });\n    tocHTML = tempElement.firstElementChild.innerHTML;\n    if (headingsElement.length === 0) {\n        targetElement.innerHTML = \"\";\n        return tocHTML;\n    }\n    targetElement.innerHTML = tocHTML;\n    if (vditor) {\n        (0,_mathRender__WEBPACK_IMPORTED_MODULE_0__/* .mathRender */ .H)(targetElement, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    }\n    targetElement.firstElementChild.addEventListener(\"click\", function (event) {\n        var target = event.target;\n        while (target && !target.isEqualNode(targetElement)) {\n            if (target.classList.contains(\"vditor-outline__action\")) {\n                if (target.classList.contains(\"vditor-outline__action--close\")) {\n                    target.classList.remove(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:block\");\n                }\n                else {\n                    target.classList.add(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                break;\n            }\n            else if (target.getAttribute(\"data-target-id\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                var idElement = document.getElementById(target.getAttribute(\"data-target-id\"));\n                if (!idElement) {\n                    return;\n                }\n                if (vditor) {\n                    if (vditor.options.height === \"auto\") {\n                        var windowScrollY = idElement.offsetTop + vditor.element.offsetTop;\n                        if (!vditor.options.toolbarConfig.pin) {\n                            windowScrollY += vditor.toolbar.element.offsetHeight;\n                        }\n                        window.scrollTo(window.scrollX, windowScrollY);\n                    }\n                    else {\n                        if (vditor.element.offsetTop < window.scrollY) {\n                            window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                        }\n                        if (vditor.preview.element.contains(contentElement)) {\n                            contentElement.parentElement.scrollTop = idElement.offsetTop;\n                        }\n                        else {\n                            contentElement.scrollTop = idElement.offsetTop;\n                        }\n                    }\n                }\n                else {\n                    window.scrollTo(window.scrollX, idElement.offsetTop);\n                }\n                break;\n            }\n            target = target.parentElement;\n        }\n    });\n    return tocHTML;\n};\n\n\n/***/ }),\n\n/***/ 583:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"B\": () => (/* binding */ plantumlRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar plantumlRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var plantumlElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.plantumlRenderAdapter.getElements(element);\n    if (plantumlElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/plantuml/plantuml-encoder.min.js\", \"vditorPlantumlScript\").then(function () {\n        plantumlElements.forEach(function (e) {\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.plantumlRenderAdapter.getCode(e).trim();\n            if (!text) {\n                return;\n            }\n            try {\n                e.innerHTML = \"<img src=\\\"http://www.plantuml.com/plantuml/svg/~1\" + plantumlEncoder.encode(text) + \"\\\">\";\n            }\n            catch (error) {\n                e.className = \"vditor-reset--error\";\n                e.innerHTML = \"plantuml render error: <br>\" + error;\n            }\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 792:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ setLute)\n/* harmony export */ });\nvar setLute = function (options) {\n    var lute = Lute.New();\n    lute.PutEmojis(options.emojis);\n    lute.SetEmojiSite(options.emojiSite);\n    lute.SetHeadingAnchor(options.headingAnchor);\n    lute.SetInlineMathAllowDigitAfterOpenMarker(options.inlineMathDigit);\n    lute.SetAutoSpace(options.autoSpace);\n    lute.SetToC(options.toc);\n    lute.SetFootnotes(options.footnotes);\n    lute.SetFixTermTypo(options.fixTermTypo);\n    lute.SetVditorCodeBlockPreview(options.codeBlockPreview);\n    lute.SetVditorMathBlockPreview(options.mathBlockPreview);\n    lute.SetSanitize(options.sanitize);\n    lute.SetChineseParagraphBeginningSpace(options.paragraphBeginningSpace);\n    lute.SetRenderListStyle(options.listStyle);\n    lute.SetLinkBase(options.linkBase);\n    lute.SetLinkPrefix(options.linkPrefix);\n    lute.SetMark(options.mark);\n    if (options.lazyLoadImage) {\n        lute.SetImageLazyLoading(options.lazyLoadImage);\n    }\n    return lute;\n};\n\n\n/***/ }),\n\n/***/ 264:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"E\": () => (/* binding */ previewImage)\n/* harmony export */ });\nvar previewImage = function (oldImgElement, lang, theme) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (theme === void 0) { theme = \"classic\"; }\n    var oldImgRect = oldImgElement.getBoundingClientRect();\n    var height = 36;\n    document.body.insertAdjacentHTML(\"beforeend\", \"<div class=\\\"vditor vditor-img\" + (theme === \"dark\" ? \" vditor--dark\" : \"\") + \"\\\">\\n    <div class=\\\"vditor-img__bar\\\">\\n      <span class=\\\"vditor-img__btn\\\" data-deg=\\\"0\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-redo\\\"></use></svg>\\n        \" + window.VditorI18n.spin + \"\\n      </span>\\n      <span class=\\\"vditor-img__btn\\\"  onclick=\\\"this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n        X &nbsp;\" + window.VditorI18n.close + \"\\n      </span>\\n    </div>\\n    <div class=\\\"vditor-img__img\\\" onclick=\\\"this.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n      <img style=\\\"width: \" + oldImgElement.width + \"px;height:\" + oldImgElement.height + \"px;transform: translate3d(\" + oldImgRect.left + \"px, \" + (oldImgRect.top - height) + \"px, 0)\\\" src=\\\"\" + oldImgElement.getAttribute(\"src\") + \"\\\">\\n    </div>\\n</div>\");\n    document.body.style.overflow = \"hidden\";\n    // 图片从原始位置移动到预览正中间的动画效果\n    var imgElement = document.querySelector(\".vditor-img img\");\n    var translate3d = \"translate3d(\" + Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2 + \"px, \" + Math.max(0, window.innerHeight - height - oldImgElement.naturalHeight) / 2 + \"px, 0)\";\n    setTimeout(function () {\n        imgElement.setAttribute(\"style\", \"transition: transform .3s ease-in-out;transform: \" + translate3d);\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n    // 旋转\n    var btnElement = document.querySelector(\".vditor-img__btn\");\n    btnElement.addEventListener(\"click\", function () {\n        var deg = parseInt(btnElement.getAttribute(\"data-deg\"), 10) + 90;\n        if ((deg / 90) % 2 === 1 && oldImgElement.naturalWidth > imgElement.parentElement.clientHeight) {\n            imgElement.style.transform = \"translate3d(\" + Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2 + \"px, \" + (oldImgElement.naturalWidth / 2 - oldImgElement.naturalHeight / 2) + \"px, 0) rotateZ(\" + deg + \"deg)\";\n        }\n        else {\n            imgElement.style.transform = translate3d + \" rotateZ(\" + deg + \"deg)\";\n        }\n        btnElement.setAttribute(\"data-deg\", deg.toString());\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n};\n\n\n/***/ }),\n\n/***/ 968:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ setCodeTheme)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n\n\nvar setCodeTheme = function (codeTheme, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(codeTheme)) {\n        codeTheme = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = cdn + \"/dist/js/highlight.js/styles/\" + codeTheme + \".css\";\n    if (!vditorHljsStyle) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n    else if (vditorHljsStyle.href !== href) {\n        vditorHljsStyle.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 958:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": () => (/* binding */ setContentTheme)\n/* harmony export */ });\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(946);\n\nvar setContentTheme = function (contentTheme, path) {\n    if (!contentTheme || !path) {\n        return;\n    }\n    var vditorContentTheme = document.getElementById(\"vditorContentTheme\");\n    var cssPath = path + \"/\" + contentTheme + \".css\";\n    if (!vditorContentTheme) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n    else if (vditorContentTheme.href !== cssPath) {\n        vditorContentTheme.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 228:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"J\": () => (/* binding */ addScriptSync),\n/* harmony export */   \"G\": () => (/* binding */ addScript)\n/* harmony export */ });\nvar addScriptSync = function (path, id) {\n    if (document.getElementById(id)) {\n        return false;\n    }\n    var xhrObj = new XMLHttpRequest();\n    xhrObj.open(\"GET\", path, false);\n    xhrObj.setRequestHeader(\"Accept\", \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01\");\n    xhrObj.send(\"\");\n    var scriptElement = document.createElement(\"script\");\n    scriptElement.type = \"text/javascript\";\n    scriptElement.text = xhrObj.responseText;\n    scriptElement.id = id;\n    document.head.appendChild(scriptElement);\n};\nvar addScript = function (path, id) {\n    return new Promise(function (resolve, reject) {\n        if (document.getElementById(id)) {\n            // 脚本加载后再次调用直接返回\n            resolve();\n            return false;\n        }\n        var scriptElement = document.createElement(\"script\");\n        scriptElement.src = path;\n        scriptElement.async = true;\n        // 循环调用时 Chrome 不会重复请求 js\n        document.head.appendChild(scriptElement);\n        scriptElement.onload = function () {\n            if (document.getElementById(id)) {\n                // 循环调用需清除 DOM 中的 script 标签\n                scriptElement.remove();\n                resolve();\n                return false;\n            }\n            scriptElement.id = id;\n            resolve();\n        };\n    });\n};\n\n\n/***/ }),\n\n/***/ 946:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"c\": () => (/* binding */ addStyle)\n/* harmony export */ });\nvar addStyle = function (url, id) {\n    if (!document.getElementById(id)) {\n        var styleElement = document.createElement(\"link\");\n        styleElement.id = id;\n        styleElement.rel = \"stylesheet\";\n        styleElement.type = \"text/css\";\n        styleElement.href = url;\n        document.getElementsByTagName(\"head\")[0].appendChild(styleElement);\n    }\n};\n\n\n/***/ }),\n\n/***/ 769:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ code160to32)\n/* harmony export */ });\nvar code160to32 = function (text) {\n    // 非打断空格转换为空格\n    return text.replace(/\\u00a0/g, \" \");\n};\n\n\n/***/ }),\n\n/***/ 931:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"G6\": () => (/* binding */ isSafari),\n/* harmony export */   \"vU\": () => (/* binding */ isFirefox),\n/* harmony export */   \"pK\": () => (/* binding */ accessLocalStorage),\n/* harmony export */   \"Le\": () => (/* binding */ getEventName),\n/* harmony export */   \"yl\": () => (/* binding */ isCtrl),\n/* harmony export */   \"ns\": () => (/* binding */ updateHotkeyTip),\n/* harmony export */   \"i7\": () => (/* binding */ isChrome)\n/* harmony export */ });\nvar isSafari = function () {\n    return navigator.userAgent.indexOf(\"Safari\") > -1 && navigator.userAgent.indexOf(\"Chrome\") === -1;\n};\nvar isFirefox = function () {\n    return navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n};\nvar accessLocalStorage = function () {\n    try {\n        return typeof localStorage !== \"undefined\";\n    }\n    catch (e) {\n        return false;\n    }\n};\n// 用户 iPhone 点击延迟/需要双击的处理\nvar getEventName = function () {\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1) {\n        return \"touchstart\";\n    }\n    else {\n        return \"click\";\n    }\n};\n// 区别 mac 上的 ctrl 和 meta\nvar isCtrl = function (event) {\n    if (navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0) {\n        // mac\n        if (event.metaKey && !event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n    else {\n        if (!event.metaKey && event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n};\n// Mac，Windows 快捷键展示\nvar updateHotkeyTip = function (hotkey) {\n    if (/Mac/.test(navigator.platform) || navigator.platform === \"iPhone\") {\n        if (hotkey.indexOf(\"⇧\") > -1 && isFirefox()) {\n            // Mac Firefox 按下 shift 后，key 同 windows 系统\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    else {\n        if (hotkey.startsWith(\"⌘\")) {\n            hotkey = hotkey.replace(\"⌘\", \"⌘+\");\n        }\n        else if (hotkey.startsWith(\"⌥\") && hotkey.substr(1, 1) !== \"⌘\") {\n            hotkey = hotkey.replace(\"⌥\", \"⌥+\");\n        }\n        else {\n            hotkey = hotkey.replace(\"⇧⌘\", \"⌘+⇧+\").replace(\"⌥⌘\", \"⌥+⌘+\");\n        }\n        hotkey = hotkey.replace(\"⌘\", \"Ctrl\").replace(\"⇧\", \"Shift\")\n            .replace(\"⌥\", \"Alt\");\n        if (hotkey.indexOf(\"Shift\") > -1) {\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    return hotkey;\n};\nvar isChrome = function () {\n    return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n\n\n/***/ }),\n\n/***/ 713:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"JQ\": () => (/* binding */ hasTopClosestByClassName),\n/* harmony export */   \"E2\": () => (/* binding */ hasTopClosestByTag),\n/* harmony export */   \"O9\": () => (/* binding */ getTopList),\n/* harmony export */   \"a1\": () => (/* binding */ hasClosestByAttribute),\n/* harmony export */   \"F9\": () => (/* binding */ hasClosestBlock),\n/* harmony export */   \"lG\": () => (/* binding */ hasClosestByMatchTag),\n/* harmony export */   \"fb\": () => (/* binding */ hasClosestByClassName),\n/* harmony export */   \"DX\": () => (/* binding */ getLastNode)\n/* harmony export */ });\n/* unused harmony export hasTopClosestByAttribute */\n/* harmony import */ var _hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(615);\n\nvar hasTopClosestByClassName = function (element, className) {\n    var closest = hasClosestByClassName(element, className);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByClassName(closest.parentElement, className);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByAttribute = function (element, attr, value) {\n    var closest = hasClosestByAttribute(element, attr, value);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByAttribute(closest.parentElement, attr, value);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByTag = function (element, nodeName) {\n    var closest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(element, nodeName);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(closest.parentElement, nodeName);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar getTopList = function (element) {\n    var topUlElement = hasTopClosestByTag(element, \"UL\");\n    var topOlElement = hasTopClosestByTag(element, \"OL\");\n    var topListElement = topUlElement;\n    if (topOlElement && (!topUlElement || (topUlElement && topOlElement.contains(topUlElement)))) {\n        topListElement = topOlElement;\n    }\n    return topListElement;\n};\nvar hasClosestByAttribute = function (element, attr, value) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.getAttribute(attr) === value) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestBlock = function (element) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    var blockElement = hasClosestByAttribute(element, \"data-block\", \"0\");\n    if (blockElement) {\n        return blockElement;\n    }\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.tagName === \"H1\" ||\n            e.tagName === \"H2\" ||\n            e.tagName === \"H3\" ||\n            e.tagName === \"H4\" ||\n            e.tagName === \"H5\" ||\n            e.tagName === \"H6\" ||\n            e.tagName === \"P\" ||\n            e.tagName === \"BLOCKQUOTE\" ||\n            e.tagName === \"OL\" ||\n            e.tagName === \"UL\") {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByMatchTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName === nodeName) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByClassName = function (element, className) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.classList.contains(className)) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar getLastNode = function (node) {\n    while (node && node.lastChild) {\n        node = node.lastChild;\n    }\n    return node;\n};\n\n\n/***/ }),\n\n/***/ 615:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"S\": () => (/* binding */ hasClosestByTag),\n/* harmony export */   \"W\": () => (/* binding */ hasClosestByHeadings)\n/* harmony export */ });\n// NOTE: 减少 method.ts 打包，故从 hasClosest.ts 中拆分\nvar hasClosestByTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName.indexOf(nodeName) === 0) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByHeadings = function (element) {\n    var headingElement = hasClosestByTag(element, \"H\");\n    if (headingElement && headingElement.tagName.length === 2 && headingElement.tagName !== \"HR\") {\n        return headingElement;\n    }\n    return false;\n};\n\n\n/***/ }),\n\n/***/ 224:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"T\": () => (/* binding */ merge)\n/* harmony export */ });\nvar merge = function () {\n    var options = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        options[_i] = arguments[_i];\n    }\n    var target = {};\n    var merger = function (obj) {\n        for (var prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                if (Object.prototype.toString.call(obj[prop]) === \"[object Object]\") {\n                    target[prop] = merge(target[prop], obj[prop]);\n                }\n                else {\n                    target[prop] = obj[prop];\n                }\n            }\n        }\n    };\n    for (var i = 0; i < options.length; i++) {\n        merger(options[i]);\n    }\n    return target;\n};\n\n\n/***/ }),\n\n/***/ 187:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"zh\": () => (/* binding */ getEditorRange),\n/* harmony export */   \"Ny\": () => (/* binding */ getCursorPosition),\n/* harmony export */   \"Gb\": () => (/* binding */ selectIsEditor),\n/* harmony export */   \"Hc\": () => (/* binding */ setSelectionFocus),\n/* harmony export */   \"im\": () => (/* binding */ getSelectPosition),\n/* harmony export */   \"$j\": () => (/* binding */ setSelectionByPosition),\n/* harmony export */   \"ib\": () => (/* binding */ setRangeByWbr),\n/* harmony export */   \"oC\": () => (/* binding */ insertHTML)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _compatibility__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(931);\n/* harmony import */ var _hasClosest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(713);\n\n\n\nvar getEditorRange = function (vditor) {\n    var range;\n    var element = vditor[vditor.currentMode].element;\n    if (getSelection().rangeCount > 0) {\n        range = getSelection().getRangeAt(0);\n        if (element.isEqualNode(range.startContainer) || element.contains(range.startContainer)) {\n            return range;\n        }\n    }\n    if (vditor[vditor.currentMode].range) {\n        return vditor[vditor.currentMode].range;\n    }\n    element.focus();\n    range = element.ownerDocument.createRange();\n    range.setStart(element, 0);\n    range.collapse(true);\n    return range;\n};\nvar getCursorPosition = function (editor) {\n    var range = window.getSelection().getRangeAt(0);\n    if (!editor.contains(range.startContainer) && !(0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByClassName */ .fb)(range.startContainer, \"vditor-panel--none\")) {\n        return {\n            left: 0,\n            top: 0,\n        };\n    }\n    var parentRect = editor.parentElement.getBoundingClientRect();\n    var cursorRect;\n    if (range.getClientRects().length === 0) {\n        if (range.startContainer.nodeType === 3) {\n            // 空行时，会出现没有 br 的情况，需要根据父元素 <p> 获取位置信息\n            var parent_1 = range.startContainer.parentElement;\n            if (parent_1 && parent_1.getClientRects().length > 0) {\n                cursorRect = parent_1.getClientRects()[0];\n            }\n            else {\n                return {\n                    left: 0,\n                    top: 0,\n                };\n            }\n        }\n        else {\n            var children = range.startContainer.children;\n            if (children[range.startOffset] &&\n                children[range.startOffset].getClientRects().length > 0) {\n                // markdown 模式回车\n                cursorRect = children[range.startOffset].getClientRects()[0];\n            }\n            else if (range.startContainer.childNodes.length > 0) {\n                // in table or code block\n                var cloneRange = range.cloneRange();\n                range.selectNode(range.startContainer.childNodes[Math.max(0, range.startOffset - 1)]);\n                cursorRect = range.getClientRects()[0];\n                range.setEnd(cloneRange.endContainer, cloneRange.endOffset);\n                range.setStart(cloneRange.startContainer, cloneRange.startOffset);\n            }\n            else {\n                cursorRect = range.startContainer.getClientRects()[0];\n            }\n            if (!cursorRect) {\n                var parentElement = range.startContainer.childNodes[range.startOffset];\n                while (!parentElement.getClientRects ||\n                    (parentElement.getClientRects && parentElement.getClientRects().length === 0)) {\n                    parentElement = parentElement.parentElement;\n                }\n                cursorRect = parentElement.getClientRects()[0];\n            }\n        }\n    }\n    else {\n        cursorRect = range.getClientRects()[0];\n    }\n    return {\n        left: cursorRect.left - parentRect.left,\n        top: cursorRect.top - parentRect.top,\n    };\n};\nvar selectIsEditor = function (editor, range) {\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return false;\n        }\n        else {\n            range = getSelection().getRangeAt(0);\n        }\n    }\n    var container = range.commonAncestorContainer;\n    return editor.isEqualNode(container) || editor.contains(container);\n};\nvar setSelectionFocus = function (range) {\n    var selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\nvar getSelectPosition = function (selectElement, editorElement, range) {\n    var position = {\n        end: 0,\n        start: 0,\n    };\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return position;\n        }\n        range = window.getSelection().getRangeAt(0);\n    }\n    if (selectIsEditor(editorElement, range)) {\n        var preSelectionRange = range.cloneRange();\n        if (selectElement.childNodes[0] && selectElement.childNodes[0].childNodes[0]) {\n            preSelectionRange.setStart(selectElement.childNodes[0].childNodes[0], 0);\n        }\n        else {\n            preSelectionRange.selectNodeContents(selectElement);\n        }\n        preSelectionRange.setEnd(range.startContainer, range.startOffset);\n        position.start = preSelectionRange.toString().length;\n        position.end = position.start + range.toString().length;\n    }\n    return position;\n};\nvar setSelectionByPosition = function (start, end, editor) {\n    var charIndex = 0;\n    var line = 0;\n    var pNode = editor.childNodes[line];\n    var foundStart = false;\n    var stop = false;\n    start = Math.max(0, start);\n    end = Math.max(0, end);\n    var range = editor.ownerDocument.createRange();\n    range.setStart(pNode || editor, 0);\n    range.collapse(true);\n    while (!stop && pNode) {\n        var nextCharIndex = charIndex + pNode.textContent.length;\n        if (!foundStart && start >= charIndex && start <= nextCharIndex) {\n            if (start === 0) {\n                range.setStart(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setStart(pNode.childNodes[0], start - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setStartBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setStartAfter(pNode);\n                }\n            }\n            foundStart = true;\n            if (start === end) {\n                stop = true;\n                break;\n            }\n        }\n        if (foundStart && end >= charIndex && end <= nextCharIndex) {\n            if (end === 0) {\n                range.setEnd(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setEnd(pNode.childNodes[0], end - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setEndBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setEndAfter(pNode);\n                }\n            }\n            stop = true;\n        }\n        charIndex = nextCharIndex;\n        pNode = editor.childNodes[++line];\n    }\n    if (!stop && editor.childNodes[line - 1]) {\n        range.setStartBefore(editor.childNodes[line - 1]);\n    }\n    setSelectionFocus(range);\n    return range;\n};\nvar setRangeByWbr = function (element, range) {\n    var wbrElement = element.querySelector(\"wbr\");\n    if (!wbrElement) {\n        return;\n    }\n    if (!wbrElement.previousElementSibling) {\n        if (wbrElement.previousSibling) {\n            // text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n        else if (wbrElement.nextSibling) {\n            if (wbrElement.nextSibling.nodeType === 3) {\n                // <wbr>text\n                range.setStart(wbrElement.nextSibling, 0);\n            }\n            else {\n                // <wbr><br> https://github.com/Vanessa219/vditor/issues/400\n                range.setStartBefore(wbrElement.nextSibling);\n            }\n        }\n        else {\n            // 内容为空\n            range.setStart(wbrElement.parentElement, 0);\n        }\n    }\n    else {\n        if (wbrElement.previousElementSibling.isSameNode(wbrElement.previousSibling)) {\n            if (wbrElement.previousElementSibling.lastChild) {\n                // <em>text</em><wbr>\n                range.setStartBefore(wbrElement);\n                range.collapse(true);\n                setSelectionFocus(range);\n                // fix Chrome set range bug: **c**\n                if ((0,_compatibility__WEBPACK_IMPORTED_MODULE_2__/* .isChrome */ .i7)() && (wbrElement.previousElementSibling.tagName === \"EM\" ||\n                    wbrElement.previousElementSibling.tagName === \"STRONG\" ||\n                    wbrElement.previousElementSibling.tagName === \"S\")) {\n                    range.insertNode(document.createTextNode(_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.ZWSP */ .g.ZWSP));\n                    range.collapse(false);\n                }\n                wbrElement.remove();\n                return;\n            }\n            else {\n                // <br><wbr>\n                range.setStartAfter(wbrElement.previousElementSibling);\n            }\n        }\n        else {\n            // <em>text</em>text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n    }\n    range.collapse(true);\n    wbrElement.remove();\n    setSelectionFocus(range);\n};\nvar insertHTML = function (html, vditor) {\n    // 使用 lute 方法会添加 p 元素，只有一个 p 元素的时候进行删除\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var tempBlockElement = tempElement.querySelectorAll(\"p\");\n    if (tempBlockElement.length === 1 && !tempBlockElement[0].previousSibling && !tempBlockElement[0].nextSibling &&\n        vditor[vditor.currentMode].element.children.length > 0 && tempElement.firstElementChild.tagName === \"P\") {\n        html = tempBlockElement[0].innerHTML.trim();\n    }\n    var pasteElement = document.createElement(\"div\");\n    pasteElement.innerHTML = html;\n    var range = getEditorRange(vditor);\n    if (range.toString() !== \"\") {\n        vditor[vditor.currentMode].preventInput = true;\n        document.execCommand(\"delete\", false, \"\");\n    }\n    if (pasteElement.firstElementChild &&\n        pasteElement.firstElementChild.getAttribute(\"data-block\") === \"0\") {\n        // 粘贴内容为块元素时，应在下一段落中插入\n        pasteElement.lastElementChild.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        var blockElement = (0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestBlock */ .F9)(range.startContainer);\n        if (!blockElement) {\n            vditor[vditor.currentMode].element.insertAdjacentHTML(\"beforeend\", pasteElement.innerHTML);\n        }\n        else {\n            blockElement.insertAdjacentHTML(\"afterend\", pasteElement.innerHTML);\n        }\n        setRangeByWbr(vditor[vditor.currentMode].element, range);\n    }\n    else {\n        var pasteTemplate = document.createElement(\"template\");\n        pasteTemplate.innerHTML = html;\n        range.insertNode(pasteTemplate.content.cloneNode(true));\n        range.collapse(false);\n        setSelectionFocus(range);\n    }\n};\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be in strict mode.\n(() => {\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ src)\n});\n\n// EXTERNAL MODULE: ./src/assets/scss/index.scss\nvar scss = __webpack_require__(157);\n// EXTERNAL MODULE: ./src/method.ts + 4 modules\nvar method = __webpack_require__(857);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(260);\n// EXTERNAL MODULE: ./src/ts/util/code160to32.ts\nvar code160to32 = __webpack_require__(769);\n;// CONCATENATED MODULE: ./src/ts/markdown/getMarkdown.ts\n\nvar getMarkdown = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return (0,code160to32/* code160to32 */.X)((vditor.sv.element.textContent + \"\\n\").replace(/\\n\\n$/, \"\\n\"));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2Md(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2Md(vditor.ir.element.innerHTML);\n    }\n    return \"\";\n};\n\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(228);\n;// CONCATENATED MODULE: ./src/ts/devtools/index.ts\n\n\nvar DevTools = /** @class */ (function () {\n    function DevTools() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-devtools\";\n        this.element.innerHTML = '<div class=\"vditor-reset--error\"></div><div style=\"height: 100%;\"></div>';\n    }\n    DevTools.prototype.renderEchart = function (vditor) {\n        var _this = this;\n        if (vditor.devtools.element.style.display !== \"block\") {\n            return;\n        }\n        (0,addScript/* addScript */.G)(vditor.options.cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            if (!_this.ASTChart) {\n                _this.ASTChart = echarts.init(vditor.devtools.element.lastElementChild);\n            }\n            try {\n                _this.element.lastElementChild.style.display = \"block\";\n                _this.element.firstElementChild.innerHTML = \"\";\n                _this.ASTChart.setOption({\n                    series: [\n                        {\n                            data: JSON.parse(vditor.lute.RenderEChartsJSON(getMarkdown(vditor))),\n                            initialTreeDepth: -1,\n                            label: {\n                                align: \"left\",\n                                backgroundColor: \"rgba(68, 77, 86, .68)\",\n                                borderRadius: 3,\n                                color: \"#d1d5da\",\n                                fontSize: 12,\n                                lineHeight: 12,\n                                offset: [9, 12],\n                                padding: [2, 4, 2, 4],\n                                position: \"top\",\n                                verticalAlign: \"middle\",\n                            },\n                            lineStyle: {\n                                color: \"#4285f4\",\n                                type: \"curve\",\n                                width: 1,\n                            },\n                            orient: \"vertical\",\n                            roam: true,\n                            type: \"tree\",\n                        },\n                    ],\n                    toolbox: {\n                        bottom: 25,\n                        emphasis: {\n                            iconStyle: {\n                                color: \"#4285f4\",\n                            },\n                        },\n                        feature: {\n                            restore: {\n                                show: true,\n                            },\n                            saveAsImage: {\n                                show: true,\n                            },\n                        },\n                        right: 15,\n                        show: true,\n                    },\n                });\n                _this.ASTChart.resize();\n            }\n            catch (e) {\n                _this.element.lastElementChild.style.display = \"none\";\n                _this.element.firstElementChild.innerHTML = e;\n            }\n        });\n    };\n    return DevTools;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/compatibility.ts\nvar compatibility = __webpack_require__(931);\n;// CONCATENATED MODULE: ./src/ts/toolbar/setToolbar.ts\n\n\nvar removeCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.remove(\"vditor-menu--current\");\n        }\n    });\n};\nvar setCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.add(\"vditor-menu--current\");\n        }\n    });\n};\nvar enableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.remove(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar disableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.add(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar hideToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"none\";\n        }\n    });\n};\nvar showToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"block\";\n        }\n    });\n};\n// \"subToolbar\", \"hint\", \"popover\"\nvar hidePanel = function (vditor, panels, exceptElement) {\n    if (panels.includes(\"subToolbar\")) {\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint\").forEach(function (item) {\n            if (exceptElement && item.isEqualNode(exceptElement)) {\n                return;\n            }\n            item.style.display = \"none\";\n        });\n        if (vditor.toolbar.elements.emoji) {\n            vditor.toolbar.elements.emoji.lastElementChild.style.display = \"none\";\n        }\n    }\n    if (panels.includes(\"hint\")) {\n        vditor.hint.element.style.display = \"none\";\n    }\n    if (vditor.wysiwyg.popover && panels.includes(\"popover\")) {\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n};\nvar toggleSubMenu = function (vditor, panelElement, actionBtn, level) {\n    actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            return;\n        }\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint--current\").forEach(function (item) {\n            item.classList.remove(\"vditor-hint--current\");\n        });\n        if (panelElement.style.display === \"block\") {\n            panelElement.style.display = \"none\";\n        }\n        else {\n            hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"], actionBtn.parentElement.parentElement);\n            if (!actionBtn.classList.contains(\"vditor-tooltipped\")) {\n                actionBtn.classList.add(\"vditor-hint--current\");\n            }\n            panelElement.style.display = \"block\";\n            if (vditor.toolbar.element.getBoundingClientRect().right - actionBtn.getBoundingClientRect().right < 250) {\n                panelElement.classList.add(\"vditor-panel--left\");\n            }\n            else {\n                panelElement.classList.remove(\"vditor-panel--left\");\n            }\n        }\n    });\n};\n\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(713);\n// EXTERNAL MODULE: ./src/ts/util/hasClosestByHeadings.ts\nvar hasClosestByHeadings = __webpack_require__(615);\n;// CONCATENATED MODULE: ./src/ts/util/log.ts\nvar log = function (method, content, type, print) {\n    if (print) {\n        // @ts-ignore\n        console.log(method + \" - \" + type + \": \" + content);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(369);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(726);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(23);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(383);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(890);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(93);\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(323);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(765);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(894);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(583);\n;// CONCATENATED MODULE: ./src/ts/util/processCode.ts\n\n\n\n\n\n\n\n\n\n\nvar processPasteCode = function (html, text, type) {\n    if (type === void 0) { type = \"sv\"; }\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var isCode = false;\n    if (tempElement.childElementCount === 1 &&\n        tempElement.lastElementChild.style.fontFamily.indexOf(\"monospace\") > -1) {\n        // VS Code\n        isCode = true;\n    }\n    var pres = tempElement.querySelectorAll(\"pre\");\n    if (tempElement.childElementCount === 1 && pres.length === 1\n        && pres[0].className !== \"vditor-wysiwyg\"\n        && pres[0].className !== \"vditor-sv\") {\n        // IDE\n        isCode = true;\n    }\n    if (html.indexOf('\\n<p class=\"p1\">') === 0) {\n        // Xcode\n        isCode = true;\n    }\n    if (tempElement.childElementCount === 1 && tempElement.firstElementChild.tagName === \"TABLE\" &&\n        tempElement.querySelector(\".line-number\") && tempElement.querySelector(\".line-content\")) {\n        // 网页源码\n        isCode = true;\n    }\n    if (isCode) {\n        var code = text || html;\n        if (/\\n/.test(code) || pres.length === 1) {\n            if (type === \"wysiwyg\") {\n                return \"<div class=\\\"vditor-wysiwyg__block\\\" data-block=\\\"0\\\" data-type=\\\"code-block\\\"><pre><code>\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"<wbr></code></pre></div>\";\n            }\n            return \"\\n```\\n\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"\\n```\";\n        }\n        else {\n            if (type === \"wysiwyg\") {\n                return \"<code>\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"</code><wbr>\";\n            }\n            return \"`\" + code + \"`\";\n        }\n    }\n    return false;\n};\nvar processCodeRender = function (previewPanel, vditor) {\n    if (!previewPanel) {\n        return;\n    }\n    if (previewPanel.parentElement.getAttribute(\"data-type\") === \"html-block\") {\n        previewPanel.setAttribute(\"data-render\", \"1\");\n        return;\n    }\n    var language = previewPanel.firstElementChild.className.replace(\"language-\", \"\");\n    if (!language) {\n        return;\n    }\n    if (language === \"abc\") {\n        (0,abcRender/* abcRender */.Q)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"mermaid\") {\n        (0,mermaidRender/* mermaidRender */.i)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"flowchart\") {\n        (0,flowchartRender/* flowchartRender */.P)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"echarts\") {\n        (0,chartRender/* chartRender */.p)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"mindmap\") {\n        (0,mindmapRender/* mindmapRender */.P)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"plantuml\") {\n        (0,plantumlRender/* plantumlRender */.B)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"graphviz\") {\n        (0,graphvizRender/* graphvizRender */.v)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"math\") {\n        (0,mathRender/* mathRender */.H)(previewPanel, { cdn: vditor.options.cdn, math: vditor.options.preview.math });\n    }\n    else {\n        (0,highlightRender/* highlightRender */.s)(Object.assign({}, vditor.options.preview.hljs), previewPanel, vditor.options.cdn);\n        (0,codeRender/* codeRender */.O)(previewPanel);\n    }\n    previewPanel.setAttribute(\"data-render\", \"1\");\n};\n\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(187);\n;// CONCATENATED MODULE: ./src/ts/util/toc.ts\n\n\n\n\nvar renderToc = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var tocHTML = vditor.outline.render(vditor);\n    if (tocHTML === \"\") {\n        tocHTML = \"[ToC]\";\n    }\n    editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n        item.innerHTML = tocHTML;\n        (0,mathRender/* mathRender */.H)(item, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    });\n};\nvar clickToc = function (event, vditor) {\n    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n        var headingElement = vditor[vditor.currentMode].element.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n        if (headingElement) {\n            if (vditor.options.height === \"auto\") {\n                var windowScrollY = headingElement.offsetTop + vditor.element.offsetTop;\n                if (!vditor.options.toolbarConfig.pin) {\n                    windowScrollY += vditor.toolbar.element.offsetHeight;\n                }\n                window.scrollTo(window.scrollX, windowScrollY);\n            }\n            else {\n                if (vditor.element.offsetTop < window.scrollY) {\n                    window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                }\n                vditor[vditor.currentMode].element.scrollTop = headingElement.offsetTop;\n            }\n        }\n        return;\n    }\n};\nvar keydownToc = function (blockElement, vditor, event, range) {\n    // toc 前无元素，插入空块\n    if (blockElement.previousElementSibling &&\n        blockElement.previousElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Backspace\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start === 0) {\n            blockElement.previousElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockElement, blockElement.previousElementSibling)) {\n            return true;\n        }\n    }\n    // toc 后无元素，插入空块\n    if (blockElement.nextElementSibling &&\n        blockElement.nextElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Delete\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start\n                >= blockElement.textContent.trimRight().length) {\n            blockElement.nextElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockElement, blockElement.nextElementSibling)) {\n            return true;\n        }\n    }\n    // toc 删除\n    if (event.key === \"Backspace\" || event.key === \"Delete\") {\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-toc\");\n        if (tocElement) {\n            tocElement.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/input.ts\n\n\n\n\n\n\n\n\n\nvar input = function (vditor, range, ignoreSpace, event) {\n    if (ignoreSpace === void 0) { ignoreSpace = false; }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    // 前后可以输入空格\n    if (blockElement && !ignoreSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\") {\n        if ((isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling) ||\n            isHeadingMD(blockElement.innerHTML)) {\n            return;\n        }\n        // 前后空格处理\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n        // 开始可以输入空格\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        // 结尾可以输入空格\n        var endSpace = true;\n        for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n            if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                endSpace = false;\n                break;\n            }\n        }\n        if (startSpace) {\n            return;\n        }\n        if (endSpace) {\n            var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker\");\n            if (markerElement) {\n                // inline marker space https://github.com/Vanessa219/vditor/issues/239\n            }\n            else {\n                var previousNode = range.startContainer.previousSibling;\n                if (previousNode && previousNode.nodeType !== 3 && previousNode.classList.contains(\"vditor-ir__node--expand\")) {\n                    // FireFox https://github.com/Vanessa219/vditor/issues/239\n                    previousNode.classList.remove(\"vditor-ir__node--expand\");\n                }\n                return;\n            }\n        }\n    }\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.ir.element;\n    }\n    // document.exeComment insertHTML 会插入 wbr\n    if (!blockElement.querySelector(\"wbr\")) {\n        var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n        if (previewRenderElement) {\n            previewRenderElement.previousElementSibling.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        }\n        else {\n            range.insertNode(document.createElement(\"wbr\"));\n        }\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.ir.element;\n    }\n    var isIRElement = blockElement.isEqualNode(vditor.ir.element);\n    var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n    var html = \"\";\n    if (!isIRElement) {\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n        // 列表需要到最顶层\n        var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (topListElement) {\n            blockElement = topListElement;\n        }\n        // 应到引用层，否则 > --- 会解析为 front-matter；列表中有 blockquote 则解析 blockquote；blockquote 中有列表则解析列表\n        if (blockquoteElement && (!topListElement || (topListElement && !blockquoteElement.contains(topListElement)))) {\n            blockElement = blockquoteElement;\n        }\n        // 修改脚注\n        if (footnoteElement) {\n            blockElement = footnoteElement;\n        }\n        html = blockElement.outerHTML;\n        if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n            // 如果为列表的话，需要把上下的列表都重绘\n            var listPrevElement = blockElement.previousElementSibling;\n            var listNextElement = blockElement.nextElementSibling;\n            if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                html = listPrevElement.outerHTML + html;\n                listPrevElement.remove();\n            }\n            if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                html = html + listNextElement.outerHTML;\n                listNextElement.remove();\n            }\n            // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n            html = html.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n        }\n        else if (blockElement.previousElementSibling &&\n            blockElement.previousElementSibling.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") !== \"\" &&\n            event && event.inputType === \"insertParagraph\") {\n            // 换行时需要处理上一段落\n            html = blockElement.previousElementSibling.outerHTML + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // 添加链接引用\n        vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n            if (item && !blockElement.isEqualNode(item)) {\n                html += item.outerHTML;\n                item.remove();\n            }\n        });\n        // 添加脚注\n        vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n            if (item && !blockElement.isEqualNode(item)) {\n                html += item.outerHTML;\n                item.remove();\n            }\n        });\n    }\n    else {\n        html = blockElement.innerHTML;\n    }\n    log(\"SpinVditorIRDOM\", html, \"argument\", vditor.options.debugger);\n    html = vditor.lute.SpinVditorIRDOM(html);\n    log(\"SpinVditorIRDOM\", html, \"result\", vditor.options.debugger);\n    if (isIRElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n        // 更新正文中的 tip\n        if (footnoteElement) {\n            var footnoteItemElement = (0,hasClosest/* hasClosestByAttribute */.a1)(vditor.ir.element.querySelector(\"wbr\"), \"data-type\", \"footnotes-def\");\n            if (footnoteItemElement) {\n                var footnoteItemText = footnoteItemElement.textContent;\n                var marker = footnoteItemText.substring(1, footnoteItemText.indexOf(\"]:\"));\n                var footnoteRefElement = vditor.ir.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\" + marker + \"\\\"]\");\n                if (footnoteRefElement) {\n                    footnoteRefElement.setAttribute(\"aria-label\", footnoteItemText.substr(marker.length + 3).trim().substr(0, 24));\n                }\n            }\n        }\n    }\n    //  linkref 合并及添加\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item;\n        }\n        else {\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n    }\n    // 脚注合并后添加的末尾\n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item;\n        }\n        else {\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n    });\n    renderToc(vditor);\n    process_processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/hotKey.ts\n\n// 是否匹配 ⇧⌘[] / ⌘[] / ⌥[] / ⌥⌘[] / ⇧Tab / []\nvar matchHotKey = function (hotKey, event) {\n    if (hotKey === \"\") {\n        return false;\n    }\n    // []\n    if (hotKey.indexOf(\"⇧\") === -1 && hotKey.indexOf(\"⌘\") === -1 && hotKey.indexOf(\"⌥\") === -1) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.code === hotKey) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧Tab\n    if (hotKey === \"⇧Tab\") {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.shiftKey && event.code === \"Tab\") {\n            return true;\n        }\n        return false;\n    }\n    var hotKeys = hotKey.split(\"\");\n    if (hotKey.startsWith(\"⌥\")) {\n        // 是否匹配 ⌥[] / ⌥⌘[]\n        var keyCode = hotKeys.length === 3 ? hotKeys[2] : hotKeys[1];\n        if ((hotKeys.length === 3 ? (0,compatibility/* isCtrl */.yl)(event) : !(0,compatibility/* isCtrl */.yl)(event)) && event.altKey && !event.shiftKey &&\n            event.code === (/^[0-9]$/.test(keyCode) ? \"Digit\" : \"Key\") + keyCode) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧⌘[] / ⌘[]\n    if (hotKey === \"⌘Enter\") {\n        hotKeys = [\"⌘\", \"Enter\"];\n    }\n    var hasShift = hotKeys.length > 2 && (hotKeys[0] === \"⇧\");\n    var key = (hasShift ? hotKeys[2] : hotKeys[1]);\n    if (hasShift && ((0,compatibility/* isFirefox */.vU)() || !/Mac/.test(navigator.platform))) {\n        if (key === \"-\") {\n            key = \"_\";\n        }\n        else if (key === \"=\") {\n            key = \"+\";\n        }\n    }\n    if ((0,compatibility/* isCtrl */.yl)(event) && event.key.toLowerCase() === key.toLowerCase() && !event.altKey\n        && ((!hasShift && !event.shiftKey) || (hasShift && event.shiftKey))) {\n        return true;\n    }\n    return false;\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/expandMarker.ts\n\n\nvar nextIsNode = function (range) {\n    var startContainer = range.startContainer;\n    if (startContainer.nodeType === 3 && startContainer.nodeValue.length !== range.startOffset) {\n        return false;\n    }\n    var nextNode = startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (!nextNode) {\n        // *em*|**string**\n        var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker\");\n        if (markerElement && !markerElement.nextSibling) {\n            var parentNextNode = startContainer.parentElement.parentElement.nextSibling;\n            if (parentNextNode && parentNextNode.nodeType !== 3 &&\n                parentNextNode.classList.contains(\"vditor-ir__node\")) {\n                return parentNextNode;\n            }\n        }\n        return false;\n    }\n    else if (nextNode && nextNode.nodeType !== 3 && nextNode.classList.contains(\"vditor-ir__node\") &&\n        !nextNode.getAttribute(\"data-block\")) {\n        // test|*em*\n        return nextNode;\n    }\n    return false;\n};\nvar previousIsNode = function (range) {\n    var startContainer = range.startContainer;\n    var previousNode = startContainer.previousSibling;\n    if (startContainer.nodeType === 3 && range.startOffset === 0 && previousNode && previousNode.nodeType !== 3 &&\n        // *em*|text\n        previousNode.classList.contains(\"vditor-ir__node\") && !previousNode.getAttribute(\"data-block\")) {\n        return previousNode;\n    }\n    return false;\n};\nvar expandMarker = function (range, vditor) {\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    var nodeElement = (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.startContainer, \"vditor-ir__node\");\n    var nodeElementEnd = !range.collapsed && (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.endContainer, \"vditor-ir__node\");\n    // 选中文本为同一个 nodeElement 内时，需要展开\n    if (!range.collapsed && (!nodeElement || nodeElement !== nodeElementEnd)) {\n        return;\n    }\n    if (nodeElement) {\n        nodeElement.classList.add(\"vditor-ir__node--expand\");\n        nodeElement.classList.remove(\"vditor-ir__node--hidden\");\n        // https://github.com/Vanessa219/vditor/issues/615 safari中光标位置跳动\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    var nextNode = nextIsNode(range);\n    if (nextNode) {\n        nextNode.classList.add(\"vditor-ir__node--expand\");\n        nextNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n    var previousNode = previousIsNode(range);\n    if (previousNode) {\n        previousNode.classList.add(\"vditor-ir__node--expand\");\n        previousNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\nvar processKeydown = function (vditor, event) {\n    vditor.ir.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    // 斜体、粗体、内联代码块中换行\n    var newlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-newline\", \"1\");\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.key === \"Enter\" && newlineElement\n        && range.startOffset < newlineElement.textContent.length) {\n        var beforeMarkerElement = newlineElement.previousElementSibling;\n        if (beforeMarkerElement) {\n            range.insertNode(document.createTextNode(beforeMarkerElement.textContent));\n            range.collapse(false);\n        }\n        var afterMarkerElement = newlineElement.nextSibling;\n        if (afterMarkerElement) {\n            range.insertNode(document.createTextNode(afterMarkerElement.textContent));\n            range.collapse(true);\n        }\n    }\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 代码块\n    var preRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker--pre\");\n    if (preRenderElement && preRenderElement.tagName === \"PRE\") {\n        var codeRenderElement = preRenderElement.firstChild;\n        if (fixCodeBlock(vditor, event, preRenderElement, range)) {\n            return true;\n        }\n        // 数学公式上无元素，按上或左将添加新块\n        if ((codeRenderElement.getAttribute(\"data-type\") === \"math-block\"\n            || codeRenderElement.getAttribute(\"data-type\") === \"html-block\") &&\n            insertBeforeBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n        // 代码块下无元素或者为代码块/table 元素，添加空块\n        if (insertAfterBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n    }\n    // 代码块语言\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (event.key === \"Enter\" || event.key === \"Tab\") {\n            range.selectNodeContents(preBeforeElement.nextElementSibling.firstChild);\n            range.collapse(true);\n            event.preventDefault();\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n        if (event.key === \"Backspace\") {\n            var start = (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start;\n            if (start === 1) { // 删除零宽空格\n                range.setStart(startContainer, 0);\n            }\n            if (start === 2) { // 删除时清空自动补全语言\n                vditor.hint.recentLanguage = \"\";\n            }\n        }\n        if (insertBeforeBlock(vditor, event, range, preBeforeElement, preBeforeElement.parentElement)) {\n            // 上无元素，按上或左将添加新块\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n    }\n    // table\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (event.key.indexOf(\"Arrow\") > -1 && cellElement) {\n        var tableElement = isFirstCell(cellElement);\n        if (tableElement && insertBeforeBlock(vditor, event, range, cellElement, tableElement)) {\n            return true;\n        }\n        var table2Element = isLastCell(cellElement);\n        if (table2Element && insertAfterBlock(vditor, event, range, cellElement, table2Element)) {\n            return true;\n        }\n    }\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length > 1) {\n                process_processHeading(vditor, headingMarkerElement.textContent.substr(1));\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length < 6) {\n                process_processHeading(vditor, headingMarkerElement.textContent.trim() + \"# \");\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement && blockElement.previousElementSibling\n            && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\"\n            && (blockElement.previousElementSibling.getAttribute(\"data-type\") === \"code-block\" ||\n                blockElement.previousElementSibling.getAttribute(\"data-type\") === \"math-block\")) {\n            var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n            if (rangeStart === 0 || (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                range.selectNodeContents(blockElement.previousElementSibling.querySelector(\".vditor-ir__marker--pre code\"));\n                range.collapse(false);\n                expandMarker(range, vditor);\n                if (blockElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    // 当前块为空且不是最后一个时，需要删除\n                    blockElement.remove();\n                    process_processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n        // 光标位于标题前，marker 后\n        if (headingElement) {\n            var headingLength = headingElement.firstElementChild.textContent.length;\n            if ((0,selection/* getSelectPosition */.im)(headingElement, vditor.ir.element).start === headingLength) {\n                range.setStart(headingElement.firstElementChild.firstChild, headingLength - 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n    }\n    if ((event.key === \"ArrowUp\" || event.key === \"ArrowDown\") && blockElement) {\n        // https://github.com/Vanessa219/vditor/issues/358\n        blockElement.querySelectorAll(\".vditor-ir__node\").forEach(function (item) {\n            if (!item.contains(startContainer)) {\n                item.classList.add(\"vditor-ir__node--hidden\");\n            }\n        });\n        if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n            return true;\n        }\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(264);\n;// CONCATENATED MODULE: ./src/ts/sv/inputEvent.ts\n\n\n\n\nvar inputEvent = function (vditor, event) {\n    var _a;\n    var range = getSelection().getRangeAt(0).cloneRange();\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    // 不调用 lute 解析\n    if (blockElement && event && (event.inputType === \"deleteContentBackward\" || event.data === \" \")) {\n        // 开始可以输入空格\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start;\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        if (startSpace) {\n            processAfterRender(vditor);\n            return;\n        }\n        if (event.inputType === \"deleteContentBackward\") {\n            // https://github.com/Vanessa219/vditor/issues/584 代码块 marker 删除\n            var codeBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-open-marker\") ||\n                (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-close-marker\");\n            if (codeBlockMarkerElement) {\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-close-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-open-marker\");\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-open-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-close-marker\", false);\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n            }\n            // https://github.com/Vanessa219/vditor/issues/877 数学公式输入删除生成节点\n            var mathBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"math-block-open-marker\");\n            if (mathBlockMarkerElement) {\n                var mathBlockCloseElement = mathBlockMarkerElement.nextElementSibling.nextElementSibling;\n                if (mathBlockCloseElement && mathBlockCloseElement.getAttribute(\"data-type\") === \"math-block-close-marker\") {\n                    mathBlockCloseElement.remove();\n                    processAfterRender(vditor);\n                }\n                return;\n            }\n            blockElement.querySelectorAll('[data-type=\"code-block-open-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            blockElement.querySelectorAll('[data-type=\"code-block-close-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            // 标题删除\n            var headingElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"heading-marker\");\n            if (headingElement && headingElement.textContent.indexOf(\"#\") === -1) {\n                processAfterRender(vditor);\n                return;\n            }\n        }\n        // 删除或空格不解析，否则会 format 回去\n        if ((event.data === \" \" || event.inputType === \"deleteContentBackward\") &&\n            ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"padding\") // 场景：b 前进行删除 [> 1. a\\n>   b]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\") // 场景：删除最后一个字符 [* 1\\n* ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\") // 场景：删除最后一个字符 [* [ ] ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\") // 场景：删除最后一个字符 [> ]\n            )) {\n            processAfterRender(vditor);\n            return;\n        }\n    }\n    if (blockElement && blockElement.textContent.trimRight() === \"$$\") {\n        // 内联数学公式\n        processAfterRender(vditor);\n        return;\n    }\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    if (((_a = blockElement.firstElementChild) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.sv.element;\n    }\n    if ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-link\")) {\n        // 修改脚注角标\n        blockElement = vditor.sv.element;\n    }\n    // 添加光标位置\n    if (blockElement.textContent.indexOf(Lute.Caret) === -1) {\n        // 点击工具栏会插入 Caret\n        range.insertNode(document.createTextNode(Lute.Caret));\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    blockElement.querySelectorAll(\"font\").forEach(function (item) {\n        item.outerHTML = item.innerHTML;\n    });\n    var html = blockElement.textContent;\n    var isSVElement = blockElement.isEqualNode(vditor.sv.element);\n    if (isSVElement) {\n        html = blockElement.textContent;\n    }\n    else {\n        // 添加前一个块元素\n        if (blockElement.previousElementSibling) {\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        if (blockElement.previousElementSibling && html.indexOf(\"---\\n\") === 0) {\n            // 确认 yaml-front 是否为首行\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // 添加链接引用\n        vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item, index) {\n            if (index === 0 && item && !blockElement.isEqualNode(item.parentElement)) {\n                html += \"\\n\" + item.parentElement.textContent;\n                item.parentElement.remove();\n            }\n        });\n        // 添加脚注\n        vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\").forEach(function (item, index) {\n            if (index === 0 && item && !blockElement.isEqualNode(item.parentElement)) {\n                html += \"\\n\" + item.parentElement.textContent;\n                item.parentElement.remove();\n            }\n        });\n    }\n    html = processSpinVditorSVDOM(html, vditor);\n    if (isSVElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item.parentElement;\n        }\n        else {\n            firstLinkRefDefElement.lastElementChild.remove();\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", \"\" + item.parentElement.innerHTML);\n            item.parentElement.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", firstLinkRefDefElement);\n    }\n    // 脚注合并后添加的末尾\n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item.parentElement;\n        }\n        else {\n            firstFootnoteElement.lastElementChild.remove();\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", \"\" + item.parentElement.innerHTML);\n            item.parentElement.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", firstFootnoteElement);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n    processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/processKeydown.ts\n\n\n\n\n\n\n\nvar processKeydown_processKeydown = function (vditor, event) {\n    var _a, _b, _c, _d, _e;\n    vditor.sv.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\") {\n        return false;\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var textElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"text\");\n    // blockquote\n    var blockquoteMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\");\n    if (!blockquoteMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        textElement.previousElementSibling.getAttribute(\"data-type\") === \"blockquote-marker\") {\n        blockquoteMarkerElement = textElement.previousElementSibling;\n    }\n    // 回车逐个删除 blockquote marker 标记\n    if (blockquoteMarkerElement) {\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey &&\n            blockquoteMarkerElement.nextElementSibling.textContent.trim() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(blockquoteMarkerElement, vditor.sv.element, range).start ===\n                blockquoteMarkerElement.textContent.length) {\n            if (((_a = blockquoteMarkerElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"padding\") {\n                // 列表中存在多行 BQ 时，标记回车需跳出列表\n                blockquoteMarkerElement.previousElementSibling.setAttribute(\"data-action\", \"enter-remove\");\n            }\n            blockquoteMarkerElement.remove();\n            processAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // list item\n    var listMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\");\n    var taskMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\");\n    var listLastMarkerElement = listMarkerElement;\n    if (!listLastMarkerElement) {\n        if (taskMarkerElement && taskMarkerElement.nextElementSibling.getAttribute(\"data-type\") !== \"task-marker\") {\n            listLastMarkerElement = taskMarkerElement;\n        }\n    }\n    if (!listLastMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        (textElement.previousElementSibling.getAttribute(\"data-type\") === \"li-marker\" ||\n            textElement.previousElementSibling.getAttribute(\"data-type\") === \"task-marker\")) {\n        listLastMarkerElement = textElement.previousElementSibling;\n    }\n    if (listLastMarkerElement) {\n        var startIndex = (0,selection/* getSelectPosition */.im)(listLastMarkerElement, vditor.sv.element, range).start;\n        var isTask = listLastMarkerElement.getAttribute(\"data-type\") === \"task-marker\";\n        var listFirstMarkerElement = listLastMarkerElement;\n        if (isTask) {\n            listFirstMarkerElement = listLastMarkerElement.previousElementSibling.previousElementSibling\n                .previousElementSibling;\n        }\n        if (startIndex === listLastMarkerElement.textContent.length) {\n            // 回车清空列表标记符\n            if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n                listLastMarkerElement.nextElementSibling.textContent.trim() === \"\") {\n                if (((_b = listFirstMarkerElement.previousElementSibling) === null || _b === void 0 ? void 0 : _b.getAttribute(\"data-type\")) === \"padding\") {\n                    listFirstMarkerElement.previousElementSibling.remove();\n                    inputEvent(vditor);\n                }\n                else {\n                    if (isTask) {\n                        listFirstMarkerElement.remove();\n                        listLastMarkerElement.previousElementSibling.previousElementSibling.remove();\n                        listLastMarkerElement.previousElementSibling.remove();\n                    }\n                    listLastMarkerElement.nextElementSibling.remove();\n                    listLastMarkerElement.remove();\n                    processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n            // 第一个 marker 后 tab 进行缩进\n            if (event.key === \"Tab\") {\n                listFirstMarkerElement.insertAdjacentHTML(\"beforebegin\", \"<span data-type=\\\"padding\\\">\" + listFirstMarkerElement.textContent.replace(/\\S/g, \" \") + \"</span>\");\n                if (/^\\d/.test(listFirstMarkerElement.textContent)) {\n                    listFirstMarkerElement.textContent = listFirstMarkerElement.textContent.replace(/^\\d{1,}/, \"1\");\n                    range.selectNodeContents(listLastMarkerElement.firstChild);\n                    range.collapse(false);\n                }\n                inputEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(startContainer, \"SPAN\");\n    // 回车\n    if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && blockElement) {\n        var isFirst = false;\n        var newLineMatch = blockElement.textContent.match(/^\\n+/);\n        if ((0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element).start <= (newLineMatch ? newLineMatch[0].length : 0)) {\n            // 允许段落开始换行\n            isFirst = true;\n        }\n        var newLineText = \"\\n\";\n        if (spanElement) {\n            if (((_c = spanElement.previousElementSibling) === null || _c === void 0 ? void 0 : _c.getAttribute(\"data-action\")) === \"enter-remove\") {\n                // https://github.com/Vanessa219/vditor/issues/596\n                spanElement.previousElementSibling.remove();\n                processAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                newLineText += processPreviousMarkers(spanElement);\n            }\n        }\n        range.insertNode(document.createTextNode(newLineText));\n        range.collapse(false);\n        if (blockElement && blockElement.textContent.trim() !== \"\" && !isFirst) {\n            inputEvent(vditor);\n        }\n        else {\n            processAfterRender(vditor);\n        }\n        event.preventDefault();\n        return true;\n    }\n    // 删除后光标前有 newline 的处理\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey) {\n        if (spanElement && ((_d = spanElement.previousElementSibling) === null || _d === void 0 ? void 0 : _d.getAttribute(\"data-type\")) === \"newline\" &&\n            (0,selection/* getSelectPosition */.im)(spanElement, vditor.sv.element, range).start === 1 &&\n            // 飘号的处理需在 inputEvent 中，否则上下飘号对不齐\n            spanElement.getAttribute(\"data-type\").indexOf(\"code-block-\") === -1) {\n            // 光标在每一行的第一个字符后\n            range.setStart(spanElement, 0);\n            range.extractContents();\n            if (spanElement.textContent.trim() !== \"\") {\n                inputEvent(vditor);\n            }\n            else {\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 每一段第一个字符前\n        if (blockElement && (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start === 0 &&\n            blockElement.previousElementSibling) {\n            range.extractContents();\n            var previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            if (previousLastElement.getAttribute(\"data-type\") === \"newline\") {\n                previousLastElement.remove();\n                previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            }\n            // 场景：末尾无法删除 [```\\ntext\\n```\\n\\n]\n            if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                previousLastElement.insertAdjacentHTML(\"afterend\", blockElement.innerHTML);\n                blockElement.remove();\n            }\n            if (blockElement.textContent.trim() !== \"\" && !((_e = blockElement.previousElementSibling) === null || _e === void 0 ? void 0 : _e.querySelector('[data-type=\"code-block-open-marker\"]'))) {\n                inputEvent(vditor);\n            }\n            else {\n                if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                    // https://github.com/Vanessa219/vditor/issues/597\n                    range.selectNodeContents(previousLastElement.lastChild);\n                    range.collapse(false);\n                }\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(958);\n;// CONCATENATED MODULE: ./src/ts/ui/setTheme.ts\nvar setTheme = function (vditor) {\n    if (vditor.options.theme === \"dark\") {\n        vditor.element.classList.add(\"vditor--dark\");\n    }\n    else {\n        vditor.element.classList.remove(\"vditor--dark\");\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ui/initUI.ts\n\n\n\n\n\n\nvar initUI = function (vditor) {\n    vditor.element.innerHTML = \"\";\n    vditor.element.classList.add(\"vditor\");\n    setTheme(vditor);\n    (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n    if (typeof vditor.options.height === \"number\") {\n        vditor.element.style.height = vditor.options.height + \"px\";\n    }\n    if (typeof vditor.options.minHeight === \"number\") {\n        vditor.element.style.minHeight = vditor.options.minHeight + \"px\";\n    }\n    if (typeof vditor.options.width === \"number\") {\n        vditor.element.style.width = vditor.options.width + \"px\";\n    }\n    else {\n        vditor.element.style.width = vditor.options.width;\n    }\n    vditor.element.appendChild(vditor.toolbar.element);\n    var contentElement = document.createElement(\"div\");\n    contentElement.className = \"vditor-content\";\n    if (vditor.options.outline.position === \"left\") {\n        contentElement.appendChild(vditor.outline.element);\n    }\n    contentElement.appendChild(vditor.wysiwyg.element.parentElement);\n    contentElement.appendChild(vditor.sv.element);\n    contentElement.appendChild(vditor.ir.element.parentElement);\n    contentElement.appendChild(vditor.preview.element);\n    if (vditor.toolbar.elements.devtools) {\n        contentElement.appendChild(vditor.devtools.element);\n    }\n    if (vditor.options.outline.position === \"right\") {\n        vditor.outline.element.classList.add(\"vditor-outline--right\");\n        contentElement.appendChild(vditor.outline.element);\n    }\n    if (vditor.upload) {\n        contentElement.appendChild(vditor.upload.element);\n    }\n    if (vditor.options.resize.enable) {\n        contentElement.appendChild(vditor.resize.element);\n    }\n    contentElement.appendChild(vditor.hint.element);\n    contentElement.appendChild(vditor.tip.element);\n    vditor.element.appendChild(contentElement);\n    contentElement.addEventListener(\"click\", function () {\n        hidePanel(vditor, [\"subToolbar\"]);\n    });\n    if (vditor.toolbar.elements.export) {\n        // for export pdf\n        vditor.element.insertAdjacentHTML(\"beforeend\", '<iframe style=\"width: 100%;height: 0;border: 0\"></iframe>');\n    }\n    setEditMode(vditor, vditor.options.mode, afterRender(vditor));\n    document.execCommand(\"DefaultParagraphSeparator\", false, \"p\");\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1 && typeof window.visualViewport !== \"undefined\") {\n        // https://github.com/Vanessa219/vditor/issues/379\n        var pendingUpdate_1 = false;\n        var viewportHandler = function (event) {\n            if (pendingUpdate_1) {\n                return;\n            }\n            pendingUpdate_1 = true;\n            requestAnimationFrame(function () {\n                pendingUpdate_1 = false;\n                var layoutViewport = vditor.toolbar.element;\n                layoutViewport.style.transform = \"none\";\n                if (layoutViewport.getBoundingClientRect().top < 0) {\n                    layoutViewport.style.transform = \"translate(0, \" + -layoutViewport.getBoundingClientRect().top + \"px)\";\n                }\n            });\n        };\n        window.visualViewport.addEventListener(\"scroll\", viewportHandler);\n        window.visualViewport.addEventListener(\"resize\", viewportHandler);\n    }\n};\nvar setPadding = function (vditor) {\n    var minPadding = window.innerWidth <= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH ? 10 : 35;\n    if (vditor.wysiwyg.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.wysiwyg.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.wysiwyg.element.style.padding = \"10px \" + Math.max(minPadding, padding) + \"px\";\n    }\n    if (vditor.ir.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.ir.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.ir.element.style.padding = \"10px \" + Math.max(minPadding, padding) + \"px\";\n    }\n    if (vditor.preview.element.style.display !== \"block\") {\n        vditor.toolbar.element.style.paddingLeft = Math.max(5, parseInt(vditor[vditor.currentMode].element.style.paddingLeft || \"0\", 10) +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0)) + \"px\";\n    }\n    else {\n        vditor.toolbar.element.style.paddingLeft = (5 +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0)) + \"px\";\n    }\n};\nvar setTypewriterPosition = function (vditor) {\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var height = window.innerHeight;\n    if (typeof vditor.options.height === \"number\") {\n        height = vditor.options.height;\n        if (typeof vditor.options.minHeight === \"number\") {\n            height = Math.max(height, vditor.options.minHeight);\n        }\n        height = Math.min(window.innerHeight, height);\n    }\n    if (vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        height = window.innerHeight;\n    }\n    // 由于 Firefox padding-bottom bug，只能使用 :after\n    vditor[vditor.currentMode].element.style.setProperty(\"--editor-bottom\", ((height - vditor.toolbar.element.offsetHeight) / 2) + \"px\");\n};\nvar resizeCb;\nfunction UIUnbindListener() {\n    window.removeEventListener(\"resize\", resizeCb);\n}\nvar afterRender = function (vditor) {\n    setTypewriterPosition(vditor);\n    UIUnbindListener();\n    window.addEventListener(\"resize\", resizeCb = function () {\n        setPadding(vditor);\n        setTypewriterPosition(vditor);\n    });\n    // set default value\n    var initValue = (0,compatibility/* accessLocalStorage */.pK)() && localStorage.getItem(vditor.options.cache.id);\n    if (!vditor.options.cache.enable || !initValue) {\n        if (vditor.options.value) {\n            initValue = vditor.options.value;\n        }\n        else if (vditor.originalInnerHTML) {\n            initValue = vditor.lute.HTML2Md(vditor.originalInnerHTML);\n        }\n        else if (!vditor.options.cache.enable) {\n            initValue = \"\";\n        }\n    }\n    return initValue || \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/highlightToolbarIR.ts\n\n\n\n\n\nvar highlightToolbarIR = function (vditor) {\n    clearTimeout(vditor[vditor.currentMode].hlToolbarTimeoutId);\n    vditor[vditor.currentMode].hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor[vditor.currentMode].element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        if (typeElement.classList.contains(\"vditor-reset\")) {\n            typeElement = typeElement.childNodes[range.startOffset];\n        }\n        var headingElement = vditor.currentMode === \"sv\" ?\n            (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"heading\") : (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if (headingElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        var quoteElement = vditor.currentMode === \"sv\" ? (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"blockquote\") :\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n        if (quoteElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        var strongElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"strong\");\n        if (strongElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        var emElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"em\");\n        if (emElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        var sElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"s\");\n        if (sElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"a\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        var codeBlockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code-block\");\n        if (codeBlockElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"inline-code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n        }\n        var codeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code\");\n        if (codeElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"table\");\n        if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"list\", \"ordered-list\", \"check\", \"line\",\n                \"quote\", \"code\", \"table\"]);\n        }\n    }, 200);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/afterRenderEvent.ts\n\n\nvar afterRenderEvent = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    clearTimeout(vditor.wysiwyg.afterRenderTimeoutId);\n    vditor.wysiwyg.afterRenderTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/inlineTag.ts\n\n\nvar previoueIsEmptyA = function (node) {\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType !== 3 && previousNode.tagName === \"A\" && !previousNode.previousSibling\n            && previousNode.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && previousNode.nextSibling) {\n            return previousNode;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return false;\n};\nvar nextIsCode = function (range) {\n    var nextNode = range.startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (nextNode && nextNode.nodeType !== 3 && (nextNode.tagName === \"CODE\" ||\n        nextNode.getAttribute(\"data-type\") === \"math-inline\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-entity\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-inline\")) {\n        return true;\n    }\n    return false;\n};\nvar getNextHTML = function (node) {\n    var html = \"\";\n    var nextNode = node.nextSibling;\n    while (nextNode) {\n        if (nextNode.nodeType === 3) {\n            html += nextNode.textContent;\n        }\n        else {\n            html += nextNode.outerHTML;\n        }\n        nextNode = nextNode.nextSibling;\n    }\n    return html;\n};\nvar getPreviousHTML = function (node) {\n    var html = \"\";\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType === 3) {\n            html = previousNode.textContent + html;\n        }\n        else {\n            html = previousNode.outerHTML + html;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return html;\n};\nvar getRenderElementNextNode = function (blockCodeElement) {\n    var nextNode = blockCodeElement;\n    while (nextNode && !nextNode.nextSibling) {\n        nextNode = nextNode.parentElement;\n    }\n    return nextNode.nextSibling;\n};\nvar splitElement = function (range) {\n    var previousHTML = getPreviousHTML(range.startContainer);\n    var nextHTML = getNextHTML(range.startContainer);\n    var text = range.startContainer.textContent;\n    var offset = range.startOffset;\n    var beforeHTML = \"\";\n    var afterHTML = \"\";\n    if (text.substr(0, offset) !== \"\" && text.substr(0, offset) !== constants/* Constants.ZWSP */.g.ZWSP || previousHTML) {\n        beforeHTML = \"\" + previousHTML + text.substr(0, offset);\n    }\n    if (text.substr(offset) !== \"\" && text.substr(offset) !== constants/* Constants.ZWSP */.g.ZWSP || nextHTML) {\n        afterHTML = \"\" + text.substr(offset) + nextHTML;\n    }\n    return {\n        afterHTML: afterHTML,\n        beforeHTML: beforeHTML,\n    };\n};\nvar modifyPre = function (vditor, range) {\n    // 没有被块元素包裹\n    Array.from(vditor.wysiwyg.element.childNodes).find(function (node) {\n        if (node.nodeType === 3) {\n            var pElement = document.createElement(\"p\");\n            pElement.setAttribute(\"data-block\", \"0\");\n            pElement.textContent = node.textContent;\n            // 为空按下 tab 且 tab = '    ' 时，range.startContainer 不为 node\n            var cloneRangeOffset = range.startContainer.nodeType === 3 ? range.startOffset : node.textContent.length;\n            node.parentNode.insertBefore(pElement, node);\n            node.remove();\n            range.setStart(pElement.firstChild, Math.min(pElement.firstChild.textContent.length, cloneRangeOffset));\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        else if (!node.getAttribute(\"data-block\")) {\n            if (node.tagName === \"P\") {\n                node.remove();\n            }\n            else {\n                if (node.tagName === \"DIV\") {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    // firefox 列表换行产生 div\n                    node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.innerHTML + \"</p>\";\n                }\n                else {\n                    if (node.tagName === \"BR\") {\n                        // firefox 空换行产生 BR\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.outerHTML + \"<wbr></p>\";\n                    }\n                    else {\n                        range.insertNode(document.createElement(\"wbr\"));\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.outerHTML + \"</p>\";\n                    }\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                range = getSelection().getRangeAt(0);\n            }\n            return true;\n        }\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/setHeading.ts\n\n\n\nvar setHeading = function (vditor, tagName) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (!blockElement && vditor.wysiwyg.element.children.length === 0) {\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (blockElement && !blockElement.classList.contains(\"vditor-wysiwyg__block\")) {\n        range.insertNode(document.createElement(\"wbr\"));\n        // Firefox 需要 trim https://github.com/Vanessa219/vditor/issues/207\n        if (blockElement.innerHTML.trim() === \"<wbr>\") {\n            // Firefox 光标对不齐 https://github.com/Vanessa219/vditor/issues/199 1\n            blockElement.innerHTML = \"<wbr><br>\";\n        }\n        if (blockElement.tagName === \"BLOCKQUOTE\" || blockElement.classList.contains(\"vditor-reset\")) {\n            blockElement.innerHTML = \"<\" + tagName + \" data-block=\\\"0\\\">\" + blockElement.innerHTML.trim() + \"</\" + tagName + \">\";\n        }\n        else {\n            blockElement.outerHTML = \"<\" + tagName + \" data-block=\\\"0\\\">\" + blockElement.innerHTML.trim() + \"</\" + tagName + \">\";\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        renderToc(vditor);\n    }\n};\nvar removeHeading = function (vditor) {\n    var range = getSelection().getRangeAt(0);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (blockElement) {\n        range.insertNode(document.createElement(\"wbr\"));\n        blockElement.outerHTML = \"<p data-block=\\\"0\\\">\" + blockElement.innerHTML + \"</p>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n    }\n    vditor.wysiwyg.popover.style.display = \"none\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/showCode.ts\n\n\nvar showCode = function (previewElement, vditor, first) {\n    if (first === void 0) { first = true; }\n    var previousElement = previewElement.previousElementSibling;\n    var range = previousElement.ownerDocument.createRange();\n    if (previousElement.tagName === \"CODE\") {\n        previousElement.style.display = \"inline-block\";\n        if (first) {\n            range.setStart(previousElement.firstChild, 1);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n        }\n    }\n    else {\n        previousElement.style.display = \"block\";\n        if (!previousElement.firstChild.firstChild) {\n            previousElement.firstChild.appendChild(document.createTextNode(\"\"));\n        }\n        range.selectNodeContents(previousElement.firstChild);\n    }\n    if (first) {\n        range.collapse(true);\n    }\n    else {\n        range.collapse(false);\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    if (previewElement.firstElementChild.classList.contains(\"language-mindmap\")) {\n        return;\n    }\n    scrollCenter(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar wysiwyg_processKeydown_processKeydown = function (vditor, event) {\n    // Chrome firefox 触发 compositionend 机制不一致 https://github.com/Vanessa219/vditor/issues/188\n    vditor.wysiwyg.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // table\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // code render\n    var codeRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-wysiwyg__block\");\n    if (codeRenderElement) {\n        // esc: 退出编辑，仅展示渲染\n        if (event.key === \"Escape\" && codeRenderElement.children.length === 2) {\n            vditor.wysiwyg.popover.style.display = \"none\";\n            codeRenderElement.firstElementChild.style.display = \"none\";\n            vditor.wysiwyg.element.blur();\n            event.preventDefault();\n            return true;\n        }\n        // alt+enter: 代码块切换到语言 https://github.com/Vanessa219/vditor/issues/54\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\" &&\n            codeRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n            var inputElemment = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElemment.focus();\n            inputElemment.select();\n            event.preventDefault();\n            return true;\n        }\n        if (codeRenderElement.getAttribute(\"data-block\") === \"0\") {\n            if (fixCodeBlock(vditor, event, codeRenderElement.firstElementChild, range)) {\n                return true;\n            }\n            if (insertAfterBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n            if (codeRenderElement.getAttribute(\"data-type\") !== \"yaml-front-matter\" &&\n                insertBeforeBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n        }\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 顶层 blockquote\n    var topBQElement = (0,hasClosest/* hasTopClosestByTag */.E2)(startContainer, \"BLOCKQUOTE\");\n    if (topBQElement) {\n        if (!event.shiftKey && event.altKey && event.key === \"Enter\") {\n            if (!(0,compatibility/* isCtrl */.yl)(event)) {\n                // alt+enter: 跳出多层 blockquote 嵌套之后 https://github.com/Vanessa219/vditor/issues/51\n                range.setStartAfter(topBQElement);\n            }\n            else {\n                // ctrl+alt+enter: 跳出多层 blockquote 嵌套之前\n                range.setStartBefore(topBQElement);\n            }\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            var node = document.createElement(\"p\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.innerHTML = \"\\n\";\n            range.insertNode(node);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // h1-h6\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        if (headingElement.tagName === \"H6\" && startContainer.textContent.length === range.startOffset &&\n            !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\") {\n            // enter: H6 回车解析问题 https://github.com/Vanessa219/vditor/issues/48\n            var pTempElement = document.createElement(\"p\");\n            pTempElement.textContent = \"\\n\";\n            pTempElement.setAttribute(\"data-block\", \"0\");\n            startContainer.parentElement.insertAdjacentElement(\"afterend\", pTempElement);\n            range.setStart(pTempElement, 0);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) - 1;\n            if (index > 0) {\n                setHeading(vditor, \"h\" + index);\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) + 1;\n            if (index < 7) {\n                setHeading(vditor, \"h\" + index);\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && headingElement.textContent.length === 1) {\n            // 删除后变为空\n            removeHeading(vditor);\n        }\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // alt+enter\n    if (event.altKey && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey) {\n        // 切换到链接、链接引用、脚注引用弹出的输入框中\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"A\");\n        var linRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"link-ref\");\n        var footnoteRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-ref\");\n        if (aElement || linRefElement || footnoteRefElement ||\n            (headingElement && headingElement.tagName.length === 2)) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n            inputElement.focus();\n            inputElement.select();\n        }\n    }\n    // 删除有子工具栏的块\n    if (removeBlockElement(vditor, event)) {\n        return true;\n    }\n    // 对有子工具栏的块上移\n    if (matchHotKey(\"⇧⌘U\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"up\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 对有子工具栏的块下移\n    if (matchHotKey(\"⇧⌘D\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"down\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    // shift+enter：软换行，但 table/hr/heading 处理、cell 内换行、block render 换行处理单独写在上面，li & p 使用浏览器默认\n    if (!(0,compatibility/* isCtrl */.yl)(event) && event.shiftKey && !event.altKey && event.key === \"Enter\" &&\n        startContainer.parentElement.tagName !== \"LI\" && startContainer.parentElement.tagName !== \"P\") {\n        if ([\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n            // 行内元素软换行需继续 https://github.com/Vanessa219/vditor/issues/170\n            range.insertNode(document.createTextNode(\"\\n\" + constants/* Constants.ZWSP */.g.ZWSP));\n        }\n        else {\n            range.insertNode(document.createTextNode(\"\\n\"));\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        afterRenderEvent(vditor);\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // 删除\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement) {\n            if (blockElement.previousElementSibling\n                && blockElement.previousElementSibling.classList.contains(\"vditor-wysiwyg__block\")\n                && blockElement.previousElementSibling.getAttribute(\"data-block\") === \"0\"\n                // https://github.com/Vanessa219/vditor/issues/946\n                && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\") {\n                var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n                if ((rangeStart === 0 && range.startOffset === 0) || // https://github.com/Vanessa219/vditor/issues/894\n                    (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                    // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                    showCode(blockElement.previousElementSibling.lastElementChild, vditor, false);\n                    if (blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        // 当前块为空且不是最后一个时，需要删除\n                        blockElement.remove();\n                        afterRenderEvent(vditor);\n                    }\n                    event.preventDefault();\n                    return true;\n                }\n            }\n            var rangeStartOffset = range.startOffset;\n            if (range.toString() === \"\" && startContainer.nodeType === 3 &&\n                startContainer.textContent.charAt(rangeStartOffset - 2) === \"\\n\" &&\n                startContainer.textContent.charAt(rangeStartOffset - 1) !== constants/* Constants.ZWSP */.g.ZWSP\n                && [\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n                // 保持行内元素软换行需继续的一致性\n                startContainer.textContent = startContainer.textContent.substring(0, rangeStartOffset - 1) +\n                    constants/* Constants.ZWSP */.g.ZWSP;\n                range.setStart(startContainer, rangeStartOffset);\n                range.collapse(true);\n                afterRenderEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n            // inline code、math、html 行前零宽字符后进行删除\n            if (startContainer.textContent === constants/* Constants.ZWSP */.g.ZWSP && range.startOffset === 1\n                && !startContainer.previousSibling && nextIsCode(range)) {\n                startContainer.textContent = \"\";\n                // 不能返回，其前面为代码渲染块时需进行以下处理：修正光标位于 inline math/html 前，按下删除按钮 code 中内容会被删除\n            }\n            // 修正光标位于 inline math/html, html-entity 前，按下删除按钮 code 中内容会被删除, 不能返回，还需要进行后续处理\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='math-inline']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='html-entity']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n        }\n    }\n    if ((0,compatibility/* isFirefox */.vU)() && range.startOffset === 1 && startContainer.textContent.indexOf(constants/* Constants.ZWSP */.g.ZWSP) > -1 &&\n        startContainer.previousSibling && startContainer.previousSibling.nodeType !== 3 &&\n        startContainer.previousSibling.tagName === \"CODE\" &&\n        (event.key === \"Backspace\" || event.key === \"ArrowLeft\")) {\n        // https://github.com/Vanessa219/vditor/issues/410\n        range.selectNodeContents(startContainer.previousSibling);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n        event.preventDefault();\n        return true;\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (event.key === \"ArrowDown\") {\n        // 光标位于内联数学公式前，按下键无作用\n        var nextElement = startContainer.nextSibling;\n        if (nextElement && nextElement.nodeType !== 3 && nextElement.getAttribute(\"data-type\") === \"math-inline\") {\n            range.setStartAfter(nextElement);\n        }\n    }\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar removeBlockElement = function (vditor, event) {\n    // 删除有子工具栏的块\n    if (matchHotKey(\"⇧⌘X\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"remove\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/highlightToolbarWYSIWYG.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar highlightToolbarWYSIWYG = function (vditor) {\n    clearTimeout(vditor.wysiwyg.hlToolbarTimeoutId);\n    vditor.wysiwyg.hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor.wysiwyg.element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = getSelection().getRangeAt(0);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        else {\n            typeElement = typeElement.childNodes[range.startOffset >= typeElement.childNodes.length\n                ? typeElement.childNodes.length - 1\n                : range.startOffset];\n        }\n        var footnotesElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-block\");\n        if (footnotesElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(footnotesElement, vditor);\n            setPopoverPosition(vditor, footnotesElement);\n            return;\n        }\n        // 工具栏高亮和禁用\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"B\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRONG\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"I\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"EM\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRIKE\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"S\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        // comments\n        vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment--focus\")\n            .forEach(function (item) {\n            item.classList.remove(\"vditor-comment--focus\");\n        });\n        var commentElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-comment\");\n        if (commentElement) {\n            var ids_1 = commentElement.getAttribute(\"data-cmtids\").split(\" \");\n            if (ids_1.length > 1 && commentElement.nextSibling.isSameNode(commentElement.nextElementSibling)) {\n                var nextIds_1 = commentElement.nextElementSibling\n                    .getAttribute(\"data-cmtids\")\n                    .split(\" \");\n                ids_1.find(function (id) {\n                    if (nextIds_1.includes(id)) {\n                        ids_1 = [id];\n                        return true;\n                    }\n                });\n            }\n            vditor.wysiwyg.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(ids_1[0]) > -1) {\n                    item.classList.add(\"vditor-comment--focus\");\n                }\n            });\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"A\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TABLE\");\n        var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"CODE\")) {\n            if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"PRE\")) {\n                disableToolbar(vditor.toolbar.elements, [\n                    \"headings\",\n                    \"bold\",\n                    \"italic\",\n                    \"strike\",\n                    \"line\",\n                    \"quote\",\n                    \"list\",\n                    \"ordered-list\",\n                    \"check\",\n                    \"code\",\n                    \"inline-code\",\n                    \"upload\",\n                    \"link\",\n                    \"table\",\n                    \"record\",\n                ]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, [\n                    \"headings\",\n                    \"bold\",\n                    \"italic\",\n                    \"strike\",\n                    \"line\",\n                    \"quote\",\n                    \"list\",\n                    \"ordered-list\",\n                    \"check\",\n                    \"code\",\n                    \"upload\",\n                    \"link\",\n                    \"table\",\n                    \"record\",\n                ]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n            }\n        }\n        else if (headingElement) {\n            disableToolbar(vditor.toolbar.elements, [\"bold\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        else if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"table\"]);\n        }\n        // toc popover\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-toc\");\n        if (tocElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(tocElement, vditor);\n            setPopoverPosition(vditor, tocElement);\n            return;\n        }\n        // quote popover\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(typeElement, \"BLOCKQUOTE\");\n        if (blockquoteElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockquoteElement, vditor);\n            genDown(range, blockquoteElement, vditor);\n            genClose(blockquoteElement, vditor);\n            setPopoverPosition(vditor, blockquoteElement);\n        }\n        // list item popover\n        if (liElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, liElement, vditor);\n            genDown(range, liElement, vditor);\n            genClose(liElement, vditor);\n            setPopoverPosition(vditor, liElement);\n        }\n        // table popover\n        if (tableElement) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var updateTable_1 = function () {\n                var oldRow = tableElement.rows.length;\n                var oldColumn = tableElement.rows[0].cells.length;\n                var row = parseInt(input_1.value, 10) || oldRow;\n                var column = parseInt(input2_1.value, 10) || oldColumn;\n                if (row === oldRow && oldColumn === column) {\n                    return;\n                }\n                if (oldColumn !== column) {\n                    var columnDiff = column - oldColumn;\n                    for (var i = 0; i < tableElement.rows.length; i++) {\n                        if (columnDiff > 0) {\n                            for (var j = 0; j < columnDiff; j++) {\n                                if (i === 0) {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<th> </th>\");\n                                }\n                                else {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<td> </td>\");\n                                }\n                            }\n                        }\n                        else {\n                            for (var k = oldColumn - 1; k >= column; k--) {\n                                tableElement.rows[i].cells[k].remove();\n                            }\n                        }\n                    }\n                }\n                if (oldRow !== row) {\n                    var rowDiff = row - oldRow;\n                    if (rowDiff > 0) {\n                        var rowHTML = \"<tr>\";\n                        for (var m = 0; m < column; m++) {\n                            rowHTML += \"<td> </td>\";\n                        }\n                        for (var l = 0; l < rowDiff; l++) {\n                            if (tableElement.querySelector(\"tbody\")) {\n                                tableElement\n                                    .querySelector(\"tbody\")\n                                    .insertAdjacentHTML(\"beforeend\", rowHTML);\n                            }\n                            else {\n                                tableElement\n                                    .querySelector(\"thead\")\n                                    .insertAdjacentHTML(\"afterend\", rowHTML + \"</tr>\");\n                            }\n                        }\n                    }\n                    else {\n                        for (var m = oldRow - 1; m >= row; m--) {\n                            tableElement.rows[m].remove();\n                            if (tableElement.rows.length === 1) {\n                                tableElement.querySelector(\"tbody\").remove();\n                            }\n                        }\n                    }\n                }\n            };\n            var setAlign_1 = function (type) {\n                setTableAlign(tableElement, type);\n                if (type === \"right\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.add(\"vditor-icon--current\");\n                }\n                else if (type === \"center\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.add(\"vditor-icon--current\");\n                }\n                else {\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    left_1.classList.add(\"vditor-icon--current\");\n                }\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                afterRenderEvent(vditor);\n            };\n            var td = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TD\");\n            var th = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TH\");\n            var alignType = \"left\";\n            if (td) {\n                alignType = td.getAttribute(\"align\") || \"left\";\n            }\n            else if (th) {\n                alignType = th.getAttribute(\"align\") || \"center\";\n            }\n            var left_1 = document.createElement(\"button\");\n            left_1.setAttribute(\"type\", \"button\");\n            left_1.setAttribute(\"aria-label\", window.VditorI18n.alignLeft + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘L\") + \">\");\n            left_1.setAttribute(\"data-type\", \"left\");\n            left_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-left\"></use></svg>';\n            left_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"left\" ? \" vditor-icon--current\" : \"\");\n            left_1.onclick = function () {\n                setAlign_1(\"left\");\n            };\n            var center_1 = document.createElement(\"button\");\n            center_1.setAttribute(\"type\", \"button\");\n            center_1.setAttribute(\"aria-label\", window.VditorI18n.alignCenter + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘C\") + \">\");\n            center_1.setAttribute(\"data-type\", \"center\");\n            center_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>';\n            center_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"center\" ? \" vditor-icon--current\" : \"\");\n            center_1.onclick = function () {\n                setAlign_1(\"center\");\n            };\n            var right_1 = document.createElement(\"button\");\n            right_1.setAttribute(\"type\", \"button\");\n            right_1.setAttribute(\"aria-label\", window.VditorI18n.alignRight + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘R\") + \">\");\n            right_1.setAttribute(\"data-type\", \"right\");\n            right_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-right\"></use></svg>';\n            right_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"right\" ? \" vditor-icon--current\" : \"\");\n            right_1.onclick = function () {\n                setAlign_1(\"right\");\n            };\n            var insertRowElement = document.createElement(\"button\");\n            insertRowElement.setAttribute(\"type\", \"button\");\n            insertRowElement.setAttribute(\"aria-label\", window.VditorI18n.insertRowBelow + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘=\") + \">\");\n            insertRowElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-row\"></use></svg>';\n            insertRowElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRow(vditor, range, cellElement);\n                }\n            };\n            var insertRowBElement = document.createElement(\"button\");\n            insertRowBElement.setAttribute(\"type\", \"button\");\n            insertRowBElement.setAttribute(\"aria-label\", window.VditorI18n.insertRowAbove + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘F\") + \">\");\n            insertRowBElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowBElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-rowb\"></use></svg>';\n            insertRowBElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRowAbove(vditor, range, cellElement);\n                }\n            };\n            var insertColumnElement = document.createElement(\"button\");\n            insertColumnElement.setAttribute(\"type\", \"button\");\n            insertColumnElement.setAttribute(\"aria-label\", window.VditorI18n.insertColumnRight + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘=\") + \">\");\n            insertColumnElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-column\"></use></svg>';\n            insertColumnElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement);\n                }\n            };\n            var insertColumnBElement = document.createElement(\"button\");\n            insertColumnBElement.setAttribute(\"type\", \"button\");\n            insertColumnBElement.setAttribute(\"aria-label\", window.VditorI18n.insertColumnLeft + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘G\") + \">\");\n            insertColumnBElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnBElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-columnb\"></use></svg>';\n            insertColumnBElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n                }\n            };\n            var deleteRowElement = document.createElement(\"button\");\n            deleteRowElement.setAttribute(\"type\", \"button\");\n            deleteRowElement.setAttribute(\"aria-label\", window.VditorI18n[\"delete-row\"] + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘-\") + \">\");\n            deleteRowElement.setAttribute(\"data-type\", \"deleteRow\");\n            deleteRowElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-delete-row\"></use></svg>';\n            deleteRowElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteRow(vditor, range, cellElement);\n                }\n            };\n            var deleteColumnElement = document.createElement(\"button\");\n            deleteColumnElement.setAttribute(\"type\", \"button\");\n            deleteColumnElement.setAttribute(\"aria-label\", window.VditorI18n[\"delete-column\"] + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘-\") + \">\");\n            deleteColumnElement.setAttribute(\"data-type\", \"deleteColumn\");\n            deleteColumnElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-delete-column\"></use></svg>';\n            deleteColumnElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteColumn(vditor, range, tableElement, cellElement);\n                }\n            };\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", window.VditorI18n.row);\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_1 = document.createElement(\"input\");\n            inputWrap.appendChild(input_1);\n            input_1.type = \"number\";\n            input_1.min = \"1\";\n            input_1.className = \"vditor-input\";\n            input_1.style.width = \"42px\";\n            input_1.style.textAlign = \"center\";\n            input_1.setAttribute(\"placeholder\", window.VditorI18n.row);\n            input_1.value = tableElement.rows.length.toString();\n            input_1.oninput = function () {\n                updateTable_1();\n            };\n            input_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input2_1.focus();\n                    input2_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            var input2Wrap = document.createElement(\"span\");\n            input2Wrap.setAttribute(\"aria-label\", window.VditorI18n.column);\n            input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input2_1 = document.createElement(\"input\");\n            input2Wrap.appendChild(input2_1);\n            input2_1.type = \"number\";\n            input2_1.min = \"1\";\n            input2_1.className = \"vditor-input\";\n            input2_1.style.width = \"42px\";\n            input2_1.style.textAlign = \"center\";\n            input2_1.setAttribute(\"placeholder\", window.VditorI18n.column);\n            input2_1.value = tableElement.rows[0].cells.length.toString();\n            input2_1.oninput = function () {\n                updateTable_1();\n            };\n            input2_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input_1.focus();\n                    input_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genUp(range, tableElement, vditor);\n            genDown(range, tableElement, vditor);\n            genClose(tableElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", left_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", center_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", right_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            vditor.wysiwyg.popover.insertAdjacentHTML(\"beforeend\", \" x \");\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n            setPopoverPosition(vditor, tableElement);\n        }\n        // link ref popover\n        var linkRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"link-ref\");\n        if (linkRefElement) {\n            genLinkRefPopover(vditor, linkRefElement);\n        }\n        // footnote popover\n        var footnotesRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-ref\");\n        if (footnotesRefElement) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", window.VditorI18n.footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_2 = document.createElement(\"input\");\n            inputWrap.appendChild(input_2);\n            input_2.className = \"vditor-input\";\n            input_2.setAttribute(\"placeholder\", window.VditorI18n.footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_2.style.width = \"120px\";\n            input_2.value = footnotesRefElement.getAttribute(\"data-footnotes-label\");\n            input_2.oninput = function () {\n                if (input_2.value.trim() !== \"\") {\n                    footnotesRefElement.setAttribute(\"data-footnotes-label\", input_2.value);\n                }\n            };\n            input_2.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (!(0,compatibility/* isCtrl */.yl)(event) &&\n                    !event.shiftKey &&\n                    event.altKey &&\n                    event.key === \"Enter\") {\n                    range.selectNodeContents(footnotesRefElement);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genClose(footnotesRefElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, footnotesRefElement);\n        }\n        var blockRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-wysiwyg__block\");\n        // block popover: math-inline, math-block, html-block, html-inline, code-block, html-entity\n        if (blockRenderElement &&\n            blockRenderElement.getAttribute(\"data-type\").indexOf(\"block\") > -1) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockRenderElement, vditor);\n            genDown(range, blockRenderElement, vditor);\n            genClose(blockRenderElement, vditor);\n            if (blockRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n                var languageWrap = document.createElement(\"span\");\n                languageWrap.setAttribute(\"aria-label\", window.VditorI18n.language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                languageWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n                var language_1 = document.createElement(\"input\");\n                languageWrap.appendChild(language_1);\n                var codeElement_1 = blockRenderElement.firstElementChild.firstElementChild;\n                language_1.className = \"vditor-input\";\n                language_1.setAttribute(\"placeholder\", window.VditorI18n.language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                language_1.value =\n                    codeElement_1.className.indexOf(\"language-\") > -1\n                        ? codeElement_1.className.split(\"-\")[1].split(\" \")[0]\n                        : \"\";\n                language_1.oninput = function (e) {\n                    if (language_1.value.trim() !== \"\") {\n                        codeElement_1.className = \"language-\" + language_1.value;\n                    }\n                    else {\n                        codeElement_1.className = \"\";\n                        vditor.hint.recentLanguage = \"\";\n                    }\n                    if (blockRenderElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                        blockRenderElement.lastElementChild.innerHTML =\n                            blockRenderElement.firstElementChild.innerHTML;\n                        processCodeRender(blockRenderElement.lastElementChild, vditor);\n                    }\n                    afterRenderEvent(vditor);\n                    // 当鼠标点选语言时，触发自定义input事件\n                    if (e.detail === 1) {\n                        // 选择语言后，输入焦点切换到代码输入框\n                        range.setStart(codeElement_1.firstChild, 0);\n                        range.collapse(true);\n                        (0,selection/* setSelectionFocus */.Hc)(range);\n                    }\n                };\n                language_1.onkeydown = function (event) {\n                    if (event.isComposing) {\n                        return;\n                    }\n                    if (removeBlockElement(vditor, event)) {\n                        return;\n                    }\n                    if (event.key === \"Escape\" &&\n                        vditor.hint.element.style.display === \"block\") {\n                        vditor.hint.element.style.display = \"none\";\n                        event.preventDefault();\n                        return;\n                    }\n                    vditor.hint.select(event, vditor);\n                    if (!(0,compatibility/* isCtrl */.yl)(event) &&\n                        !event.shiftKey &&\n                        event.key === \"Enter\") {\n                        range.setStart(codeElement_1.firstChild, 0);\n                        range.collapse(true);\n                        (0,selection/* setSelectionFocus */.Hc)(range);\n                        event.preventDefault();\n                        event.stopPropagation();\n                    }\n                };\n                language_1.onkeyup = function (event) {\n                    if (event.isComposing ||\n                        event.key === \"Enter\" ||\n                        event.key === \"ArrowUp\" ||\n                        event.key === \"Escape\" ||\n                        event.key === \"ArrowDown\") {\n                        return;\n                    }\n                    var matchLangData = [];\n                    var key = language_1.value.substring(0, language_1.selectionStart);\n                    constants/* Constants.CODE_LANGUAGES.forEach */.g.CODE_LANGUAGES.forEach(function (keyName) {\n                        if (keyName.indexOf(key.toLowerCase()) > -1) {\n                            matchLangData.push({\n                                html: keyName,\n                                value: keyName,\n                            });\n                        }\n                    });\n                    vditor.hint.genHTML(matchLangData, key, vditor);\n                    event.preventDefault();\n                };\n                vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", languageWrap);\n            }\n            setPopoverPosition(vditor, blockRenderElement);\n        }\n        else {\n            if (!blockRenderElement) {\n                vditor.wysiwyg.element\n                    .querySelectorAll(\".vditor-wysiwyg__preview\")\n                    .forEach(function (itemElement) {\n                    var previousElement = itemElement.previousElementSibling;\n                    previousElement.style.display = \"none\";\n                });\n            }\n            blockRenderElement = undefined;\n        }\n        if (headingElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_3 = document.createElement(\"input\");\n            inputWrap.appendChild(input_3);\n            input_3.className = \"vditor-input\";\n            input_3.setAttribute(\"placeholder\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_3.style.width = \"120px\";\n            input_3.value = headingElement.getAttribute(\"data-id\") || \"\";\n            input_3.oninput = function () {\n                headingElement.setAttribute(\"data-id\", input_3.value);\n            };\n            input_3.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (!(0,compatibility/* isCtrl */.yl)(event) &&\n                    !event.shiftKey &&\n                    event.altKey &&\n                    event.key === \"Enter\") {\n                    range.selectNodeContents(headingElement);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genUp(range, headingElement, vditor);\n            genDown(range, headingElement, vditor);\n            genClose(headingElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, headingElement);\n        }\n        // a popover\n        if (aElement) {\n            genAPopover(vditor, aElement);\n        }\n        if (!blockquoteElement &&\n            !liElement &&\n            !tableElement &&\n            !blockRenderElement &&\n            !aElement &&\n            !linkRefElement &&\n            !footnotesRefElement &&\n            !headingElement &&\n            !tocElement) {\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-block\", \"0\");\n            if (blockElement &&\n                blockElement.parentElement.isEqualNode(vditor.wysiwyg.element)) {\n                vditor.wysiwyg.popover.innerHTML = \"\";\n                genUp(range, blockElement, vditor);\n                genDown(range, blockElement, vditor);\n                genClose(blockElement, vditor);\n                setPopoverPosition(vditor, blockElement);\n            }\n            else {\n                vditor.wysiwyg.popover.style.display = \"none\";\n            }\n        }\n        // 反斜杠特殊处理\n        vditor.wysiwyg.element\n            .querySelectorAll('span[data-type=\"backslash\"] > span')\n            .forEach(function (item) {\n            item.style.display = \"none\";\n        });\n        var backslashElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"backslash\");\n        if (backslashElement) {\n            backslashElement.querySelector(\"span\").style.display = \"inline\";\n        }\n    }, 200);\n};\nvar setPopoverPosition = function (vditor, element) {\n    var targetElement = element;\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(element, \"TABLE\");\n    if (tableElement) {\n        targetElement = tableElement;\n    }\n    vditor.wysiwyg.popover.style.left = \"0\";\n    vditor.wysiwyg.popover.style.display = \"block\";\n    vditor.wysiwyg.popover.style.top =\n        Math.max(-8, targetElement.offsetTop - 21 - vditor.wysiwyg.element.scrollTop) + \"px\";\n    vditor.wysiwyg.popover.style.left =\n        Math.min(targetElement.offsetLeft, vditor.wysiwyg.element.clientWidth - vditor.wysiwyg.popover.clientWidth) + \"px\";\n    vditor.wysiwyg.popover.setAttribute(\"data-top\", (targetElement.offsetTop - 21).toString());\n};\nvar genLinkRefPopover = function (vditor, linkRefElement) {\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateLinkRef = function () {\n        if (input.value.trim() !== \"\") {\n            if (linkRefElement.tagName === \"IMG\") {\n                linkRefElement.setAttribute(\"alt\", input.value);\n            }\n            else {\n                linkRefElement.textContent = input.value;\n            }\n        }\n        // data-link-label\n        if (input1.value.trim() !== \"\") {\n            linkRefElement.setAttribute(\"data-link-label\", input1.value);\n        }\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", window.VditorI18n.textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value =\n        linkRefElement.getAttribute(\"alt\") || linkRefElement.textContent;\n    input.oninput = function () {\n        updateLinkRef();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", window.VditorI18n.linkRef);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", window.VditorI18n.linkRef);\n    input1.value = linkRefElement.getAttribute(\"data-link-label\");\n    input1.oninput = function () {\n        updateLinkRef();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input);\n    };\n    genClose(linkRefElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    setPopoverPosition(vditor, linkRefElement);\n};\nvar genUp = function (range, element, vditor) {\n    var previousElement = element.previousElementSibling;\n    if (!previousElement ||\n        (!element.parentElement.isEqualNode(vditor.wysiwyg.element) &&\n            element.tagName !== \"LI\")) {\n        return;\n    }\n    var upElement = document.createElement(\"button\");\n    upElement.setAttribute(\"type\", \"button\");\n    upElement.setAttribute(\"data-type\", \"up\");\n    upElement.setAttribute(\"aria-label\", window.VditorI18n.up + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘U\") + \">\");\n    upElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-up\"></use></svg>';\n    upElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    upElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        previousElement.insertAdjacentElement(\"beforebegin\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", upElement);\n};\nvar genDown = function (range, element, vditor) {\n    var nextElement = element.nextElementSibling;\n    if (!nextElement ||\n        (!element.parentElement.isEqualNode(vditor.wysiwyg.element) &&\n            element.tagName !== \"LI\")) {\n        return;\n    }\n    var downElement = document.createElement(\"button\");\n    downElement.setAttribute(\"type\", \"button\");\n    downElement.setAttribute(\"data-type\", \"down\");\n    downElement.setAttribute(\"aria-label\", window.VditorI18n.down + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘D\") + \">\");\n    downElement.innerHTML =\n        '<svg><use xlink:href=\"#vditor-icon-down\"></use></svg>';\n    downElement.className =\n        \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    downElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        nextElement.insertAdjacentElement(\"afterend\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", downElement);\n};\nvar genClose = function (element, vditor) {\n    var close = document.createElement(\"button\");\n    close.setAttribute(\"type\", \"button\");\n    close.setAttribute(\"data-type\", \"remove\");\n    close.setAttribute(\"aria-label\", window.VditorI18n.remove + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘X\") + \">\");\n    close.innerHTML =\n        '<svg><use xlink:href=\"#vditor-icon-trashcan\"></use></svg>';\n    close.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    close.onclick = function () {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        range.setStartAfter(element);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        element.remove();\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", close);\n};\nvar linkHotkey = function (vditor, element, event, nextInputElement) {\n    if (event.isComposing) {\n        return;\n    }\n    if (event.key === \"Tab\") {\n        nextInputElement.focus();\n        nextInputElement.select();\n        event.preventDefault();\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) &&\n        !event.shiftKey &&\n        event.altKey &&\n        event.key === \"Enter\") {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        // firefox 不会打断 link https://github.com/Vanessa219/vditor/issues/193\n        element.insertAdjacentHTML(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n        range.setStartAfter(element.nextSibling);\n        range.collapse(true);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        event.preventDefault();\n    }\n};\nvar genAPopover = function (vditor, aElement) {\n    var lang = vditor.options.lang;\n    var options = vditor.options;\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateA = function () {\n        if (input.value.trim() !== \"\") {\n            aElement.innerHTML = input.value;\n        }\n        aElement.setAttribute(\"href\", input1.value);\n        aElement.setAttribute(\"title\", input2.value);\n    };\n    aElement.querySelectorAll(\"[data-marker]\").forEach(function (item) {\n        item.removeAttribute(\"data-marker\");\n    });\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", window.VditorI18n.textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value = aElement.innerHTML || \"\";\n    input.oninput = function () {\n        updateA();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", window.VditorI18n.link);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", window.VditorI18n.link);\n    input1.value = aElement.getAttribute(\"href\") || \"\";\n    input1.oninput = function () {\n        updateA();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input2);\n    };\n    var input2Wrap = document.createElement(\"span\");\n    input2Wrap.setAttribute(\"aria-label\", window.VditorI18n.tooltipText);\n    input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input2 = document.createElement(\"input\");\n    input2Wrap.appendChild(input2);\n    input2.className = \"vditor-input\";\n    input2.setAttribute(\"placeholder\", window.VditorI18n.tooltipText);\n    input2.style.width = \"60px\";\n    input2.value = aElement.getAttribute(\"title\") || \"\";\n    input2.oninput = function () {\n        updateA();\n    };\n    input2.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input);\n    };\n    genClose(aElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n    setPopoverPosition(vditor, aElement);\n};\nvar genImagePopover = function (event, vditor) {\n    var imgElement = event.target;\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateImg = function () {\n        imgElement.setAttribute(\"src\", inputElement.value);\n        imgElement.setAttribute(\"alt\", alt.value);\n        imgElement.setAttribute(\"title\", title.value);\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.imageURL);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var inputElement = document.createElement(\"input\");\n    inputWrap.appendChild(inputElement);\n    inputElement.className = \"vditor-input\";\n    inputElement.setAttribute(\"placeholder\", window.VditorI18n.imageURL);\n    inputElement.value = imgElement.getAttribute(\"src\") || \"\";\n    inputElement.oninput = function () {\n        updateImg();\n    };\n    inputElement.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var altWrap = document.createElement(\"span\");\n    altWrap.setAttribute(\"aria-label\", window.VditorI18n.alternateText);\n    altWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var alt = document.createElement(\"input\");\n    altWrap.appendChild(alt);\n    alt.className = \"vditor-input\";\n    alt.setAttribute(\"placeholder\", window.VditorI18n.alternateText);\n    alt.style.width = \"52px\";\n    alt.value = imgElement.getAttribute(\"alt\") || \"\";\n    alt.oninput = function () {\n        updateImg();\n    };\n    alt.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var titleWrap = document.createElement(\"span\");\n    titleWrap.setAttribute(\"aria-label\", window.VditorI18n.title);\n    titleWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var title = document.createElement(\"input\");\n    titleWrap.appendChild(title);\n    title.className = \"vditor-input\";\n    title.setAttribute(\"placeholder\", window.VditorI18n.title);\n    title.value = imgElement.getAttribute(\"title\") || \"\";\n    title.oninput = function () {\n        updateImg();\n    };\n    title.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    genClose(imgElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", altWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", titleWrap);\n    setPopoverPosition(vditor, imgElement);\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/highlightToolbar.ts\n\n\nvar highlightToolbar = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\") {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/renderDomByMd.ts\n\n\nvar renderDomByMd = function (vditor, md, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    var editorElement = vditor.wysiwyg.element;\n    editorElement.innerHTML = vditor.lute.Md2VditorDOM(md);\n    editorElement.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n        item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n    });\n    afterRenderEvent(vditor, options);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/toolbarEvent.ts\n\n\n\n\n\n\n\n\n\nvar cancelBES = function (range, vditor, commandName) {\n    var element = range.startContainer.parentElement;\n    var jump = false;\n    var lastTagName = \"\";\n    var lastEndTagName = \"\";\n    var splitHTML = splitElement(range);\n    var lastBeforeHTML = splitHTML.beforeHTML;\n    var lastAfterHTML = splitHTML.afterHTML;\n    while (element && !jump) {\n        var tagName = element.tagName;\n        if (tagName === \"STRIKE\") {\n            tagName = \"S\";\n        }\n        if (tagName === \"I\") {\n            tagName = \"EM\";\n        }\n        if (tagName === \"B\") {\n            tagName = \"STRONG\";\n        }\n        if (tagName === \"S\" || tagName === \"STRONG\" || tagName === \"EM\") {\n            var insertHTML = \"\";\n            var previousHTML = \"\";\n            var nextHTML = \"\";\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                previousHTML = getPreviousHTML(element);\n                nextHTML = getNextHTML(element);\n            }\n            if (lastBeforeHTML || previousHTML) {\n                insertHTML = previousHTML + \"<\" + tagName + \">\" + lastBeforeHTML + \"</\" + tagName + \">\";\n                lastBeforeHTML = insertHTML;\n            }\n            if ((commandName === \"bold\" && tagName === \"STRONG\") ||\n                (commandName === \"italic\" && tagName === \"EM\") ||\n                (commandName === \"strikeThrough\" && tagName === \"S\")) {\n                // 取消\n                insertHTML += \"\" + lastTagName + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\" + lastEndTagName;\n                jump = true;\n            }\n            if (lastAfterHTML || nextHTML) {\n                lastAfterHTML = \"<\" + tagName + \">\" + lastAfterHTML + \"</\" + tagName + \">\" + nextHTML;\n                insertHTML += lastAfterHTML;\n            }\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                element = element.parentElement;\n                element.innerHTML = insertHTML;\n            }\n            else {\n                element.outerHTML = insertHTML;\n                element = element.parentElement;\n            }\n            lastTagName = \"<\" + tagName + \">\" + lastTagName;\n            lastEndTagName = \"</\" + tagName + \">\" + lastEndTagName;\n        }\n        else {\n            jump = true;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n};\nvar toolbarEvent = function (vditor, actionBtn, event) {\n    if (vditor.wysiwyg.composingLock // Mac Chrome 中韩文结束会出发此事件，导致重复末尾字符 https://github.com/Vanessa219/vditor/issues/188\n        && event instanceof CustomEvent // 点击按钮应忽略输入法 https://github.com/Vanessa219/vditor/issues/473\n    ) {\n        return;\n    }\n    var useHighlight = true;\n    var useRender = true;\n    if (vditor.wysiwyg.element.querySelector(\"wbr\")) {\n        vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"strike\") {\n            commandName = \"strikeThrough\";\n        }\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"BLOCKQUOTE\");\n            if (!quoteElement) {\n                quoteElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (quoteElement) {\n                useHighlight = false;\n                actionBtn.classList.remove(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\" + quoteElement.innerHTML + \"</p>\" : quoteElement.innerHTML;\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"inline-code\") {\n            var inlineCodeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n            if (!inlineCodeElement) {\n                inlineCodeElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (inlineCodeElement) {\n                inlineCodeElement.outerHTML = inlineCodeElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") + \"<wbr>\";\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"link\") {\n            if (!range.collapsed) {\n                document.execCommand(\"unlink\", false, \"\");\n            }\n            else {\n                range.selectNode(range.startContainer.parentElement);\n                document.execCommand(\"unlink\", false, \"\");\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n            if (range.toString() === \"\") {\n                cancelBES(range, vditor, commandName);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    else {\n        // 添加\n        if (vditor.wysiwyg.element.childNodes.length === 0) {\n            vditor.wysiwyg.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"quote\") {\n            if (!blockElement) {\n                blockElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (blockElement) {\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n                // li 中软换行\n                if (liElement && blockElement.contains(liElement)) {\n                    liElement.innerHTML = \"<blockquote data-block=\\\"0\\\">\" + liElement.innerHTML + \"</blockquote>\";\n                }\n                else {\n                    blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"inline-code\") {\n            if (range.toString() === \"\") {\n                var node = document.createElement(\"code\");\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else if (range.startContainer.nodeType === 3) {\n                var node = document.createElement(\"code\");\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"code\") {\n            var node = document.createElement(\"div\");\n            node.className = \"vditor-wysiwyg__block\";\n            node.setAttribute(\"data-type\", \"code-block\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.setAttribute(\"data-marker\", \"```\");\n            if (range.toString() === \"\") {\n                node.innerHTML = \"<pre><code><wbr>\\n</code></pre>\";\n            }\n            else {\n                node.innerHTML = \"<pre><code>\" + range.toString() + \"<wbr></code></pre>\";\n                range.deleteContents();\n            }\n            range.insertNode(node);\n            if (blockElement) {\n                blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n                processCodeRender(item, vditor);\n            });\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"link\") {\n            if (range.toString() === \"\") {\n                var aElement = document.createElement(\"a\");\n                aElement.innerText = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(aElement);\n                range.setStart(aElement.firstChild, 1);\n                range.collapse(true);\n                genAPopover(vditor, aElement);\n                var textInputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n                textInputElement.value = \"\";\n                textInputElement.focus();\n                useRender = false;\n            }\n            else {\n                var node = document.createElement(\"a\");\n                node.setAttribute(\"href\", \"\");\n                node.innerHTML = range.toString();\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                genAPopover(vditor, node);\n                var textInputElements = vditor.wysiwyg.popover.querySelectorAll(\"input\");\n                textInputElements[0].value = node.innerText;\n                textInputElements[1].focus();\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"table\") {\n            var tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>\";\n            if (range.toString().trim() === \"\") {\n                if (blockElement && blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    blockElement.outerHTML = tableHTML_1;\n                }\n                else {\n                    document.execCommand(\"insertHTML\", false, tableHTML_1);\n                }\n                range.selectNode(vditor.wysiwyg.element.querySelector(\"wbr\").previousSibling);\n                vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr>\";\n                var tableText = range.toString().split(\"\\n\");\n                var delimiter_1 = tableText[0].split(\",\").length > tableText[0].split(\"\\t\").length ? \",\" : \"\\t\";\n                tableText.forEach(function (rows, index) {\n                    if (index === 0) {\n                        rows.split(delimiter_1).forEach(function (header, subIndex) {\n                            if (subIndex === 0) {\n                                tableHTML_1 += \"<th>\" + header + \"<wbr></th>\";\n                            }\n                            else {\n                                tableHTML_1 += \"<th>\" + header + \"</th>\";\n                            }\n                        });\n                        tableHTML_1 += \"</tr></thead>\";\n                    }\n                    else {\n                        if (index === 1) {\n                            tableHTML_1 += \"<tbody><tr>\";\n                        }\n                        else {\n                            tableHTML_1 += \"<tr>\";\n                        }\n                        rows.split(delimiter_1).forEach(function (cell) {\n                            tableHTML_1 += \"<td>\" + cell + \"</td>\";\n                        });\n                        tableHTML_1 += \"</tr>\";\n                    }\n                });\n                tableHTML_1 += \"</tbody></table>\";\n                document.execCommand(\"insertHTML\", false, tableHTML_1);\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n            if (commandName === \"strike\") {\n                commandName = \"strikeThrough\";\n            }\n            if (range.toString() === \"\" && (commandName === \"bold\" || commandName === \"italic\" || commandName === \"strikeThrough\")) {\n                var tagName = \"strong\";\n                if (commandName === \"italic\") {\n                    tagName = \"em\";\n                }\n                else if (commandName === \"strikeThrough\") {\n                    tagName = \"s\";\n                }\n                var node = document.createElement(tagName);\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                if (node.previousSibling && node.previousSibling.textContent === constants/* Constants.ZWSP */.g.ZWSP) {\n                    // 移除多层嵌套中的 zwsp\n                    node.previousSibling.textContent = \"\";\n                }\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    if (useHighlight) {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    if (useRender) {\n        afterRenderEvent(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/MenuItem.ts\n\n\n\n\n\n\nvar MenuItem = /** @class */ (function () {\n    function MenuItem(vditor, menuItem) {\n        var _a;\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        if (menuItem.className) {\n            (_a = this.element.classList).add.apply(_a, menuItem.className.split(\" \"));\n        }\n        var hotkey = menuItem.hotkey ? \" <\" + (0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey) + \">\" : \"\";\n        if (menuItem.level === 2) {\n            hotkey = menuItem.hotkey ? \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey) + \"&gt;\" : \"\";\n        }\n        var tip = menuItem.tip ? menuItem.tip + hotkey : \"\" + window.VditorI18n[menuItem.name] + hotkey;\n        var tagName = menuItem.name === \"upload\" ? \"div\" : \"button\";\n        if (menuItem.level === 2) {\n            this.element.innerHTML = \"<\" + tagName + \" data-type=\\\"\" + menuItem.name + \"\\\">\" + tip + \"</\" + tagName + \">\";\n        }\n        else {\n            this.element.classList.add(\"vditor-toolbar__item\");\n            var iconElement = document.createElement(tagName);\n            iconElement.setAttribute(\"data-type\", menuItem.name);\n            iconElement.className = \"vditor-tooltipped vditor-tooltipped__\" + menuItem.tipPosition;\n            iconElement.setAttribute(\"aria-label\", tip);\n            iconElement.innerHTML = menuItem.icon;\n            this.element.appendChild(iconElement);\n        }\n        if (!menuItem.prefix) {\n            return;\n        }\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            if (vditor.currentMode === \"wysiwyg\") {\n                toolbarEvent(vditor, _this.element.children[0], event);\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n            else {\n                processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n        });\n    }\n    return MenuItem;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/EditMode.ts\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar setEditMode = function (vditor, type, event) {\n    var markdownText;\n    if (typeof event !== \"string\") {\n        hidePanel(vditor, [\"subToolbar\", \"hint\"]);\n        event.preventDefault();\n        markdownText = getMarkdown(vditor);\n    }\n    else {\n        markdownText = event;\n    }\n    if (vditor.currentMode === type && typeof event !== \"string\") {\n        return;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    if (vditor.options.preview.mode === \"both\" && type === \"sv\") {\n        vditor.preview.element.style.display = \"block\";\n    }\n    else {\n        vditor.preview.element.style.display = \"none\";\n    }\n    enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n    if (type === \"ir\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"block\";\n        vditor.lute.SetVditorIR(true);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"ir\";\n        vditor.ir.element.innerHTML = vditor.lute.Md2VditorIRDOM(markdownText);\n        process_processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n        vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        vditor.ir.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n    }\n    else if (type === \"wysiwyg\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"block\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(true);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"wysiwyg\";\n        setPadding(vditor);\n        renderDomByMd(vditor, markdownText, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n    else if (type === \"sv\") {\n        showToolbar(vditor.toolbar.elements, [\"both\"]);\n        hideToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        if (vditor.options.preview.mode === \"both\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        else if (vditor.options.preview.mode === \"editor\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(true);\n        vditor.currentMode = \"sv\";\n        var svHTML = processSpinVditorSVDOM(markdownText, vditor);\n        if (svHTML === \"<div data-block='0'></div>\") {\n            // https://github.com/Vanessa219/vditor/issues/654 SV 模式 Placeholder 显示问题\n            svHTML = \"\";\n        }\n        vditor.sv.element.innerHTML = svHTML;\n        processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n    }\n    vditor.undo.resetIcon(vditor);\n    if (typeof event !== \"string\") {\n        // 初始化不 focus\n        vditor[vditor.currentMode].element.focus();\n        highlightToolbar(vditor);\n    }\n    renderToc(vditor);\n    setTypewriterPosition(vditor);\n    if (vditor.toolbar.elements[\"edit-mode\"]) {\n        vditor.toolbar.elements[\"edit-mode\"].querySelectorAll(\"button\").forEach(function (item) {\n            item.classList.remove(\"vditor-menu--current\");\n        });\n        vditor.toolbar.elements[\"edit-mode\"].querySelector(\"button[data-mode=\\\"\" + vditor.currentMode + \"\\\"]\").classList.add(\"vditor-menu--current\");\n    }\n    vditor.outline.toggle(vditor, vditor.currentMode !== \"sv\" && vditor.options.outline.enable);\n};\nvar EditMode = /** @class */ (function (_super) {\n    __extends(EditMode, _super);\n    function EditMode(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-mode=\\\"wysiwyg\\\">\" + window.VditorI18n.wysiwyg + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘7\") + \"></button>\\n<button data-mode=\\\"ir\\\">\" + window.VditorI18n.instantRendering + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘8\") + \"></button>\\n<button data-mode=\\\"sv\\\">\" + window.VditorI18n.splitView + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘9\") + \"></button>\";\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement, menuItem);\n        return _this;\n    }\n    EditMode.prototype._bindEvent = function (vditor, panelElement, menuItem) {\n        var actionBtn = this.element.children[0];\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        panelElement.children.item(0).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // wysiwyg\n            setEditMode(vditor, \"wysiwyg\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(1).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // ir\n            setEditMode(vditor, \"ir\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(2).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // markdown\n            setEditMode(vditor, \"sv\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n    };\n    return EditMode;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/getSelectText.ts\n\nvar getSelectText = function (editor, range) {\n    if ((0,selection/* selectIsEditor */.Gb)(editor, range)) {\n        return getSelection().toString();\n    }\n    return \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/editorCommonEvent.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar focusEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"focus\", function () {\n        if (vditor.options.focus) {\n            vditor.options.focus(getMarkdown(vditor));\n        }\n        hidePanel(vditor, [\"subToolbar\", \"hint\"]);\n    });\n};\nvar dblclickEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dblclick\", function (event) {\n        if (event.target.tagName === \"IMG\") {\n            (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n        }\n    });\n};\nvar blurEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"blur\", function (event) {\n        if (vditor.currentMode === \"ir\") {\n            var expandElement = vditor.ir.element.querySelector(\".vditor-ir__node--expand\");\n            if (expandElement) {\n                expandElement.classList.remove(\"vditor-ir__node--expand\");\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\" &&\n            !vditor.wysiwyg.selectPopover.contains(event.relatedTarget)) {\n            vditor.wysiwyg.hideComment();\n        }\n        vditor[vditor.currentMode].range = (0,selection/* getEditorRange */.zh)(vditor);\n        if (vditor.options.blur) {\n            vditor.options.blur(getMarkdown(vditor));\n        }\n    });\n};\nvar dropEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dragstart\", function (event) {\n        // 选中编辑器中的文字进行拖拽\n        event.dataTransfer.setData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR, constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR);\n    });\n    editorElement.addEventListener(\"drop\", function (event) {\n        if (event.dataTransfer.getData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR)) {\n            // 编辑器内选中文字拖拽\n            execAfterRender(vditor);\n        }\n        else if (event.dataTransfer.types.includes(\"Files\") || event.dataTransfer.types.includes(\"text/html\")) {\n            // 外部文件拖入编辑器中或者编辑器内选中文字拖拽\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        }\n    });\n};\nvar copyEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"copy\", function (event) { return copy(event, vditor); });\n};\nvar cutEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"cut\", function (event) {\n        copy(event, vditor);\n        // 获取 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\") {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        document.execCommand(\"delete\");\n    });\n};\nvar scrollCenter = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n        vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n    }\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var cursorTop = (0,selection/* getCursorPosition */.Ny)(editorElement).top;\n    if (typeof vditor.options.height === \"string\" && !vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        window.scrollTo(window.scrollX, cursorTop + vditor.element.offsetTop + vditor.toolbar.element.offsetHeight - window.innerHeight / 2 + 10);\n    }\n    if (typeof vditor.options.height === \"number\" || vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        editorElement.scrollTop = cursorTop + editorElement.scrollTop - editorElement.clientHeight / 2 + 10;\n    }\n};\nvar hotkeyEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"keydown\", function (event) {\n        // hint: 上下选择\n        if ((vditor.options.hint.extend.length > 1 || vditor.toolbar.elements.emoji) &&\n            vditor.hint.select(event, vditor)) {\n            return;\n        }\n        // 重置 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\" &&\n            (event.key === \"Backspace\" || matchHotKey(\"⌘X\", event))) {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        if (vditor.currentMode === \"sv\") {\n            if (processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\") {\n            if (wysiwyg_processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"ir\") {\n            if (processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        if (vditor.options.ctrlEnter && matchHotKey(\"⌘Enter\", event)) {\n            vditor.options.ctrlEnter(getMarkdown(vditor));\n            event.preventDefault();\n            return;\n        }\n        // undo\n        if (matchHotKey(\"⌘Z\", event) && !vditor.toolbar.elements.undo) {\n            vditor.undo.undo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // redo\n        if (matchHotKey(\"⌘Y\", event) && !vditor.toolbar.elements.redo) {\n            vditor.undo.redo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // esc\n        if (event.key === \"Escape\") {\n            if (vditor.hint.element.style.display === \"block\") {\n                vditor.hint.element.style.display = \"none\";\n            }\n            else if (vditor.options.esc && !event.isComposing) {\n                vditor.options.esc(getMarkdown(vditor));\n            }\n            event.preventDefault();\n            return;\n        }\n        // h1 - h6 hotkey\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[1-6]$/.test(event.code)) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                var tagName = event.code.replace(\"Digit\", \"H\");\n                if ((0,hasClosest/* hasClosestByMatchTag */.lG)(getSelection().getRangeAt(0).startContainer, tagName)) {\n                    removeHeading(vditor);\n                }\n                else {\n                    setHeading(vditor, tagName);\n                }\n                afterRenderEvent(vditor);\n            }\n            else if (vditor.currentMode === \"sv\") {\n                processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            event.preventDefault();\n            return true;\n        }\n        // toggle edit mode\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[7-9]$/.test(event.code)) {\n            if (event.code === \"Digit7\") {\n                setEditMode(vditor, \"wysiwyg\", event);\n            }\n            else if (event.code === \"Digit8\") {\n                setEditMode(vditor, \"ir\", event);\n            }\n            else if (event.code === \"Digit9\") {\n                setEditMode(vditor, \"sv\", event);\n            }\n            return true;\n        }\n        // toolbar action\n        vditor.options.toolbar.find(function (menuItem) {\n            if (!menuItem.hotkey || menuItem.toolbar) {\n                if (menuItem.toolbar) {\n                    var sub = menuItem.toolbar.find(function (subMenuItem) {\n                        if (!subMenuItem.hotkey) {\n                            return false;\n                        }\n                        if (matchHotKey(subMenuItem.hotkey, event)) {\n                            vditor.toolbar.elements[subMenuItem.name].children[0]\n                                .dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                            event.preventDefault();\n                            return true;\n                        }\n                    });\n                    return sub ? true : false;\n                }\n                return false;\n            }\n            if (matchHotKey(menuItem.hotkey, event)) {\n                vditor.toolbar.elements[menuItem.name].children[0].dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                event.preventDefault();\n                return true;\n            }\n        });\n    });\n};\nvar selectEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"selectstart\", function (event) {\n        editorElement.onmouseup = function () {\n            setTimeout(function () {\n                var selectText = getSelectText(vditor[vditor.currentMode].element);\n                if (selectText.trim()) {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        if (!(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"footnotes-block\") &&\n                            !(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"link-ref-defs-block\")) {\n                            vditor.wysiwyg.showComment();\n                        }\n                        else {\n                            vditor.wysiwyg.hideComment();\n                        }\n                    }\n                    if (vditor.options.select) {\n                        vditor.options.select(selectText);\n                    }\n                }\n                else {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        vditor.wysiwyg.hideComment();\n                    }\n                }\n            });\n        };\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/process.ts\n\n\n\n\n\n\n\n\nvar processPaste = function (vditor, text) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    range.extractContents();\n    range.insertNode(document.createTextNode(Lute.Caret));\n    range.insertNode(document.createTextNode(text));\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    var html = \"<div data-block='0'>\" +\n        vditor.lute.Md2VditorSVDOM(blockElement.textContent).replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    if (blockElement.isEqualNode(vditor.sv.element)) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n};\nvar getSideByType = function (spanNode, type, isPrevious) {\n    if (isPrevious === void 0) { isPrevious = true; }\n    var sideElement = spanNode;\n    if (sideElement.nodeType === 3) {\n        sideElement = sideElement.parentElement;\n    }\n    while (sideElement) {\n        if (sideElement.getAttribute(\"data-type\") === type) {\n            return sideElement;\n        }\n        if (isPrevious) {\n            sideElement = sideElement.previousElementSibling;\n        }\n        else {\n            sideElement = sideElement.nextElementSibling;\n        }\n    }\n    return false;\n};\nvar processSpinVditorSVDOM = function (html, vditor) {\n    log(\"SpinVditorSVDOM\", html, \"argument\", vditor.options.debugger);\n    html = \"<div data-block='0'>\" +\n        vditor.lute.SpinVditorSVDOM(html).replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    log(\"SpinVditorSVDOM\", html, \"result\", vditor.options.debugger);\n    return html;\n};\nvar processPreviousMarkers = function (spanElement) {\n    var spanType = spanElement.getAttribute(\"data-type\");\n    var previousElement = spanElement.previousElementSibling;\n    // 有内容的子列表/标题，在其 marker 后换行\n    var markerText = (spanType && spanType !== \"text\" && spanType !== \"table\" && spanType !== \"heading-marker\" &&\n        spanType !== \"newline\" && spanType !== \"yaml-front-matter-open-marker\" && spanType !== \"yaml-front-matter-close-marker\"\n        && spanType !== \"code-block-info\" && spanType !== \"code-block-close-marker\" && spanType !== \"code-block-open-marker\") ?\n        spanElement.textContent : \"\";\n    var hasNL = false;\n    if (spanType === \"newline\") {\n        hasNL = true;\n    }\n    while (previousElement && !hasNL) {\n        var previousType = previousElement.getAttribute(\"data-type\");\n        if (previousType === \"li-marker\" || previousType === \"blockquote-marker\" || previousType === \"task-marker\" ||\n            previousType === \"padding\") {\n            var previousText = previousElement.textContent;\n            if (previousType === \"li-marker\" &&\n                (spanType === \"code-block-open-marker\" || spanType === \"code-block-info\")) {\n                // https://github.com/Vanessa219/vditor/issues/586\n                markerText = previousText.replace(/\\S/g, \" \") + markerText;\n            }\n            else if (spanType === \"code-block-close-marker\" &&\n                previousElement.nextElementSibling.isSameNode(spanElement)) {\n                // https://github.com/Vanessa219/vditor/issues/594\n                var openMarker = getSideByType(spanElement, \"code-block-open-marker\");\n                if (openMarker && openMarker.previousElementSibling) {\n                    previousElement = openMarker.previousElementSibling;\n                    markerText = previousText + markerText;\n                }\n            }\n            else {\n                markerText = previousText + markerText;\n            }\n        }\n        else if (previousType === \"newline\") {\n            hasNL = true;\n        }\n        previousElement = previousElement.previousElementSibling;\n    }\n    return markerText;\n};\nvar processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    vditor.preview.render(vditor);\n    var text = getMarkdown(vditor);\n    if (typeof vditor.options.input === \"function\" && options.enableInput) {\n        vditor.options.input(text);\n    }\n    if (vditor.options.counter.enable) {\n        vditor.counter.render(vditor, text);\n    }\n    if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n        localStorage.setItem(vditor.options.cache.id, text);\n        if (vditor.options.cache.after) {\n            vditor.options.cache.after(text);\n        }\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    clearTimeout(vditor.sv.processTimeoutId);\n    vditor.sv.processTimeoutId = window.setTimeout(function () {\n        if (options.enableAddUndoStack && !vditor.sv.composingLock) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (headingElement && headingElement.textContent.trim() !== \"\") {\n        value = \"\\n\" + value;\n    }\n    range.collapse(true);\n    document.execCommand(\"insertHTML\", false, value);\n};\nvar processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 添加\n    if (vditor.sv.element.childNodes.length === 0) {\n        vditor.sv.element.innerHTML = \"<span data-type=\\\"p\\\" data-block=\\\"0\\\"><span data-type=\\\"text\\\"><wbr></span></span><span data-type=\\\"newline\\\"><br><span style=\\\"display: none\\\">\\n</span></span>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (!blockElement) {\n        return;\n    }\n    if (commandName === \"link\") {\n        var html = void 0;\n        if (range.toString() === \"\") {\n            html = \"\" + prefix + Lute.Caret + suffix;\n        }\n        else {\n            html = \"\" + prefix + range.toString() + suffix.replace(\")\", Lute.Caret + \")\");\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\" ||\n        commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\" || commandName === \"line\") {\n        var html = void 0;\n        // https://github.com/Vanessa219/vditor/issues/563 代码块不需要后面的 ```\n        if (range.toString() === \"\") {\n            html = \"\" + prefix + Lute.Caret + (commandName === \"code\" ? \"\" : suffix);\n        }\n        else {\n            html = \"\" + prefix + range.toString() + Lute.Caret + (commandName === \"code\" ? \"\" : suffix);\n        }\n        if (commandName === \"table\" || (commandName === \"code\" && spanElement && spanElement.textContent !== \"\")) {\n            html = \"\\n\\n\" + html;\n        }\n        else if (commandName === \"line\") {\n            html = \"\\n\\n\" + prefix + \"\\n\" + Lute.Caret;\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\" ||\n        commandName === \"quote\") {\n        if (spanElement) {\n            var marker = \"* \";\n            if (commandName === \"check\") {\n                marker = \"* [ ] \";\n            }\n            else if (commandName === \"ordered-list\") {\n                marker = \"1. \";\n            }\n            else if (commandName === \"quote\") {\n                marker = \"> \";\n            }\n            var newLine = getSideByType(spanElement, \"newline\");\n            if (newLine) {\n                newLine.insertAdjacentText(\"afterend\", marker);\n            }\n            else {\n                blockElement.insertAdjacentText(\"afterbegin\", marker);\n            }\n            inputEvent(vditor);\n            return;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    processAfterRender(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/getElement.ts\nvar getElement = function (vditor) {\n    switch (vditor.currentMode) {\n        case \"ir\":\n            return vditor.ir.element;\n        case \"wysiwyg\":\n            return vditor.wysiwyg.element;\n        case \"sv\":\n            return vditor.sv.element;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/setHeaders.ts\nvar setHeaders = function (vditor, xhr) {\n    if (vditor.options.upload.setHeaders) {\n        vditor.options.upload.headers = vditor.options.upload.setHeaders();\n    }\n    if (vditor.options.upload.headers) {\n        Object.keys(vditor.options.upload.headers).forEach(function (key) {\n            xhr.setRequestHeader(key, vditor.options.upload.headers[key]);\n        });\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/index.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\nvar Upload = /** @class */ (function () {\n    function Upload() {\n        this.isUploading = false;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-upload\";\n    }\n    return Upload;\n}());\nvar validateFile = function (vditor, files) {\n    vditor.tip.hide();\n    var uploadFileList = [];\n    var errorTip = \"\";\n    var uploadingStr = \"\";\n    var lang = vditor.options.lang;\n    var options = vditor.options;\n    var _loop_1 = function (iMax, i) {\n        var file = files[i];\n        var validate = true;\n        if (!file.name) {\n            errorTip += \"<li>\" + window.VditorI18n.nameEmpty + \"</li>\";\n            validate = false;\n        }\n        if (file.size > vditor.options.upload.max) {\n            errorTip += \"<li>\" + file.name + \" \" + window.VditorI18n.over + \" \" + vditor.options.upload.max / 1024 / 1024 + \"M</li>\";\n            validate = false;\n        }\n        var lastIndex = file.name.lastIndexOf(\".\");\n        var fileExt = file.name.substr(lastIndex);\n        var filename = vditor.options.upload.filename(file.name.substr(0, lastIndex)) + fileExt;\n        if (vditor.options.upload.accept) {\n            var isAccept = vditor.options.upload.accept.split(\",\").some(function (item) {\n                var type = item.trim();\n                if (type.indexOf(\".\") === 0) {\n                    if (fileExt.toLowerCase() === type.toLowerCase()) {\n                        return true;\n                    }\n                }\n                else {\n                    if (file.type.split(\"/\")[0] === type.split(\"/\")[0]) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n            if (!isAccept) {\n                errorTip += \"<li>\" + file.name + \" \" + window.VditorI18n.fileTypeError + \"</li>\";\n                validate = false;\n            }\n        }\n        if (validate) {\n            uploadFileList.push(file);\n            uploadingStr += \"<li>\" + filename + \" \" + window.VditorI18n.uploading + \"</li>\";\n        }\n    };\n    for (var iMax = files.length, i = 0; i < iMax; i++) {\n        _loop_1(iMax, i);\n    }\n    vditor.tip.show(\"<ul>\" + errorTip + uploadingStr + \"</ul>\");\n    return uploadFileList;\n};\nvar genUploadedLabel = function (responseText, vditor) {\n    var editorElement = getElement(vditor);\n    editorElement.focus();\n    var response = JSON.parse(responseText);\n    var errorTip = \"\";\n    if (response.code === 1) {\n        errorTip = \"\" + response.msg;\n    }\n    if (response.data.errFiles && response.data.errFiles.length > 0) {\n        errorTip = \"<ul><li>\" + errorTip + \"</li>\";\n        response.data.errFiles.forEach(function (data) {\n            var lastIndex = data.lastIndexOf(\".\");\n            var filename = vditor.options.upload.filename(data.substr(0, lastIndex)) + data.substr(lastIndex);\n            errorTip += \"<li>\" + filename + \" \" + window.VditorI18n.uploadError + \"</li>\";\n        });\n        errorTip += \"</ul>\";\n    }\n    if (errorTip) {\n        vditor.tip.show(errorTip);\n    }\n    else {\n        vditor.tip.hide();\n    }\n    var succFileText = \"\";\n    Object.keys(response.data.succMap).forEach(function (key) {\n        var path = response.data.succMap[key];\n        var lastIndex = key.lastIndexOf(\".\");\n        var type = key.substr(lastIndex);\n        var filename = vditor.options.upload.filename(key.substr(0, lastIndex)) + type;\n        type = type.toLowerCase();\n        if (type.indexOf(\".wav\") === 0 || type.indexOf(\".mp3\") === 0 || type.indexOf(\".ogg\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<div class=\\\"vditor-wysiwyg__block\\\" data-type=\\\"html-block\\\"\\n data-block=\\\"0\\\"><pre><code>&lt;audio controls=\\\"controls\\\" src=\\\"\" + path + \"\\\"&gt;&lt;/audio&gt;</code></pre>\\n\";\n            }\n            else if (vditor.currentMode === \"ir\") {\n                succFileText += \"<audio controls=\\\"controls\\\" src=\\\"\" + path + \"\\\"></audio>\\n\";\n            }\n            else {\n                succFileText += \"[\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n        else if (type.indexOf(\".apng\") === 0\n            || type.indexOf(\".bmp\") === 0\n            || type.indexOf(\".gif\") === 0\n            || type.indexOf(\".ico\") === 0 || type.indexOf(\".cur\") === 0\n            || type.indexOf(\".jpg\") === 0 || type.indexOf(\".jpeg\") === 0 || type.indexOf(\".jfif\") === 0 || type.indexOf(\".pjp\") === 0 || type.indexOf(\".pjpeg\") === 0\n            || type.indexOf(\".png\") === 0\n            || type.indexOf(\".svg\") === 0\n            || type.indexOf(\".webp\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<img alt=\\\"\" + filename + \"\\\" src=\\\"\" + path + \"\\\">\\n\";\n            }\n            else {\n                succFileText += \"![\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n        else {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<a href=\\\"\" + path + \"\\\">\" + filename + \"</a>\\n\";\n            }\n            else {\n                succFileText += \"[\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n    });\n    (0,selection/* setSelectionFocus */.Hc)(vditor.upload.range);\n    document.execCommand(\"insertHTML\", false, succFileText);\n    vditor.upload.range = getSelection().getRangeAt(0).cloneRange();\n};\nvar uploadFiles = function (vditor, files, element) { return __awaiter(void 0, void 0, void 0, function () {\n    var fileList, filesMax, i, fileItem, isValidate, isValidate, editorElement, validateResult, formData, extraData, _i, _a, key, i, iMax, xhr;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                fileList = [];\n                filesMax = vditor.options.upload.multiple === true ? files.length : 1;\n                for (i = 0; i < filesMax; i++) {\n                    fileItem = files[i];\n                    if (fileItem instanceof DataTransferItem) {\n                        fileItem = fileItem.getAsFile();\n                    }\n                    fileList.push(fileItem);\n                }\n                if (!vditor.options.upload.handler) return [3 /*break*/, 2];\n                return [4 /*yield*/, vditor.options.upload.handler(fileList)];\n            case 1:\n                isValidate = _b.sent();\n                if (typeof isValidate === \"string\") {\n                    vditor.tip.show(isValidate);\n                    return [2 /*return*/];\n                }\n                return [2 /*return*/];\n            case 2:\n                if (!vditor.options.upload.url || !vditor.upload) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    vditor.tip.show(\"please config: options.upload.url\");\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.file) return [3 /*break*/, 4];\n                return [4 /*yield*/, vditor.options.upload.file(fileList)];\n            case 3:\n                fileList = _b.sent();\n                _b.label = 4;\n            case 4:\n                if (vditor.options.upload.validate) {\n                    isValidate = vditor.options.upload.validate(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                }\n                editorElement = getElement(vditor);\n                vditor.upload.range = (0,selection/* getEditorRange */.zh)(vditor);\n                validateResult = validateFile(vditor, fileList);\n                if (validateResult.length === 0) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    return [2 /*return*/];\n                }\n                formData = new FormData();\n                extraData = vditor.options.upload.extraData;\n                for (_i = 0, _a = Object.keys(extraData); _i < _a.length; _i++) {\n                    key = _a[_i];\n                    formData.append(key, extraData[key]);\n                }\n                for (i = 0, iMax = validateResult.length; i < iMax; i++) {\n                    formData.append(vditor.options.upload.fieldName, validateResult[i]);\n                }\n                xhr = new XMLHttpRequest();\n                xhr.open(\"POST\", vditor.options.upload.url);\n                if (vditor.options.upload.token) {\n                    xhr.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                }\n                if (vditor.options.upload.withCredentials) {\n                    xhr.withCredentials = true;\n                }\n                setHeaders(vditor, xhr);\n                vditor.upload.isUploading = true;\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState === XMLHttpRequest.DONE) {\n                        vditor.upload.isUploading = false;\n                        editorElement.setAttribute(\"contenteditable\", \"true\");\n                        if (xhr.status >= 200 && xhr.status < 300) {\n                            if (vditor.options.upload.success) {\n                                vditor.options.upload.success(editorElement, xhr.responseText);\n                            }\n                            else {\n                                var responseText = xhr.responseText;\n                                if (vditor.options.upload.format) {\n                                    responseText = vditor.options.upload.format(files, xhr.responseText);\n                                }\n                                genUploadedLabel(responseText, vditor);\n                            }\n                        }\n                        else {\n                            if (vditor.options.upload.error) {\n                                vditor.options.upload.error(xhr.responseText);\n                            }\n                            else {\n                                vditor.tip.show(xhr.responseText);\n                            }\n                        }\n                        if (element) {\n                            element.value = \"\";\n                        }\n                        vditor.upload.element.style.display = \"none\";\n                    }\n                };\n                xhr.upload.onprogress = function (event) {\n                    if (!event.lengthComputable) {\n                        return;\n                    }\n                    var progress = event.loaded / event.total * 100;\n                    vditor.upload.element.style.display = \"block\";\n                    var progressBar = vditor.upload.element;\n                    progressBar.style.width = progress + \"%\";\n                };\n                xhr.send(formData);\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/input.ts\n\n\n\n\n\n\n\n\nvar input_input = function (vditor, range, event) {\n    var _a;\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (event && event.inputType !== \"formatItalic\"\n        && event.inputType !== \"deleteByDrag\"\n        && event.inputType !== \"insertFromDrop\"\n        && event.inputType !== \"formatBold\"\n        && event.inputType !== \"formatRemove\"\n        && event.inputType !== \"formatStrikeThrough\"\n        && event.inputType !== \"insertUnorderedList\"\n        && event.inputType !== \"insertOrderedList\"\n        && event.inputType !== \"formatOutdent\"\n        && event.inputType !== \"formatIndent\"\n        && event.inputType !== \"\" // document.execCommand('unlink', false)\n        || !event) {\n        var previousAEmptyElement = previoueIsEmptyA(range.startContainer);\n        if (previousAEmptyElement) {\n            // 链接结尾回车不应该复制到下一行 https://github.com/Vanessa219/vditor/issues/163\n            previousAEmptyElement.remove();\n        }\n        // 保存光标\n        vditor.wysiwyg.element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        // 在行首进行删除，后面的元素会带有样式，需清除\n        blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n            item.removeAttribute(\"style\");\n        });\n        // 移除空评论\n        blockElement.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        //  在有评论的行首换行后，该行的前一段会带有评论标识\n        (_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        var html_1 = \"\";\n        if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n            // 修改链接引用\n            blockElement = vditor.wysiwyg.element;\n        }\n        var isWYSIWYGElement = blockElement.isEqualNode(vditor.wysiwyg.element);\n        var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n        if (!isWYSIWYGElement) {\n            // 列表需要到最顶层\n            var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n            if (topListElement && !footnoteElement) {\n                var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n                if (blockquoteElement) {\n                    // li 中有 blockquote 就只渲染 blockquote\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || blockElement;\n                }\n                else {\n                    blockElement = topListElement;\n                }\n            }\n            // 修改脚注\n            if (footnoteElement) {\n                blockElement = footnoteElement;\n            }\n            html_1 = blockElement.outerHTML;\n            if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n                // 如果为列表的话，需要把上下的列表都重绘\n                var listPrevElement = blockElement.previousElementSibling;\n                var listNextElement = blockElement.nextElementSibling;\n                if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                    html_1 = listPrevElement.outerHTML + html_1;\n                    listPrevElement.remove();\n                }\n                if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                    html_1 = html_1 + listNextElement.outerHTML;\n                    listNextElement.remove();\n                }\n                // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n                html_1 = html_1.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n            }\n            // 添加链接引用\n            vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html_1 += item.outerHTML;\n                    item.remove();\n                }\n            });\n            // 添加脚注\n            vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html_1 += item.outerHTML;\n                    item.remove();\n                }\n            });\n        }\n        else {\n            html_1 = blockElement.innerHTML;\n        }\n        // 合并多个 em， strong，s。以防止多个相同元素在一起时不满足 commonmark 规范，出现标记符\n        html_1 = html_1.replace(/<\\/(strong|b)><strong data-marker=\"\\W{2}\">/g, \"\")\n            .replace(/<\\/(em|i)><em data-marker=\"\\W{1}\">/g, \"\")\n            .replace(/<\\/(s|strike)><s data-marker=\"~{1,2}\">/g, \"\");\n        if (html_1 === '<p data-block=\"0\">```<wbr></p>' && vditor.hint.recentLanguage) {\n            html_1 = '<p data-block=\"0\">```<wbr></p>'.replace(\"```\", \"```\" + vditor.hint.recentLanguage);\n        }\n        log(\"SpinVditorDOM\", html_1, \"argument\", vditor.options.debugger);\n        html_1 = vditor.lute.SpinVditorDOM(html_1);\n        log(\"SpinVditorDOM\", html_1, \"result\", vditor.options.debugger);\n        if (isWYSIWYGElement) {\n            blockElement.innerHTML = html_1;\n        }\n        else {\n            blockElement.outerHTML = html_1;\n            if (footnoteElement) {\n                // 更新正文中的 tip\n                var footnoteItemElement = (0,hasClosest/* hasTopClosestByTag */.E2)(vditor.wysiwyg.element.querySelector(\"wbr\"), \"LI\");\n                if (footnoteItemElement) {\n                    var footnoteRefElement = vditor.wysiwyg.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\" + footnoteItemElement.getAttribute(\"data-marker\") + \"\\\"]\");\n                    if (footnoteRefElement) {\n                        footnoteRefElement.setAttribute(\"aria-label\", footnoteItemElement.textContent.trim().substr(0, 24));\n                    }\n                }\n            }\n        }\n        var firstLinkRefDefElement_1;\n        var allLinkRefDefsElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n        allLinkRefDefsElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstLinkRefDefElement_1 = item;\n            }\n            else {\n                firstLinkRefDefElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allLinkRefDefsElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n        }\n        // 脚注合并后添加的末尾\n        var firstFootnoteElement_1;\n        var allFootnoteElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\");\n        allFootnoteElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstFootnoteElement_1 = item;\n            }\n            else {\n                firstFootnoteElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allFootnoteElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n        }\n        // 设置光标\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (event && (event.inputType === \"deleteContentBackward\" || event.inputType === \"deleteContentForward\") &&\n            vditor.options.comment.enable) {\n            vditor.wysiwyg.triggerRemoveComment(vditor);\n            vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n        }\n    }\n    renderToc(vditor);\n    afterRenderEvent(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/fixBrowserBehavior.ts\nvar __makeTemplateObject = (undefined && undefined.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar fixBrowserBehavior_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar fixBrowserBehavior_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// https://github.com/Vanessa219/vditor/issues/508 软键盘无法删除空块\nvar fixGSKeyBackspace = function (event, vditor, startContainer) {\n    if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\" && vditor.currentMode !== \"sv\") {\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        // 移动端的标点符号都显示为 299，因此需限定为空删除的条件\n        if (blockElement && blockElement.textContent.trim() === \"\") {\n            vditor[vditor.currentMode].composingLock = true;\n            return false;\n        }\n    }\n    return true;\n};\n// https://github.com/Vanessa219/vditor/issues/361 代码块后输入中文\nvar fixCJKPosition = function (range, vditor, event) {\n    if (event.key === \"Enter\" || event.key === \"Tab\" || event.key === \"Backspace\" || event.key.indexOf(\"Arrow\") > -1\n        || (0,compatibility/* isCtrl */.yl)(event) || event.key === \"Escape\" || event.shiftKey || event.altKey) {\n        return;\n    }\n    var pLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"P\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    if (pLiElement && (0,selection/* getSelectPosition */.im)(pLiElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var zwspNode = document.createTextNode(constants/* Constants.ZWSP */.g.ZWSP);\n        range.insertNode(zwspNode);\n        range.setStartAfter(zwspNode);\n    }\n};\n// https://github.com/Vanessa219/vditor/issues/381 光标在内联数学公式中无法向下移动\nvar fixCursorDownInlineMath = function (range, key) {\n    if (key === \"ArrowDown\" || key === \"ArrowUp\") {\n        var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"math-inline\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-entity\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-inline\");\n        if (inlineElement) {\n            if (key === \"ArrowDown\") {\n                range.setStartAfter(inlineElement.parentElement);\n            }\n            if (key === \"ArrowUp\") {\n                range.setStartBefore(inlineElement.parentElement);\n            }\n        }\n    }\n};\nvar insertEmptyBlock = function (vditor, position) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (blockElement) {\n        blockElement.insertAdjacentHTML(position, \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\\n</p>\");\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        highlightToolbar(vditor);\n        execAfterRender(vditor);\n    }\n};\nvar isFirstCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.rows[0].cells[0].isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\nvar isLastCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.lastElementChild.lastElementChild.lastElementChild.isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\n// 光标设置到前一个表格中\nvar goPreviousCell = function (cellElement, range, isSelected) {\n    if (isSelected === void 0) { isSelected = true; }\n    var previousElement = cellElement.previousElementSibling;\n    if (!previousElement) {\n        if (cellElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement.previousElementSibling.lastElementChild;\n        }\n        else if (cellElement.parentElement.parentElement.tagName === \"TBODY\" &&\n            cellElement.parentElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement\n                .parentElement.previousElementSibling.lastElementChild.lastElementChild;\n        }\n        else {\n            previousElement = null;\n        }\n    }\n    if (previousElement) {\n        range.selectNodeContents(previousElement);\n        if (!isSelected) {\n            range.collapse(false);\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    return previousElement;\n};\nvar insertAfterBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowDown\" && element.textContent.trimRight().substr(position.start).indexOf(\"\\n\") === -1) ||\n        (event.key === \"ArrowRight\" && position.start >= element.textContent.trimRight().length)) {\n        var nextElement = blockElement.nextElementSibling;\n        if (!nextElement ||\n            (nextElement && (nextElement.tagName === \"TABLE\" || nextElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(nextElement);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar insertBeforeBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowUp\" && element.textContent.substr(0, position.start).indexOf(\"\\n\") === -1) ||\n        ((event.key === \"ArrowLeft\" || (event.key === \"Backspace\" && range.toString() === \"\")) &&\n            position.start === 0)) {\n        var previousElement = blockElement.previousElementSibling;\n        // table || code\n        if (!previousElement ||\n            (previousElement && (previousElement.tagName === \"TABLE\" || previousElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar listToggle = function (vditor, range, type, cancel) {\n    if (cancel === void 0) { cancel = true; }\n    var itemElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n        wbr.remove();\n    });\n    range.insertNode(document.createElement(\"wbr\"));\n    if (cancel && itemElement) {\n        // 取消\n        var pHTML = \"\";\n        for (var i = 0; i < itemElement.parentElement.childElementCount; i++) {\n            var inputElement = itemElement.parentElement.children[i].querySelector(\"input\");\n            if (inputElement) {\n                inputElement.remove();\n            }\n            pHTML += \"<p data-block=\\\"0\\\">\" + itemElement.parentElement.children[i].innerHTML.trimLeft() + \"</p>\";\n        }\n        itemElement.parentElement.insertAdjacentHTML(\"beforebegin\", pHTML);\n        itemElement.parentElement.remove();\n    }\n    else {\n        if (!itemElement) {\n            // 添加\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n            if (!blockElement) {\n                vditor[vditor.currentMode].element.querySelector(\"wbr\").remove();\n                blockElement = vditor[vditor.currentMode].element.querySelector(\"p\");\n                blockElement.innerHTML = \"<wbr>\";\n            }\n            if (type === \"check\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li class=\\\"vditor-task\\\"><input type=\\\"checkbox\\\" /> \" + blockElement.innerHTML + \"</li></ul>\");\n                blockElement.remove();\n            }\n            else if (type === \"list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li>\" + blockElement.innerHTML + \"</li></ul>\");\n                blockElement.remove();\n            }\n            else if (type === \"ordered-list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ol data-block=\\\"0\\\"><li>\" + blockElement.innerHTML + \"</li></ol>\");\n                blockElement.remove();\n            }\n        }\n        else {\n            // 切换\n            if (type === \"check\") {\n                itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                    item.insertAdjacentHTML(\"afterbegin\", \"<input type=\\\"checkbox\\\" />\" + (item.textContent.indexOf(\" \") === 0 ? \"\" : \" \"));\n                    item.classList.add(\"vditor-task\");\n                });\n            }\n            else {\n                if (itemElement.querySelector(\"input\")) {\n                    itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                        item.querySelector(\"input\").remove();\n                        item.classList.remove(\"vditor-task\");\n                    });\n                }\n                var element = void 0;\n                if (type === \"list\") {\n                    element = document.createElement(\"ul\");\n                    element.setAttribute(\"data-marker\", \"*\");\n                }\n                else {\n                    element = document.createElement(\"ol\");\n                    element.setAttribute(\"data-marker\", \"1.\");\n                }\n                element.setAttribute(\"data-block\", \"0\");\n                element.setAttribute(\"data-tight\", itemElement.parentElement.getAttribute(\"data-tight\"));\n                element.innerHTML = itemElement.parentElement.innerHTML;\n                itemElement.parentElement.parentNode.replaceChild(element, itemElement.parentElement);\n            }\n        }\n    }\n};\nvar listIndent = function (vditor, liElement, range) {\n    var previousElement = liElement.previousElementSibling;\n    if (liElement && previousElement) {\n        var liElements_1 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\"\n                && liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_1.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = previousElement.parentElement;\n        var liHTML_1 = \"\";\n        liElements_1.forEach(function (item) {\n            var marker = item.getAttribute(\"data-marker\");\n            if (marker.length !== 1) {\n                marker = \"1\" + marker.slice(-1);\n            }\n            liHTML_1 += \"<li data-node-id=\\\"\" + item.getAttribute(\"data-node-id\") + \"\\\" data-marker=\\\"\" + marker + \"\\\">\" + item.innerHTML + \"</li>\";\n            item.remove();\n        });\n        previousElement.insertAdjacentHTML(\"beforeend\", \"<\" + liParentElement.tagName + \" data-block=\\\"0\\\">\" + liHTML_1 + \"</\" + liParentElement.tagName + \">\");\n        if (vditor.currentMode === \"wysiwyg\") {\n            liParentElement.outerHTML = vditor.lute.SpinVditorDOM(liParentElement.outerHTML);\n        }\n        else {\n            liParentElement.outerHTML = vditor.lute.SpinVditorIRDOM(liParentElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar listOutdent = function (vditor, liElement, range, topListElement) {\n    var liParentLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(liElement.parentElement, \"LI\");\n    if (liParentLiElement) {\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = liElement.parentElement;\n        var liParentAfterElement = liParentElement.cloneNode();\n        var liElements_2 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\" &&\n                liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_2.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        var isMatch_1 = false;\n        var afterHTML_1 = \"\";\n        liParentElement.querySelectorAll(\"li\").forEach(function (item) {\n            if (isMatch_1) {\n                afterHTML_1 += item.outerHTML;\n                if (!item.nextElementSibling && !item.previousElementSibling) {\n                    item.parentElement.remove();\n                }\n                else {\n                    item.remove();\n                }\n            }\n            if (item.isSameNode(liElements_2[liElements_2.length - 1])) {\n                isMatch_1 = true;\n            }\n        });\n        liElements_2.reverse().forEach(function (item) {\n            liParentLiElement.insertAdjacentElement(\"afterend\", item);\n        });\n        if (afterHTML_1) {\n            liParentAfterElement.innerHTML = afterHTML_1;\n            liElements_2[0].insertAdjacentElement(\"beforeend\", liParentAfterElement);\n        }\n        if (vditor.currentMode === \"wysiwyg\") {\n            topListElement.outerHTML = vditor.lute.SpinVditorDOM(topListElement.outerHTML);\n        }\n        else {\n            topListElement.outerHTML = vditor.lute.SpinVditorIRDOM(topListElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar setTableAlign = function (tableElement, type) {\n    var cell = getSelection().getRangeAt(0).startContainer.parentElement;\n    var columnCnt = tableElement.rows[0].cells.length;\n    var rowCnt = tableElement.rows.length;\n    var currentColumn = 0;\n    for (var i = 0; i < rowCnt; i++) {\n        for (var j = 0; j < columnCnt; j++) {\n            if (tableElement.rows[i].cells[j].isSameNode(cell)) {\n                currentColumn = j;\n                break;\n            }\n        }\n    }\n    for (var k = 0; k < rowCnt; k++) {\n        tableElement.rows[k].cells[currentColumn].setAttribute(\"align\", type);\n    }\n};\nvar isHrMD = function (text) {\n    // - _ *\n    var marker = text.trimRight().split(\"\\n\").pop();\n    if (marker === \"\") {\n        return false;\n    }\n    if (marker.replace(/ |-/g, \"\") === \"\"\n        || marker.replace(/ |_/g, \"\") === \"\"\n        || marker.replace(/ |\\*/g, \"\") === \"\") {\n        if (marker.replace(/ /g, \"\").length > 2) {\n            if (marker.indexOf(\"-\") > -1 && marker.trimLeft().indexOf(\" \") === -1\n                && text.trimRight().split(\"\\n\").length > 1) {\n                // 满足 heading\n                return false;\n            }\n            if (marker.indexOf(\"    \") === 0 || marker.indexOf(\"\\t\") === 0) {\n                // 代码块\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n    return false;\n};\nvar isHeadingMD = function (text) {\n    // - =\n    var textArray = text.trimRight().split(\"\\n\");\n    text = textArray.pop();\n    if (text.indexOf(\"    \") === 0 || text.indexOf(\"\\t\") === 0) {\n        return false;\n    }\n    text = text.trimLeft();\n    if (text === \"\" || textArray.length === 0) {\n        return false;\n    }\n    if (text.replace(/-/g, \"\") === \"\"\n        || text.replace(/=/g, \"\") === \"\") {\n        return true;\n    }\n    return false;\n};\nvar execAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (vditor.currentMode === \"wysiwyg\") {\n        afterRenderEvent(vditor, options);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        process_processAfterRender(vditor, options);\n    }\n    else if (vditor.currentMode === \"sv\") {\n        processAfterRender(vditor, options);\n    }\n};\nvar fixList = function (range, vditor, pElement, event) {\n    var _a;\n    var startContainer = range.startContainer;\n    var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"LI\");\n    if (liElement) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\" &&\n            // fix li 中有多个 P 时，在第一个 P 中换行会在下方生成新的 li\n            (!event.shiftKey && pElement && liElement.contains(pElement) && pElement.nextElementSibling)) {\n            if (liElement && !liElement.textContent.endsWith(\"\\n\")) {\n                // li 结尾需 \\n\n                liElement.insertAdjacentText(\"beforeend\", \"\\n\");\n            }\n            range.insertNode(document.createTextNode(\"\\n\\n\"));\n            range.collapse(false);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            !liElement.previousElementSibling && range.toString() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(liElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // 光标位于点和第一个字符中间时，无法删除 li 元素\n            if (liElement.nextElementSibling) {\n                liElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\" + liElement.innerHTML + \"</p>\");\n                liElement.remove();\n            }\n            else {\n                liElement.parentElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\" + liElement.innerHTML + \"</p>\";\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // 空列表删除后与上一级段落对齐\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            liElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" &&\n            range.toString() === \"\" && ((_a = liElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"LI\") {\n            liElement.previousElementSibling.insertAdjacentText(\"beforeend\", \"\\n\\n\");\n            range.selectNodeContents(liElement.previousElementSibling);\n            range.collapse(false);\n            liElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Tab\") {\n            // 光标位于第一/零字符时，tab 用于列表的缩进\n            var isFirst = false;\n            if (range.startOffset === 0\n                && ((startContainer.nodeType === 3 && !startContainer.previousSibling)\n                    || (startContainer.nodeType !== 3 && startContainer.nodeName === \"LI\"))) {\n                // 有序/无序列表\n                isFirst = true;\n            }\n            else if (liElement.classList.contains(\"vditor-task\") && range.startOffset === 1\n                && startContainer.previousSibling.nodeType !== 3\n                && startContainer.previousSibling.tagName === \"INPUT\") {\n                // 任务列表\n                isFirst = true;\n            }\n            if (isFirst || range.toString() !== \"\") {\n                if (event.shiftKey) {\n                    listOutdent(vditor, liElement, range, liElement.parentElement);\n                }\n                else {\n                    listIndent(vditor, liElement, range);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    return false;\n};\n// tab 处理: block code render, table, 列表第一个字符中的 tab 处理单独写在上面\nvar fixTab = function (vditor, range, event) {\n    if (vditor.options.tab && event.key === \"Tab\") {\n        if (event.shiftKey) {\n            // TODO shift+tab\n        }\n        else {\n            if (range.toString() === \"\") {\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n            else {\n                range.extractContents();\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n};\nvar fixMarkdown = function (event, vditor, pElement, range) {\n    if (!pElement) {\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        var pText = String.raw(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\", \"\"], [\"\", \"\"])), pElement.textContent).replace(/\\\\\\|/g, \"\").trim();\n        var pTextList = pText.split(\"|\");\n        if (pText.startsWith(\"|\") && pText.endsWith(\"|\") && pTextList.length > 3) {\n            // table 自动完成\n            var tableHeaderMD = pTextList.map(function () { return \"---\"; }).join(\"|\");\n            tableHeaderMD =\n                pElement.textContent + \"\\n\" + tableHeaderMD.substring(3, tableHeaderMD.length - 3) + \"\\n|<wbr>\";\n            pElement.outerHTML = vditor.lute.SpinVditorDOM(tableHeaderMD);\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // hr 渲染\n        if (isHrMD(pElement.innerHTML) && pElement.previousElementSibling) {\n            // 软换行后 hr 前有内容\n            var pInnerHTML = \"\";\n            var innerHTMLList = pElement.innerHTML.trimRight().split(\"\\n\");\n            if (innerHTMLList.length > 1) {\n                innerHTMLList.pop();\n                pInnerHTML = \"<p data-block=\\\"0\\\">\" + innerHTMLList.join(\"\\n\") + \"</p>\";\n            }\n            pElement.insertAdjacentHTML(\"afterend\", pInnerHTML + \"<hr data-block=\\\"0\\\"><p data-block=\\\"0\\\"><wbr>\\n</p>\");\n            pElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (isHeadingMD(pElement.innerHTML)) {\n            // heading 渲染\n            if (vditor.currentMode === \"wysiwyg\") {\n                pElement.outerHTML = vditor.lute.SpinVditorDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            else {\n                pElement.outerHTML = vditor.lute.SpinVditorIRDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 软换行会被切割 https://github.com/Vanessa219/vditor/issues/220\n    if (range.collapsed && pElement.previousElementSibling && event.key === \"Backspace\" &&\n        !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n        pElement.textContent.trimRight().split(\"\\n\").length > 1 &&\n        (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var lastElement = (0,hasClosest/* getLastNode */.DX)(pElement.previousElementSibling);\n        if (!lastElement.textContent.endsWith(\"\\n\")) {\n            lastElement.textContent = lastElement.textContent + \"\\n\";\n        }\n        lastElement.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + pElement.innerHTML);\n        pElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        return false;\n    }\n    return false;\n};\nvar insertRow = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        rowHTML += \"<td align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </td>\";\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tbody><tr>\" + rowHTML + \"</tr></tbody>\");\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tr>\" + rowHTML + \"</tr>\");\n    }\n    execAfterRender(vditor);\n};\nvar insertRowAbove = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        if (cellElement.tagName === \"TH\") {\n            rowHTML += \"<th align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </th>\";\n        }\n        else {\n            rowHTML += \"<td align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </td>\";\n        }\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<thead><tr>\" + rowHTML + \"</tr></thead>\");\n        range.insertNode(document.createElement(\"wbr\"));\n        var theadHTML = cellElement.parentElement.innerHTML.replace(/<th>/g, \"<td>\").replace(/<\\/th>/g, \"</td>\");\n        cellElement.parentElement.parentElement.nextElementSibling.insertAdjacentHTML(\"afterbegin\", theadHTML);\n        cellElement.parentElement.parentElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<tr>\" + rowHTML + \"</tr>\");\n    }\n    execAfterRender(vditor);\n};\nvar insertColumn = function (vditor, tableElement, cellElement, type) {\n    if (type === void 0) { type = \"afterend\"; }\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        if (i === 0) {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<th> </th>\");\n        }\n        else {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<td> </td>\");\n        }\n    }\n    execAfterRender(vditor);\n};\nvar deleteRow = function (vditor, range, cellElement) {\n    if (cellElement.tagName === \"TD\") {\n        var tbodyElement = cellElement.parentElement.parentElement;\n        if (cellElement.parentElement.previousElementSibling) {\n            range.selectNodeContents(cellElement.parentElement.previousElementSibling.lastElementChild);\n        }\n        else {\n            range.selectNodeContents(tbodyElement.previousElementSibling.lastElementChild.lastElementChild);\n        }\n        if (tbodyElement.childElementCount === 1) {\n            tbodyElement.remove();\n        }\n        else {\n            cellElement.parentElement.remove();\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n    }\n};\nvar deleteColumn = function (vditor, range, tableElement, cellElement) {\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    if (cellElement.previousElementSibling || cellElement.nextElementSibling) {\n        range.selectNodeContents(cellElement.previousElementSibling || cellElement.nextElementSibling);\n        range.collapse(true);\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        var cells = tableElement.rows[i].cells;\n        if (cells.length === 1) {\n            tableElement.remove();\n            highlightToolbar(vditor);\n            break;\n        }\n        cells[index].remove();\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    execAfterRender(vditor);\n};\nvar fixTable = function (vditor, event, range) {\n    var startContainer = range.startContainer;\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (cellElement) {\n        // 换行或软换行：在 cell 中添加 br\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n            if (!cellElement.lastElementChild ||\n                (cellElement.lastElementChild && (!cellElement.lastElementChild.isSameNode(cellElement.lastChild) ||\n                    cellElement.lastElementChild.tagName !== \"BR\"))) {\n                cellElement.insertAdjacentHTML(\"beforeend\", \"<br>\");\n            }\n            var brElement = document.createElement(\"br\");\n            range.insertNode(brElement);\n            range.setStartAfter(brElement);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // tab：光标移向下一个 cell\n        if (event.key === \"Tab\") {\n            if (event.shiftKey) {\n                // shift + tab 光标移动到前一个 cell\n                goPreviousCell(cellElement, range);\n                event.preventDefault();\n                return true;\n            }\n            var nextElement = cellElement.nextElementSibling;\n            if (!nextElement) {\n                if (cellElement.parentElement.nextElementSibling) {\n                    nextElement = cellElement.parentElement.nextElementSibling.firstElementChild;\n                }\n                else if (cellElement.parentElement.parentElement.tagName === \"THEAD\" &&\n                    cellElement.parentElement.parentElement.nextElementSibling) {\n                    nextElement =\n                        cellElement.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild;\n                }\n                else {\n                    nextElement = null;\n                }\n            }\n            if (nextElement) {\n                range.selectNodeContents(nextElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            event.preventDefault();\n            return true;\n        }\n        var tableElement = cellElement.parentElement.parentElement.parentElement;\n        if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            if (cellElement.tagName === \"TH\") {\n                if (tableElement.previousElementSibling) {\n                    range.selectNodeContents(tableElement.previousElementSibling);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"beforebegin\");\n                }\n                return true;\n            }\n            var m = 0;\n            var trElement = cellElement.parentElement;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var previousElement = trElement.previousElementSibling;\n            if (!previousElement) {\n                previousElement = trElement.parentElement.previousElementSibling.firstChild;\n            }\n            range.selectNodeContents(previousElement.cells[m]);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            var trElement = cellElement.parentElement;\n            if (!trElement.nextElementSibling && cellElement.tagName === \"TD\") {\n                if (tableElement.nextElementSibling) {\n                    range.selectNodeContents(tableElement.nextElementSibling);\n                    range.collapse(true);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"afterend\");\n                }\n                return true;\n            }\n            var m = 0;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var nextElement = trElement.nextElementSibling;\n            if (!nextElement) {\n                nextElement = trElement.parentElement.nextElementSibling.firstChild;\n            }\n            range.selectNodeContents(nextElement.cells[m]);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        // focus row input, only wysiwyg\n        if (vditor.currentMode === \"wysiwyg\" &&\n            !(0,compatibility/* isCtrl */.yl)(event) && event.key === \"Enter\" && !event.shiftKey && event.altKey) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElement.focus();\n            inputElement.select();\n            event.preventDefault();\n            return true;\n        }\n        // Backspace：光标移动到前一个 cell\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\"\n            && range.startOffset === 0 && range.toString() === \"\") {\n            var previousCellElement = goPreviousCell(cellElement, range, false);\n            if (!previousCellElement && tableElement) {\n                if (tableElement.textContent.trim() === \"\") {\n                    tableElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\\n</p>\";\n                    (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                }\n                else {\n                    range.setStartBefore(tableElement);\n                    range.collapse(true);\n                }\n                execAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 上方新添加一行\n        if (matchHotKey(\"⇧⌘F\", event)) {\n            insertRowAbove(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 下方新添加一行 https://github.com/Vanessa219/vditor/issues/46\n        if (matchHotKey(\"⌘=\", event)) {\n            insertRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 左方新添加一列\n        if (matchHotKey(\"⇧⌘G\", event)) {\n            insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n            event.preventDefault();\n            return true;\n        }\n        // 后方新添加一列\n        if (matchHotKey(\"⇧⌘=\", event)) {\n            insertColumn(vditor, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前行\n        if (matchHotKey(\"⌘-\", event)) {\n            deleteRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前列\n        if (matchHotKey(\"⇧⌘-\", event)) {\n            deleteColumn(vditor, range, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 剧左\n        if (matchHotKey(\"⇧⌘L\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"left\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"left\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧中\n        if (matchHotKey(\"⇧⌘C\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"center\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"center\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧右\n        if (matchHotKey(\"⇧⌘R\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"right\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"right\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n};\nvar fixCodeBlock = function (vditor, event, codeRenderElement, range) {\n    // 行级代码块中 command + a，近对当前代码块进行全选\n    if (codeRenderElement.tagName === \"PRE\" && matchHotKey(\"⌘A\", event)) {\n        range.selectNodeContents(codeRenderElement.firstElementChild);\n        event.preventDefault();\n        return true;\n    }\n    // tab\n    // TODO shift + tab, shift and 选中文字\n    if (vditor.options.tab && event.key === \"Tab\" && !event.shiftKey && range.toString() === \"\") {\n        range.insertNode(document.createTextNode(vditor.options.tab));\n        range.collapse(false);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // Backspace: 光标位于第零个字符，仅删除代码块标签\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n        var codePosition = (0,selection/* getSelectPosition */.im)(codeRenderElement, vditor[vditor.currentMode].element, range);\n        if ((codePosition.start === 0 ||\n            (codePosition.start === 1 && codeRenderElement.innerText === \"\\n\")) // 空代码块，光标在 \\n 后\n            && range.toString() === \"\") {\n            codeRenderElement.parentElement.outerHTML =\n                \"<p data-block=\\\"0\\\"><wbr>\" + codeRenderElement.firstElementChild.innerHTML + \"</p>\";\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 换行\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        if (!codeRenderElement.firstElementChild.textContent.endsWith(\"\\n\")) {\n            codeRenderElement.firstElementChild.insertAdjacentText(\"beforeend\", \"\\n\");\n        }\n        range.extractContents();\n        range.insertNode(document.createTextNode(\"\\n\"));\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        if (!(0,compatibility/* isFirefox */.vU)()) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                input_input(vditor, range);\n            }\n            else {\n                input(vditor, range);\n            }\n        }\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar fixBlockquote = function (vditor, range, event, pElement) {\n    var startContainer = range.startContainer;\n    var blockquoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"BLOCKQUOTE\");\n    if (blockquoteElement && range.toString() === \"\") {\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey &&\n            (0,selection/* getSelectPosition */.im)(blockquoteElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // Backspace: 光标位于引用中的第零个字符，仅删除引用标签\n            range.insertNode(document.createElement(\"wbr\"));\n            blockquoteElement.outerHTML = blockquoteElement.innerHTML;\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (pElement && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && pElement.parentElement.tagName === \"BLOCKQUOTE\") {\n            // Enter: 空行回车应逐层跳出\n            var isEmpty = false;\n            if (pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\\n\" ||\n                pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                // 空 P\n                isEmpty = true;\n                pElement.remove();\n            }\n            else if (pElement.innerHTML.endsWith(\"\\n\\n\") &&\n                (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start ===\n                    pElement.textContent.length - 1) {\n                // 软换行\n                pElement.innerHTML = pElement.innerHTML.substr(0, pElement.innerHTML.length - 2);\n                isEmpty = true;\n            }\n            if (isEmpty) {\n                // 需添加零宽字符，否则的话无法记录 undo\n                blockquoteElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\\n</p>\");\n                (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        if (vditor.currentMode === \"wysiwyg\" && blockElement && matchHotKey(\"⇧⌘;\", event)) {\n            // 插入 blockquote\n            range.insertNode(document.createElement(\"wbr\"));\n            blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            afterRenderEvent(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n    }\n    return false;\n};\nvar fixTask = function (vditor, range, event) {\n    var startContainer = range.startContainer;\n    var taskItemElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-task\");\n    if (taskItemElement) {\n        if (matchHotKey(\"⇧⌘J\", event)) {\n            // ctrl + shift: toggle checked\n            var inputElement = taskItemElement.firstElementChild;\n            if (inputElement.checked) {\n                inputElement.removeAttribute(\"checked\");\n            }\n            else {\n                inputElement.setAttribute(\"checked\", \"checked\");\n            }\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // Backspace: 在选择框前进行删除\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\"\n            && range.startOffset === 1\n            && ((startContainer.nodeType === 3 && startContainer.previousSibling &&\n                startContainer.previousSibling.tagName === \"INPUT\")\n                || startContainer.nodeType !== 3)) {\n            var previousElement = taskItemElement.previousElementSibling;\n            taskItemElement.querySelector(\"input\").remove();\n            if (previousElement) {\n                var lastNode = (0,hasClosest/* getLastNode */.DX)(previousElement);\n                lastNode.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + taskItemElement.innerHTML.trim());\n                taskItemElement.remove();\n            }\n            else {\n                taskItemElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\" + (taskItemElement.innerHTML.trim() || \"\\n\") + \"</p>\");\n                if (taskItemElement.nextElementSibling) {\n                    taskItemElement.remove();\n                }\n                else {\n                    taskItemElement.parentElement.remove();\n                }\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n            if (taskItemElement.textContent.trim() === \"\") {\n                // 当前任务列表无文字\n                if ((0,hasClosest/* hasClosestByClassName */.fb)(taskItemElement.parentElement, \"vditor-task\")) {\n                    // 为子元素时，需进行反向缩进\n                    var topListElement = (0,hasClosest/* getTopList */.O9)(startContainer);\n                    if (topListElement) {\n                        listOutdent(vditor, taskItemElement, range, topListElement);\n                    }\n                }\n                else {\n                    // 仅有一级任务列表\n                    if (taskItemElement.nextElementSibling) {\n                        // 任务列表下方还有元素，需要使用用段落隔断\n                        var afterHTML_2 = \"\";\n                        var beforeHTML_1 = \"\";\n                        var isAfter_1 = false;\n                        Array.from(taskItemElement.parentElement.children).forEach(function (taskItem) {\n                            if (taskItemElement.isSameNode(taskItem)) {\n                                isAfter_1 = true;\n                            }\n                            else {\n                                if (isAfter_1) {\n                                    afterHTML_2 += taskItem.outerHTML;\n                                }\n                                else {\n                                    beforeHTML_1 += taskItem.outerHTML;\n                                }\n                            }\n                        });\n                        var parentTagName = taskItemElement.parentElement.tagName;\n                        var dataMarker = taskItemElement.parentElement.tagName === \"OL\" ? \"\" : \" data-marker=\\\"\" + taskItemElement.parentElement.getAttribute(\"data-marker\") + \"\\\"\";\n                        var startAttribute = \"\";\n                        if (beforeHTML_1) {\n                            startAttribute = taskItemElement.parentElement.tagName === \"UL\" ? \"\" : \" start=\\\"1\\\"\";\n                            beforeHTML_1 = \"<\" + parentTagName + \" data-tight=\\\"true\\\"\" + dataMarker + \" data-block=\\\"0\\\">\" + beforeHTML_1 + \"</\" + parentTagName + \">\";\n                        }\n                        // <p data-block=\"0\">\\n<wbr></p> => <p data-block=\"0\"><wbr>\\n</p>\n                        // https://github.com/Vanessa219/vditor/issues/430\n                        taskItemElement.parentElement.outerHTML = beforeHTML_1 + \"<p data-block=\\\"0\\\"><wbr>\\n</p><\" + parentTagName + \"\\n data-tight=\\\"true\\\"\" + dataMarker + \" data-block=\\\"0\\\"\" + startAttribute + \">\" + afterHTML_2 + \"</\" + parentTagName + \">\";\n                    }\n                    else {\n                        // 任务列表下方无任务列表元素\n                        taskItemElement.parentElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\"><wbr>\\n</p>\");\n                        if (taskItemElement.parentElement.querySelectorAll(\"li\").length === 1) {\n                            // 任务列表仅有一项时，使用 p 元素替换\n                            taskItemElement.parentElement.remove();\n                        }\n                        else {\n                            // 任务列表有多项时，当前任务列表位于最后一项，移除该任务列表\n                            taskItemElement.remove();\n                        }\n                    }\n                }\n            }\n            else if (startContainer.nodeType !== 3 && range.startOffset === 0 &&\n                startContainer.firstChild.tagName === \"INPUT\") {\n                // 光标位于 input 之前\n                range.setStart(startContainer.childNodes[1], 1);\n            }\n            else {\n                // 当前任务列表有文字，光标后的文字需添加到新任务列表中\n                range.setEndAfter(taskItemElement.lastChild);\n                taskItemElement.insertAdjacentHTML(\"afterend\", \"<li class=\\\"vditor-task\\\" data-marker=\\\"\" + taskItemElement.getAttribute(\"data-marker\") + \"\\\"><input type=\\\"checkbox\\\"> <wbr></li>\");\n                document.querySelector(\"wbr\").after(range.extractContents());\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixDelete = function (vditor, range, event, pElement) {\n    if (range.startContainer.nodeType !== 3) {\n        // 光标位于 hr 前，hr 前有内容\n        var rangeElement = range.startContainer.children[range.startOffset];\n        if (rangeElement && rangeElement.tagName === \"HR\") {\n            range.selectNodeContents(rangeElement.previousElementSibling);\n            range.collapse(false);\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (pElement) {\n        var previousElement = pElement.previousElementSibling;\n        if (previousElement && (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0 &&\n            (((0,compatibility/* isFirefox */.vU)() && previousElement.tagName === \"HR\") || previousElement.tagName === \"TABLE\")) {\n            if (previousElement.tagName === \"TABLE\") {\n                // table 后删除 https://github.com/Vanessa219/vditor/issues/243\n                var lastCellElement = previousElement.lastElementChild.lastElementChild.lastElementChild;\n                lastCellElement.innerHTML =\n                    lastCellElement.innerHTML.trimLeft() + \"<wbr>\" + pElement.textContent.trim();\n                pElement.remove();\n            }\n            else {\n                // 光标位于 hr 后进行删除\n                previousElement.remove();\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixHR = function (range) {\n    if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.nodeType !== 3 &&\n        range.startContainer.tagName === \"HR\") {\n        range.setStartBefore(range.startContainer);\n    }\n};\n// firefox https://github.com/Vanessa219/vditor/issues/407\nvar fixFirefoxArrowUpTable = function (event, blockElement, range) {\n    var _a, _b;\n    if (!(0,compatibility/* isFirefox */.vU)()) {\n        return false;\n    }\n    if (event.key === \"ArrowUp\" && blockElement && ((_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"TABLE\") {\n        var tableElement = blockElement.previousElementSibling;\n        range.selectNodeContents(tableElement.rows[tableElement.rows.length - 1].lastElementChild);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (event.key === \"ArrowDown\" && blockElement && ((_b = blockElement.nextElementSibling) === null || _b === void 0 ? void 0 : _b.tagName) === \"TABLE\") {\n        range.selectNodeContents(blockElement.nextElementSibling.rows[0].cells[0]);\n        range.collapse(true);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar paste = function (vditor, event, callback) { return fixBrowserBehavior_awaiter(void 0, void 0, void 0, function () {\n    var textHTML, textPlain, files, renderers, renderLinkDest, doc, height, code, codeElement, position, tempElement, blockElement, range;\n    var _a;\n    return fixBrowserBehavior_generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                event.stopPropagation();\n                event.preventDefault();\n                if (\"clipboardData\" in event) {\n                    textHTML = event.clipboardData.getData(\"text/html\");\n                    textPlain = event.clipboardData.getData(\"text/plain\");\n                    files = event.clipboardData.files;\n                }\n                else {\n                    textHTML = event.dataTransfer.getData(\"text/html\");\n                    textPlain = event.dataTransfer.getData(\"text/plain\");\n                    if (event.dataTransfer.types.includes(\"Files\")) {\n                        files = event.dataTransfer.items;\n                    }\n                }\n                renderers = {};\n                renderLinkDest = function (node, entering) {\n                    if (!entering) {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    var src = node.TokensStr();\n                    if (node.__internal_object__.Parent.Type === 34 && src && src.indexOf(\"file://\") === -1 &&\n                        vditor.options.upload.linkToImgUrl) {\n                        var xhr_1 = new XMLHttpRequest();\n                        xhr_1.open(\"POST\", vditor.options.upload.linkToImgUrl);\n                        if (vditor.options.upload.token) {\n                            xhr_1.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                        }\n                        if (vditor.options.upload.withCredentials) {\n                            xhr_1.withCredentials = true;\n                        }\n                        setHeaders(vditor, xhr_1);\n                        xhr_1.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n                        xhr_1.onreadystatechange = function () {\n                            if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                                if (xhr_1.status === 200) {\n                                    var responseText = xhr_1.responseText;\n                                    if (vditor.options.upload.linkToImgFormat) {\n                                        responseText = vditor.options.upload.linkToImgFormat(xhr_1.responseText);\n                                    }\n                                    var responseJSON_1 = JSON.parse(responseText);\n                                    if (responseJSON_1.code !== 0) {\n                                        vditor.tip.show(responseJSON_1.msg);\n                                        return;\n                                    }\n                                    var original_1 = responseJSON_1.data.originalURL;\n                                    if (vditor.currentMode === \"sv\") {\n                                        vditor.sv.element.querySelectorAll(\".vditor-sv__marker--link\")\n                                            .forEach(function (item) {\n                                            if (item.textContent === original_1) {\n                                                item.textContent = responseJSON_1.data.url;\n                                            }\n                                        });\n                                    }\n                                    else {\n                                        var imgElement = vditor[vditor.currentMode].element.querySelector(\"img[src=\\\"\" + original_1 + \"\\\"]\");\n                                        imgElement.src = responseJSON_1.data.url;\n                                        if (vditor.currentMode === \"ir\") {\n                                            imgElement.previousElementSibling.previousElementSibling.innerHTML =\n                                                responseJSON_1.data.url;\n                                        }\n                                    }\n                                    execAfterRender(vditor);\n                                }\n                                else {\n                                    vditor.tip.show(xhr_1.responseText);\n                                }\n                                if (vditor.options.upload.linkToImgCallback) {\n                                    vditor.options.upload.linkToImgCallback(xhr_1.responseText);\n                                }\n                            }\n                        };\n                        xhr_1.send(JSON.stringify({ url: src }));\n                    }\n                    if (vditor.currentMode === \"ir\") {\n                        return [\"<span class=\\\"vditor-ir__marker vditor-ir__marker--link\\\">\" + src + \"</span>\", Lute.WalkContinue];\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    else {\n                        return [\"<span class=\\\"vditor-sv__marker--link\\\">\" + src + \"</span>\", Lute.WalkContinue];\n                    }\n                };\n                // 浏览器地址栏拷贝处理\n                if (textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                    \"<a href=\\\"\" + textPlain + \"\\\">\" + textPlain + \"</a>\" ||\n                    textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                        \"<!--StartFragment--><a href=\\\"\" + textPlain + \"\\\">\" + textPlain + \"</a><!--EndFragment-->\") {\n                    textHTML = \"\";\n                }\n                doc = new DOMParser().parseFromString(textHTML, \"text/html\");\n                if (doc.body) {\n                    textHTML = doc.body.innerHTML;\n                }\n                textHTML = Lute.Sanitize(textHTML);\n                vditor.wysiwyg.getComments(vditor);\n                height = vditor[vditor.currentMode].element.scrollHeight;\n                code = processPasteCode(textHTML, textPlain, vditor.currentMode);\n                codeElement = vditor.currentMode === \"sv\" ?\n                    (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"code-block\") :\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"CODE\");\n                if (!codeElement) return [3 /*break*/, 1];\n                // 粘贴在代码位置\n                if (vditor.currentMode === \"sv\") {\n                    document.execCommand(\"insertHTML\", false, textPlain.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"));\n                }\n                else {\n                    position = (0,selection/* getSelectPosition */.im)(event.target, vditor[vditor.currentMode].element);\n                    if (codeElement.parentElement.tagName !== \"PRE\") {\n                        // https://github.com/Vanessa219/vditor/issues/463\n                        textPlain += constants/* Constants.ZWSP */.g.ZWSP;\n                    }\n                    codeElement.textContent = codeElement.textContent.substring(0, position.start)\n                        + textPlain + codeElement.textContent.substring(position.end);\n                    (0,selection/* setSelectionByPosition */.$j)(position.start + textPlain.length, position.start + textPlain.length, codeElement.parentElement);\n                    if ((_a = codeElement.parentElement) === null || _a === void 0 ? void 0 : _a.nextElementSibling.classList.contains(\"vditor-\" + vditor.currentMode + \"__preview\")) {\n                        codeElement.parentElement.nextElementSibling.innerHTML = codeElement.outerHTML;\n                        processCodeRender(codeElement.parentElement.nextElementSibling, vditor);\n                    }\n                }\n                return [3 /*break*/, 6];\n            case 1:\n                if (!code) return [3 /*break*/, 2];\n                callback.pasteCode(code);\n                return [3 /*break*/, 6];\n            case 2:\n                if (!(textHTML.trim() !== \"\")) return [3 /*break*/, 3];\n                tempElement = document.createElement(\"div\");\n                tempElement.innerHTML = textHTML;\n                tempElement.querySelectorAll(\"[style]\").forEach(function (e) {\n                    e.removeAttribute(\"style\");\n                });\n                tempElement.querySelectorAll(\".vditor-copy\").forEach(function (e) {\n                    e.remove();\n                });\n                if (vditor.currentMode === \"ir\") {\n                    renderers.HTML2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorIRDOM(tempElement.innerHTML), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    renderers.HTML2VditorDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorDOM(tempElement.innerHTML), vditor);\n                }\n                else {\n                    renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    processPaste(vditor, vditor.lute.HTML2Md(tempElement.innerHTML).trimRight());\n                }\n                vditor.outline.render(vditor);\n                return [3 /*break*/, 6];\n            case 3:\n                if (!(files.length > 0 && (vditor.options.upload.url || vditor.options.upload.handler))) return [3 /*break*/, 5];\n                return [4 /*yield*/, uploadFiles(vditor, files)];\n            case 4:\n                _b.sent();\n                return [3 /*break*/, 6];\n            case 5:\n                if (textPlain.trim() !== \"\" && files.length === 0) {\n                    if (vditor.currentMode === \"ir\") {\n                        renderers.Md2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorIRDOM(textPlain), vditor);\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        renderers.Md2VditorDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorDOM(textPlain), vditor);\n                    }\n                    else {\n                        renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        processPaste(vditor, textPlain);\n                    }\n                    vditor.outline.render(vditor);\n                }\n                _b.label = 6;\n            case 6:\n                if (vditor.currentMode !== \"sv\") {\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)((0,selection/* getEditorRange */.zh)(vditor).startContainer);\n                    if (blockElement) {\n                        range = (0,selection/* getEditorRange */.zh)(vditor);\n                        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n                            wbr.remove();\n                        });\n                        range.insertNode(document.createElement(\"wbr\"));\n                        if (vditor.currentMode === \"wysiwyg\") {\n                            blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                        }\n                        else {\n                            blockElement.outerHTML = vditor.lute.SpinVditorIRDOM(blockElement.outerHTML);\n                        }\n                        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                    }\n                    vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                        .forEach(function (item) {\n                        processCodeRender(item, vditor);\n                    });\n                }\n                vditor.wysiwyg.triggerRemoveComment(vditor);\n                execAfterRender(vditor);\n                if (vditor[vditor.currentMode].element.scrollHeight - height >\n                    Math.min(vditor[vditor.currentMode].element.clientHeight, window.innerHeight) / 2) {\n                    scrollCenter(vditor);\n                }\n                return [2 /*return*/];\n        }\n    });\n}); };\nvar templateObject_1;\n\n;// CONCATENATED MODULE: ./src/ts/ir/process.ts\n\n\n\n\n\n\n\n\n\nvar processHint = function (vditor) {\n    vditor.hint.render(vditor);\n    var startContainer = (0,selection/* getEditorRange */.zh)(vditor).startContainer;\n    // 代码块语言提示\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (preBeforeElement.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && vditor.hint.recentLanguage) {\n            preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + vditor.hint.recentLanguage;\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            range.selectNodeContents(preBeforeElement);\n        }\n        else {\n            var matchLangData_1 = [];\n            var key_1 = preBeforeElement.textContent.substring(0, (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start)\n                .replace(constants/* Constants.ZWSP */.g.ZWSP, \"\");\n            constants/* Constants.CODE_LANGUAGES.forEach */.g.CODE_LANGUAGES.forEach(function (keyName) {\n                if (keyName.indexOf(key_1.toLowerCase()) > -1) {\n                    matchLangData_1.push({\n                        html: keyName,\n                        value: keyName,\n                    });\n                }\n            });\n            vditor.hint.genHTML(matchLangData_1, key_1, vditor);\n        }\n    }\n};\nvar process_processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        processHint(vditor);\n    }\n    clearTimeout(vditor.ir.processTimeoutId);\n    vditor.ir.processTimeoutId = window.setTimeout(function () {\n        if (vditor.ir.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar process_processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || range.startContainer;\n    if (headingElement) {\n        var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n        if (headingMarkerElement) {\n            headingMarkerElement.innerHTML = value;\n        }\n        else {\n            headingElement.insertAdjacentText(\"afterbegin\", value);\n            range.selectNodeContents(headingElement);\n            range.collapse(false);\n        }\n        input(vditor, range.cloneRange());\n        highlightToolbarIR(vditor);\n    }\n};\nvar removeInline = function (range, vditor, type) {\n    var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", type);\n    if (inlineElement) {\n        inlineElement.firstElementChild.remove();\n        inlineElement.lastElementChild.remove();\n        range.insertNode(document.createElement(\"wbr\"));\n        var tempElement = document.createElement(\"div\");\n        tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(inlineElement.outerHTML);\n        inlineElement.outerHTML = tempElement.firstElementChild.innerHTML.trim();\n    }\n};\nvar process_processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    var typeElement = range.startContainer;\n    if (typeElement.nodeType === 3) {\n        typeElement = typeElement.parentElement;\n    }\n    var useHighlight = true;\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n            if (quoteElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\" + quoteElement.innerHTML + \"</p>\" : quoteElement.innerHTML;\n            }\n        }\n        else if (commandName === \"link\") {\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"a\");\n            if (aElement) {\n                var aTextElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__link\");\n                if (aTextElement) {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    aElement.outerHTML = aTextElement.innerHTML;\n                }\n                else {\n                    aElement.outerHTML = aElement.querySelector(\".vditor-ir__link\").innerHTML + \"<wbr>\";\n                }\n            }\n        }\n        else if (commandName === \"italic\") {\n            removeInline(range, vditor, \"em\");\n        }\n        else if (commandName === \"bold\") {\n            removeInline(range, vditor, \"strong\");\n        }\n        else if (commandName === \"strike\") {\n            removeInline(range, vditor, \"s\");\n        }\n        else if (commandName === \"inline-code\") {\n            removeInline(range, vditor, \"code\");\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n    }\n    else {\n        // 添加\n        if (vditor.ir.element.childNodes.length === 0) {\n            vditor.ir.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n            }\n        }\n        else if (commandName === \"quote\") {\n            if (blockElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n            }\n        }\n        else if (commandName === \"link\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = prefix + \"<wbr>\" + suffix;\n            }\n            else {\n                html = \"\" + prefix + range.toString() + suffix.replace(\")\", \"<wbr>)\");\n            }\n            document.execCommand(\"insertHTML\", false, html);\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\"\n            || commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = prefix + \"<wbr>\" + suffix;\n            }\n            else {\n                if (commandName === \"code\" || commandName === \"table\") {\n                    html = \"\" + prefix + range.toString() + \"<wbr>\" + suffix;\n                }\n                else {\n                    html = \"\" + prefix + range.toString() + suffix + \"<wbr>\";\n                }\n                range.deleteContents();\n            }\n            if (commandName === \"table\" || commandName === \"code\") {\n                html = \"\\n\" + html + \"\\n\\n\";\n            }\n            var spanElement = document.createElement(\"span\");\n            spanElement.innerHTML = html;\n            range.insertNode(spanElement);\n            input(vditor, range);\n            if (commandName === \"table\") {\n                range.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    process_processAfterRender(vditor);\n    if (useHighlight) {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/hint/index.ts\nvar hint_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar hint_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\nvar Hint = /** @class */ (function () {\n    function Hint(hintExtends) {\n        var _this = this;\n        this.splitChar = \"\";\n        this.lastIndex = -1;\n        this.fillEmoji = function (element, vditor) {\n            _this.element.style.display = \"none\";\n            var value = decodeURIComponent(element.getAttribute(\"data-value\"));\n            var range = window.getSelection().getRangeAt(0);\n            // 代码提示\n            if (vditor.currentMode === \"ir\") {\n                var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"code-block-info\");\n                if (preBeforeElement) {\n                    preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + value.trimRight();\n                    range.selectNodeContents(preBeforeElement);\n                    range.collapse(false);\n                    process_processAfterRender(vditor);\n                    preBeforeElement.parentElement.querySelectorAll(\"code\").forEach(function (item) {\n                        item.className = \"language-\" + value.trimRight();\n                    });\n                    processCodeRender(preBeforeElement.parentElement.querySelector(\".vditor-ir__preview\"), vditor);\n                    _this.recentLanguage = value.trimRight();\n                    return;\n                }\n            }\n            if (vditor.currentMode === \"wysiwyg\" && range.startContainer.nodeType !== 3) {\n                var startContainer = range.startContainer;\n                var inputElement = void 0;\n                if (startContainer.classList.contains(\"vditor-input\")) {\n                    inputElement = startContainer;\n                }\n                else {\n                    inputElement = startContainer.firstElementChild;\n                }\n                if (inputElement && inputElement.classList.contains(\"vditor-input\")) {\n                    inputElement.value = value.trimRight();\n                    range.selectNodeContents(inputElement);\n                    range.collapse(false);\n                    // {detail: 1}用于标识这个自定义事件是在编程语言选择后触发的\n                    // 用于在鼠标选择语言后，自动聚焦到代码输入框\n                    inputElement.dispatchEvent(new CustomEvent(\"input\", { detail: 1 }));\n                    _this.recentLanguage = value.trimRight();\n                    return;\n                }\n            }\n            range.setStart(range.startContainer, _this.lastIndex);\n            range.deleteContents();\n            if (vditor.options.hint.parse) {\n                if (vditor.currentMode === \"sv\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorSVDOM(value), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorDOM(value), vditor);\n                }\n                else {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorIRDOM(value), vditor);\n                }\n            }\n            else {\n                (0,selection/* insertHTML */.oC)(value, vditor);\n            }\n            if (_this.splitChar === \":\" && value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                range.insertNode(document.createTextNode(\" \"));\n            }\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            if (vditor.currentMode === \"wysiwyg\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__block\");\n                if (preElement && preElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                    preElement.lastElementChild.innerHTML = preElement.firstElementChild.innerHTML;\n                    processCodeRender(preElement.lastElementChild, vditor);\n                }\n            }\n            else if (vditor.currentMode === \"ir\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker--pre\");\n                if (preElement && preElement.nextElementSibling.classList.contains(\"vditor-ir__preview\")) {\n                    preElement.nextElementSibling.innerHTML = preElement.innerHTML;\n                    processCodeRender(preElement.nextElementSibling, vditor);\n                }\n            }\n            execAfterRender(vditor);\n        };\n        this.timeId = -1;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-hint\";\n        this.recentLanguage = \"\";\n        hintExtends.push({ key: \":\" });\n    }\n    Hint.prototype.render = function (vditor) {\n        var _this = this;\n        if (!window.getSelection().focusNode) {\n            return;\n        }\n        var currentLineValue;\n        var range = getSelection().getRangeAt(0);\n        currentLineValue = range.startContainer.textContent.substring(0, range.startOffset) || \"\";\n        var key = this.getKey(currentLineValue, vditor.options.hint.extend);\n        if (typeof key === \"undefined\") {\n            this.element.style.display = \"none\";\n            clearTimeout(this.timeId);\n        }\n        else {\n            if (this.splitChar === \":\") {\n                var emojiHint_1 = key === \"\" ? vditor.options.hint.emoji : vditor.lute.GetEmojis();\n                var matchEmojiData_1 = [];\n                Object.keys(emojiHint_1).forEach(function (keyName) {\n                    if (keyName.indexOf(key.toLowerCase()) === 0) {\n                        if (emojiHint_1[keyName].indexOf(\".\") > -1) {\n                            matchEmojiData_1.push({\n                                html: \"<img src=\\\"\" + emojiHint_1[keyName] + \"\\\" title=\\\":\" + keyName + \":\\\"/> :\" + keyName + \":\",\n                                value: \":\" + keyName + \":\",\n                            });\n                        }\n                        else {\n                            matchEmojiData_1.push({\n                                html: \"<span class=\\\"vditor-hint__emoji\\\">\" + emojiHint_1[keyName] + \"</span>\" + keyName,\n                                value: emojiHint_1[keyName],\n                            });\n                        }\n                    }\n                });\n                this.genHTML(matchEmojiData_1, key, vditor);\n            }\n            else {\n                vditor.options.hint.extend.forEach(function (item) {\n                    if (item.key === _this.splitChar) {\n                        clearTimeout(_this.timeId);\n                        _this.timeId = window.setTimeout(function () { return hint_awaiter(_this, void 0, void 0, function () {\n                            var _a;\n                            return hint_generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        _a = this.genHTML;\n                                        return [4 /*yield*/, item.hint(key)];\n                                    case 1:\n                                        _a.apply(this, [_b.sent(), key, vditor]);\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); }, vditor.options.hint.delay);\n                    }\n                });\n            }\n        }\n    };\n    Hint.prototype.genHTML = function (data, key, vditor) {\n        var _this = this;\n        if (data.length === 0) {\n            this.element.style.display = \"none\";\n            return;\n        }\n        var editorElement = vditor[vditor.currentMode].element;\n        var textareaPosition = (0,selection/* getCursorPosition */.Ny)(editorElement);\n        var x = textareaPosition.left +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0);\n        var y = textareaPosition.top;\n        var hintsHTML = \"\";\n        data.forEach(function (hintData, i) {\n            if (i > 7) {\n                return;\n            }\n            // process high light\n            var html = hintData.html;\n            if (key !== \"\") {\n                var lastIndex = html.lastIndexOf(\">\") + 1;\n                var replaceHtml = html.substr(lastIndex);\n                var replaceIndex = replaceHtml.toLowerCase().indexOf(key.toLowerCase());\n                if (replaceIndex > -1) {\n                    replaceHtml = replaceHtml.substring(0, replaceIndex) + \"<b>\" +\n                        replaceHtml.substring(replaceIndex, replaceIndex + key.length) + \"</b>\" +\n                        replaceHtml.substring(replaceIndex + key.length);\n                    html = html.substr(0, lastIndex) + replaceHtml;\n                }\n            }\n            hintsHTML += \"<button data-value=\\\"\" + encodeURIComponent(hintData.value) + \" \\\"\\n\" + (i === 0 ? \"class='vditor-hint--current'\" : \"\") + \"> \" + html + \"</button>\";\n        });\n        this.element.innerHTML = hintsHTML;\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(editorElement, null)\n            .getPropertyValue(\"line-height\"), 10);\n        this.element.style.top = y + (lineHeight || 22) + \"px\";\n        this.element.style.left = x + \"px\";\n        this.element.style.display = \"block\";\n        this.element.style.right = \"auto\";\n        this.element.querySelectorAll(\"button\").forEach(function (element) {\n            element.addEventListener(\"click\", function (event) {\n                _this.fillEmoji(element, vditor);\n                event.preventDefault();\n            });\n        });\n        // hint 展现在上部\n        if (this.element.getBoundingClientRect().bottom > window.innerHeight) {\n            this.element.style.top = y - this.element.offsetHeight + \"px\";\n        }\n        if (this.element.getBoundingClientRect().right > window.innerWidth) {\n            this.element.style.left = \"auto\";\n            this.element.style.right = \"0\";\n        }\n    };\n    Hint.prototype.select = function (event, vditor) {\n        if (this.element.querySelectorAll(\"button\").length === 0 ||\n            this.element.style.display === \"none\") {\n            return false;\n        }\n        var currentHintElement = this.element.querySelector(\".vditor-hint--current\");\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.nextElementSibling) {\n                this.element.children[0].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.nextElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.previousElementSibling) {\n                var length_1 = this.element.children.length;\n                this.element.children[length_1 - 1].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.previousElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\" && !event.isComposing) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.fillEmoji(currentHintElement, vditor);\n            return true;\n        }\n        return false;\n    };\n    Hint.prototype.getKey = function (currentLineValue, extend) {\n        var _this = this;\n        this.lastIndex = -1;\n        this.splitChar = \"\";\n        extend.forEach(function (item) {\n            var currentLastIndex = currentLineValue.lastIndexOf(item.key);\n            if (_this.lastIndex < currentLastIndex) {\n                _this.splitChar = item.key;\n                _this.lastIndex = currentLastIndex;\n            }\n        });\n        var key;\n        if (this.lastIndex === -1) {\n            return key;\n        }\n        var lineArray = currentLineValue.split(this.splitChar);\n        var lastItem = lineArray[lineArray.length - 1];\n        var maxLength = 32;\n        if (lineArray.length > 1 && lastItem.trim() === lastItem) {\n            if (lineArray.length === 2 && lineArray[0] === \"\" && lineArray[1].length < maxLength) {\n                key = lineArray[1];\n            }\n            else {\n                var preChar = lineArray[lineArray.length - 2].slice(-1);\n                if ((0,code160to32/* code160to32 */.X)(preChar) === \" \" && lastItem.length < maxLength) {\n                    key = lastItem;\n                }\n            }\n        }\n        return key;\n    };\n    return Hint;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ir/index.ts\n\n\n\n\n\n\n\n\n\n\n\nvar IR = /** @class */ (function () {\n    function IR(vditor) {\n        this.composingLock = false;\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-ir\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\" + vditor.options.placeholder + \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\";\n        this.element = divElement.firstElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    IR.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorIRDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    IR.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input(vditor, getSelection().getRangeAt(0).cloneRange());\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            input(vditor, getSelection().getRangeAt(0).cloneRange(), false, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                if (event.target.checked) {\n                    event.target.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    event.target.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                process_processAfterRender(vditor);\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            // 点击后光标落于预览区\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-ir__preview\");\n            if (!previewElement) {\n                previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            }\n            if (previewElement) {\n                if (previewElement.previousElementSibling.firstElementChild) {\n                    range.selectNodeContents(previewElement.previousElementSibling.firstElementChild);\n                }\n                else {\n                    // 行内数学公式\n                    range.selectNodeContents(previewElement.previousElementSibling);\n                }\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                scrollCenter(vditor);\n            }\n            // 点击图片光标选中图片地址\n            if (event.target.tagName === \"IMG\") {\n                var linkElement = event.target.parentElement.querySelector(\".vditor-ir__marker--link\");\n                if (linkElement) {\n                    range.selectNode(linkElement);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n            }\n            // 打开链接\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"a\");\n            if (aElement && (!aElement.classList.contains(\"vditor-ir__node--expand\"))) {\n                window.open(aElement.querySelector(\":scope > .vditor-ir__marker--link\").textContent);\n                return;\n            }\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            if (range.toString() === \"\") {\n                expandMarker(range, vditor);\n            }\n            else {\n                // https://github.com/Vanessa219/vditor/pull/681 当点击选中区域时 eventTarget 与 range 不一致，需延迟等待 range 发生变化\n                setTimeout(function () {\n                    expandMarker((0,selection/* getEditorRange */.zh)(vditor), vditor);\n                });\n            }\n            clickToc(event, vditor);\n            highlightToolbarIR(vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            highlightToolbarIR(vditor);\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.ir.element.innerHTML !== \"\" && vditor.ir.element.childNodes.length === 1 &&\n                vditor.ir.element.firstElementChild && vditor.ir.element.firstElementChild.tagName === \"P\"\n                && vditor.ir.element.firstElementChild.childElementCount === 0\n                && (vditor.ir.element.textContent === \"\" || vditor.ir.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.ir.element.innerHTML = \"\";\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                    expandMarker(range, vditor);\n                }\n                // 数学公式前是空块，空块前是 table，在空块前删除，数学公式会多一个 br\n                _this.element.querySelectorAll(\".language-math\").forEach(function (item) {\n                    var brElement = item.querySelector(\"br\");\n                    if (brElement) {\n                        brElement.remove();\n                    }\n                });\n            }\n            else if (event.key.indexOf(\"Arrow\") > -1) {\n                if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                    processHint(vditor);\n                }\n                expandMarker(range, vditor);\n            }\n            else if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\") {\n                // https://github.com/Vanessa219/vditor/issues/508 IR 删除到节点需展开\n                expandMarker(range, vditor);\n            }\n            var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            if (previewRenderElement) {\n                if (event.key === \"ArrowUp\" || event.key === \"ArrowLeft\") {\n                    if (previewRenderElement.previousElementSibling.firstElementChild) {\n                        range.selectNodeContents(previewRenderElement.previousElementSibling.firstElementChild);\n                    }\n                    else {\n                        // 行内数学公式/html entity\n                        range.selectNodeContents(previewRenderElement.previousElementSibling);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n                if (previewRenderElement.tagName === \"SPAN\" &&\n                    (event.key === \"ArrowDown\" || event.key === \"ArrowRight\")) {\n                    if (previewRenderElement.parentElement.getAttribute(\"data-type\") === \"html-entity\") {\n                        // html entity\n                        previewRenderElement.parentElement.insertAdjacentText(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n                        range.setStart(previewRenderElement.parentElement.nextSibling, 1);\n                    }\n                    else {\n                        range.selectNodeContents(previewRenderElement.parentElement.lastElementChild);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        });\n    };\n    return IR;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/markdown/getHTML.ts\n\nvar getHTML = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return vditor.lute.Md2HTML(getMarkdown(vditor));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2HTML(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2HTML(vditor.ir.element.innerHTML);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(792);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(198);\n;// CONCATENATED MODULE: ./src/ts/outline/index.ts\n\n\n\n\nvar Outline = /** @class */ (function () {\n    function Outline(outlineLabel) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-outline\";\n        this.element.innerHTML = \"<div class=\\\"vditor-outline__title\\\">\" + outlineLabel + \"</div>\\n<div class=\\\"vditor-outline__content\\\"></div>\";\n    }\n    Outline.prototype.render = function (vditor) {\n        var html = \"\";\n        if (vditor.preview.element.style.display === \"block\") {\n            html = (0,outlineRender/* outlineRender */.k)(vditor.preview.element.lastElementChild, this.element.lastElementChild, vditor);\n        }\n        else {\n            html = (0,outlineRender/* outlineRender */.k)(vditor[vditor.currentMode].element, this.element.lastElementChild, vditor);\n        }\n        return html;\n    };\n    Outline.prototype.toggle = function (vditor, show) {\n        var _a;\n        if (show === void 0) { show = true; }\n        var btnElement = (_a = vditor.toolbar.elements.outline) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n        if (show && window.innerWidth >= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH) {\n            this.element.style.display = \"block\";\n            this.render(vditor);\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.add(\"vditor-menu--current\");\n        }\n        else {\n            this.element.style.display = \"none\";\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.remove(\"vditor-menu--current\");\n        }\n        if (getSelection().rangeCount > 0) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                vditor[vditor.currentMode].element.focus();\n            }\n        }\n        setPadding(vditor);\n    };\n    return Outline;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(207);\n;// CONCATENATED MODULE: ./src/ts/preview/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Preview = /** @class */ (function () {\n    function Preview(vditor) {\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-preview\";\n        var previewElement = document.createElement(\"div\");\n        previewElement.className = \"vditor-reset\";\n        if (vditor.options.classes.preview) {\n            previewElement.classList.add(vditor.options.classes.preview);\n        }\n        previewElement.style.maxWidth = vditor.options.preview.maxWidth + \"px\";\n        previewElement.addEventListener(\"copy\", function (event) {\n            if (event.target.tagName === \"TEXTAREA\") {\n                // https://github.com/Vanessa219/vditor/issues/901\n                return;\n            }\n            var tempElement = document.createElement(\"div\");\n            tempElement.className = \"vditor-reset\";\n            tempElement.appendChild(getSelection().getRangeAt(0).cloneContents());\n            _this.copyToX(vditor, tempElement);\n            event.preventDefault();\n        });\n        previewElement.addEventListener(\"click\", function (event) {\n            var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n            if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                if (headingElement) {\n                    _this.element.scrollTop = headingElement.offsetTop;\n                }\n                return;\n            }\n            if (event.target.tagName === \"IMG\") {\n                (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n            }\n        });\n        var actions = vditor.options.preview.actions;\n        var actionElement = document.createElement(\"div\");\n        actionElement.className = \"vditor-preview__action\";\n        var actionHtml = [];\n        for (var i = 0; i < actions.length; i++) {\n            var action = actions[i];\n            if (typeof action === \"object\") {\n                actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"\" + action.key + \"\\\" class=\\\"\" + action.className + \"\\\"\" + (action.tooltip ? \" aria-label=\\\"\" + action.tooltip + \"\\\"\" : \"\") + \"\\\">\" + action.text + \"</button>\");\n                continue;\n            }\n            switch (action) {\n                case \"desktop\":\n                    actionHtml.push(\"<button type=\\\"button\\\" class=\\\"vditor-preview__action--current\\\" data-type=\\\"desktop\\\">Desktop</button>\");\n                    break;\n                case \"tablet\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"tablet\\\">Tablet</button>\");\n                    break;\n                case \"mobile\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mobile\\\">Mobile/Wechat</button>\");\n                    break;\n                case \"mp-wechat\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mp-wechat\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u516C\\u4F17\\u53F7\\\"><svg><use xlink:href=\\\"#vditor-icon-mp-wechat\\\"></use></svg></button>\");\n                    break;\n                case \"zhihu\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"zhihu\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u77E5\\u4E4E\\\"><svg><use xlink:href=\\\"#vditor-icon-zhihu\\\"></use></svg></button>\");\n                    break;\n            }\n        }\n        actionElement.innerHTML = actionHtml.join(\"\");\n        if (actions.length === 0) {\n            actionElement.style.display = \"none\";\n        }\n        this.element.appendChild(actionElement);\n        this.element.appendChild(previewElement);\n        actionElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btn = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (!btn) {\n                return;\n            }\n            var type = btn.getAttribute(\"data-type\");\n            var actionCustom = actions.find(function (w) { return (w === null || w === void 0 ? void 0 : w.key) === type; });\n            if (actionCustom) {\n                actionCustom.click(type);\n                return;\n            }\n            if (type === \"mp-wechat\" || type === \"zhihu\") {\n                _this.copyToX(vditor, _this.element.lastElementChild.cloneNode(true), type);\n                return;\n            }\n            if (type === \"desktop\") {\n                previewElement.style.width = \"auto\";\n            }\n            else if (type === \"tablet\") {\n                previewElement.style.width = \"780px\";\n            }\n            else {\n                previewElement.style.width = \"360px\";\n            }\n            if (previewElement.scrollWidth > previewElement.parentElement.clientWidth) {\n                previewElement.style.width = \"auto\";\n            }\n            _this.render(vditor);\n            actionElement.querySelectorAll(\"button\").forEach(function (item) {\n                item.classList.remove(\"vditor-preview__action--current\");\n            });\n            btn.classList.add(\"vditor-preview__action--current\");\n        });\n    }\n    Preview.prototype.render = function (vditor, value) {\n        var _this = this;\n        clearTimeout(this.mdTimeoutId);\n        if (this.element.style.display === \"none\") {\n            if (this.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n                vditor.tip.hide();\n            }\n            return;\n        }\n        if (value) {\n            this.element.lastElementChild.innerHTML = value;\n            return;\n        }\n        if (getMarkdown(vditor)\n            .replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\") === \"\") {\n            this.element.lastElementChild.innerHTML = \"\";\n            return;\n        }\n        var renderStartTime = new Date().getTime();\n        var markdownText = getMarkdown(vditor);\n        this.mdTimeoutId = window.setTimeout(function () {\n            if (vditor.options.preview.url) {\n                var xhr_1 = new XMLHttpRequest();\n                xhr_1.open(\"POST\", vditor.options.preview.url);\n                xhr_1.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n                xhr_1.onreadystatechange = function () {\n                    if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                        if (xhr_1.status === 200) {\n                            var responseJSON = JSON.parse(xhr_1.responseText);\n                            if (responseJSON.code !== 0) {\n                                vditor.tip.show(responseJSON.msg);\n                                return;\n                            }\n                            if (vditor.options.preview.transform) {\n                                responseJSON.data = vditor.options.preview.transform(responseJSON.data);\n                            }\n                            _this.element.lastElementChild.innerHTML = responseJSON.data;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                        else {\n                            var html = vditor.lute.Md2HTML(markdownText);\n                            if (vditor.options.preview.transform) {\n                                html = vditor.options.preview.transform(html);\n                            }\n                            _this.element.lastElementChild.innerHTML = html;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                    }\n                };\n                xhr_1.send(JSON.stringify({ markdownText: markdownText }));\n            }\n            else {\n                var html = vditor.lute.Md2HTML(markdownText);\n                if (vditor.options.preview.transform) {\n                    html = vditor.options.preview.transform(html);\n                }\n                _this.element.lastElementChild.innerHTML = html;\n                _this.afterRender(vditor, renderStartTime);\n            }\n        }, vditor.options.preview.delay);\n    };\n    Preview.prototype.afterRender = function (vditor, startTime) {\n        if (vditor.options.preview.parse) {\n            vditor.options.preview.parse(this.element);\n        }\n        var time = (new Date().getTime() - startTime);\n        if ((new Date().getTime() - startTime) > 2600) {\n            // https://github.com/b3log/vditor/issues/67\n            vditor.tip.show(window.VditorI18n.performanceTip.replace(\"${x}\", time.toString()));\n            vditor.preview.element.setAttribute(\"data-type\", \"renderPerformance\");\n        }\n        else if (vditor.preview.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n            vditor.tip.hide();\n            vditor.preview.element.removeAttribute(\"data-type\");\n        }\n        var cmtFocusElement = vditor.preview.element.querySelector(\".vditor-comment--focus\");\n        if (cmtFocusElement) {\n            cmtFocusElement.classList.remove(\"vditor-comment--focus\");\n        }\n        (0,codeRender/* codeRender */.O)(vditor.preview.element.lastElementChild);\n        (0,highlightRender/* highlightRender */.s)(vditor.options.preview.hljs, vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,mermaidRender/* mermaidRender */.i)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,flowchartRender/* flowchartRender */.P)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,graphvizRender/* graphvizRender */.v)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,chartRender/* chartRender */.p)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,mindmapRender/* mindmapRender */.P)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,plantumlRender/* plantumlRender */.B)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,abcRender/* abcRender */.Q)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,mediaRender/* mediaRender */.Y)(vditor.preview.element.lastElementChild);\n        // toc render\n        var editorElement = vditor.preview.element;\n        var tocHTML = vditor.outline.render(vditor);\n        if (tocHTML === \"\") {\n            tocHTML = \"[ToC]\";\n        }\n        editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n            item.innerHTML = tocHTML;\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        (0,mathRender/* mathRender */.H)(vditor.preview.element.lastElementChild, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    };\n    Preview.prototype.copyToX = function (vditor, copyElement, type) {\n        if (type === void 0) { type = \"mp-wechat\"; }\n        // fix math render\n        if (type !== \"zhihu\") {\n            copyElement.querySelectorAll(\".katex-html .base\").forEach(function (item) {\n                item.style.display = \"initial\";\n            });\n        }\n        else {\n            copyElement.querySelectorAll(\".language-math\").forEach(function (item) {\n                item.outerHTML = \"<img class=\\\"Formula-image\\\" data-eeimg=\\\"true\\\" src=\\\"//www.zhihu.com/equation?tex=\\\" alt=\\\"\" + item.getAttribute(\"data-math\") + \"\\\\\\\" style=\\\"display: block; margin: 0 auto; max-width: 100%;\\\">\";\n            });\n        }\n        // 防止背景色被粘贴到公众号中\n        copyElement.style.backgroundColor = \"#fff\";\n        // 代码背景\n        copyElement.querySelectorAll(\"code\").forEach(function (item) {\n            item.style.backgroundImage = \"none\";\n        });\n        this.element.append(copyElement);\n        var range = copyElement.ownerDocument.createRange();\n        range.selectNode(copyElement);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        document.execCommand(\"copy\");\n        this.element.lastElementChild.remove();\n        vditor.tip.show(\"\\u5DF2\\u590D\\u5236\\uFF0C\\u53EF\\u5230\" + (type === \"zhihu\" ? \"知乎\" : \"微信公众号平台\") + \"\\u8FDB\\u884C\\u7C98\\u8D34\");\n    };\n    return Preview;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/resize/index.ts\nvar Resize = /** @class */ (function () {\n    function Resize(vditor) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-resize vditor-resize--\" + vditor.options.resize.position;\n        this.element.innerHTML = \"<div><svg><use xlink:href=\\\"#vditor-icon-resize\\\"></use></svg></div>\";\n        this.bindEvent(vditor);\n    }\n    Resize.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"mousedown\", function (event) {\n            var documentSelf = document;\n            var y = event.clientY;\n            var height = vditor.element.offsetHeight;\n            var minHeight = 63 + vditor.element.querySelector(\".vditor-toolbar\").clientHeight;\n            documentSelf.ondragstart = function () { return false; };\n            if (window.captureEvents) {\n                window.captureEvents();\n            }\n            _this.element.classList.add(\"vditor-resize--selected\");\n            documentSelf.onmousemove = function (moveEvent) {\n                if (vditor.options.resize.position === \"top\") {\n                    vditor.element.style.height = Math.max(minHeight, height + (y - moveEvent.clientY)) + \"px\";\n                }\n                else {\n                    vditor.element.style.height = Math.max(minHeight, height + (moveEvent.clientY - y)) + \"px\";\n                }\n                if (vditor.options.typewriterMode) {\n                    vditor.sv.element.style.paddingBottom =\n                        vditor.sv.element.parentElement.offsetHeight / 2 + \"px\";\n                }\n            };\n            documentSelf.onmouseup = function () {\n                if (vditor.options.resize.after) {\n                    vditor.options.resize.after(vditor.element.offsetHeight - height);\n                }\n                if (window.captureEvents) {\n                    window.captureEvents();\n                }\n                documentSelf.onmousemove = null;\n                documentSelf.onmouseup = null;\n                documentSelf.ondragstart = null;\n                documentSelf.onselectstart = null;\n                documentSelf.onselect = null;\n                _this.element.classList.remove(\"vditor-resize--selected\");\n            };\n        });\n    };\n    return Resize;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/sv/index.ts\n\n\n\n\n\nvar Editor = /** @class */ (function () {\n    function Editor(vditor) {\n        this.composingLock = false;\n        this.element = document.createElement(\"pre\");\n        this.element.className = \"vditor-sv vditor-reset\";\n        this.element.setAttribute(\"placeholder\", vditor.options.placeholder);\n        this.element.setAttribute(\"contenteditable\", \"true\");\n        this.element.setAttribute(\"spellcheck\", \"false\");\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    Editor.prototype.copy = function (event, vditor) {\n        event.stopPropagation();\n        event.preventDefault();\n        event.clipboardData.setData(\"text/plain\", getSelectText(vditor[vditor.currentMode].element));\n    };\n    Editor.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            if (vditor.preview.element.style.display !== \"block\") {\n                return;\n            }\n            var textScrollTop = _this.element.scrollTop;\n            var textHeight = _this.element.clientHeight;\n            var textScrollHeight = _this.element.scrollHeight - parseFloat(_this.element.style.paddingBottom || \"0\");\n            var preview = vditor.preview.element;\n            if ((textScrollTop / textHeight > 0.5)) {\n                preview.scrollTop = (textScrollTop + textHeight) *\n                    preview.scrollHeight / textScrollHeight - textHeight;\n            }\n            else {\n                preview.scrollTop = textScrollTop *\n                    preview.scrollHeight / textScrollHeight;\n            }\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                inputEvent(vditor, event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            inputEvent(vditor, event);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.sv.element.innerHTML !== \"\" && vditor.sv.element.childNodes.length === 1 &&\n                vditor.sv.element.firstElementChild && vditor.sv.element.firstElementChild.tagName === \"DIV\"\n                && vditor.sv.element.firstElementChild.childElementCount === 2\n                && (vditor.sv.element.firstElementChild.textContent === \"\" || vditor.sv.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.sv.element.innerHTML = \"\";\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n        });\n    };\n    return Editor;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/tip/index.ts\nvar Tip = /** @class */ (function () {\n    function Tip() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-tip\";\n    }\n    Tip.prototype.show = function (text, time) {\n        var _this = this;\n        if (time === void 0) { time = 6000; }\n        this.element.className = \"vditor-tip vditor-tip--show\";\n        if (time === 0) {\n            this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\" + text + \"\\n<div class=\\\"vditor-tip__close\\\">X</div></div>\";\n            this.element.querySelector(\".vditor-tip__close\").addEventListener(\"click\", function () {\n                _this.hide();\n            });\n            return;\n        }\n        this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\" + text + \"</div>\";\n        setTimeout(function () {\n            _this.hide();\n        }, time);\n    };\n    Tip.prototype.hide = function () {\n        this.element.className = \"vditor-messageElementtip\";\n        this.element.innerHTML = \"\";\n    };\n    return Tip;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ui/setPreviewMode.ts\n\n\nvar setPreviewMode = function (mode, vditor) {\n    if (vditor.options.preview.mode === mode) {\n        return;\n    }\n    vditor.options.preview.mode = mode;\n    switch (mode) {\n        case \"both\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"block\";\n            vditor.preview.render(vditor);\n            setCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        case \"editor\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"none\";\n            removeCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        default:\n            break;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Both.ts\nvar Both_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Both = /** @class */ (function (_super) {\n    Both_extends(Both, _super);\n    function Both(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.preview.mode === \"both\") {\n            _this.element.children[0].classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (vditor.currentMode !== \"sv\") {\n                return;\n            }\n            if (vditor.options.preview.mode === \"both\") {\n                setPreviewMode(\"editor\", vditor);\n            }\n            else {\n                setPreviewMode(\"both\", vditor);\n            }\n        });\n        return _this;\n    }\n    return Both;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Br.ts\nvar Br = /** @class */ (function () {\n    function Br() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__br\";\n    }\n    return Br;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(968);\n;// CONCATENATED MODULE: ./src/ts/toolbar/CodeTheme.ts\nvar CodeTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar CodeTheme = /** @class */ (function (_super) {\n    CodeTheme_extends(CodeTheme, _super);\n    function CodeTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        constants/* Constants.CODE_THEME.forEach */.g.CODE_THEME.forEach(function (theme) {\n            innerHTML += \"<button>\" + theme + \"</button>\";\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\" + window.innerHeight / 2 + \"px\\\">\" + innerHTML + \"</div>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.hljs.style = event.target.textContent;\n                (0,setCodeTheme/* setCodeTheme */.Y)(event.target.textContent, vditor.options.cdn);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return CodeTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/ContentTheme.ts\nvar ContentTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar ContentTheme = /** @class */ (function (_super) {\n    ContentTheme_extends(ContentTheme, _super);\n    function ContentTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        Object.keys(vditor.options.preview.theme.list).forEach(function (key) {\n            innerHTML += \"<button data-type=\\\"\" + key + \"\\\">\" + vditor.options.preview.theme.list[key] + \"</button>\";\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\" + window.innerHeight / 2 + \"px\\\">\" + innerHTML + \"</div>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.theme.current = event.target.getAttribute(\"data-type\");\n                (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return ContentTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Counter.ts\nvar Counter = /** @class */ (function () {\n    function Counter(vditor) {\n        this.element = document.createElement(\"span\");\n        this.element.className = \"vditor-counter vditor-tooltipped vditor-tooltipped__nw\";\n        this.render(vditor, \"\");\n    }\n    Counter.prototype.render = function (vditor, mdText) {\n        var length = mdText.endsWith(\"\\n\") ? mdText.length - 1 : mdText.length;\n        if (vditor.options.counter.type === \"text\" && vditor[vditor.currentMode]) {\n            var tempElement = vditor[vditor.currentMode].element.cloneNode(true);\n            tempElement.querySelectorAll(\".vditor-wysiwyg__preview\").forEach(function (item) {\n                item.remove();\n            });\n            length = tempElement.textContent.length;\n        }\n        if (typeof vditor.options.counter.max === \"number\") {\n            if (length > vditor.options.counter.max) {\n                this.element.className = \"vditor-counter vditor-counter--error\";\n            }\n            else {\n                this.element.className = \"vditor-counter\";\n            }\n            this.element.innerHTML = length + \"/\" + vditor.options.counter.max;\n        }\n        else {\n            this.element.innerHTML = \"\" + length;\n        }\n        this.element.setAttribute(\"aria-label\", vditor.options.counter.type);\n        if (vditor.options.counter.after) {\n            vditor.options.counter.after(length, {\n                enable: vditor.options.counter.enable,\n                max: vditor.options.counter.max,\n                type: vditor.options.counter.type,\n            });\n        }\n    };\n    return Counter;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Custom.ts\nvar Custom_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Custom = /** @class */ (function (_super) {\n    Custom_extends(Custom, _super);\n    function Custom(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].innerHTML = menuItem.icon;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (event.currentTarget.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            menuItem.click(event, vditor);\n        });\n        return _this;\n    }\n    return Custom;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Devtools.ts\nvar Devtools_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Devtools = /** @class */ (function (_super) {\n    Devtools_extends(Devtools, _super);\n    function Devtools(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.firstElementChild.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"none\";\n                setPadding(vditor);\n            }\n            else {\n                btnElement.classList.add(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"block\";\n                setPadding(vditor);\n                vditor.devtools.renderEchart(vditor);\n            }\n        });\n        return _this;\n    }\n    return Devtools;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Divider.ts\nvar Divider = /** @class */ (function () {\n    function Divider() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__divider\";\n    }\n    return Divider;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Emoji.ts\nvar Emoji_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Emoji = /** @class */ (function (_super) {\n    Emoji_extends(Emoji, _super);\n    function Emoji(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-panel vditor-panel--arrow\";\n        var commonEmojiHTML = \"\";\n        Object.keys(vditor.options.hint.emoji).forEach(function (key) {\n            var emojiValue = vditor.options.hint.emoji[key];\n            if (emojiValue.indexOf(\".\") > -1) {\n                commonEmojiHTML += \"<button data-value=\\\":\" + key + \": \\\" data-key=\\\":\" + key + \":\\\"><img\\ndata-value=\\\":\" + key + \": \\\" data-key=\\\":\" + key + \":\\\" class=\\\"vditor-emojis__icon\\\" src=\\\"\" + emojiValue + \"\\\"/></button>\";\n            }\n            else {\n                commonEmojiHTML += \"<button data-value=\\\"\" + emojiValue + \" \\\"\\n data-key=\\\"\" + key + \"\\\"><span class=\\\"vditor-emojis__icon\\\">\" + emojiValue + \"</span></button>\";\n            }\n        });\n        var tailHTML = \"<div class=\\\"vditor-emojis__tail\\\">\\n    <span class=\\\"vditor-emojis__tip\\\"></span><span>\" + (vditor.options.hint.emojiTail || \"\") + \"</span>\\n</div>\";\n        panelElement.innerHTML = \"<div class=\\\"vditor-emojis\\\" style=\\\"max-height: \" + (vditor.options.height === \"auto\" ? \"auto\" : vditor.options.height - 80) + \"px\\\">\" + commonEmojiHTML + \"</div>\" + tailHTML;\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, _this.element.children[0], menuItem.level);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Emoji.prototype._bindEvent = function (vditor, panelElement) {\n        panelElement.querySelectorAll(\".vditor-emojis button\").forEach(function (element) {\n            element.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                var value = element.getAttribute(\"data-value\");\n                var range = (0,selection/* getEditorRange */.zh)(vditor);\n                var html = value;\n                if (vditor.currentMode === \"wysiwyg\") {\n                    html = vditor.lute.SpinVditorDOM(value);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    html = vditor.lute.SpinVditorIRDOM(value);\n                }\n                if (value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                    var tempElement = document.createElement(\"div\");\n                    tempElement.innerHTML = html;\n                    html = tempElement.firstElementChild.firstElementChild.outerHTML + \" \";\n                    (0,selection/* insertHTML */.oC)(html, vditor);\n                }\n                else {\n                    range.extractContents();\n                    range.insertNode(document.createTextNode(value));\n                }\n                range.collapse(false);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                panelElement.style.display = \"none\";\n                execAfterRender(vditor);\n            });\n            element.addEventListener(\"mouseover\", function (event) {\n                if (event.target.tagName === \"BUTTON\") {\n                    panelElement.querySelector(\".vditor-emojis__tip\").innerHTML =\n                        event.target.getAttribute(\"data-key\");\n                }\n            });\n        });\n    };\n    return Emoji;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/export/index.ts\n\n\nvar download = function (vditor, content, filename) {\n    var aElement = document.createElement(\"a\");\n    if (\"download\" in aElement) {\n        aElement.download = filename;\n        aElement.style.display = \"none\";\n        aElement.href = URL.createObjectURL(new Blob([content]));\n        document.body.appendChild(aElement);\n        aElement.click();\n        aElement.remove();\n    }\n    else {\n        vditor.tip.show(window.VditorI18n.downloadTip, 0);\n    }\n};\nvar exportMarkdown = function (vditor) {\n    var content = getMarkdown(vditor);\n    download(vditor, content, content.substr(0, 10) + \".md\");\n};\nvar exportPDF = function (vditor) {\n    vditor.tip.show(window.VditorI18n.generate, 3800);\n    var iframe = document.querySelector(\"iframe\");\n    iframe.contentDocument.open();\n    iframe.contentDocument.write(\"<link rel=\\\"stylesheet\\\" href=\\\"\" + vditor.options.cdn + \"/dist/index.css\\\"/>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/method.min.js\\\"></script>\\n<div id=\\\"preview\\\"></div>\\n<script>\\nwindow.addEventListener(\\\"message\\\", (e) => {\\n  if(!e.data) {\\n    return;\\n  }\\n  Vditor.preview(document.getElementById('preview'), e.data, {\\n    markdown: {\\n      theme: \\\"\" + vditor.options.preview.theme + \"\\\"\\n    },\\n    hljs: {\\n      style: \\\"\" + vditor.options.preview.hljs.style + \"\\\"\\n    }\\n  });\\n  setTimeout(() => {\\n        window.print();\\n    }, 3600);\\n}, false);\\n</script>\");\n    iframe.contentDocument.close();\n    setTimeout(function () {\n        iframe.contentWindow.postMessage(getMarkdown(vditor), \"*\");\n    }, 200);\n};\nvar exportHTML = function (vditor) {\n    var content = getHTML(vditor);\n    var html = \"<html><head><link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"\" + vditor.options.cdn + \"/dist/index.css\\\"/>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/js/i18n/\" + vditor.options.lang + \".js\\\"></script>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/method.min.js\\\"></script></head>\\n<body><div class=\\\"vditor-reset\\\" id=\\\"preview\\\">\" + content + \"</div>\\n<script>\\n    const previewElement = document.getElementById('preview')\\n    Vditor.setContentTheme('\" + vditor.options.preview.theme.current + \"', '\" + vditor.options.preview.theme.path + \"');\\n    Vditor.codeRender(previewElement);\\n    Vditor.highlightRender(\" + JSON.stringify(vditor.options.preview.hljs) + \", previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.mathRender(previewElement, {\\n        cdn: '\" + vditor.options.cdn + \"',\\n        math: \" + JSON.stringify(vditor.options.preview.math) + \",\\n    });\\n    Vditor.mermaidRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.flowchartRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.graphvizRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.chartRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.mindmapRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.abcRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.mediaRender(previewElement);\\n    Vditor.speechRender(previewElement);\\n</script>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/js/icons/\" + vditor.options.icon + \".js\\\"></script></body></html>\";\n    download(vditor, html, content.substr(0, 10) + \".html\");\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Export.ts\nvar Export_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Export = /** @class */ (function (_super) {\n    Export_extends(Export, _super);\n    function Export(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-type=\\\"markdown\\\">Markdown</button>\\n<button data-type=\\\"pdf\\\">PDF</button>\\n<button data-type=\\\"html\\\">HTML</button>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = event.target;\n            if (btnElement.tagName === \"BUTTON\") {\n                switch (btnElement.getAttribute(\"data-type\")) {\n                    case \"markdown\":\n                        exportMarkdown(vditor);\n                        break;\n                    case \"pdf\":\n                        exportPDF(vditor);\n                        break;\n                    case \"html\":\n                        exportHTML(vditor);\n                        break;\n                    default:\n                        break;\n                }\n                hidePanel(vditor, [\"subToolbar\"]);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return Export;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Fullscreen.ts\nvar Fullscreen_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Fullscreen = /** @class */ (function (_super) {\n    Fullscreen_extends(Fullscreen, _super);\n    function Fullscreen(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor, menuItem);\n        return _this;\n    }\n    Fullscreen.prototype._bindEvent = function (vditor, menuItem) {\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (vditor.element.className.includes(\"vditor--fullscreen\")) {\n                if (!menuItem.level) {\n                    this.innerHTML = menuItem.icon;\n                }\n                vditor.element.style.zIndex = \"\";\n                document.body.style.overflow = \"\";\n                vditor.element.classList.remove(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__s\", \"__n\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__s\", \"__n\");\n                }\n            }\n            else {\n                if (!menuItem.level) {\n                    this.innerHTML = '<svg><use xlink:href=\"#vditor-icon-contract\"></use></svg>';\n                }\n                vditor.element.style.zIndex = vditor.options.fullscreen.index.toString();\n                document.body.style.overflow = \"hidden\";\n                vditor.element.classList.add(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__n\", \"__s\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__n\", \"__s\");\n                }\n            }\n            if (vditor.devtools) {\n                vditor.devtools.renderEchart(vditor);\n            }\n            if (menuItem.click) {\n                menuItem.click(event, vditor);\n            }\n            setPadding(vditor);\n            setTypewriterPosition(vditor);\n        });\n    };\n    return Fullscreen;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Headings.ts\nvar Headings_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar Headings = /** @class */ (function (_super) {\n    Headings_extends(Headings, _super);\n    function Headings(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint vditor-panel--arrow\";\n        panelElement.innerHTML = \"<button data-tag=\\\"h1\\\" data-value=\\\"# \\\">\" + window.VditorI18n.heading1 + \" \" + (0,compatibility/* updateHotkeyTip */.ns)(\"&lt;⌥⌘1>\") + \"</button>\\n<button data-tag=\\\"h2\\\" data-value=\\\"## \\\">\" + window.VditorI18n.heading2 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘2\") + \"></button>\\n<button data-tag=\\\"h3\\\" data-value=\\\"### \\\">\" + window.VditorI18n.heading3 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘3\") + \"></button>\\n<button data-tag=\\\"h4\\\" data-value=\\\"#### \\\">\" + window.VditorI18n.heading4 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘4\") + \"></button>\\n<button data-tag=\\\"h5\\\" data-value=\\\"##### \\\">\" + window.VditorI18n.heading5 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘5\") + \"></button>\\n<button data-tag=\\\"h6\\\" data-value=\\\"###### \\\">\" + window.VditorI18n.heading6 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘6\") + \"></button>\";\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Headings.prototype._bindEvent = function (vditor, panelElement) {\n        var actionBtn = this.element.children[0];\n        actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            actionBtn.blur();\n            if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n                if (vditor.currentMode === \"wysiwyg\") {\n                    removeHeading(vditor);\n                    afterRenderEvent(vditor);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, \"\");\n                }\n                actionBtn.classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                hidePanel(vditor, [\"subToolbar\"]);\n                panelElement.style.display = \"block\";\n            }\n        });\n        for (var i = 0; i < 6; i++) {\n            panelElement.children.item(i).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                if (vditor.currentMode === \"wysiwyg\") {\n                    setHeading(vditor, event.target.getAttribute(\"data-tag\"));\n                    afterRenderEvent(vditor);\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else {\n                    processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                }\n                panelElement.style.display = \"none\";\n            });\n        }\n    };\n    return Headings;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Help.ts\nvar Help_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Help = /** @class */ (function (_super) {\n    Help_extends(Help, _super);\n    function Help(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;\\\">\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Markdown \\u4F7F\\u7528\\u6307\\u5357</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://ld246.com/article/1583308420519\\\" target=\\\"_blank\\\">\\u8BED\\u6CD5\\u901F\\u67E5\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583129520165\\\" target=\\\"_blank\\\">\\u57FA\\u7840\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583305480675\\\" target=\\\"_blank\\\">\\u6269\\u5C55\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1582778815353\\\" target=\\\"_blank\\\">\\u952E\\u76D8\\u5FEB\\u6377\\u952E</a></li>\\n    </ul>\\n</div>\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Vditor \\u652F\\u6301</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://github.com/Vanessa219/vditor/issues\\\" target=\\\"_blank\\\">Issues</a></li>\\n        <li><a href=\\\"https://ld246.com/tag/vditor\\\" target=\\\"_blank\\\">\\u5B98\\u65B9\\u8BA8\\u8BBA\\u533A</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1549638745630\\\" target=\\\"_blank\\\">\\u5F00\\u53D1\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/guide/markdown\\\" target=\\\"_blank\\\">\\u6F14\\u793A\\u5730\\u5740</a></li>\\n    </ul>\\n</div></div>\", 0);\n        });\n        return _this;\n    }\n    return Help;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Indent.ts\nvar Indent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Indent = /** @class */ (function (_super) {\n    Indent_extends(Indent, _super);\n    function Indent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listIndent(vditor, liElement, range);\n            }\n        });\n        return _this;\n    }\n    return Indent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Info.ts\nvar Info_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Info = /** @class */ (function (_super) {\n    Info_extends(Info, _super);\n    function Info(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;\\\">\\n<p style=\\\"text-align: center;margin: 14px 0\\\">\\n    <em>\\u4E0B\\u4E00\\u4EE3\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u4E3A\\u672A\\u6765\\u800C\\u6784\\u5EFA</em>\\n</p>\\n<div style=\\\"display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center\\\">\\n    <img src=\\\"https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png\\\" style=\\\"margin: 0 auto;height: 68px\\\"/>\\n    <div>&nbsp;&nbsp;</div>\\n    <div style=\\\"flex: 1;min-width: 250px\\\">\\n        Vditor \\u662F\\u4E00\\u6B3E\\u6D4F\\u89C8\\u5668\\u7AEF\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u652F\\u6301\\u6240\\u89C1\\u5373\\u6240\\u5F97\\u3001\\u5373\\u65F6\\u6E32\\u67D3\\uFF08\\u7C7B\\u4F3C Typora\\uFF09\\u548C\\u5206\\u5C4F\\u9884\\u89C8\\u6A21\\u5F0F\\u3002\\n        \\u5B83\\u4F7F\\u7528 TypeScript \\u5B9E\\u73B0\\uFF0C\\u652F\\u6301\\u539F\\u751F JavaScript \\u4EE5\\u53CA Vue\\u3001React\\u3001Angular \\u548C Svelte \\u7B49\\u6846\\u67B6\\u3002\\n    </div>\\n</div>\\n<div style=\\\"display: flex;flex-wrap: wrap;\\\">\\n    <ul style=\\\"list-style: none;flex: 1;min-width:148px\\\">\\n        <li>\\n        \\u9879\\u76EE\\u5730\\u5740\\uFF1A<a href=\\\"https://b3log.org/vditor\\\" target=\\\"_blank\\\">b3log.org/vditor</a>\\n        </li>\\n        <li>\\n        \\u5F00\\u6E90\\u534F\\u8BAE\\uFF1AMIT\\n        </li>\\n    </ul>\\n    <ul style=\\\"list-style: none;margin-right: 18px\\\">\\n        <li>\\n        \\u7EC4\\u4EF6\\u7248\\u672C\\uFF1AVditor v\" + constants/* VDITOR_VERSION */.H + \" / Lute v\" + Lute.Version + \"\\n        </li>\\n        <li>\\n        \\u8D5E\\u52A9\\u6350\\u8D60\\uFF1A<a href=\\\"https://ld246.com/sponsor\\\" target=\\\"_blank\\\">https://ld246.com/sponsor</a>\\n        </li>\\n    </ul>\\n</div>\\n</div>\", 0);\n        });\n        return _this;\n    }\n    return Info;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertAfter.ts\nvar InsertAfter_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertAfter = /** @class */ (function (_super) {\n    InsertAfter_extends(InsertAfter, _super);\n    function InsertAfter(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"afterend\");\n        });\n        return _this;\n    }\n    return InsertAfter;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertBefore.ts\nvar InsertBefore_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertBefore = /** @class */ (function (_super) {\n    InsertBefore_extends(InsertBefore, _super);\n    function InsertBefore(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"beforebegin\");\n        });\n        return _this;\n    }\n    return InsertBefore;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outdent.ts\nvar Outdent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Outdent = /** @class */ (function (_super) {\n    Outdent_extends(Outdent, _super);\n    function Outdent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listOutdent(vditor, liElement, range, liElement.parentElement);\n            }\n        });\n        return _this;\n    }\n    return Outdent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outline.ts\nvar Outline_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Outline_Outline = /** @class */ (function (_super) {\n    Outline_extends(Outline, _super);\n    function Outline(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.outline) {\n            _this.element.firstElementChild.classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = vditor.toolbar.elements.outline.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.options.outline.enable = !_this.element.firstElementChild.classList.contains(\"vditor-menu--current\");\n            vditor.outline.toggle(vditor, vditor.options.outline.enable);\n        });\n        return _this;\n    }\n    return Outline;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Preview.ts\nvar Preview_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Preview_Preview = /** @class */ (function (_super) {\n    Preview_extends(Preview, _super);\n    function Preview(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Preview.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var toolbars = constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"both\", \"edit-mode\", \"devtools\"]);\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"block\";\n                    if (vditor.options.preview.mode === \"both\") {\n                        vditor.preview.element.style.display = \"block\";\n                    }\n                    else {\n                        vditor.preview.element.style.display = \"none\";\n                    }\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"block\";\n                    vditor.preview.element.style.display = \"none\";\n                }\n                enableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.outline.render(vditor);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.preview.element.style.display = \"block\";\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"none\";\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"none\";\n                }\n                vditor.preview.render(vditor);\n                btnElement.classList.add(\"vditor-menu--current\");\n                hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n                setTimeout(function () {\n                    vditor.outline.render(vditor);\n                }, vditor.options.preview.delay + 10);\n            }\n            setPadding(vditor);\n        });\n    };\n    return Preview;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/RecordMedia.ts\nvar RecordMedia = /** @class */ (function () {\n    function RecordMedia(e) {\n        this.SAMPLE_RATE = 5000; // 44100 suggested by demos;\n        this.isRecording = false;\n        this.readyFlag = false;\n        this.leftChannel = [];\n        this.rightChannel = [];\n        this.recordingLength = 0;\n        var context;\n        // creates the audio context\n        if (typeof AudioContext !== \"undefined\") {\n            context = new AudioContext();\n        }\n        else if (webkitAudioContext) {\n            context = new webkitAudioContext();\n        }\n        else {\n            return;\n        }\n        this.DEFAULT_SAMPLE_RATE = context.sampleRate;\n        // creates a gain node\n        var volume = context.createGain();\n        // creates an audio node from the microphone incoming stream\n        var audioInput = context.createMediaStreamSource(e);\n        // connect the stream to the gain node\n        audioInput.connect(volume);\n        /* From the spec: The size of the buffer controls how frequently the audioprocess event is\n         dispatched and how many sample-frames need to be processed each call.\n         Lower values for buffer size will result in a lower (better) latency.\n         Higher values will be necessary to avoid audio breakup and glitches */\n        this.recorder = context.createScriptProcessor(2048, 2, 1);\n        // The onaudioprocess event needs to be defined externally, so make sure it is not set:\n        this.recorder.onaudioprocess = null;\n        // we connect the recorder\n        volume.connect(this.recorder);\n        this.recorder.connect(context.destination);\n        this.readyFlag = true;\n    }\n    // Publicly accessible methods:\n    RecordMedia.prototype.cloneChannelData = function (leftChannelData, rightChannelData) {\n        this.leftChannel.push(new Float32Array(leftChannelData));\n        this.rightChannel.push(new Float32Array(rightChannelData));\n        this.recordingLength += 2048;\n    };\n    RecordMedia.prototype.startRecordingNewWavFile = function () {\n        if (this.readyFlag) {\n            this.isRecording = true;\n            this.leftChannel.length = this.rightChannel.length = 0;\n            this.recordingLength = 0;\n        }\n    };\n    RecordMedia.prototype.stopRecording = function () {\n        this.isRecording = false;\n    };\n    RecordMedia.prototype.buildWavFileBlob = function () {\n        // we flat the left and right channels down\n        var leftBuffer = this.mergeBuffers(this.leftChannel);\n        var rightBuffer = this.mergeBuffers(this.rightChannel);\n        // Interleave the left and right channels together:\n        var interleaved = new Float32Array(leftBuffer.length);\n        for (var i = 0; i < leftBuffer.length; ++i) {\n            interleaved[i] = 0.5 * (leftBuffer[i] + rightBuffer[i]);\n        }\n        // Downsample the audio data if necessary:\n        if (this.DEFAULT_SAMPLE_RATE > this.SAMPLE_RATE) {\n            interleaved = this.downSampleBuffer(interleaved, this.SAMPLE_RATE);\n        }\n        var totalByteCount = (44 + interleaved.length * 2);\n        var buffer = new ArrayBuffer(totalByteCount);\n        var view = new DataView(buffer);\n        // Build the RIFF chunk descriptor:\n        this.writeUTFBytes(view, 0, \"RIFF\");\n        view.setUint32(4, totalByteCount, true);\n        this.writeUTFBytes(view, 8, \"WAVE\");\n        // Build the FMT sub-chunk:\n        this.writeUTFBytes(view, 12, \"fmt \"); // subchunk1 ID is format\n        view.setUint32(16, 16, true); // The sub-chunk size is 16.\n        view.setUint16(20, 1, true); // The audio format is 1.\n        view.setUint16(22, 1, true); // Number of interleaved channels.\n        view.setUint32(24, this.SAMPLE_RATE, true); // Sample rate.\n        view.setUint32(28, this.SAMPLE_RATE * 2, true); // Byte rate.\n        view.setUint16(32, 2, true); // Block align\n        view.setUint16(34, 16, true); // Bits per sample.\n        // Build the data sub-chunk:\n        var subChunk2ByteCount = interleaved.length * 2;\n        this.writeUTFBytes(view, 36, \"data\");\n        view.setUint32(40, subChunk2ByteCount, true);\n        // Write the PCM samples to the view:\n        var lng = interleaved.length;\n        var index = 44;\n        var volume = 1;\n        for (var j = 0; j < lng; j++) {\n            view.setInt16(index, interleaved[j] * (0x7FFF * volume), true);\n            index += 2;\n        }\n        return new Blob([view], { type: \"audio/wav\" });\n    };\n    RecordMedia.prototype.downSampleBuffer = function (buffer, rate) {\n        if (rate === this.DEFAULT_SAMPLE_RATE) {\n            return buffer;\n        }\n        if (rate > this.DEFAULT_SAMPLE_RATE) {\n            // throw \"downsampling rate show be smaller than original sample rate\";\n            return buffer;\n        }\n        var sampleRateRatio = this.DEFAULT_SAMPLE_RATE / rate;\n        var newLength = Math.round(buffer.length / sampleRateRatio);\n        var result = new Float32Array(newLength);\n        var offsetResult = 0;\n        var offsetBuffer = 0;\n        while (offsetResult < result.length) {\n            var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n            var accum = 0;\n            var count = 0;\n            for (var i = offsetBuffer; i < nextOffsetBuffer && i < buffer.length; i++) {\n                accum += buffer[i];\n                count++;\n            }\n            result[offsetResult] = accum / count;\n            offsetResult++;\n            offsetBuffer = nextOffsetBuffer;\n        }\n        return result;\n    };\n    RecordMedia.prototype.mergeBuffers = function (desiredChannelBuffer) {\n        var result = new Float32Array(this.recordingLength);\n        var offset = 0;\n        var lng = desiredChannelBuffer.length;\n        for (var i = 0; i < lng; ++i) {\n            var buffer = desiredChannelBuffer[i];\n            result.set(buffer, offset);\n            offset += buffer.length;\n        }\n        return result;\n    };\n    RecordMedia.prototype.writeUTFBytes = function (view, offset, value) {\n        var lng = value.length;\n        for (var i = 0; i < lng; i++) {\n            view.setUint8(offset + i, value.charCodeAt(i));\n        }\n    };\n    return RecordMedia;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Record.ts\nvar Record_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Record = /** @class */ (function (_super) {\n    Record_extends(Record, _super);\n    function Record(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Record.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        var mediaRecorder;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var editorElement = vditor[vditor.currentMode].element;\n            if (!mediaRecorder) {\n                navigator.mediaDevices.getUserMedia({ audio: true }).then(function (mediaStream) {\n                    mediaRecorder = new RecordMedia(mediaStream);\n                    mediaRecorder.recorder.onaudioprocess = function (e) {\n                        // Do nothing if not recording:\n                        if (!mediaRecorder.isRecording) {\n                            return;\n                        }\n                        // Copy the data from the input buffers;\n                        var left = e.inputBuffer.getChannelData(0);\n                        var right = e.inputBuffer.getChannelData(1);\n                        mediaRecorder.cloneChannelData(left, right);\n                    };\n                    mediaRecorder.startRecordingNewWavFile();\n                    vditor.tip.show(window.VditorI18n.recording);\n                    editorElement.setAttribute(\"contenteditable\", \"false\");\n                    _this.element.children[0].classList.add(\"vditor-menu--current\");\n                }).catch(function () {\n                    vditor.tip.show(window.VditorI18n[\"record-tip\"]);\n                });\n                return;\n            }\n            if (mediaRecorder.isRecording) {\n                mediaRecorder.stopRecording();\n                vditor.tip.hide();\n                var file = new File([mediaRecorder.buildWavFileBlob()], \"record\" + (new Date()).getTime() + \".wav\", { type: \"video/webm\" });\n                uploadFiles(vditor, [file]);\n                _this.element.children[0].classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                vditor.tip.show(window.VditorI18n.recording);\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                mediaRecorder.startRecordingNewWavFile();\n                _this.element.children[0].classList.add(\"vditor-menu--current\");\n            }\n        });\n    };\n    return Record;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Redo.ts\nvar Redo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Redo = /** @class */ (function (_super) {\n    Redo_extends(Redo, _super);\n    function Redo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ redo: _this.element }, [\"redo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.redo(vditor);\n        });\n        return _this;\n    }\n    return Redo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Undo.ts\nvar Undo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Undo = /** @class */ (function (_super) {\n    Undo_extends(Undo, _super);\n    function Undo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ undo: _this.element }, [\"undo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.undo(vditor);\n        });\n        return _this;\n    }\n    return Undo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Upload.ts\nvar Upload_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Upload_Upload = /** @class */ (function (_super) {\n    Upload_extends(Upload, _super);\n    function Upload(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var inputHTML = '<input type=\"file\"';\n        if (vditor.options.upload.multiple) {\n            inputHTML += ' multiple=\"multiple\"';\n        }\n        if (vditor.options.upload.accept) {\n            inputHTML += \" accept=\\\"\" + vditor.options.upload.accept + \"\\\"\";\n        }\n        _this.element.children[0].innerHTML = \"\" + (menuItem.icon || '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>') + inputHTML + \">\";\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Upload.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n        });\n        this.element.querySelector(\"input\").addEventListener(\"change\", function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n            if (event.target.files.length === 0) {\n                return;\n            }\n            uploadFiles(vditor, event.target.files, event.target);\n        });\n    };\n    return Upload;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(vditor) {\n        var _this = this;\n        var options = vditor.options;\n        this.elements = {};\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar\";\n        options.toolbar.forEach(function (menuItem, i) {\n            var itemElement = _this.genItem(vditor, menuItem, i);\n            _this.element.appendChild(itemElement);\n            if (menuItem.toolbar) {\n                var panelElement_1 = document.createElement(\"div\");\n                panelElement_1.className = \"vditor-hint vditor-panel--arrow\";\n                panelElement_1.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                    panelElement_1.style.display = \"none\";\n                });\n                menuItem.toolbar.forEach(function (subMenuItem, subI) {\n                    subMenuItem.level = 2;\n                    panelElement_1.appendChild(_this.genItem(vditor, subMenuItem, i + subI));\n                });\n                itemElement.appendChild(panelElement_1);\n                toggleSubMenu(vditor, panelElement_1, itemElement.children[0], 2);\n            }\n        });\n        if (vditor.options.toolbarConfig.hide) {\n            this.element.classList.add(\"vditor-toolbar--hide\");\n        }\n        if (vditor.options.toolbarConfig.pin) {\n            this.element.classList.add(\"vditor-toolbar--pin\");\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter = new Counter(vditor);\n            this.element.appendChild(vditor.counter.element);\n        }\n    }\n    Toolbar.prototype.genItem = function (vditor, menuItem, index) {\n        var menuItemObj;\n        switch (menuItem.name) {\n            case \"bold\":\n            case \"italic\":\n            case \"more\":\n            case \"strike\":\n            case \"line\":\n            case \"quote\":\n            case \"list\":\n            case \"ordered-list\":\n            case \"check\":\n            case \"code\":\n            case \"inline-code\":\n            case \"link\":\n            case \"table\":\n                menuItemObj = new MenuItem(vditor, menuItem);\n                break;\n            case \"emoji\":\n                menuItemObj = new Emoji(vditor, menuItem);\n                break;\n            case \"headings\":\n                menuItemObj = new Headings(vditor, menuItem);\n                break;\n            case \"|\":\n                menuItemObj = new Divider();\n                break;\n            case \"br\":\n                menuItemObj = new Br();\n                break;\n            case \"undo\":\n                menuItemObj = new Undo(vditor, menuItem);\n                break;\n            case \"redo\":\n                menuItemObj = new Redo(vditor, menuItem);\n                break;\n            case \"help\":\n                menuItemObj = new Help(vditor, menuItem);\n                break;\n            case \"both\":\n                menuItemObj = new Both(vditor, menuItem);\n                break;\n            case \"preview\":\n                menuItemObj = new Preview_Preview(vditor, menuItem);\n                break;\n            case \"fullscreen\":\n                menuItemObj = new Fullscreen(vditor, menuItem);\n                break;\n            case \"upload\":\n                menuItemObj = new Upload_Upload(vditor, menuItem);\n                break;\n            case \"record\":\n                menuItemObj = new Record(vditor, menuItem);\n                break;\n            case \"info\":\n                menuItemObj = new Info(vditor, menuItem);\n                break;\n            case \"edit-mode\":\n                menuItemObj = new EditMode(vditor, menuItem);\n                break;\n            case \"devtools\":\n                menuItemObj = new Devtools(vditor, menuItem);\n                break;\n            case \"outdent\":\n                menuItemObj = new Outdent(vditor, menuItem);\n                break;\n            case \"indent\":\n                menuItemObj = new Indent(vditor, menuItem);\n                break;\n            case \"outline\":\n                menuItemObj = new Outline_Outline(vditor, menuItem);\n                break;\n            case \"insert-after\":\n                menuItemObj = new InsertAfter(vditor, menuItem);\n                break;\n            case \"insert-before\":\n                menuItemObj = new InsertBefore(vditor, menuItem);\n                break;\n            case \"code-theme\":\n                menuItemObj = new CodeTheme(vditor, menuItem);\n                break;\n            case \"content-theme\":\n                menuItemObj = new ContentTheme(vditor, menuItem);\n                break;\n            case \"export\":\n                menuItemObj = new Export(vditor, menuItem);\n                break;\n            default:\n                menuItemObj = new Custom(vditor, menuItem);\n                break;\n        }\n        if (!menuItemObj) {\n            return;\n        }\n        var key = menuItem.name;\n        if (key === \"br\" || key === \"|\") {\n            key = key + index;\n        }\n        this.elements[key] = menuItemObj.element;\n        return menuItemObj.element;\n    };\n    return Toolbar;\n}());\n\n\n// EXTERNAL MODULE: ./node_modules/diff-match-patch/index.js\nvar diff_match_patch = __webpack_require__(694);\n;// CONCATENATED MODULE: ./src/ts/undo/index.ts\n\n\n\n\n\n\n\n\nvar undo_Undo = /** @class */ (function () {\n    function Undo() {\n        this.stackSize = 50;\n        this.resetStack();\n        // @ts-ignore\n        this.dmp = new diff_match_patch();\n    }\n    Undo.prototype.clearStack = function (vditor) {\n        this.resetStack();\n        this.resetIcon(vditor);\n    };\n    Undo.prototype.resetIcon = function (vditor) {\n        if (!vditor.toolbar) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.undo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length < 2) {\n            return;\n        }\n        var state = this[vditor.currentMode].undoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].redoStack.push(state);\n        this.renderDiff(state, vditor);\n        this[vditor.currentMode].hasUndo = true;\n        // undo 操作后，需要关闭 hint\n        hidePanel(vditor, [\"hint\"]);\n    };\n    Undo.prototype.redo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        var state = this[vditor.currentMode].redoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].undoStack.push(state);\n        this.renderDiff(state, vditor, true);\n    };\n    Undo.prototype.recordFirstPosition = function (vditor, event) {\n        if (getSelection().rangeCount === 0) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length !== 1 || this[vditor.currentMode].undoStack[0].length === 0 ||\n            this[vditor.currentMode].redoStack.length > 0) {\n            return;\n        }\n        if ((0,compatibility/* isFirefox */.vU)() && event.key === \"Backspace\") {\n            // Firefox 第一次删除无效\n            return;\n        }\n        if ((0,compatibility/* isSafari */.G6)()) {\n            // Safari keydown 在 input 之后，不需要重复记录历史\n            return;\n        }\n        var text = this.addCaret(vditor);\n        if (text.replace(\"<wbr>\", \"\").replace(\" vditor-ir__node--expand\", \"\")\n            !== this[vditor.currentMode].undoStack[0][0].diffs[0][1].replace(\"<wbr>\", \"\")) {\n            // 当还不没有存入 undo 栈时，按下 ctrl 后会覆盖 lastText\n            return;\n        }\n        this[vditor.currentMode].undoStack[0][0].diffs[0][1] = text;\n        this[vditor.currentMode].lastText = text;\n        // 不能添加 setSelectionFocus(cloneRange); 否则 windows chrome 首次输入会烂\n    };\n    Undo.prototype.addToUndoStack = function (vditor) {\n        // afterRenderEvent.ts 已经 debounce\n        var text = this.addCaret(vditor, true);\n        var diff = this.dmp.diff_main(text, this[vditor.currentMode].lastText, true);\n        var patchList = this.dmp.patch_make(text, this[vditor.currentMode].lastText, diff);\n        if (patchList.length === 0 && this[vditor.currentMode].undoStack.length > 0) {\n            return;\n        }\n        this[vditor.currentMode].lastText = text;\n        this[vditor.currentMode].undoStack.push(patchList);\n        if (this[vditor.currentMode].undoStack.length > this.stackSize) {\n            this[vditor.currentMode].undoStack.shift();\n        }\n        if (this[vditor.currentMode].hasUndo) {\n            this[vditor.currentMode].redoStack = [];\n            this[vditor.currentMode].hasUndo = false;\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n    };\n    Undo.prototype.renderDiff = function (state, vditor, isRedo) {\n        if (isRedo === void 0) { isRedo = false; }\n        var text;\n        if (isRedo) {\n            var redoPatchList = this.dmp.patch_deepCopy(state).reverse();\n            redoPatchList.forEach(function (patch) {\n                patch.diffs.forEach(function (diff) {\n                    diff[0] = -diff[0];\n                });\n            });\n            text = this.dmp.patch_apply(redoPatchList, this[vditor.currentMode].lastText)[0];\n        }\n        else {\n            text = this.dmp.patch_apply(state, this[vditor.currentMode].lastText)[0];\n        }\n        this[vditor.currentMode].lastText = text;\n        vditor[vditor.currentMode].element.innerHTML = text;\n        if (vditor.currentMode !== \"sv\") {\n            vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (blockElement) {\n                processCodeRender(blockElement, vditor);\n            });\n        }\n        if (!vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            // Safari 第一次输入没有光标，需手动定位到结尾\n            var range = getSelection().getRangeAt(0);\n            range.setEndBefore(vditor[vditor.currentMode].element);\n            range.collapse(false);\n        }\n        else {\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, vditor[vditor.currentMode].element.ownerDocument.createRange());\n            scrollCenter(vditor);\n        }\n        execAfterRender(vditor, {\n            enableAddUndoStack: false,\n            enableHint: false,\n            enableInput: true,\n        });\n        highlightToolbar(vditor);\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.resetStack = function () {\n        this.ir = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.sv = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.wysiwyg = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n    };\n    Undo.prototype.addCaret = function (vditor, setFocus) {\n        if (setFocus === void 0) { setFocus = false; }\n        var cloneRange;\n        if (getSelection().rangeCount !== 0 && !vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                cloneRange = range.cloneRange();\n                var wbrElement = document.createElement(\"span\");\n                wbrElement.className = \"vditor-wbr\";\n                range.insertNode(wbrElement);\n            }\n        }\n        // 移除数学公式、echart 渲染 https://github.com/siyuan-note/siyuan/issues/537\n        var cloneElement = vditor.ir.element.cloneNode(true);\n        cloneElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='1']\")\n            .forEach(function (item) {\n            if (item.firstElementChild.classList.contains(\"language-echarts\") ||\n                item.firstElementChild.classList.contains(\"language-plantuml\") ||\n                item.firstElementChild.classList.contains(\"language-mindmap\")) {\n                item.firstElementChild.removeAttribute(\"_echarts_instance_\");\n                item.firstElementChild.removeAttribute(\"data-processed\");\n                item.firstElementChild.innerHTML = item.previousElementSibling.firstElementChild.innerHTML;\n                item.setAttribute(\"data-render\", \"2\");\n            }\n            if (item.firstElementChild.classList.contains(\"language-math\")) {\n                item.setAttribute(\"data-render\", \"2\");\n                item.firstElementChild.textContent = item.firstElementChild.getAttribute(\"data-math\");\n                item.firstElementChild.removeAttribute(\"data-math\");\n            }\n        });\n        var text = vditor[vditor.currentMode].element.innerHTML;\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-wbr\").forEach(function (item) {\n            item.remove();\n            // 使用 item.outerHTML = \"\" 会产生 https://github.com/Vanessa219/vditor/pull/686;\n        });\n        if (setFocus && cloneRange) {\n            (0,selection/* setSelectionFocus */.Hc)(cloneRange);\n        }\n        return text.replace('<span class=\"vditor-wbr\"></span>', \"<wbr>\");\n    };\n    return Undo;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(224);\n;// CONCATENATED MODULE: ./src/ts/util/Options.ts\n\n\nvar Options = /** @class */ (function () {\n    function Options(options) {\n        this.defaultOptions = {\n            after: undefined,\n            cache: {\n                enable: true,\n            },\n            cdn: constants/* Constants.CDN */.g.CDN,\n            classes: {\n                preview: \"\",\n            },\n            comment: {\n                enable: false,\n            },\n            counter: {\n                enable: false,\n                type: \"markdown\",\n            },\n            debugger: false,\n            fullscreen: {\n                index: 90,\n            },\n            height: \"auto\",\n            hint: {\n                delay: 200,\n                emoji: {\n                    \"+1\": \"👍\",\n                    \"-1\": \"👎\",\n                    \"confused\": \"😕\",\n                    \"eyes\": \"👀️\",\n                    \"heart\": \"❤️\",\n                    \"rocket\": \"🚀️\",\n                    \"smile\": \"😄\",\n                    \"tada\": \"🎉️\",\n                },\n                emojiPath: constants/* Constants.CDN */.g.CDN + \"/dist/images/emoji\",\n                extend: [],\n                parse: true,\n            },\n            icon: \"ant\",\n            lang: \"zh_CN\",\n            mode: \"ir\",\n            outline: {\n                enable: false,\n                position: \"left\",\n            },\n            placeholder: \"\",\n            preview: {\n                actions: [\"desktop\", \"tablet\", \"mobile\", \"mp-wechat\", \"zhihu\"],\n                delay: 1000,\n                hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n                markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n                math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n                maxWidth: 800,\n                mode: \"both\",\n                theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n            },\n            resize: {\n                enable: false,\n                position: \"bottom\",\n            },\n            theme: \"classic\",\n            toolbar: [\n                \"emoji\",\n                \"headings\",\n                \"bold\",\n                \"italic\",\n                \"strike\",\n                \"link\",\n                \"|\",\n                \"list\",\n                \"ordered-list\",\n                \"check\",\n                \"outdent\",\n                \"indent\",\n                \"|\",\n                \"quote\",\n                \"line\",\n                \"code\",\n                \"inline-code\",\n                \"insert-before\",\n                \"insert-after\",\n                \"|\",\n                \"upload\",\n                \"record\",\n                \"table\",\n                \"|\",\n                \"undo\",\n                \"redo\",\n                \"|\",\n                \"fullscreen\",\n                \"edit-mode\",\n                {\n                    name: \"more\",\n                    toolbar: [\n                        \"both\",\n                        \"code-theme\",\n                        \"content-theme\",\n                        \"export\",\n                        \"outline\",\n                        \"preview\",\n                        \"devtools\",\n                        \"info\",\n                        \"help\",\n                    ],\n                },\n            ],\n            toolbarConfig: {\n                hide: false,\n                pin: false,\n            },\n            typewriterMode: false,\n            undoDelay: 800,\n            upload: {\n                extraData: {},\n                fieldName: \"file[]\",\n                filename: function (name) { return name.replace(/\\W/g, \"\"); },\n                linkToImgUrl: \"\",\n                max: 10 * 1024 * 1024,\n                multiple: true,\n                url: \"\",\n                withCredentials: false,\n            },\n            value: \"\",\n            width: \"auto\",\n        };\n        this.options = options;\n    }\n    Options.prototype.merge = function () {\n        var _a, _b, _c;\n        if (this.options) {\n            if (this.options.toolbar) {\n                this.options.toolbar = this.mergeToolbar(this.options.toolbar);\n            }\n            else {\n                this.options.toolbar = this.mergeToolbar(this.defaultOptions.toolbar);\n            }\n            if ((_b = (_a = this.options.preview) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.list) {\n                this.defaultOptions.preview.theme.list = this.options.preview.theme.list;\n            }\n            if ((_c = this.options.hint) === null || _c === void 0 ? void 0 : _c.emoji) {\n                this.defaultOptions.hint.emoji = this.options.hint.emoji;\n            }\n            if (this.options.comment) {\n                this.defaultOptions.comment = this.options.comment;\n            }\n        }\n        var mergedOptions = (0,merge/* merge */.T)(this.defaultOptions, this.options);\n        if (mergedOptions.cache.enable && !mergedOptions.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        return mergedOptions;\n    };\n    Options.prototype.mergeToolbar = function (toolbar) {\n        var _this = this;\n        var toolbarItem = [\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-export\"></use></svg>',\n                name: \"export\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-emoji\"></use></svg>',\n                name: \"emoji\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-headings\"></use></svg>',\n                name: \"headings\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-bold\"></use></svg>',\n                name: \"bold\",\n                prefix: \"**\",\n                suffix: \"**\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-italic\"></use></svg>',\n                name: \"italic\",\n                prefix: \"*\",\n                suffix: \"*\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘D\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-strike\"></use></svg>',\n                name: \"strike\",\n                prefix: \"~~\",\n                suffix: \"~~\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘K\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-link\"></use></svg>',\n                name: \"link\",\n                prefix: \"[\",\n                suffix: \"](https://)\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘L\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-list\"></use></svg>',\n                name: \"list\",\n                prefix: \"* \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-ordered-list\"></use></svg>',\n                name: \"ordered-list\",\n                prefix: \"1. \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘J\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-check\"></use></svg>',\n                name: \"check\",\n                prefix: \"* [ ] \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-outdent\"></use></svg>',\n                name: \"outdent\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-indent\"></use></svg>',\n                name: \"indent\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘;\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-quote\"></use></svg>',\n                name: \"quote\",\n                prefix: \"> \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-line\"></use></svg>',\n                name: \"line\",\n                prefix: \"---\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘U\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-code\"></use></svg>',\n                name: \"code\",\n                prefix: \"```\",\n                suffix: \"\\n```\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘G\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-inline-code\"></use></svg>',\n                name: \"inline-code\",\n                prefix: \"`\",\n                suffix: \"`\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-before\"></use></svg>',\n                name: \"insert-before\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-after\"></use></svg>',\n                name: \"insert-after\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>',\n                name: \"upload\",\n                tipPosition: \"n\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-record\"></use></svg>',\n                name: \"record\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘M\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-table\"></use></svg>',\n                name: \"table\",\n                prefix: \"| col1\",\n                suffix: \" | col2 | col3 |\\n| --- | --- | --- |\\n|  |  |  |\\n|  |  |  |\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘Z\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-undo\"></use></svg>',\n                name: \"undo\",\n                tipPosition: \"nw\",\n            },\n            {\n                hotkey: \"⌘Y\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-redo\"></use></svg>',\n                name: \"redo\",\n                tipPosition: \"nw\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-more\"></use></svg>',\n                name: \"more\",\n                tipPosition: \"e\",\n            },\n            {\n                hotkey: \"⌘'\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-fullscreen\"></use></svg>',\n                name: \"fullscreen\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-edit\"></use></svg>',\n                name: \"edit-mode\",\n                tipPosition: \"nw\",\n            },\n            {\n                hotkey: \"⌘P\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-both\"></use></svg>',\n                name: \"both\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-preview\"></use></svg>',\n                name: \"preview\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>',\n                name: \"outline\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-theme\"></use></svg>',\n                name: \"content-theme\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-code-theme\"></use></svg>',\n                name: \"code-theme\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-bug\"></use></svg>',\n                name: \"devtools\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-info\"></use></svg>',\n                name: \"info\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-help\"></use></svg>',\n                name: \"help\",\n                tipPosition: \"nw\",\n            },\n            {\n                name: \"br\",\n            },\n        ];\n        var toolbarResult = [];\n        toolbar.forEach(function (menuItem) {\n            var currentMenuItem = menuItem;\n            toolbarItem.forEach(function (defaultMenuItem) {\n                if (typeof menuItem === \"string\" &&\n                    defaultMenuItem.name === menuItem) {\n                    currentMenuItem = defaultMenuItem;\n                }\n                if (typeof menuItem === \"object\" &&\n                    defaultMenuItem.name === menuItem.name) {\n                    currentMenuItem = Object.assign({}, defaultMenuItem, menuItem);\n                }\n            });\n            if (menuItem.toolbar) {\n                currentMenuItem.toolbar = _this.mergeToolbar(menuItem.toolbar);\n            }\n            toolbarResult.push(currentMenuItem);\n        });\n        return toolbarResult;\n    };\n    return Options;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar WYSIWYG = /** @class */ (function () {\n    function WYSIWYG(vditor) {\n        var _this = this;\n        this.composingLock = false;\n        this.commentIds = [];\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-wysiwyg\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\" + vditor.options.placeholder + \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\\n<div class=\\\"vditor-panel vditor-panel--none\\\"></div>\\n<div class=\\\"vditor-panel vditor-panel--none\\\">\\n    <button type=\\\"button\\\" aria-label=\\\"\" + window.VditorI18n.comment + \"\\\" class=\\\"vditor-icon vditor-tooltipped vditor-tooltipped__n\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-comment\\\"></use></svg>\\n    </button>\\n</div>\";\n        this.element = divElement.firstElementChild;\n        this.popover = divElement.firstElementChild.nextElementSibling;\n        this.selectPopover = divElement.lastElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n        if (vditor.options.comment.enable) {\n            this.selectPopover.querySelector(\"button\").onclick = function () {\n                var id = Lute.NewNodeID();\n                var range = getSelection().getRangeAt(0);\n                var rangeClone = range.cloneRange();\n                var contents = range.extractContents();\n                var blockStartElement;\n                var blockEndElement;\n                var removeStart = false;\n                var removeEnd = false;\n                contents.childNodes.forEach(function (item, index) {\n                    var wrap = false;\n                    if (item.nodeType === 3) {\n                        wrap = true;\n                    }\n                    else if (!item.classList.contains(\"vditor-comment\")) {\n                        wrap = true;\n                    }\n                    else if (item.classList.contains(\"vditor-comment\")) {\n                        item.setAttribute(\"data-cmtids\", item.getAttribute(\"data-cmtids\") + \" \" + id);\n                    }\n                    if (wrap) {\n                        if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === 0 && rangeClone.startOffset > 0) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                            blockStartElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === contents.childNodes.length - 1\n                            && rangeClone.endOffset < rangeClone.endContainer.textContent.length) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                            blockEndElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\") {\n                            if (index === 0) {\n                                removeStart = true;\n                            }\n                            else if (index === contents.childNodes.length - 1) {\n                                removeEnd = true;\n                            }\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                        }\n                        else {\n                            var commentElement = document.createElement(\"span\");\n                            commentElement.classList.add(\"vditor-comment\");\n                            commentElement.setAttribute(\"data-cmtids\", id);\n                            item.parentNode.insertBefore(commentElement, item);\n                            commentElement.appendChild(item);\n                        }\n                    }\n                });\n                var startElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.startContainer);\n                if (startElement) {\n                    if (blockStartElement) {\n                        startElement.insertAdjacentHTML(\"beforeend\", blockStartElement.innerHTML);\n                        blockStartElement.remove();\n                    }\n                    else if (startElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeStart) {\n                        startElement.remove();\n                    }\n                }\n                var endElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.endContainer);\n                if (endElement) {\n                    if (blockEndElement) {\n                        endElement.insertAdjacentHTML(\"afterbegin\", blockEndElement.innerHTML);\n                        blockEndElement.remove();\n                    }\n                    else if (endElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeEnd) {\n                        endElement.remove();\n                    }\n                }\n                range.insertNode(contents);\n                vditor.options.comment.add(id, range.toString(), _this.getComments(vditor, true));\n                afterRenderEvent(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: false,\n                    enableInput: false,\n                });\n                _this.hideComment();\n            };\n        }\n    }\n    WYSIWYG.prototype.getComments = function (vditor, getData) {\n        var _this = this;\n        if (getData === void 0) { getData = false; }\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n            this.commentIds = [];\n            this.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                _this.commentIds =\n                    _this.commentIds.concat(item.getAttribute(\"data-cmtids\").split(\" \"));\n            });\n            this.commentIds = Array.from(new Set(this.commentIds));\n            var comments_1 = [];\n            if (getData) {\n                this.commentIds.forEach(function (id) {\n                    comments_1.push({\n                        id: id,\n                        top: _this.element.querySelector(\".vditor-comment[data-cmtids=\\\"\" + id + \"\\\"]\").offsetTop,\n                    });\n                });\n                return comments_1;\n            }\n        }\n        else {\n            return [];\n        }\n    };\n    WYSIWYG.prototype.triggerRemoveComment = function (vditor) {\n        var difference = function (a, b) {\n            var s = new Set(b);\n            return a.filter(function (x) { return !s.has(x); });\n        };\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable && vditor.wysiwyg.commentIds.length > 0) {\n            var oldIds = JSON.parse(JSON.stringify(this.commentIds));\n            this.getComments(vditor);\n            var removedIds = difference(oldIds, this.commentIds);\n            if (removedIds.length > 0) {\n                vditor.options.comment.remove(removedIds);\n            }\n        }\n    };\n    WYSIWYG.prototype.showComment = function () {\n        var position = (0,selection/* getCursorPosition */.Ny)(this.element);\n        this.selectPopover.setAttribute(\"style\", \"left:\" + position.left + \"px;display:block;top:\" + Math.max(-8, position.top - 21) + \"px\");\n    };\n    WYSIWYG.prototype.hideComment = function () {\n        this.selectPopover.setAttribute(\"style\", \"display:none\");\n    };\n    WYSIWYG.prototype.unbindListener = function () {\n        window.removeEventListener(\"scroll\", this.scrollListener);\n    };\n    WYSIWYG.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var codeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n        var codeEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"CODE\");\n        if (codeElement && codeEndElement && codeEndElement.isSameNode(codeElement)) {\n            var codeText = \"\";\n            if (codeElement.parentElement.tagName === \"PRE\") {\n                codeText = range.toString();\n            }\n            else {\n                codeText = \"`\" + range.toString() + \"`\";\n            }\n            event.clipboardData.setData(\"text/plain\", codeText);\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"A\");\n        var aEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"A\");\n        if (aElement && aEndElement && aEndElement.isSameNode(aElement)) {\n            var aTitle = aElement.getAttribute(\"title\") || \"\";\n            if (aTitle) {\n                aTitle = \" \\\"\" + aTitle + \"\\\"\";\n            }\n            event.clipboardData.setData(\"text/plain\", \"[\" + range.toString() + \"](\" + aElement.getAttribute(\"href\") + aTitle + \")\");\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    WYSIWYG.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.unbindListener();\n        window.addEventListener(\"scroll\", this.scrollListener = function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (_this.popover.style.display !== \"block\" || _this.selectPopover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10);\n            if (vditor.options.height !== \"auto\") {\n                if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                    var popoverTop = Math.max(window.scrollY - vditor.element.offsetTop - 8, Math.min(top - vditor.wysiwyg.element.scrollTop, _this.element.clientHeight - 21)) + \"px\";\n                    if (_this.popover.style.display === \"block\") {\n                        _this.popover.style.top = popoverTop;\n                    }\n                    if (_this.selectPopover.style.display === \"block\") {\n                        _this.selectPopover.style.top = popoverTop;\n                    }\n                }\n                return;\n            }\n            else if (!vditor.options.toolbarConfig.pin) {\n                return;\n            }\n            var popoverTop1 = Math.max(top, (window.scrollY - vditor.element.offsetTop - 8)) + \"px\";\n            if (_this.popover.style.display === \"block\") {\n                _this.popover.style.top = popoverTop1;\n            }\n            if (_this.selectPopover.style.display === \"block\") {\n                _this.selectPopover.style.top = popoverTop1;\n            }\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (vditor.options.comment && vditor.options.comment.enable && vditor.options.comment.scroll) {\n                vditor.options.comment.scroll(vditor.wysiwyg.element.scrollTop);\n            }\n            if (_this.popover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10) - vditor.wysiwyg.element.scrollTop;\n            var max = -8;\n            if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                max = window.scrollY - vditor.element.offsetTop + max;\n            }\n            var topPx = Math.max(max, Math.min(top, _this.element.clientHeight - 21)) + \"px\";\n            _this.popover.style.top = topPx;\n            _this.selectPopover.style.top = topPx;\n        });\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    var range = (0,selection/* getEditorRange */.zh)(vditor);\n                    var node = document.createElement(\"template\");\n                    node.innerHTML = code;\n                    range.insertNode(node.content.cloneNode(true));\n                    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n                    if (blockElement) {\n                        blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                    }\n                    else {\n                        vditor.wysiwyg.element.innerHTML = vditor.lute.SpinVditorDOM(vditor.wysiwyg.element.innerHTML);\n                    }\n                    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                },\n            });\n        });\n        // 中文处理\n        this.element.addEventListener(\"compositionstart\", function () {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                return;\n            }\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input_input(vditor, getSelection().getRangeAt(0).cloneRange(), event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            var range = getSelection().getRangeAt(0);\n            var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            if (!blockElement) {\n                // 没有被块元素包裹\n                modifyPre(vditor, range);\n                blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            }\n            if (!blockElement) {\n                return;\n            }\n            // 前后空格处理\n            var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n            // 开始可以输入空格\n            var startSpace = true;\n            for (var i = startOffset - 1; i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n                if (blockElement.textContent.charAt(i) !== \" \" &&\n                    // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                    blockElement.textContent.charAt(i) !== \"\\t\") {\n                    startSpace = false;\n                    break;\n                }\n            }\n            if (startOffset === 0) {\n                startSpace = false;\n            }\n            // 结尾可以输入空格\n            var endSpace = true;\n            for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n                if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                    endSpace = false;\n                    break;\n                }\n            }\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                headingElement.remove();\n            }\n            if ((startSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\")\n                || endSpace || isHeadingMD(blockElement.innerHTML) ||\n                (isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling)) {\n                return;\n            }\n            input_input(vditor, range, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                var checkElement = event.target;\n                if (checkElement.checked) {\n                    checkElement.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    checkElement.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                afterRenderEvent(vditor);\n                return;\n            }\n            if (event.target.tagName === \"IMG\" &&\n                // plantuml 图片渲染不进行提示\n                !event.target.parentElement.classList.contains(\"vditor-wysiwyg__preview\")) {\n                if (event.target.getAttribute(\"data-type\") === \"link-ref\") {\n                    genLinkRefPopover(vditor, event.target);\n                }\n                else {\n                    genImagePopover(event, vditor);\n                }\n                return;\n            }\n            // 打开链接\n            if (event.target.tagName === \"A\") {\n                window.open(event.target.getAttribute(\"href\"));\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            highlightToolbarWYSIWYG(vditor);\n            // 点击后光标落于预览区，需展开代码块\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-wysiwyg__preview\");\n            if (!previewElement) {\n                previewElement =\n                    (0,hasClosest/* hasClosestByClassName */.fb)((0,selection/* getEditorRange */.zh)(vditor).startContainer, \"vditor-wysiwyg__preview\");\n            }\n            if (previewElement) {\n                showCode(previewElement, vditor);\n            }\n            clickToc(event, vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            // 除 md 处理、cell 内换行、table 添加新行/列、代码块语言切换、block render 换行、跳出/逐层跳出 blockquote、h6 换行、\n            // 任务列表换行、软换行外需在换行时调整文档位置\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.wysiwyg.element.innerHTML !== \"\" && vditor.wysiwyg.element.childNodes.length === 1 &&\n                vditor.wysiwyg.element.firstElementChild && vditor.wysiwyg.element.firstElementChild.tagName === \"P\"\n                && vditor.wysiwyg.element.firstElementChild.childElementCount === 0\n                && (vditor.wysiwyg.element.textContent === \"\" || vditor.wysiwyg.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.wysiwyg.element.innerHTML = \"\";\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                }\n            }\n            // 没有被块元素包裹\n            modifyPre(vditor, range);\n            highlightToolbarWYSIWYG(vditor);\n            if (event.key !== \"ArrowDown\" && event.key !== \"ArrowRight\" && event.key !== \"Backspace\"\n                && event.key !== \"ArrowLeft\" && event.key !== \"ArrowUp\") {\n                return;\n            }\n            if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                vditor.hint.render(vditor);\n            }\n            // 上下左右，删除遇到块预览的处理\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__preview\");\n            if (!previewElement && range.startContainer.nodeType !== 3 && range.startOffset > 0) {\n                // table 前删除遇到代码块\n                var blockRenderElement = range.startContainer;\n                if (blockRenderElement.classList.contains(\"vditor-wysiwyg__block\")) {\n                    previewElement = blockRenderElement.lastElementChild;\n                }\n            }\n            if (!previewElement) {\n                return;\n            }\n            var previousElement = previewElement.previousElementSibling;\n            if (previousElement.style.display === \"none\") {\n                if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                    showCode(previewElement, vditor);\n                }\n                else {\n                    showCode(previewElement, vditor, false);\n                }\n                return;\n            }\n            var codeElement = previewElement.previousElementSibling;\n            if (codeElement.tagName === \"PRE\") {\n                codeElement = codeElement.firstElementChild;\n            }\n            if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                var blockRenderElement = previewElement.parentElement;\n                var nextNode = getRenderElementNextNode(blockRenderElement);\n                if (nextNode && nextNode.nodeType !== 3) {\n                    // 下一节点依旧为代码渲染块\n                    var nextRenderElement = nextNode.querySelector(\".vditor-wysiwyg__preview\");\n                    if (nextRenderElement) {\n                        showCode(nextRenderElement, vditor);\n                        return;\n                    }\n                }\n                // 跳过渲染块，光标移动到下一个节点\n                if (nextNode.nodeType === 3) {\n                    // inline\n                    while (nextNode.textContent.length === 0 && nextNode.nextSibling) {\n                        // https://github.com/Vanessa219/vditor/issues/100 2\n                        nextNode = nextNode.nextSibling;\n                    }\n                    range.setStart(nextNode, 1);\n                }\n                else {\n                    // block\n                    range.setStart(nextNode.firstChild, 0);\n                }\n            }\n            else {\n                range.selectNodeContents(codeElement);\n                range.collapse(false);\n            }\n        });\n    };\n    return WYSIWYG;\n}());\n\n\n;// CONCATENATED MODULE: ./src/index.ts\nvar src_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function (_super) {\n    src_extends(Vditor, _super);\n    /**\n     * @param id 要挂载 Vditor 的元素或者元素 ID。\n     * @param options Vditor 参数\n     */\n    function Vditor(id, options) {\n        var _this = _super.call(this) || this;\n        _this.version = constants/* VDITOR_VERSION */.H;\n        if (typeof id === \"string\") {\n            if (!options) {\n                options = {\n                    cache: {\n                        id: \"vditor\" + id,\n                    },\n                };\n            }\n            else if (!options.cache) {\n                options.cache = { id: \"vditor\" + id };\n            }\n            else if (!options.cache.id) {\n                options.cache.id = \"vditor\" + id;\n            }\n            id = document.getElementById(id);\n        }\n        var getOptions = new Options(options);\n        var mergedOptions = getOptions.merge();\n        // 支持自定义国际化\n        if (!mergedOptions.i18n) {\n            if (![\"en_US\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) {\n                throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n            }\n            else {\n                var i18nScriptPrefix = \"vditorI18nScript\";\n                var i18nScriptID_1 = i18nScriptPrefix + mergedOptions.lang;\n                document.querySelectorAll(\"head script[id^=\\\"\" + i18nScriptPrefix + \"\\\"]\").forEach(function (el) {\n                    if (el.id !== i18nScriptID_1) {\n                        document.head.removeChild(el);\n                    }\n                });\n                (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/i18n/\" + mergedOptions.lang + \".js\", i18nScriptID_1).then(function () {\n                    _this.init(id, mergedOptions);\n                });\n            }\n        }\n        else {\n            window.VditorI18n = mergedOptions.i18n;\n            _this.init(id, mergedOptions);\n        }\n        return _this;\n    }\n    /** 设置主题 */\n    Vditor.prototype.setTheme = function (theme, contentTheme, codeTheme, contentThemePath) {\n        this.vditor.options.theme = theme;\n        setTheme(this.vditor);\n        if (contentTheme) {\n            this.vditor.options.preview.theme.current = contentTheme;\n            (0,setContentTheme/* setContentTheme */.Z)(contentTheme, contentThemePath || this.vditor.options.preview.theme.path);\n        }\n        if (codeTheme) {\n            this.vditor.options.preview.hljs.style = codeTheme;\n            (0,setCodeTheme/* setCodeTheme */.Y)(codeTheme, this.vditor.options.cdn);\n        }\n    };\n    /** 获取 Markdown 内容 */\n    Vditor.prototype.getValue = function () {\n        return getMarkdown(this.vditor);\n    };\n    /** 获取编辑器当前编辑模式 */\n    Vditor.prototype.getCurrentMode = function () {\n        return this.vditor.currentMode;\n    };\n    /** 聚焦到编辑器 */\n    Vditor.prototype.focus = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.focus();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.focus();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.focus();\n        }\n    };\n    /** 让编辑器失焦 */\n    Vditor.prototype.blur = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.blur();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.blur();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.blur();\n        }\n    };\n    /** 禁用编辑器 */\n    Vditor.prototype.disabled = function () {\n        hidePanel(this.vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n        disableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\", \"edit-mode\"]));\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"false\");\n    };\n    /** 解除编辑器禁用 */\n    Vditor.prototype.enable = function () {\n        enableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\", \"edit-mode\"]));\n        this.vditor.undo.resetIcon(this.vditor);\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"true\");\n    };\n    /** 返回选中的字符串 */\n    Vditor.prototype.getSelection = function () {\n        if (this.vditor.currentMode === \"wysiwyg\") {\n            return getSelectText(this.vditor.wysiwyg.element);\n        }\n        else if (this.vditor.currentMode === \"sv\") {\n            return getSelectText(this.vditor.sv.element);\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            return getSelectText(this.vditor.ir.element);\n        }\n    };\n    /** 设置预览区域内容 */\n    Vditor.prototype.renderPreview = function (value) {\n        this.vditor.preview.render(this.vditor, value);\n    };\n    /** 获取焦点位置 */\n    Vditor.prototype.getCursorPosition = function () {\n        return (0,selection/* getCursorPosition */.Ny)(this.vditor[this.vditor.currentMode].element);\n    };\n    /** 上传是否还在进行中 */\n    Vditor.prototype.isUploading = function () {\n        return this.vditor.upload.isUploading;\n    };\n    /** 清除缓存 */\n    Vditor.prototype.clearCache = function () {\n        localStorage.removeItem(this.vditor.options.cache.id);\n    };\n    /** 禁用缓存 */\n    Vditor.prototype.disabledCache = function () {\n        this.vditor.options.cache.enable = false;\n    };\n    /** 启用缓存 */\n    Vditor.prototype.enableCache = function () {\n        if (!this.vditor.options.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        this.vditor.options.cache.enable = true;\n    };\n    /** HTML 转 md */\n    Vditor.prototype.html2md = function (value) {\n        return this.vditor.lute.HTML2Md(value);\n    };\n    /** markdown 转 JSON 输出 */\n    Vditor.prototype.exportJSON = function (value) {\n        return this.vditor.lute.RenderJSON(value);\n    };\n    /** 获取 HTML */\n    Vditor.prototype.getHTML = function () {\n        return getHTML(this.vditor);\n    };\n    /** 消息提示。time 为 0 将一直显示 */\n    Vditor.prototype.tip = function (text, time) {\n        this.vditor.tip.show(text, time);\n    };\n    /** 设置预览模式 */\n    Vditor.prototype.setPreviewMode = function (mode) {\n        setPreviewMode(mode, this.vditor);\n    };\n    /** 删除选中内容 */\n    Vditor.prototype.deleteValue = function () {\n        if (window.getSelection().isCollapsed) {\n            return;\n        }\n        document.execCommand(\"delete\", false);\n    };\n    /** 更新选中内容 */\n    Vditor.prototype.updateValue = function (value) {\n        document.execCommand(\"insertHTML\", false, value);\n    };\n    /** 在焦点处插入内容，并默认进行 Markdown 渲染 */\n    Vditor.prototype.insertValue = function (value, render) {\n        if (render === void 0) { render = true; }\n        var range = (0,selection/* getEditorRange */.zh)(this.vditor);\n        range.collapse(true);\n        var tmpElement = document.createElement(\"template\");\n        tmpElement.innerHTML = value;\n        range.insertNode(tmpElement.content.cloneNode(true));\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.preventInput = true;\n            if (render) {\n                inputEvent(this.vditor);\n            }\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.preventInput = true;\n            if (render) {\n                input_input(this.vditor, getSelection().getRangeAt(0));\n            }\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.preventInput = true;\n            if (render) {\n                input(this.vditor, getSelection().getRangeAt(0), true);\n            }\n        }\n    };\n    /** 设置编辑器内容 */\n    Vditor.prototype.setValue = function (markdown, clearStack) {\n        var _this = this;\n        if (clearStack === void 0) { clearStack = false; }\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.innerHTML = this.vditor.lute.SpinVditorSVDOM(markdown);\n            processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            renderDomByMd(this.vditor, markdown, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else {\n            this.vditor.ir.element.innerHTML = this.vditor.lute.Md2VditorIRDOM(markdown);\n            this.vditor.ir.element\n                .querySelectorAll(\".vditor-ir__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, _this.vditor);\n            });\n            process_processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        this.vditor.outline.render(this.vditor);\n        if (!markdown) {\n            hidePanel(this.vditor, [\"emoji\", \"headings\", \"submenu\", \"hint\"]);\n            if (this.vditor.wysiwyg.popover) {\n                this.vditor.wysiwyg.popover.style.display = \"none\";\n            }\n            this.clearCache();\n        }\n        if (clearStack) {\n            this.clearStack();\n        }\n    };\n    /** 清空 undo & redo 栈 */\n    Vditor.prototype.clearStack = function () {\n        this.vditor.undo.clearStack(this.vditor);\n        this.vditor.undo.addToUndoStack(this.vditor);\n    };\n    /** 销毁编辑器 */\n    Vditor.prototype.destroy = function () {\n        this.vditor.element.innerHTML = this.vditor.originalInnerHTML;\n        this.vditor.element.classList.remove(\"vditor\");\n        this.vditor.element.removeAttribute(\"style\");\n        document.getElementById(\"vditorIconScript\").remove();\n        this.clearCache();\n        UIUnbindListener();\n        this.vditor.wysiwyg.unbindListener();\n    };\n    /** 获取评论 ID */\n    Vditor.prototype.getCommentIds = function () {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return [];\n        }\n        return this.vditor.wysiwyg.getComments(this.vditor, true);\n    };\n    /** 高亮评论 */\n    Vditor.prototype.hlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var hlItem = function (item) {\n            item.classList.remove(\"vditor-comment--hover\");\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.add(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment\")\n            .forEach(function (item) {\n            hlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                hlItem(item);\n            });\n        }\n    };\n    /** 取消评论高亮 */\n    Vditor.prototype.unHlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var unHlItem = function (item) {\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.remove(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment\")\n            .forEach(function (item) {\n            unHlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                unHlItem(item);\n            });\n        }\n    };\n    /** 删除评论 */\n    Vditor.prototype.removeCommentIds = function (removeIds) {\n        var _this = this;\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var removeItem = function (item, removeId) {\n            var ids = item.getAttribute(\"data-cmtids\").split(\" \");\n            ids.find(function (id, index) {\n                if (id === removeId) {\n                    ids.splice(index, 1);\n                    return true;\n                }\n            });\n            if (ids.length === 0) {\n                item.outerHTML = item.innerHTML;\n                (0,selection/* getEditorRange */.zh)(_this.vditor).collapse(true);\n            }\n            else {\n                item.setAttribute(\"data-cmtids\", ids.join(\" \"));\n            }\n        };\n        removeIds.forEach(function (removeId) {\n            _this.vditor.wysiwyg.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                removeItem(item, removeId);\n            });\n            if (_this.vditor.preview.element.style.display !== \"none\") {\n                _this.vditor.preview.element\n                    .querySelectorAll(\".vditor-comment\")\n                    .forEach(function (item) {\n                    removeItem(item, removeId);\n                });\n            }\n        });\n        afterRenderEvent(this.vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n    };\n    Vditor.prototype.init = function (id, mergedOptions) {\n        var _this = this;\n        this.vditor = {\n            currentMode: mergedOptions.mode,\n            element: id,\n            hint: new Hint(mergedOptions.hint.extend),\n            lute: undefined,\n            options: mergedOptions,\n            originalInnerHTML: id.innerHTML,\n            outline: new Outline(window.VditorI18n.outline),\n            tip: new Tip(),\n        };\n        this.vditor.sv = new Editor(this.vditor);\n        this.vditor.undo = new undo_Undo();\n        this.vditor.wysiwyg = new WYSIWYG(this.vditor);\n        this.vditor.ir = new IR(this.vditor);\n        this.vditor.toolbar = new Toolbar(this.vditor);\n        if (mergedOptions.resize.enable) {\n            this.vditor.resize = new Resize(this.vditor);\n        }\n        if (this.vditor.toolbar.elements.devtools) {\n            this.vditor.devtools = new DevTools();\n        }\n        if (mergedOptions.upload.url || mergedOptions.upload.handler) {\n            this.vditor.upload = new Upload();\n        }\n        (0,addScript/* addScript */.G)(mergedOptions._lutePath ||\n            mergedOptions.cdn + \"/dist/js/lute/lute.min.js\", \"vditorLuteScript\").then(function () {\n            _this.vditor.lute = (0,setLute/* setLute */.X)({\n                autoSpace: _this.vditor.options.preview.markdown.autoSpace,\n                codeBlockPreview: _this.vditor.options.preview.markdown\n                    .codeBlockPreview,\n                emojiSite: _this.vditor.options.hint.emojiPath,\n                emojis: _this.vditor.options.hint.emoji,\n                fixTermTypo: _this.vditor.options.preview.markdown.fixTermTypo,\n                footnotes: _this.vditor.options.preview.markdown.footnotes,\n                headingAnchor: false,\n                inlineMathDigit: _this.vditor.options.preview.math.inlineDigit,\n                linkBase: _this.vditor.options.preview.markdown.linkBase,\n                linkPrefix: _this.vditor.options.preview.markdown.linkPrefix,\n                listStyle: _this.vditor.options.preview.markdown.listStyle,\n                mark: _this.vditor.options.preview.markdown.mark,\n                mathBlockPreview: _this.vditor.options.preview.markdown\n                    .mathBlockPreview,\n                paragraphBeginningSpace: _this.vditor.options.preview.markdown\n                    .paragraphBeginningSpace,\n                sanitize: _this.vditor.options.preview.markdown.sanitize,\n                toc: _this.vditor.options.preview.markdown.toc,\n            });\n            _this.vditor.preview = new Preview(_this.vditor);\n            initUI(_this.vditor);\n            if (mergedOptions.after) {\n                mergedOptions.after();\n            }\n            if (mergedOptions.icon) {\n                // 防止初始化 2 个编辑器时加载 2 次\n                (0,addScript/* addScriptSync */.J)(mergedOptions.cdn + \"/dist/js/icons/\" + mergedOptions.icon + \".js\", \"vditorIconScript\");\n            }\n        });\n    };\n    return Vditor;\n}(method[\"default\"]));\n/* harmony default export */ const src = (Vditor);\n\n})();\n\n__webpack_exports__ = __webpack_exports__[\"default\"];\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});"],"sourceRoot":""}